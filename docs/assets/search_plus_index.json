{"/jekyll/2023-10-28-method_level_function_unit_testing.html": {
    "title": "Testing | Method-Level Functional Unit Testing (Unfinished)",
    "keywords": "software software_qualitiy Jekyll",
    "url": "/jekyll/2023-10-28-method_level_function_unit_testing.html",
    "body": "Software testing course notes from CCU, lecturer Nai-Wei Lin. é€™ç« ç¯€ä¸»è¦é–‹å§‹ä»‹ç´¹å¾ Method ç‚ºå–®ä½çš„ Specificationï¼Œä¾†å°æ¯å€‹ Method é€²è¡Œç¨ç«‹çš„ Unit testing æœ¬ç« å…ˆä»‹ç´¹å¦‚ä½•ä½¿ç”¨çµ„åˆé‚è¼¯ä¾†å°‹æ‰¾é™åˆ¶å¼çš„çµ„åˆï¼Œä¸¦ä½¿ç”¨ Constraint Logic Programming ä¾†ç”¢ç”Ÿæ¸¬è©¦è³‡æ–™ï¼Œ æ¥è‘—ä»‹ç´¹ UML/OCL ç³»çµ±ï¼Œä½¿ç”¨ OCL ä¾†æè¿°ä¸€å€‹ Class/Methods çš„é™åˆ¶å¼ï¼Œä¸¦ä¸”é€é Constraint Logic Graph èˆ‡ Constraint Logic Programming ä¾†ç”¢ç”Ÿæ¸¬è©¦è³‡æ–™ã€‚ Combinational logic Decision tables Constraint logic programming UML/OCL Constraint logic graphs Constraint logic programming 4.1 Combinational Models Many applications must select output actions by evaluating combinationsof input conditions (constraints on input variables). Input variables can also be either parametersof the method, static variables of the class, or instance variables of the object. Combinational logic provides an effective language for these kinds of condition-action relationships. ä¾‹å¦‚ä¸€å€‹ Method æœ‰å¤šå€‹åƒæ•¸ï¼Œè€Œé€™äº›åƒæ•¸å¯èƒ½æœƒæœ‰ä¸åŒçš„çµ„åˆï¼Œé€™äº›çµ„åˆå¯èƒ½æœƒå°æ‡‰åˆ°ä¸åŒçš„è¼¸å‡ºï¼Œé€™æ™‚å€™æˆ‘å€‘å¯ä»¥ä½¿ç”¨ Combinational logic ä¾†æè¿°é€™äº›çµ„åˆï¼Œä¸¦ä¸”å°æ‡‰åˆ°ä¸åŒçš„è¼¸å‡º 4.1.1 Equivalence Class Partitioning Decision Tables A combinational model uses a decision tableto represent the condition-action relationships and partition equivalence classes. A decision table has a condition sectionand an action section. The condition section lists constraints on inputvariables. The action section lists outputto be produced when corresponding constraints are true. ä»¥ Decision table ä¾†æ±ºå®šæ¢ä»¶çš„çµ„åˆï¼Œä¸¦ä¸”å°æ‡‰åˆ°è¼¸å‡º Example: Class Triangle å‡å¦‚æœ‰ä¸€å€‹ Triangle Java class å¦‚ä¸‹ï¼ŒConstructor åªè¦æ»¿è¶³ {sa + sb &gt; sc, sa + sc &gt; sb, sb + sc &gt; sa} å°±è¦–ç‚ºåˆæ³•çš„ Tringleï¼Œå¦å‰‡æ‹‹å‡º Exceptionã€‚ // Java class Triangle :: Constructor classTriangle { inta; intb; intc; public Triangle(intsa, intsb, intsc); }; ä»¥é€™ä¸‰å€‹æ¢ä»¶é€²è¡Œ Combianational èƒ½ç²å¾—ä»¥ä¸‹çš„ Decision tableï¼Œå°‡é€™äº›é™åˆ¶å¼é€é CLP æ±‚è§£å°±èƒ½å¾—åˆ°å³åœ–çš„æ¸¬è©¦è³‡æ–™: Example: Method category The method category() returns the category of a Triangle object based on the lengths of its three sides: â€œEquilateralâ€, â€œIsoscelesâ€, or â€œScaleneâ€. A Triangle object is an â€œEquilateralâ€ triangle if it satisfies the following threeconstraints: {a = b, a = c, b = c}. A Triangle object is an â€œIsoscelesâ€ triangle if it satisfies one and only one of the following three constraints: {a = b, a = c, b = c}. Otherwise, It is a â€œScaleneâ€ triangle. é—œæ–¼ category æˆ‘å€‘ä¹Ÿå¯ä»¥é€é Decision table ä¾†ç”¢ç”Ÿæ¸¬è©¦è³‡æ–™ï¼Œä»¥ä¸‹æ˜¯ category çš„ Decision table // Java class Triangle :: category() public String category( ) { if (a == b &amp;&amp; b == c) return \"Equilateral\"; else if (a == b || a == c || b == c) return \"Isosceles\"; else return \"Scalene\"; } æ‹¿ä¸Šé¢çš„ç¨‹å¼ç¢¼ä¾†åšæ¯”å°ï¼Œå¯¦éš›ä¸Šé€™å€‹ Decision table å°±æ˜¯å»èµ°éæ‰€æœ‰åœ¨ Category ä¸­å¯èƒ½ç™¼ç”Ÿçš„è·¯å¾‘ã€‚ 4.2 Unified Modeling Language Unified Modeling Language(UML) æ˜¯ä¸€ç¨®ç”¨æ–¼å¯è¦–åŒ–ã€è¦ç¯„ã€å»ºæ§‹å’Œæ–‡ä»¶åŒ–è»Ÿé«”ç³»çµ±å·¥ç¨‹çš„åœ–å½¢åŒ–èªè¨€ UML æä¾›ä¸€ç¨®æ¨™æº–åŒ–çš„æ–¹å¼ä¾†ç·¨å¯«ç³»çµ±çš„è—åœ–ï¼ŒåŒ…æ‹¬æ¦‚å¿µæ€§çš„äº‹å‹™ï¼Œå¦‚æ¥­å‹™æµç¨‹å’Œç³»çµ±åŠŸèƒ½ï¼Œä»¥åŠå…·é«”çš„äº‹å‹™ï¼Œå¦‚ç¨‹å¼æè¿°ã€Database æ¶æ§‹å’Œå¯é‡ç”¨çš„è»Ÿé«”å…ƒä»¶ 4.2.1 UML Diagrams åœ¨ Software testing é€™é–€èª²ä¸­ä¸»è¦æœƒç”¨åˆ°çš„æ˜¯ Class diagramã€Sequence diagramã€State machine diagram UML 2 defines thirteenbasic diagram types, divided into two general sets: Structural Modeling Diagrams: Structure diagrams define the staticarchitecture of a model. They are used to model the â€˜thingsâ€™ that make up a model. Behavioral Modeling Diagrams: Behavior diagrams capture the varieties of dynamicinteraction and instantaneous state within a model as it executes over time. åœ¨ä¹‹å‰æˆ‘æœ‰æ›´è©³ç´°çš„é—œæ–¼ UML çš„ä»‹ç´¹ï¼Œè©³ç´°å¯è¦‹ Unified Modeling Language Concepts 4.2.2 Class Diagrams Class Diagram æè¿°äº†ä¸€å€‹ Class æœ‰å“ªäº› Attributes å’Œ Methodsï¼Œè€Œä¸æ˜¯è©³ç´°çš„å¯¦ä½œç´°ç¯€ Class Diagram åœ¨èªªæ˜ Class æˆ– Interface ä¹‹é–“çš„é—œä¿‚æ™‚æœ€ç‚ºæœ‰ç”¨ Association(é—œè¯)å’Œ Generalization(æ³›åŒ–)åˆ†åˆ¥è¡¨ç¤ºé€£æ¥å’Œç¹¼æ‰¿ é—œæ–¼é¡åœ–å¯ä»¥çœ‹ä¹‹å‰çš„ç­†è¨˜ï¼Œæœ‰æ›´è©³ç´°çš„æè¿° UML Structure Diagrams Introduction 1.1 Class diagram Association è¡¨ç¤ºå…©å€‹ Class ä¹‹é–“æœ‰æ‰€é—œè¯ï¼Œä¾‹å¦‚: Course å’Œ Student ä¹‹é–“æœ‰ä¸€å€‹é—œè¯ï¼Œé—œè¯å¯ä»¥æ˜¯å¤šå°å¤šçš„é—œä¿‚ Generalization è¡¨ç¤ºçš„æ˜¯å…©å€‹ Class ä¹‹é–“æœ‰ç¹¼æ‰¿é—œä¿‚ï¼Œä¾‹å¦‚: Animal å’Œ Dog ä¹‹é–“æœ‰ä¸€å€‹ç¹¼æ‰¿é—œä¿‚ 4.3 Basic Object Constraint Language é—œæ–¼ OCL çš„åŸºç¤èªæ³•å¯ä»¥åƒè€ƒä¹‹å‰çš„ç­†è¨˜ Object Constraint Language Conceptsï¼Œé€™è£¡å°±ä¸å†è´…è¿°ã€‚ 4.3.5 OCL to CLG Example é€™è£¡ä»‹ç´¹å¦‚ä½•å°‡ OCL æŠ½è±¡åŒ–æˆ CLGï¼Œä¹‹å¾Œå°±èƒ½é€é CLG çš„è·¯å¾‘ä¾†ç”¢ç”Ÿæ¸¬è©¦è³‡æ–™ Constructor Valid: Class invariant before invocation Pre-Conditions Post-Conditions Default Post-Conditions Invalid: Class invariant before invocation Negation of Pre-Conditions å› æ­¤ä¸€å€‹ Function çš„ Valid è¼¸å…¥å°‡æœƒæ˜¯ç¬¦åˆ Pre/Post-Conditions çš„ CLG è·¯å¾‘ï¼Œç¶“ç”± CLP ç”¢ç”Ÿçš„æ¸¬è©¦è³‡æ–™ï¼Œ åéä¾†èªªç•¶ä¸€å€‹ Function çš„ Pre-Conditions ä¸åˆæ³•æ™‚å°‡æœƒç”¢ç”Ÿ Invalid çš„æ¸¬è©¦è³‡æ–™ã€‚ Negation ä½¿ç”¨ De Morganâ€™s law ä¾†è½‰æ›è¦å‰‡å¾Œå¾—åˆ° Pre-Conditions çš„ Negationï¼Œé€™æ¨£å°±æœ‰å››æ¢ä¸åŒçš„è·¯å¾‘èˆ‡ä¸‹è¡¨ç›¸åŒ: Varients sa+sb&gt;sc sa+sc&gt;sb sb+sc&gt;sa (sa, sb, sc) 1 T T T (1, 1, 1) 2 T T F (2, 1, 1) 3 T F T (1, 2, 1) 4 F T T (1, 1, 2) é€™è£¡å»é™¤äº† Canâ€™t Happen çš„æ¢ä»¶ï¼Œåœ¨é€™å€‹ä¾‹å­ä¸­ Desicion table æ‡‰è©²æœƒæœ‰ 23 ç¨®å¯èƒ½ 4.3.5 OCL Examples with CLG ä»¥ä¹‹å‰çš„ Triangle ç‚ºä¾‹ä¾†æ’°å¯« OCL å°‡æœƒæœ‰: Class invariant(Triangle Objects): ä¸€å€‹ Triangle æ‡‰è©²æ°¸é æ»¿è¶³ä¸‰é‚Šé•·çš„æ¢ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨ Class invariant ä¾†é™åˆ¶æ‰€æœ‰ Triangle çš„ä¸‰é‚Šé•· Constructor: OCL è¡¨ç¤º Triangle é€™å€‹ Constructor çš„ Precondition å’Œ Postcondition Pre: ä¸€å€‹ Triangle constructor çš„è¼¸å…¥å¿…é ˆæ»¿è¶³ sa + sb &gt; sc and sa + sc &gt; sb and sb + sc &gt; sa Post: Triangle constructor åŸ·è¡Œå¾Œæ‡‰è©²æ»¿è¶³ a = sa and b = sb and c = sc Method category: Post: æª¢æŸ¥ Triangle çš„ä¸‰é‚Šé•·ï¼Œä¸¦ä¸”å›å‚³ Triangle çš„é¡å‹ context Triangle inv: a + b &gt; c and a + c &gt; b and b + c &gt; a context Triangle::Triangle(intsa, intsb, intsc) pre IllegealArgException: sa + sb &gt; sc and sa + sc &gt; sb and sb + sc &gt; sa post: a = sa and b = sb and c = sc context Triangle::category(): String post: result= if a@pre = b@pre then ifa@pre = c@pre then 'Equilateral' else 'Isosceles' endif else if a@pre = c@pre then 'Isosceles' else if b@pre = c@pre then'Isosceles' else 'Scalene' endif endif endif Constraint Logic Graph æˆ‘å€‘ä¾ç…§ä¸Šé¢çš„ Constructor å’Œ Category ä¾†å»ºç«‹ CLGï¼Œå¾—åˆ°ä»¥ä¸‹å…©å¼µåœ–ï¼Œå°±å¯ä»¥ä»¥æ­¤ä¾†ç”Ÿæˆæ¸¬è©¦è³‡æ–™ ä¾‹å¦‚æˆ‘å€‘æƒ³æ¸¬è©¦ categoryï¼Œèƒ½ç™¼ç¾åœ¨ CLG ä¸Šä¸€å…±æœ‰ 5 æ¢ä¸åŒçš„è·¯å¾‘ï¼Œæˆ‘å€‘æŠŠç¬¬ä¸€æ¢è·¯å¾‘çš„æ¢ä»¶æ”¾å…¥ CLP ä¸­æ±‚è§£ï¼Œå°±èƒ½å¾—åˆ°æ¸¬è©¦ç¬¬ä¸€æ¢è·¯å¾‘çš„æ¸¬è©¦è³‡æ–™ã€‚ Constraint, Pre a@+b@&gt;c@, a@+c@&gt;b@, b@+c@&gt;a@ Input Output a@=b@, a@=c@, result=â€™Equilateralâ€™ 1, 1, 1 Equilateral a@=b@, a@!=c@, result=â€™Isoscelesâ€™ 2, 2, 1 Isosceles a@!=b@, a@=c@, result=â€™Isoscelesâ€™ 2, 1, 2 Isosceles a@!=b@, a@!=c@, b@=c@, result=â€™Isoscelesâ€™ 1, 2, 2 Isosceles a@!=b@, a@!=c@, b@!=c@, result=â€™Scaleneâ€™ 2, 3, 4 Scalene Post a = a@, b = b@, c = c@ Â  Â  ä¾ç…§é€™å€‹ Table å»è·‘é™åˆ¶å¼é€™æ¨£å°±èƒ½å¤ ç”¢ç”Ÿäº”æ¢å…¨éƒ¨è·¯å¾‘çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œä¾‹å¦‚ç¬¬ä¸€æ¢è·¯å¾‘çš„ CLP å¦‚ä¸‹: Last Edit 10-29-2023 15:56"
  },"/jekylls/2023-10-26-syntax_analysis.html": {
    "title": "Compiler | Syntax Analysis Notes (Unfinished)",
    "keywords": "Compiler Jekylls",
    "url": "/jekylls/2023-10-26-syntax_analysis.html",
    "body": "Compilers course notes from CCU, lecturer Nai-Wei Lin. Syntax Analysis(èªæ³•åˆ†æ) åœ¨é€™å€‹éšæ®µæœƒæª¢æŸ¥ Lexical Analysis è¿”å›çš„ Token æ˜¯å¦ç¬¦åˆèªæ³•è¦å‰‡ï¼Œä¸¦ä¸”å»ºç«‹èªæ³•æ¨¹ ä»¥ä¸‹æ˜¯é€™å€‹ç« ç¯€çš„ä¸»è¦å¤§ç¶±ï¼ŒBison ä¸æœƒåœ¨é€™ç¯‡ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ï¼Œä¸»è¦æ˜¯ä»‹ç´¹ Syntax analysis çš„æ¦‚å¿µ Introduction to parsers Context-free grammars Push-down automata Top-down parsing Buttom-up parsing Bison a parser generator 4.1 Introduction to parsers æœ¬ç« æœƒå…ˆä»‹ç´¹ Parser åœ¨ Compiler ä¸­çš„ä½œç”¨ï¼Œç„¶å¾Œä»‹ç´¹ Context free grammarã€‚ 4.1.1 The Role of the Parser åœ¨ç·¨è­¯å™¨æ¨¡å‹ä¸­ Systax analysis å¾ Lexical analysis ç²å–ç”± Token æ‰€çµ„æˆçš„å­—ä¸²ï¼Œæ¦‚å¿µä¸Šèªæ³•åˆ†æéœ€è¦å»ºæ§‹ä¸€å€‹ Parse tree å‚³éçµ¦ Compiler çš„å…¶é¤˜éƒ¨åˆ†é€²è¡Œé€²ä¸€æ­¥è™•ç†ï¼Œ ä½†å¯¦éš›ä¸Šä¸ä¸€å®šè¦çœŸçš„ç”¨ä¸€å€‹ Data structure ä¾†å»ºæ§‹ Parse treeï¼Œè€Œæ˜¯åœ¨ Parsing çš„éç¨‹ä¸­é€²è¡Œ Semantic analysisï¼Œä¸¦å°‡è³‡è¨Šå‚³éçµ¦ Compiler çš„å…¶é¤˜éƒ¨åˆ†ã€‚ ä¸çœŸæ­£å»ºæ§‹ä¸€å€‹ Parse tree é€šå¸¸æ˜¯ç‚ºäº†ç¯€çœè¨˜æ†¶é«”ï¼Œä½†ç¼ºé»å°±æ˜¯ä»–ä½¿ Debug è®Šå¾—å›°é›£ï¼Œå› ç‚ºç„¡æ³•æŸ¥çœ‹ Parse tree 4.2 Context-free grammars Context-free grammars å¯ä»¥ç³»çµ±çš„æè¿°ç¨‹å¼èªè¨€æ§‹é€ ï¼Œä¾‹å¦‚ä½¿ç”¨ stmt æè¿° statementsï¼Œexpr æè¿° expressionsï¼Œé‚£éº¼: production: stmt -&gt; if (expr) stmt else stmt æˆ‘å€‘å°±èƒ½é€éå…¶ä»– production ä¾†æè¿° stmt, expr æœƒæ˜¯ä»€éº¼ï¼Œé‚„å¯ä»¥æ˜¯ä»€éº¼? 4.2.1 The Formal Definition of a Context-free Grammar A set of terminals: basic symbols from which sentences are formed ä¾‹å¦‚: if, else, (, ), id A set of nonterminals: syntactic categories denoting sets of sentences ä»»ä½•é terminal éƒ½å¯ä»¥æ˜¯ä¸€å€‹ nonterminalï¼Œä¾‹å¦‚: stmt, expr A set of productions: rules specifying how the terminals and nonterminals can be combined to form sentences ä¾‹å¦‚: stmt -&gt; if (expr) stmt else stmt The start symbol: a distinguished nonterminal denoting the language é€šå¸¸æ˜¯æœ€ä¸Šå±¤çš„ Production Example: Terminals: id + - * / ( ) Nonterminals: expr op Productions: expr -&gt; expr op expr expr -&gt; '(' expr ')' expr -&gt; '-' expr expr -&gt; id op -&gt; '+' | '-' | '*' | '/' The start symbol: expr 4.2.2 Notation Conventions é€šå¸¸ç‚ºäº†é¿å…é™³è¿° these are the terminals, these are thenonterminals æœƒä½¿ç”¨ä¸€äº›ç´„å®šä¾†è¦ç¯„ç¬¦è™Ÿ: Terminals: å°å¯«å­—æ¯ï¼Œä¾‹å¦‚: a b c é‹ç®—ç¬¦è™Ÿï¼Œæ¨™é»ç¬¦è™Ÿï¼Œä¾‹å¦‚: + - , ( ) æ•¸å­—ï¼Œä¾‹å¦‚: 0 1 2 ç²—é«”å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚: if else then å°å¯«å¸Œè‡˜å­—æ¯ï¼Œä¾‹å¦‚: Î± Î² Î³ Non-Terminals: å¤§å¯«å­—æ¯ï¼Œä¾‹å¦‚: A B C åœ¨è¨è«–æ§‹é€ æ™‚ï¼Œä¾‹å¦‚ expressionã€termsã€factorsï¼Œä½¿ç”¨: E T F é€šå¸¸ä½¿ç”¨ S ä¾†è¡¨ç¤º Start symbol æ–œé«”å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚: expr stmt å…·æœ‰ç›¸åŒæ¨™é¡Œçš„ Production å¯ä»¥ä½¿ç”¨ | ä¾†åˆ†éš”ï¼Œä¾‹å¦‚: A -&gt; aã€A -&gt; bã€A -&gt; c å¯ä»¥å¯«æˆ A -&gt; a | b | c é™¤éç‰¹æ®Šèªªæ˜ï¼Œç¬¬ä¸€å€‹ Production æœƒæ˜¯ Start symbol 4.2.3 Parse Trees and Derivations æ¨å°(derivation) æ­¥é©Ÿæ˜¯å°‡ä¸€å€‹ Production çš„æ›¿æ›éç¨‹å¯«å‡ºï¼Œä¾‹å¦‚ E =&gt; - E ä¸€ç³»åˆ—çš„æ¨å°æ­¥é©Ÿå¯ä»¥å°‡ E =&gt; -E =&gt; -(E) =&gt; -(id) å¦‚æœä½¿ç”¨ =&gt;* è¡¨ç¤ºåœ¨é›¶æ­¥æˆ–å¤šæ­¥ä¸­æ¨å°ï¼Œ=&gt;+ è¡¨ç¤ºåœ¨ä¸€æ­¥æˆ–å¤šæ­¥ä¸­æ¨å° ä¾‹å¦‚ä¸Šé¢çš„æ­¥é©Ÿå¯ä»¥ç°¡åŒ–ç‚º E =&gt;* -(id) Context free grammar Context free grammar(CFG) å®šç¾©çš„èªè¨€ L(G)ï¼Œæ˜¯ç”± CFG G æ‰€å®šç¾©çš„èªè¨€ ä¸€å€‹ Terminal å­—ä¸² Ï‰ åœ¨ L(G) ä¸­ï¼Œä¸¦ä¸”ç•¶ S =&gt;+ Ï‰ï¼Œé‚£æˆ‘å€‘ç¨± Ï‰ æ˜¯ G çš„ä¸€å€‹å¥å­(sentence) å¦‚æœ S =&gt;* Î±ï¼Œè€Œ Î± å¯ä»¥åŒ…å« Non-terminalï¼Œé‚£éº¼ Î± æ˜¯ G çš„ä¸€å€‹å¥å‹(sentence form) å¦‚æœ L(G1) = L(G2)ï¼Œé‚£éº¼ G1 å’Œ G2 æ˜¯ç­‰åƒ¹çš„(equivalent) Left &amp; Right-most Derivations æ¯å€‹ Derivation step éƒ½éœ€è¦å…©å€‹æ­¥é©Ÿ: é¸æ“‡æ›¿æ›å“ªå€‹ Terminal æ›¿æ›å¾Œé¸æ“‡ä¸€å€‹ä»¥æ­¤ Terninal ä½œç‚ºé–‹é ­çš„ Production é€™æ¨£å°±å¯ä»¥æœ‰ Left &amp; Right å…©ç¨®æ¨å°æ–¹å¼: Left-most derivation: æ¯æ¬¡éƒ½é¸æ“‡æœ€å·¦é‚Šçš„ Terminal ä¾†æ›¿æ› ä¾‹å¦‚ E =&gt;lm -E =&gt;lm -(E) =&gt;lm -(E+E) =&gt;lm -(id+E) =&gt;lm -(id+id) Right-most derivation: æ¯æ¬¡éƒ½é¸æ“‡æœ€å³é‚Šçš„ Terminal ä¾†æ›¿æ› ä¾‹å¦‚ E =&gt;rm -E =&gt;rm -(E) =&gt;lm -(E+E) =&gt;lm -(E+id) =&gt;lm -(id+id) Exercise 4.2.1: Consider the following grammar: S -&gt; SS+ | SS* | a and the string aa+a* (a), Giver a leftmost derivation for the string. (b), Giver a rightmost derivation for the string. (a) S =&gt;lm SS* =&gt; SS+S* =&gt; aS+S* =&gt; aa+S* =&gt; aa+a* (b) S =&gt;rm SS* =&gt; Sa* =&gt; SS+a* =&gt; Sa+a* =&gt; aa+a* 4.2.4 Parse Trees and Derivations Parse Tree æ˜¯æ¨å°çš„åœ–å½¢è¡¨ç¤ºï¼Œé¡¯ç¤ºäº†å¾ Start symbol åˆ°è¡ç”Ÿ Sentence çš„éç¨‹ï¼Œé€™ç¨®æ–¹å¼éæ¿¾äº†é¸æ“‡ Terminal é€²è¡Œé‡å¯«çš„é †åº å› æ­¤ä¸ç®¡æ˜¯ Left/Right-most éƒ½æ‡‰è©²æ¨å°å‡ºç›¸åŒçš„ Parse tree 4.2.5 Ambiguous Grammar å¦‚æœä¸€å€‹ Grammar å¯ä»¥å°åŒä¸€å€‹ Sentence ç”¢ç”Ÿä¸åŒçš„ Parse tree é‚£å°±æ˜¯ Ambiguous Resolving Ambiguity å¤§éƒ¨åˆ†çš„ Syntax analysis éƒ½å¸Œæœ› Grammar ä¸æ˜¯ Ambiguousï¼Œå¯ä»¥é€éä»¥ä¸‹ä¾†æ¶ˆé™¤ Use disambiguiting rules to throw away undesirable parse trees Rewrite grammarsby incorporating disambiguiting rules into grammars Example The dangling-else grammar stmt -&gt; if expr then stmt | if expr then stmt else stmt | other å¦‚æœç”¨ä»¥ä¸Šçš„ Grammar ä¾†åˆ†æ: if E1 then if E2 then S1 else S2 æˆ‘å€‘ç„¡æ³•ç¢ºå®š else æ˜¯å°æ‡‰å“ªå€‹ thenï¼Œå› æ­¤æœƒç”¢ç”Ÿå…©å€‹ Parse tree é€™æ¨£å°±ç”¢ç”Ÿäº†å…©å€‹ Parse treeï¼Œå› ç‚ºåœ¨èªæ³•è¦å‰‡ä¸­æ²’æœ‰èªªæ˜æ¸…æ¥š else è¦å°æ‡‰å“ªå€‹ ifï¼Œæ‰€ä»¥å¯ä»¥é€éä»¥ä¸‹æ–¹å¼ä¾†æ¶ˆé™¤ Disambiguiting rules: Rule: match each else with the closest previous unmatched then Remove undesired state transitions in the pushdown automaton stmt -&gt; m_stmt | unm_stmt m_stmt -&gt; if expr then m_stmt else m_stmt | other unm_stmt -&gt; if expr then stmt | if expr then m_stmt else unm_stmt é€éé€™ç¨®æ–¹å¼ï¼Œæˆ‘å€‘å¼·åˆ¶ä¸€å€‹ then å’Œ else ä¹‹é–“åªèƒ½æ˜¯ä¸€å€‹ m_stmtï¼Œé€™æ¨£å°±å¯ä»¥æ¶ˆé™¤ Ambiguous 4.3 Writing a Grammar 4.3.1 Lexical Versus Syntactic Analysis ç”± RE æè¿°çš„æ¯ç¨®èªè¨€ä¹Ÿå¯ä»¥ç”± CFG æè¿°ï¼Œä¾‹å¦‚ (a|b)*abb ä¹Ÿå¯ä»¥ç”¨ CFG ä¾†æè¿°: A0 -&gt; aA0 | bA0 | aA1 A1 -&gt; bA2 A2 -&gt; bA3 A3 -&gt; Îµ é‚£ç‚ºä»€éº¼ä¸åœ¨ Lexical analysis ä½¿ç”¨ CFG? é¦–å…ˆ Lexical analysis ä¸éœ€è¦èˆ‡ CFG ä¸€æ¨£å¼·å¤§çš„è¡¨ç¤ºæ³• RE æ¯” CFG æ›´ç°¡æ½”æ›´å®¹æ˜“ç†è§£ RE å»ºæ§‹çš„ Lexical analysis æ¯” CFG å»ºæ§‹çš„ Lexical analysis æ›´æœ‰æ•ˆç‡ é€™æ¨£æä¾›äº†å°‡å‰ç«¯æ¨¡å¡ŠåŒ–ç‚ºå…©å€‹æ˜“æ–¼ç®¡ç†çš„éƒ¨åˆ†çš„æ–¹æ³• Nonregular Constructs REs can denote only a fixed number of repetitions or an unspecified number of repetitions of onegiven construct: an, a* A nonregular construct: L = {anbn| n â‰¥ 0} é€™å€‹èªè¨€åŒ…å«ç›¸åŒæ•¸é‡çš„ a å’Œ bï¼ŒRE æ²’è¾¦æ³•æè¿°å›ºå®šæ•¸é‡çš„ a å’Œ b Non-Context-Free Constructs CFGs can denote only a fixed number of repetitions or an unspecified number of repetitions of oneor twogiven constructs Some non-context-free constructs: L1 = {wcw | w is in (a|b)*} L2 = {anbmcndm | n â‰¥ 1 and m â‰¥ 1} L3 = {anbncn | n â‰¥ 0} CFG åªèƒ½è™•ç†ä¸€å€‹é‡è¤‡çš„çµæ§‹ï¼Œé€™ä¹Ÿæ¶‰åŠåˆ° CFG çš„ Automataï¼Œä½†æ˜¯å¯ä»¥æè¿°ä»¥ä¸‹èªè¨€: L1 = {ncn | n â‰¥ 0} L2 = {anbmcmdn | n â‰¥ 0, m â‰¥ 0} 4.4 Top-down Parsing é€™è£¡ä¸æœƒè©³ç´°ä»‹ç´¹ Top-down Parsingï¼Œå› ç‚º Top-down è¦è™•ç†çš„å•é¡Œæ¯”è¼ƒå¤š Top-down Parsing æ˜¯å¾ä¸Šå±¤çš„ Root é–‹å§‹ï¼Œä½¿ç”¨ Leftmost derivation å»ºæ§‹ä¸€é¡†åˆ° Leaf çš„ Parse tree Predictive Parsing A top-down parsing without backtracking â€“ there is only one alternative production to choose at each derivation step stmt -&gt; if expr then stmt else stmt | while expr do stmt | begin stmt_list end 4.4.2 FIRST and FOLLOW Sets First set The first setof a string Î± is the set of terminals that begin the strings derived from Î±. If Î± =&gt;* Îµ, then Îµ is also in the first set of Îµ. å¦‚æœ X æ˜¯ä¸€å€‹ Terminalï¼Œé‚£éº¼ FIRST(X) = {X} å¦‚æœ X æ˜¯ä¸€å€‹ Nonterminalï¼Œä¸¦ä¸”å­˜åœ¨ X -&gt; Îµï¼Œé‚£éº¼ FIRST(X) = {Îµ} å¦‚æœ X æ˜¯ä¸€å€‹ Nonterminalï¼Œä¸¦ä¸”å­˜åœ¨ X -&gt; Y1 Y2 â€¦ Yn é¦–å…ˆåŠ å…¥ FIRST(Yi) å¦‚æœ Yi å­˜åœ¨ Îµï¼Œé‚£å°±åŠ å…¥ FIRST(Yi) - {Îµ} ç„¶å¾Œ i + 1 é‡è¤‡ä»¥ä¸Šæ­¥é©Ÿç›´åˆ° Yi ä¸å­˜åœ¨ Îµ ç°¡å–®ä¾†èªª FIRST å°±æ˜¯æ‰¾å‡ºä¸€å€‹ Nonterminal æ‰€æœ‰å¯èƒ½çš„é–‹é ­ Terminal Example: E -&gt; TE' E' -&gt; +TE' | Îµ T -&gt; FT' T' -&gt; *FT' | Îµ F -&gt; (E) | id FIRST(E) = { ( , id } FIRST(Eâ€™) = { +, Îµ } FIRST(T) = { ( , id } FIRST(Tâ€™) = { *, Îµ } FIRST(F) = { ( , id } Follow set The follow setof a nonterminal A is the set of terminals that can appear immediately to the right of Ain some sentential form, namely, S =&gt;* Î±AaÎ², a is in the follow set of A. å¦‚æœå° Start symbol å°‹æ‰¾ FOLLOW(S) è¦å…ˆåŠ å…¥ { $ } å¦‚æœå­˜åœ¨ Production A -&gt; Î±B FOLLOW(B) åŒ…å« FOLLOW(A) å¦‚æœå­˜åœ¨ Production A -&gt; Î±BÎ² FOLLOW(B) åŒ…å« FIRST(Î²) - {Îµ} å¦‚æœå­˜åœ¨ Production A -&gt; Î±BÎ²ï¼Œä¸¦ä¸” FIRST(Î²) åŒ…å« Îµ FOLLOW(B) åŒ…å« { FIRST(Î²) - {Îµ} } U FOLLOW(A) ç°¡å–®ä¾†èªª FOLLOW å°±æ˜¯æ‰¾å‡ºä¸€å€‹ Nonterminal æ‰€æœ‰å¯èƒ½çš„çµå°¾ Terminal Example, Using previous grammar: FOLLOW(E) = { $ } U FIRST( ')' ) = { $, ) } FOLLOW(E') = FOLLOW(E) = { $, ) } FOLLOW(T) = { FIRST(E') â€“ Îµ } U FOLLOW(E') U FOLLOW(E) = { +, $, ) } FOLLOW(T') = FOLLOW(T) = { +, $ , ) } FOLLOW(F) = { FIRST(T') â€“ Îµ } U FOLLOW(T') U FOLLOW(T) = { *, +, $, ) } 4.5 Bottom-up Parsing Bottom Up Parsing æ˜¯å¾åº•å±¤çš„ Leaf é–‹å§‹ï¼Œä½¿ç”¨ Rightmost derivation å»ºæ§‹ä¸€é¡†åˆ° Root çš„ Parse tree Handles A handle Î² of a right-sentential form Î³ consists of a production A -&gt; Î² a position of Î³ where Î² can be replaced by A to produce the previous right-sentential form in a rightmost derivation of Î³ éæ­£å¼çš„è¬› handle å°±æ˜¯å’ŒæŸå€‹ Production èƒ½åŒ¹é…çš„ Substringï¼Œå°ä»–åŒ–ç°¡å°±ä»£è¡¨åå‘çš„ Rightmost derivation The string Ï‰ to the right of the handle contains only terminals Ais the bottommost leftmostinterior node with all its children in the tree å¦‚æœæœ‰ S =&gt;* Î±AÏ‰ =&gt; aÎ²Ï‰ï¼Œé‚£éº¼ç·Šè·Ÿåœ¨ a ä¹‹å¾Œçš„ Production A -&gt; Î² å°±æ˜¯ aÎ²Ï‰ çš„ä¸€å€‹ Handleï¼Œè¦æ³¨æ„ Ï‰ ä¸€å®šåªåŒ…å« Terminalsï¼Œ å¦‚æœ grammmr æ˜¯ Non-amibiguousï¼Œé‚£éº¼ aÎ²Ï‰ åªæœƒæœ‰ä¸€å€‹ rightmost derivationï¼Œå¦å‰‡å¯èƒ½æœƒæœ‰å¤šå€‹ã€‚ Handle pruning: å°±æ˜¯ä¸€å€‹ Parse tree è­˜åˆ¥ Handles ä¸¦å°‡ä»–å€‘æ›¿æ›ç‚º Nonterminalï¼Œåˆ°æœ€å¾Œçš„éç¨‹ 4.5.3 Shift-Reduce Parsing å› æ­¤ Bottom-Up Parsing åˆç¨±ç‚º Shift-Reduce Parsingï¼Œå› ç‚ºä»–å€‘çš„éç¨‹å°±æ˜¯ä¸æ–·çš„ Shift å’Œ Reduce Shift: shift the next input symbolonto the top of the stack Reduce: replace the handle at the top of the stack with the corresponding nonterminal Accept: announce successful completion of the parsing Error: call an error recovery routine ä¾‹å¦‚ä¹‹å‰çš„ä¾‹å­ï¼Œå…¶å¯¦å°±æ˜¯ä¸€å€‹ä¸æ–· Shift å’Œ Reduce çš„éç¨‹: 4.6 LR(k) Parsing ç›®å‰æµè¡Œçš„ Bottom-UP Parsing éƒ½åŸºæ–¼ LR(k) Parsers çš„æ¦‚å¿µï¼Œå¹¾ä¹å¯ä»¥æ”¯æ´æ‰€æœ‰ CFGï¼Œä½†æ˜¯å»ºç«‹ Parser å¾ˆéº»ç…©ï¼Œå› æ­¤é€šå¸¸æœƒä½¿ç”¨ Parser generator ä¾†å»ºç«‹ Parser LR(k) Parsing: L ä»£è¡¨å¾å·¦å¾€å³æƒæè¼¸å…¥ R ä»£è¡¨ä»¥ rightmost derivation é€²è¡Œæ¨å° k ä»£è¡¨ä½œå‡ºèªæ³•åˆ†ææ±ºç­–æ™‚çš„ Lookahead è¼¸å…¥å­—å…ƒæ•¸ é€™è£¡æœƒä»‹ç´¹ä¸‰ç¨® LR Parsing: SLR(1) Parsing LR(1) Parsing LALR(1) Parsing å¾ç‹€æ…‹æ•¸é‡ä¾†èªª SLR &gt; LALR &gt; LRï¼Œä½†æ˜¯èƒ½è™•ç†çš„ Grammar ä¾†èªª LR &gt; LALR &gt; SLR 4.6.2 Items and the LR(0) Automaton An LR(0) itemof a grammar in G is a production of G with a dotat some position of the right-hand side, A -&gt; Î±â‹…Î² An LR(0) item represents a statein an NPDA indicating how much of a production we have seen at a given point in the parsing process NPDA means Non-deterministic Pushdown Automaton DPDA means Deterministic Pushdown Automaton å¦‚æœæœ‰ä¸€å€‹ Production A -&gt; XYZï¼Œé‚£ä»–å°‡æœƒæœ‰å››å€‹ LR(0) item: A -&gt; â‹…XYZ, A -&gt; Xâ‹…YZ, A -&gt; XYâ‹…Z, A -&gt; XYZâ‹… é€™å€‹é»ä»£è¡¨ Parse çš„é€²åº¦ï¼Œè—‰ç”±é€™äº› item æˆ‘å€‘å¯ä»¥å»ºç«‹ä¸€å€‹ NPDAï¼Œå†é€éæ¼”ç®—æ³•ä¾†è½‰æ›æˆ DPDAï¼Œé€™å€‹ DPDA å°±æ˜¯ LR(0) Automaton ä¸Šåœ–å·¦ç‚º NPDAï¼Œå³ç‚º DPDAï¼Œé€éä»¥ä¸‹æ¼”ç®—æ³•å°‡ NPDA è½‰æ›æˆ DPDA: functionitems(G'); begin C:= {closure({S' -&gt; â€¢S})} repeat for each set of items I in C and each symbol X do J := goto(I, X) if J is not empty and not in C then C= C âˆª {J} until no more sets of items can be added to C return C end ç‚ºäº†å»ºæ§‹ä»¥ä¸Šæ¼”ç®—æ³•æˆ‘å€‘éœ€è¦ä»¥ä¸‹å‡½æ•¸èˆ‡ Augmented grammar(åŠ å¼·èªæ³•): Augmented grammar: åŠ å…¥æ–°çš„èµ·å§‹ç¬¦è™Ÿ Sâ€™ï¼Œä¸¦ä¸”åŠ å…¥ Production Sâ€™ -&gt; S closure(I) adds more items to Iwhen there is a dot to the left of a nonterminal (corresponding to Îµ edges) goto(I, X) moves the dot past the symbol Xin all items in Ithat contain X (corresponding to non-Îµ edges) function closure(I); begin J := I; repeat for each item A -&gt; Î±â€¢BÎ² in J and each production B -&gt; Î³ in G such that B -&gt; â€¢Î³ is not in J do J = J âˆª {B -&gt; â€¢Î³} until no more items can be added to J; return J end function goto(I, X); begin set J to the empty set for any item A -&gt; Î±â€¢XÎ² in I do add the item A -&gt; Î±Xâ€¢Î² to J return closure(J) end 4.6.4 SLR Parsing ä»¥ä¸‹æ˜¯ SLR çš„æ¼”ç®—æ³• procedure SLR(G'); begin for each state Iin items(G') do begin if A -&gt; Î±â€¢aÎ² is in I and goto(I, a) = J for a terminal a then action[I, a] = \"shift J\" if A -&gt; Î±â€¢ in I and A != S' then action[I, a] = \"reduce A -&gt; Î±\" for all a in FOLLOW(A) if S' -&gt; Sâ€¢ in I then action[I, $] = \"accept\" if A -&gt; Î±â€¢ XÎ² in I and goto(I, X) = J for a nonterminal X then goto[I, X] = J end all other entries in actionand gotoare made error end ä»¥ä¹‹å‰çš„ Grammar ç‚ºä¾‹ï¼Œå°‡å…¶è®Šç‚º Augmented grammar: 1. E' -&gt; E 2. E -&gt; E + T 3. E -&gt; T 4. T -&gt; T * F 5. T -&gt; F 6. F -&gt; (E) 7. F -&gt; id é€éæ¼”ç®—æ³•ä¾†æ‰¾å‡ºæ‰€æœ‰çš„ Item: ä¹‹å¾Œå°‡æ‰¾åˆ°çš„ Item å¡«å…¥è¡¨ä¸­: sn: ä»£è¡¨ shift æ“ä½œï¼Œèˆ‡å‰å¾€ State n rn: ä»£è¡¨ reduce æ“ä½œï¼Œä¸¦ä¸”ä½¿ç”¨ç·¨è™Ÿ n çš„ Production å¡«è¡¨æ™‚æ³¨æ„ In ä¸­æ˜¯å¦æœ‰ dot èµ°åˆ°æœ€å¾Œï¼Œå¦‚æœæœ‰å°±çœ‹æ˜¯å“ªä¸€å€‹ Productionï¼Œä¸¦å¡«å…¥ rn å¦‚æœ Production æ˜¯ Sâ€™ -&gt; Sï¼Œé‚£éº¼å°±å¡«å…¥ accept è¦åœ¨ä»€éº¼æ¬„ä½å¡«å…¥ rnï¼Œå°±çœ‹ FOLLOW(A) ä¸­æœ‰å“ªäº› Terminalï¼Œå°±å¡«å…¥å“ªäº› Terminal é€™è£¡æˆ‘å€‘ç”¨ä¸€å€‹æ¸¬è©¦è¼¸å…¥ id + id ä¾†é©—è­‰é€™å€‹è¡¨çš„æ­£ç¢ºæ€§ï¼Œæ³¨æ„åšå®Œ reduce å¾Œç‹€æ…‹æ˜¯çœ‹å‰ä¸€å€‹ Stack ä¸­çš„ç‹€æ…‹ï¼Œ å†æ ¹æ“š Production å·¦é‚Šçš„ Nonterminal ä¾†é€²è¡Œ Gotoï¼Œæ‰€ä»¥åœ¨ Step 7, 8, 9 æ˜¯çœ‹ State 6 çš„ gotoã€‚ åœ¨åŒä¸€æ¬„é‡åˆ°å¤šå€‹ reduce é‚£å°±éœ€è¦é€²è¡Œå˜—è©¦ï¼Œç›´åˆ°å‡ºç¾ Error æˆ–æ˜¯ Accept 4.7 More Powerful LR Parsers SLR(1) ä¸¦æ²’æœ‰è¾¦æ³•è™•ç†æ‰€æœ‰ Grammarï¼Œè€Œ LR(1) é›–ç„¶èƒ½è™•ç†æ›´å¤š Grammar ä½†ä»–çš„ç‹€æ…‹æ•¸é‡å»æ¯” SLR(1) é‚„è¦å¤šï¼Œå› æ­¤ LALR(1) å°±æ˜¯ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œè€Œç”Ÿçš„ï¼Œ LALR(1) æ˜¯å¾å»ºç«‹å¥½çš„ SLR(1) Automaton ä¸­æ‰¾å‡ºç›¸åŒçš„ç‹€æ…‹ä¸¦ä¸”åˆä½µï¼Œé€éé€™æ¨£ä¾†æ¸›å°‘ç‹€æ…‹æ•¸é‡ã€‚ 4.7.1 LR(1) Parsing Table LR(1) Items An LR(1) item of a grammar in G is a pair, (A -&gt; Î±â€¢Î², a), of an LR(0) item A -&gt; Î±â€¢Î² and a lookahead symbol a The lookahead has no effect in an LR(1) item of the form (A -&gt; Î±â€¢Î², a), where Î² is not Îµ An LR(1) item of the form (A -&gt; Î±â€¢, a) calls for reduction by A -&gt; Î± only if the next input symbol is a æˆ‘å€‘å…ˆä¾†çœ‹ LR(1) çš„æ¼”ç®—æ³•: closure(I) è·Ÿ SLR(1) ä¸åŒçš„æ˜¯ï¼Œå°æ–¼æ¯å€‹ B -&gt; Î³ï¼Œè¦æ‰¾å‡ºæ‰€æœ‰å¯èƒ½çš„ bï¼Œb = FIRST(Î²a)ï¼Œç„¶å¾Œå°‡ (B -&gt; â€¢Î³, b) åŠ å…¥ J ä¸­ã€‚ FIRST(Î²a) å…¶å¯¦å°±ç­‰æ–¼å…ˆçœ‹ä¸‹ä¸€å€‹ Nonterminal çš„ FIRSTã€‚ function closure(I); begin J := I; repeat foreach item (A -&gt; Î±â€¢BÎ², a) in J and each production B -&gt; Î³ of G that each b in FIRST(Î²a) such that (B -&gt; â€¢Î³, b) is not in J do J := J âˆª {(B -&gt; â€¢Î³, b)} until no more items can be added to J; return J end goto(I, X) å…¶å¯¦è·Ÿ SLR(1) ä¸€æ¨£ï¼Œåªæ˜¯ item å¤šäº† lookahead(a) function goto(I, X); begin set J to the empty set for any item (A -&gt; Î±â€¢XÎ², a) in I do add the item (A -&gt; Î±Xâ€¢Î², a) to J return closure(J) end ä¸‹é¢é€™æ˜¯å®Œæ•´çš„ LR(1) æ¼”ç®—æ³•: function items(G'); begin C := {closure({[S' -&gt; â€¢S, $]})} repeat for each set of items I in C and each symbol X do J := goto(I, X) if J is not empty and not in C then C := C âˆª {J} until no more sets of items can be added to C return C end Example: 1. S' -&gt; S 2. S -&gt; CC 3. C -&gt; cC 4. C -&gt; d é¦–å…ˆçœ‹ closure({(Sâ€™ -&gt; â€¢S, $)}): é¦–å…ˆè¨ˆç®— (Sâ€™ -&gt; â€¢S, $) ä»¥ (A -&gt; Î±â€¢XÎ², a) ä¾†çœ‹æœƒç­‰æ–¼ A = Sâ€™, Î± = Îµ, B = S, Î² = Îµ, a = $ åŠ å…¥ B -&gt; â€¢Î³ï¼Œä¹Ÿå°±æ˜¯ S -&gt; â€¢CC è¨ˆç®— b = FIRST(Î²a) = FIRST(Îµ$) = { $ } åŠ å…¥ (S -&gt; â€¢CC, $) è¨ˆç®— (S -&gt; â€¢CC, $) ä»¥ (A -&gt; Î±â€¢XÎ², a) ä¾†çœ‹æœƒç­‰æ–¼ A = S, Î± = Îµ, B = C, Î² = C, a = $ åŠ å…¥ B -&gt; â€¢Î³ï¼Œä¹Ÿå°±æ˜¯ C -&gt; â€¢cC, C -&gt; â€¢d è¨ˆç®— b = FIRST(Î²a) = FIRST(C$) = { c, d } åŠ å…¥ (C -&gt; â€¢cC, c), (C -&gt; â€¢cC, d), (C -&gt; â€¢d, c), (C -&gt; â€¢d, d) ç°¡åŒ–ç‚º (C -&gt; â€¢cC, c/d), (C -&gt; â€¢d, c/d) å·²ç¶“æ²’æœ‰ Item å¯ä»¥åŠ å…¥ï¼Œæ‰€ä»¥è¿”å› I0 goto(I0, S): (Sâ€™ -&gt; Sâ€¢, $) goto(I0, C): (S -&gt; Câ€¢C, $) ä»¥ (A -&gt; Î±â€¢XÎ², a) ä¾†çœ‹æœƒç­‰æ–¼ A = S, Î± = C, B = C, Î² = Îµ, a = $ åŠ å…¥ B -&gt; â€¢Î³ï¼Œä¹Ÿå°±æ˜¯ C -&gt; â€¢cC, C -&gt; â€¢d è¨ˆç®— b = FIRST(Î²a) = FIRST(Îµ$) = { $ } åŠ å…¥ (C -&gt; â€¢cC, $), (C -&gt; â€¢d, $) goto(I0, c) (C -&gt; câ€¢C, c/d) ä»¥ (A -&gt; Î±â€¢XÎ², a) ä¾†çœ‹æœƒç­‰æ–¼ A = C, Î± = c, B = C, Î² = Îµ, a = c/d åŠ å…¥ B -&gt; â€¢Î³ï¼Œä¹Ÿå°±æ˜¯ C -&gt; â€¢cC, C -&gt; â€¢d è¨ˆç®— b = FIRST(Î²a) = FIRST(Îµc/d) = { c/d } åŠ å…¥ (C -&gt; â€¢cC, c/d), (C -&gt; â€¢d, c/d) ä¹‹å¾Œå°±ä¾æ­¤é¡æ¨ï¼Œç›´åˆ°æ²’æœ‰æ–°çš„ Item å¯ä»¥åŠ å…¥ï¼Œæœ€å¾Œå°±æœƒå¾—åˆ°ä»¥ä¸‹çš„ LR(1) Parsing Table: Last Edit 11-06-2023 17:12"
  },"/jekyll/2023-10-19-cpu_scheduler.html": {
    "title": "OS | CPU Scheduler (Unfinished)",
    "keywords": "OS Jekyll",
    "url": "/jekyll/2023-10-19-cpu_scheduler.html",
    "body": "Operating System: Design and Implementation course notes from CCU, lecturer Shiwu-Lo. æœ¬ç« ç¯€æœƒä¸»è¦ä»‹ç´¹ Linux Schedulerï¼ŒLinux Scheduler ç¾åœ¨çš„çš„ç›®æ¨™æ˜¯: å¦‚ä½•å¾ã€Œå¥½è®Šç‚ºæ›´å¥½ã€ Noun, Concept definition 2.4 Scheduler 2.6 O(1) Scheduler 2.6 - 5.3 Complete fair scheduler(CFS) Linux Kernel 2.4 æ˜¯ä¸€å€‹éå¸¸é•·å£½çš„ç‰ˆæœ¬ï¼ŒæŒçºŒäº†å¤§ç´„ 10 å¹´å·¦å³ï¼Œä½†å³ä¾¿é€™æ¨£ä¸€å€‹é€™éº¼é•·å£½ã€ç©©å®šçš„ Schedulerï¼Œ Linux Kernel è¨­è¨ˆè€…ä»ç„¶åœ¨è€ƒæ…®å¦‚ä½•è®“å¥¹è®Šå¾—æ›´å¥½ã€‚ Noun, Concept definition 4.1 Task 4.2 Scheduler Types 4.3 Cooperative multitasking - Novell-Netware 4.4 Preemptable OS 4.5 Scheduler &amp; Context switch 4.6 Scheduling Criteria 4.1 Task åœ¨ Linux ä¸­ï¼ŒProcess å’Œ Thread éƒ½æ˜¯ Task Process ä¹‹é–“ä¸æœƒå…±ç”¨ä»»ä½•è³‡æºï¼Œå°¤å…¶æ˜¯ Memory Thread å‰‡æ˜¯å¹¾ä¹å…±ç”¨æ‰€æœ‰è³‡æºï¼Œå°¤å…¶æ˜¯ Memory Task çš„ç”Ÿå‘½é€±æœŸä¸­åˆ†ç‚ºå…©ç¨®æƒ…æ³ Using CPU Waitingï¼Œä¾‹å¦‚: Waiting mutex, I/O â€¦ Task åœ¨ä½¿ç”¨ CPU æ™‚åˆ†ç‚º: åŸ·è¡Œæ–¼ User mode/Kernel mode åœ¨ Linux Task å¯ä»¥åŸ·è¡Œåœ¨ User/Kernel modeï¼Œæ”¹è®Šæ¨¡å¼ç¨±ä½œ Mode changeï¼Œè€Œ Kernel Thread å°ˆæŒ‡åªæœ‰ Kernel mode çš„ Taskï¼Œä¾‹å¦‚: Device Driver Task &amp; Scheduling ä»¥ä¸‹æ˜¯ä¸€å€‹ Task çš„ç”Ÿå‘½é€±æœŸï¼Œé€™è£¡å¾ Scheduler è§’åº¦ä¾†çœ‹çš„è©±ä¸»è¦å½±éŸ¿çš„æ˜¯å…©å€‹éƒ¨åˆ†: Waining(semaphore): æ€éº¼åœ¨ Waiting æ™‚ï¼Œè®“ Task çš„ä½¿ç”¨ç‡æœ€å¤§åŒ– OS å¯ä»¥åˆ†æˆå…©å¤§é¡: Cooperative multitasking(Non-preemptive, å”åŒé‹ä½œå¼å¤šå·¥) Preemptable OS(Preemptive, æ¶å å¼å¤šä»»å‹™è™•ç†) 4.2 Scheduler Types Non-preemptive OS(â–³): å°±æ˜¯æŒ‡åªæœ‰ Task è‡ªå·±æ”¾æ£„ CPU ä½¿ç”¨æ¬Šï¼Œæ‰æœƒäº¤å‡º CPU ä½¿ç”¨æ¬Š Task åŸ·è¡ŒçµæŸï¼Œé€™æ¨£ç•¶ç„¶å°±äº¤å‡º CPU ä½¿ç”¨æ¬Š Task ç™¼å‡º Blocking I/O request å› ç‚ºè¦ç­‰å¾… I/O å®Œæˆï¼Œå› æ­¤ä¹Ÿæœƒäº¤å‡º CPU ä½¿ç”¨æ¬Š ç•¶ç„¶ä¹Ÿæœ‰ Async I/Oï¼ŒVectored I/O ç­‰æ–¹æ³•ï¼Œé€™è£¡å…ˆä¸è¨è«– Preemptive OS(â˜â–³): æ¯å€‹ Task æœƒæœ‰ä¸€å€‹ Time slice åŸ·è¡Œï¼Œä¾‹å¦‚: 1/1000 Secï¼ŒåŸ·è¡ŒçµæŸå°±è¦åšåˆ‡æ› å¾ Wating ç­‰å¾…å®Œç•¢ I/O å¾Œï¼Œè¿”å› Runtable æ™‚è¦ä¸è¦é¦¬ä¸Šåˆ‡å›è©² Task æ–°çš„ Task ä¹Ÿå¯ä»¥çµ¦äºˆé«˜å„ªå…ˆæ¬Šï¼Œè®“ä»–é¦¬ä¸ŠåŸ·è¡Œ Preemptive OS åˆåˆ†ç‚º: Preemptable Kernel, Non-preemptable Kernel 4.3 Cooperative multitasking - Novell-Netware Netware: Netware æ‰€æœ‰çš„ç¨‹å¼éƒ½åœ¨ ring 0 åŸ·è¡Œï¼Œä½†æ˜¯é€™æ¨£å°±è¦ç¢ºä¿æ‰€æœ‰çš„ç¨‹å¼éƒ½æ˜¯ç”± Novell ä¾†æ§åˆ¶ï¼Œ é€™æ¨£æ‰èƒ½ç¢ºä¿æ‰€æœ‰çš„ç¨‹å¼éƒ½æ˜¯å¯ä¿¡ä»»çš„ï¼Œæ²’æœ‰æƒ¡æ„ç¨‹å¼ ä½†æ˜¯ç•¶ CPU æ•ˆèƒ½è®Šå¼·ä¹‹å¾Œï¼Œé€™æ¨£çš„è¨­è¨ˆå°±ä¸å¤ªå¥½ï¼Œå› ç‚ºæ‰€æœ‰çš„ç¨‹å¼éƒ½è¦ç”± Novell ä¾†æä¾›ï¼Œé€™ä¸å¤ªå¯èƒ½ï¼Œå› æ­¤æœ€å¾Œç”± Windows NT å‹å‡º 4.4 Preemptable OS Preemptive OS: å¦‚æœä¸€å€‹ Task åŸ·è¡Œéä¹…ï¼ŒOS æœƒä¸»å‹•å°‡ CPU æ§åˆ¶æ¬Šäº¤çµ¦ä¸‹ä¸€å€‹ Task å¦‚æœè¦è¨­è¨ˆ Preemptive OS å¿…é ˆè¦æœ‰ Hardware supportï¼Œä¾‹å¦‚: Timer, Interrupt Timer: ç”¨ä¾†è¨ˆç®— Task åŸ·è¡Œçš„æ™‚é–“ Interrupt: ä½¿ OS èƒ½ç²å¾— CPU æ§åˆ¶æ¬Š æ‰€æœ‰ç‰ˆæœ¬çš„ Linux éƒ½æ˜¯ Preemptive OS Preemptive Kernel Non-preemptive Kernel(throughput): åœ¨ 2.6 Kernel ä¹‹å‰ï¼ŒLinux æ˜¯ Non-preemptable Kernel ç•¶ Task åŸ·è¡Œåœ¨ Kernel mode æ™‚ï¼Œå…¶å„ªå…ˆæ¬Šç„¡é™å¤§ Context switch åªæœƒç™¼ç”Ÿåœ¨ Task ç”± Kernel mode åˆ‡æ›åˆ° User mode æ™‚ Preemptive Kernel(latency): åœ¨ 2.6 Kernel ä¹‹å¾Œï¼ŒLinux å¯ä»¥è¨­å®šç‚º Preemptable Kernel ç•¶ Task åŸ·è¡Œåœ¨ Kernel mode æ™‚å¦‚æœæ²’æœ‰ä»»ä½•çš„ Lock å°±å¯èƒ½ç™¼ç”Ÿ Context switch æ³¨æ„å¦‚æœåœ¨ Kernel ä¸­ç™¼ç”Ÿ Interruptï¼Œä¸‹æ¬¡ Task A åŸ·è¡Œæ™‚æœƒç›´æ¥å¾ Kernel mode ä¸­ç¹¼çºŒåŸ·è¡Œï¼Œ å› æ­¤åœ¨ 2.6 Kernel å¾Œç·¨è­¯æ™‚å¯ä»¥é¸æ“‡ Kernel æ³¨é‡ throughput é‚„æ˜¯ latencyï¼Œ Form Non-preemprive kernel to Preemprive kernel åœ¨ Non-Preemprive kernel ä¸­ï¼Œæ‰€æœ‰é€²å…¥ Kernel çš„ Task å¯ä»¥å‡è¨­è‡ªå·±ä¸æœƒè¢« Preemptï¼Œå› æ­¤å­˜å–å¾ˆå¤šå…±ç”¨è³‡æ–™ï¼Œä¸éœ€è¦ä½¿ç”¨ Lock åœ¨ Preemprive kernel ä¸­ï¼Œç¨‹å¼è¨­è¨ˆå¸«éœ€è¦ä»”ç´°æ€è€ƒã€æ”¹å¯«ç¨‹å¼ç¢¼ï¼Œæ‰€æœ‰å­˜å–åˆ°å…±ç”¨è³‡æ–™çš„ç¨‹å¼ç¢¼éƒ½éœ€è¦ä½¿ç”¨ Lock-UnLock ä¾†ä¿è­· é€™æ˜¯ä¸€ä»¶éå¸¸è€—è²»äººåŠ›çš„å·¥ä½œ 4.5 Scheduler &amp; Context switch Scheduler æ±ºå®šæ¥ä¸‹ä¾†è¦åŸ·è¡Œå“ªä¸€å€‹ Task ä½¿ç”¨ C language æ’°å¯« Context switch è² è²¬å¾ä¸€å€‹ Task åˆ‡æ›åˆ°å¦ä¸€å€‹ Task ä¸»è¦åˆ‡æ›çš„æ˜¯æ™®é€š Register å¦‚æœ Task ä½¿ç”¨åˆ°ä¸€äº›ç‰¹åˆ¥çš„ Registerï¼Œä¾‹å¦‚: æµ®é»æ•¸é‹ç®—å™¨(Floating Point Unit, FPU)ï¼Œå‰‡éœ€è¦é¡å¤–è™•ç†(Lazy) Lazy: åªæœ‰æ–°çš„ Task éœ€è¦ä½¿ç”¨åˆ° FPU æ™‚ï¼Œæ‰æœƒåˆ‡æ› FPU ç›¸é—œçš„ Register Context switch éš±å«çš„åˆ‡æ› ä¾ç…§éœ€æ±‚åˆ‡æ› Page Table(TLB) åˆ‡æ› Cache çš„å…§å®¹ 4.6 Scheduling Criteria é€™è£¡ä»‹ç´¹å¦‚ä½•åˆ†æä¸€å€‹ Scheduler çš„å¥½å£ CPU Utilization(ä½¿ç”¨ç‡): CPU ç¶­æŒåœ¨é«˜ä½¿ç”¨ç‡ï¼ŒTask ä¹‹é–“äº’ç›¸æœ‰ç­‰å¾…çš„é—œä¿‚ï¼Œè¦å¦‚ä½• Schedule? Throughput(ååé‡): åœ¨å–®ä½æ™‚é–“å…§ï¼ŒCPU å¯ä»¥åŸ·è¡Œå¤šå°‘ Task ä¾‹å¦‚: è®“ I/O Task å„ªå…ˆåŸ·è¡Œ Turnaround time(å¾€è¿”æ™‚é–“): Task å¾é–‹å§‹åˆ°çµæŸçš„æ™‚é–“ï¼Œèˆ‡ Scheduler åŠç¨‹å¼æœ¬èº«çš„åŸ·è¡Œç¨‹åº¦ç›¸é—œ Waiting time(ç­‰å¾…æ™‚é–“): Task åœ¨ Ready Queue ä¸­ç­‰å¾…çš„æ™‚é–“ï¼Œé€šå¸¸é«˜å„ªå…ˆæ¬Šçš„ Task æœƒç­‰å¾…è¼ƒçŸ­çš„æ™‚é–“ åªè¦ä¸€å€‹ Task èƒ½åŸ·è¡Œï¼Œä½† OS ä½¿å…¶ç­‰å¾…å°±è¦ç®—å…¥ Waiting time Response time(å›æ‡‰æ™‚é–“): Task å¾ç™¼å‡º Request åˆ°ç¬¬ä¸€æ¬¡å›æ‡‰çš„æ™‚é–“ ä¾‹å¦‚: ç¨‹å¼éœ€è¦è¼¸å‡ºå›æ‡‰åˆ°è¢å¹•ï¼Œå¥½çš„ Scheduler å¯ä»¥è®“ Progress bar éå¸¸å³æ™‚çš„åæ‡‰ CPU Utilization å¯¦éš›çš„ CPU ä½¿ç”¨ç‡æœƒå—åˆ° Task çš„é«˜ä½å„ªå…ˆæ¬Šå½±éŸ¿ï¼Œå› æ­¤ CPU ä½¿ç”¨ç‡æœƒæœ‰å…©ç¨®æƒ…æ³: å¯ä»¥é€éè»Ÿé«”çš„æ–¹å¼å° Lock-Unlock åšæœ€ä½³åŒ–ï¼Œä¾‹å¦‚: Intel vtune, kernelshark ä¹‹é¡çš„è¦–è¦ºåŒ–å·¥å…· Response time å‡å¦‚ç³»çµ±ä¸­æœ‰ 10 å€‹ Taskï¼Œé€™ 10 å€‹ Task é€£æ¥åˆ° 10 å€‹ Userï¼Œå¦‚æœè¦è®“åŸ·è¡Œæ„Ÿè¦ºæµæš¢çš„è©±ï¼Œæœ‰ä»¥ä¸‹åšæ³•: å–®å‘äº’å‹•: å‡å¦‚ Task æ˜¯æ’­æ”¾å½±ç‰‡ï¼Œé‚£å°±å®‰æ’é©ç•¶çš„ Bufferï¼Œè§£ç¢¼å¾Œçš„å½±ç‰‡æ”¾å…¥ Buffer ä¾› User task æ‹¿å– åªè¦ Buffer å¤ å¤§ï¼Œå³ä½¿æ¯ 10 ç§’æ‰è¼ªåˆ°ä¸€æ¬¡åŸ·è¡Œï¼Œä½¿ç”¨è€…ä¹Ÿä¸æœƒè¦ºå¾— Lag é›™å‘äº’å‹•: å‡å¦‚ Task æ˜¯èªéŸ³é€šè©±ï¼Œå¿…é ˆåœ¨ 150ms ä¸­è¼ªåˆ°åŸ·è¡Œä¸€æ¬¡ï¼Œå¦å‰‡æœƒè¦ºå¾—é€šè©±å“è³ªä¸å¥½ é‚£æ¯å€‹ Task ä¸€å›åˆåªèƒ½åŸ·è¡Œ 15ms Scheduler Concepts 4.7 Simple Scheduler FCFS(Fisrt Come First Serve) ä¾ç…§ Task çš„æŠµé”é †åºï¼Œä¾ç…§é †åºåŸ·è¡Œ SJF(Shortest Job First) ä¾ç…§ Task çš„åŸ·è¡Œæ™‚é–“ï¼ŒåŸ·è¡Œæ™‚é–“çŸ­çš„ Task å„ªå…ˆåŸ·è¡Œ RR(Round Robin) åœ¨ä¸€ç¾¤ Task ä¸­è¼ªæµåŸ·è¡Œï¼Œæ¯ä¸€å€‹ Task æœ€å¤šåŸ·è¡Œ X å€‹ Time slice åœ¨ Linux ä¸­å¯ä»¥çœ‹åˆ°ä¸Šé¢ä¸‰ç¨®æ–¹æ³•çš„å½±å­ FCFS Wating time: P1 = 0, P2 = 100, P3 = 150 Average waiting time: (0 + 100 + 150) / 3 = 83.3 å¦‚æœå…ˆæŠµé”çš„ Task åŸ·è¡Œæ™‚é–“å¾ˆé•·ï¼ŒAverage waiting time å°±æœƒè®Šå¾—æ¯”è¼ƒé•· SJF åœ¨ P1 åŸ·è¡Œä¸­ï¼ŒP2ã€P3 æŠµé”ï¼Œæ”¾å…¥ Ready Queueï¼Œç„¶å¾Œä¾ç…§åŸ·è¡Œæ™‚é–“æ’åº Wating time: P1 = 0, P2 = 110, P3 = 100 Average waiting time: (0 + 110 + 100) / 3 = 70 Preemptive SJF åªè¦æœ‰å·¥ä½œé€²å…¥ Ready Queueï¼Œæˆ–æœ‰å·¥ä½œçµæŸå°±è¦æ±ºå®šåŸ·è¡Œçš„ Task Wating time: P1 = 60, P2 = 10, P3 = 0 Average waiting time: (60 + 10 + 0) / 3 = 23.3 ç›´è§€ä¸Šæœƒè¦ºå¾— Preemptive SJF æ˜¯æ¯”è¼ƒå¥½çš„æ¼”ç®—æ³•ï¼Œä½†æ³¨æ„ Preemptive SJF æœ‰ Context switch overhead å¦‚æœåªæ˜¯å¯« SJF é€šå¸¸æŒ‡ Non-preemptive SJF Preemptive SJF åˆç¨±ä½œ SRTF(Shortest Remaining Time First) åœ¨ Average waiting time æ–¹é¢ï¼ŒSJF &amp; SRTF åˆ†åˆ¥æ˜¯ Preemptable scheduling &amp; Non-preemptable scheduling çš„æœ€ä½³æ¼”ç®—æ³• Estimate Execution Time å‰é¢æåˆ°çš„ Scheduler éƒ½æ˜¯å‡è¨­ Task çš„åŸ·è¡Œæ™‚é–“æ˜¯å·²çŸ¥çš„ï¼Œä½†å¯¦éš›ä¸Š Task çš„åŸ·è¡Œæ™‚é–“æ˜¯ä¸çŸ¥é“çš„ï¼Œå› æ­¤éœ€è¦ä¼°è¨ˆ Task çš„åŸ·è¡Œæ™‚é–“ ä¸€å€‹ Task çš„ç”Ÿå‘½é€±æœŸåˆ†ç‚ºå…©ç¨®æƒ…æ³ Using CPU, Waiting ä¾ç…§ Task ä»¥å‰ä½¿ç”¨ CPU ä½¿ç”¨æ™‚é–“çš„å¤šå¯¡ï¼Œä¾†é æ¸¬é€™æ¬¡ä½¿ç”¨ CPU æ™‚é–“çš„å¤šå¯¡ï¼Œä¾‹å¦‚ä»¥ä¸‹å…¬å¼ tn: ä¸Šä¸€æ¬¡çš„ CPU time ğœx: é æ¸¬çš„ç¬¬ x æ¬¡çš„ CPU time Linux Kernel 2.4 ä½¿ç”¨ä»¥ä¸‹çš„æ–¹æ³•ï¼Œä¸¦ä¸” ğ›¼ å– 1/2 å› ç‚ºå¯ä»¥é¿å…æµ®é»æ•¸é‹ç®— tn+1 = ğ›¼ * tn + (1 - ğ›¼) * ğœn ğ›¼ æ˜¯ä¸€å€‹æ¬Šé‡å› å­ç•Œæ–¼ 0 ~ 1 ä¹‹é–“ è¶Šé è¿‘ 1ï¼Œè¡¨ç¤ºè¶Šé‡è¦–éå»çš„ CPU time è¶Šé è¿‘ 0ï¼Œè¡¨ç¤ºè¶Šé‡è¦–é æ¸¬çš„ CPU time Round Robin å¦‚æœä½¿ç”¨ RR é‚£éº¼ Time slice è¦è¨­å®šç‚ºå¤šå°‘? å¤ªé•·: æœƒè®“ Task ç­‰å¾…çš„æ™‚é–“è®Šé•· å¤ªçŸ­: æœƒè®“ Context switch overhead è®Šå¤§ é€šå¸¸ Time slice æœƒè¨­å®šç‚ºä¸€å€‹ Task å¯ä»¥åœ¨ Time slice å…§åŸ·è¡Œå®Œç•¢ï¼Œè®Šæˆ Waiting ç‹€æ…‹ ä¹Ÿå°±æ˜¯åœ¨ Time slice ä¸­æˆåŠŸæŠŠ I/O request ç™¼å‡ºå» ç›®å‰ Linux çš„è¨­å®šç‚ºä½¿ç”¨è€…éœ€è¦å¤šå°‘çš„ Time sliceï¼Œå¯ä»¥å‹•æ…‹çš„èª¿æ•´ Time slice çš„å¤§å° Linux Scheduler Linux å…±æœ‰ 140 å€‹å„ªå…ˆæ¬Šç­‰ç´š 0 ~ 99: Real-time priority é€šå¸¸æ˜¯ä¸€äº›éœ€è¦ Real-time çš„ Taskï¼Œä¾‹å¦‚: å½±ç‰‡æ’­æ”¾ï¼Œè²éŸ³æ’­æ”¾ 100 ~ 139: Normal priority å°ä½¿ç”¨è€…è€Œè¨€æ˜¯ -20 ~ +19ï¼Œé è¨­å€¼ç‚º 0ï¼Œç¨±ä½œ Nice value Nice value æ˜¯ç”± User æŒ‡å®šï¼ŒLinux ç•¶ä½œåƒè€ƒç”¨ä»¥è¨ˆç®— Dynamic priorityï¼ŒDynamic priority æœƒå› ä»¥ä¸‹å› ç´ å½±éŸ¿: è©² Task æ˜¯ I/O bound é‚„æ˜¯ CPU bound è€ƒæ…® Core çš„ç‰¹æ€§ è€ƒæ…® Multi-thread çš„ç‰¹æ€§ ä½¿ç”¨è€…åœ¨å•Ÿå‹• Task æ™‚å¯ä»¥æŒ‡å®š Nice valueï¼Œæˆ–åœ¨ Task åŸ·è¡Œæ™‚ä½¿ç”¨ renice æŒ‡ä»¤ä¾†èª¿æ•´ Nice value 4.8 Linux 2.4 Scheduler åœ¨ 2.4 Scheduler ä¸­å¦‚ä½•å° I/O é€²è¡Œå„ªåŒ– æ€è€ƒåœ¨ 2.4 åœ¨ Multi-processor çš„ç’°å¢ƒä¸‹æ¬ ç¼ºä»€éº¼? Non-preemptible kernel Set p-&gt;need_resched if schedule() should be invoked at the â€˜next opportunityâ€™(kernel -&gt; user mode). æ‰€ä»¥ä¸€å€‹æ­£åœ¨ Kernel ä¸­é‹è¡Œçš„ Task è¦é€²è¡Œ Context switch æ™‚å°±æœƒå°‡ need_resched è¨­ç‚º 1 Round-Robin task_struct-&gt;counter: number of clock ticks left to run in this scheduling slice, decremented by a timer. é€™æ˜¯ä¸€å€‹ Task åŸ·è¡Œçš„ counterï¼Œæ¯å€‹ time tick å°± -1ï¼Œç”¨å®Œäº†å°±ä¸èƒ½åœ¨é€™å€‹å›åˆå…§ä½¿ç”¨ CPU 2.4 Scheduler - SMP: ç•¶æœ‰ CPU é€²å…¥ Idle æ™‚ï¼Œ2.4 Scheduler æœƒå¾ Ready Queue ä¸­ Search &amp; Estimateï¼Œæ‰¾å‡ºæœ€ä½³çš„ Task ä¾†åŸ·è¡Œ Search: æœƒä¾ç…§é€™å€‹ Task å°é€™å€‹ CPU æœ‰å¤šé©åˆ 2.4 Scheduler - Run-Queue: åœ¨ 2.4 ä¸­æ‰€æœ‰äººéƒ½æ˜¯ä½¿ç”¨åŒä¸€å€‹ Run-Queue: Use spin_lock_irq() to lock â€œrunqueue_lockâ€ å› ç‚º 2.4 Scheduler åƒ…æœ‰ä¸€å€‹ Run-Queueï¼Œè¦åœ¨é‹ç®—æ™‚ Lock ç„¶å¾Œé‹ç®—å®Œ Unlockï¼Œè‡ªç„¶æœƒé€ æˆæ•ˆèƒ½ç“¶é ¸ Check if a task is â€œrunnableâ€ in TASK_RUNNING state in TASK_INTERRUPTIBLE state and a signal is pending Examine the â€œgoodnessâ€ of each process æª¢æŸ¥æ‰€æœ‰ Task çš„ Goodnessï¼Œä¸¦ä¸”é¸å‡ºæœ€å¥½çš„ Task Context switch 2.4 Scheduler - Goodness: â€œgoodnessâ€: identifying the best candidate among all processes in the runqueue list. â€œgoodnessâ€ = 0: the entity has exhausted its quantum. 0 &lt; â€œgoodnessâ€ &lt; 1000: the entity is a conventional process/thread that has not exhausted its quantum; a higher value denotes a higher level of goodness. if (p-&gt;mm == prev-&gt;mm) return p-&gt;counter + p-&gt;priority + 1; else return p-&gt;counter + p-&gt;priority; A small bonus is given to the task p if it shares the address space with the previous task. Examine the processor field of the processes and gives a consistent bonus (that is PROC_CHANGE_PENALTY, usually 15) to the process that was last executed on the â€˜this_cpuâ€™ CPU. ä¾‹å¦‚: ä¸€å€‹ Multi-thread ç¨‹å¼çš„ Taskï¼Œå¦‚æœæœ‰ä¸€å€‹ Thread åŸ·è¡Œåœ¨ä¸€å€‹ CPU ä¸Šï¼Œé‚£éº¼å…¶ä»–çš„ Thread å°±æœƒæœ‰ä¸€å€‹åŠ åˆ†ï¼Œè®“ä»–å€‘å¯ä»¥åœ¨åŒä¸€å€‹ CPU ä¸ŠåŸ·è¡Œã€‚ åŒæ¨£çš„å¦‚æœä¸€å€‹ Process æœ€å¾Œæ˜¯åœ¨é€™ this_cpu ä¸Šé‹è¡Œï¼Œé‚£éº¼ä»–åœ¨é€™é¡† CPU ä¸Šè¨ˆç®—åˆ†æ•¸æ™‚ä¹Ÿæœƒæœ‰çå‹µåŠ åˆ†ã€‚ 2.4 Scheduler çš„å•é¡Œæ˜¯ Scheduler è¦å°æ‰€æœ‰çš„ Task è¨ˆç®— goodnessï¼Œæ¯æ¬¡éƒ½è¦é‡ç®—ã€‚ä½†å…¶å¯¦å¤§å¤šæ•¸æ™‚é–“æ¯æ¬¡è¨ˆç®—å‡ºçš„ goodness éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œ çœŸçš„æœ‰éœ€è¦æ¯æ¬¡éƒ½é‡ç®—å—? 4.8 Linux 2.4 Scheduler - Improve I/O performance Defintion: I/O-bound processes: spends much of its time submitting and waiting on I/O requests Processor-bound processes: spend much of their time executing code Linux å‚¾å‘æ–¼æ”¯æ´ I/O-bound processesï¼Œé€™æ¨£æœƒæä¾›å¥½çš„ Process response timeï¼Œä½†æ˜¯æ€éº¼å° Process é€²è¡Œåˆ†é¡? Last Edit 10-18-2023 23:21"
  },"/jekyll/2023-10-18-process_thread.html": {
    "title": "OS | Process and Thread",
    "keywords": "OS Jekyll",
    "url": "/jekyll/2023-10-18-process_thread.html",
    "body": "Operating System: Design and Implementation course notes from CCU, lecturer Shiwu-Lo. é€™ç« ç¯€ä¸»è¦æ˜¯ä»‹ç´¹ Process è·Ÿ Thread Process model Process Life Cycle Communication model between Process &amp; Process Communication method between Process &amp; Process Producer-consumer problem Context switch main overhead (ä½¿ç”¨ Thread çš„å‹•æ©Ÿ) Thread model Process model 3.1 Process Concept An OS executes a variety of programs: Batch system â€“ jobs Time-shared systems â€“ user programs or tasks Process â‰ˆ Task â‰ˆ Job Process - a process is an instance of a program in execution +Program code (text section) +Program counter &amp; registers (CPU status) +Stack +Data section Batch system(æ‰¹æ¬¡ç³»çµ±): æ˜¯æŒ‡è¢«æ™‚é–“å®‰æ’åœ¨ PC ä¸Šé‹è¡Œï¼Œä¸éœ€è¦èˆ‡ä½¿ç”¨è€…äº’å‹•çš„å·¥ä½œ 3.2 Process Memory æ¯å€‹ Process é€šå¸¸æœ‰è‡ªå·±å®Œæ•´çš„ Address space 32bit ç‚ºä¾‹ï¼Œæ¯å€‹ Process æœ‰ 4GB çš„ Address(Memory) space 64bit çš„ x64 CPUï¼Œå› ç‚ºæˆæœ¬çš„è€ƒé‡ï¼Œé€šå¸¸åªæœƒä½¿ç”¨ 48bit çš„ Address spaceï¼Œä¹Ÿå°±æ˜¯ 256TB (é è¶… Disk çš„å®¹é‡) Address space è¡¨ç¤ºä¸€å€‹ Process æœ€å¤šèƒ½ä½¿ç”¨å¤šå°‘ Memoryï¼Œå¯¦éš›ä¸Š RAM é€šå¸¸é å°æ–¼ Process çš„ Address space é€šå¸¸å°‡ Process çš„ Address space åˆ†ç‚ºå…©å€‹éƒ¨åˆ†ï¼Œä¸ŠåŠéƒ¨åˆ†ç‚º OS Kernelï¼Œä¸‹åŠéƒ¨åˆ†ç‚º Process çš„ User space ä»¥ 64bit ç‚ºä¾‹ï¼Œä¸€å€‹ Process çš„ Memory address(User space) ç‚º 0~128TBï¼ŒKernel å‰‡ç‚º 256TB(264) å¾€ä¸‹ 128 TB çš„éƒ¨åˆ† User space: 00000000 00000000 ~ 00007FFF FFFFFFFF Kernel: FFFF8000 00000000 ~ FFFFFFFF FFFFFFFF Why kernel/user space need half of the memory space æ¯å€‹ Process çš„ Kernel Space éƒ½æ˜¯å…±ç”¨çš„ï¼Œåœ¨ SMP Processor ä¸Šæ‰€æœ‰ Process éƒ½å…±ç”¨åŒä¸€å€‹ Linux Kernel DRAM æœ‰å¾ˆå¤šç”¨é€”ï¼Œä¾‹å¦‚: ä½œç‚º I/O åŠ é€Ÿçš„ Buffer/Cache I/O Buffer: CPU çš„è³‡æ–™å¯ä»¥å…ˆå¯«å…¥ DRAM bufferï¼Œç„¶å¾Œå†ç”± DMA controller å°‡è³‡æ–™å¯«å…¥ Disk I/O Cache: Disk çš„è³‡æ–™å¯ä»¥å¯«å…¥ DRAM cacheï¼Œå› ç‚º I/O request æœƒç”¢ç”Ÿ overhead è®€å– 4kb å’Œè®€å– 16kb çš„é€Ÿåº¦æ˜¯ä¸€æ¨£çš„ï¼Œé‚£ä¹¾è„†ä¸€æ¬¡å¾ cache è®€å– 16kb OS æœƒæŠŠç›¸é—œçš„è³‡æ–™æ”¾åœ¨ cacheï¼Œé€™æ¨£ä¸‹æ¬¡è®€å–å°±å¯ä»¥ç›´æ¥å¾ cache è®€å–ï¼Œè€Œä¸ç”¨å†æ¬¡è®€å– Disk When Multi-Process running, what does the memory look like to users/programmers é€™è£¡åªè¨è«– User spaceï¼Œä¸€æ¬¡åªæœƒåŸ·è¡Œä¸€å€‹ Process é€™ä¸‰å€‹ Proces å„è‡ªæœ‰å®Œæ•´çš„ user spaceï¼Œç•¶ Context switch æ™‚é™¤äº† CPU æ§åˆ¶æ¬Šæœƒè¢«äº¤æ›å¤–ï¼Œ ä¹Ÿæœƒé‡æ–°é€²è¡Œ Memory mapping(ä¿®æ”¹ MMU çš„ mapping table) Internal memory configuration method of the Process ä¸€å€‹ Process æ˜¯æ€éº¼åœ¨ Memeory ä¸­é€²è¡Œåˆ†é…çš„ç‹€æ…‹ Local variables: åœ¨ Stack ä¸­åˆ†é… Global variables initialized value: åœ¨ initialized data åˆ†é… uninitialized value(BSS): åœ¨ unitialized data åˆ†é… Dynamic memory allocation: åœ¨ Heap ä¸­åˆ†é… Program code: åœ¨ Text section åˆ†é…ï¼Œä¾‹å¦‚ Main, malloc function çš„æŒ‡ä»¤ é€šå¸¸ OS ä¸€æ¬¡æœƒçµ¦ 4096(4K) å¤§å°çš„ Memoryï¼Œä¸¦ä¸”æœƒæ¸…ç©ºï¼Œé€™æ¨£å°±ä¸æœƒæœ‰å®‰å…¨æ€§å•é¡Œï¼Œä½†å¯«ç¨‹å¼æ™‚æœ€å¥½åªé è¨­ BSS æ®µçš„å€¼æœƒæ˜¯ 0ï¼Œä¾‹å¦‚ Stack å¯èƒ½æœƒå› ç‚ºå› ç‚º Call/Return çš„é—œä¿‚ï¼Œè€Œæœ‰ä¸€äº›ä¸å¯é æœŸçš„å€¼ã€‚ ä½†å³ä½¿é€™æ¨£ä¹Ÿç›¡é‡è¦çµ¦äºˆåˆå§‹å€¼ï¼Œä¾‹å¦‚: int a = 0;ï¼Œæ¸›å°‘ä¸å¯é æœŸçš„éŒ¯èª¤ç™¼ç”Ÿ The position of variable in the Process åœ¨ä¸€å€‹ç¨‹å¼åŸ·è¡Œæ™‚ Text/initilized section å¹¾ä¹å°±æ˜¯ç›´æ¥å¾ Disk copy åˆ° Memory Unitialized section å› ç‚ºæ²’æœ‰è³‡æ–™å„²å­˜ï¼Œæ‰€ä»¥å¯ä»¥é€éä¸€å€‹è³‡æ–™çµæ§‹ä¾†æè¿°ï¼Œä¸¦æ”¾åœ¨åŸ·è¡Œæª”çš„ Header ä¸­ Stack/Heap æœƒéš¨è‘—ç¨‹å¼åŸ·è¡Œè€Œè®Šå¤§ï¼Œæ‰€ä»¥æ”¾åœ¨æœ€å¾Œé¢ä¸¦ä¸”å¾€ä¸‹/ä¸Šæˆé•· ä½†æ˜¯ Stack é€šå¸¸æœƒè¢«é™åˆ¶åœ¨å›ºå®šå¤§å°ï¼Œä¾‹å¦‚: ä¸€é–‹å§‹åˆ†é… 16KBï¼Œç•¶éœ€è¦æˆé•·æ™‚å°± OS å°±å†åˆ†é… 4KBï¼Œä½†æœ€å¤šé•·åˆ° 8MBï¼Œé€™å€‹å¯ä»¥é€é ulimit æŸ¥çœ‹æˆ–ä¿®æ”¹ å¦‚æœä¸€å€‹ Memory è¢«å¯«å…¥ DRAM å¾Œï¼Œä½†é•·æ™‚é–“æ²’æœ‰è¢«ä½¿ç”¨ï¼Œé‚£éº¼é€™å€‹ Memory å°±æœƒè¢« swap out åˆ° Diskï¼Œé€™æ¨£å°±å¯ä»¥é‡‹æ”¾å‡º DRAM çµ¦å…¶ä»– Process ä½¿ç”¨ Linux kernel uses Logical meaning to manage memory segments of processes Linux Kernel é€é task_struct, mm_struct, vm_area_struct ä¾†ç®¡ç† Process çš„ Memory: task_struct: æè¿° Task ç›¸é—œçš„æ‰€æœ‰è³‡è¨Š mm_struct: æè¿° Task çš„è¨˜æ†¶é«”ç›¸é—œçš„è³‡è¨Šï¼Œä¾‹å¦‚: è©² Task çš„ Memory space æœ‰å“ªäº› area vm_area_struct: æè¿°è©² area ç›¸é—œçš„è³‡è¨Šï¼Œä¾‹å¦‚: è©² area çš„èµ·å§‹ä½ç½®ã€å¤§å°ã€æ¬Šé™ç­‰ç­‰ ä¾‹å¦‚é™¤äº† Text area æ˜¯å¯ Read, Execute(rx)ï¼Œå…¶ä»–çš„ area éƒ½æ˜¯å¯ Read, Write(rw) Example: Lab main.c æˆ‘å€‘ç”¨ä¸€å€‹ç°¡å–®çš„ç¨‹å¼ main.c ä¾†åšæ¸¬è©¦: int a = 2; int b; int main() { int c, d; int* e = (int*)malloc(sizeof(int)*1024); printf(\"pid = %d\\n\", getpid()); printf(\"main = %p\\n\", main); printf(\"printf = %p\\n\", printf); printf(\"a=%p, b=%p, c=%p, d=%p, *e=%p\\n\", &amp;a, &amp;b, &amp;c, &amp;d, e); getchar(); return 0; } /* benson@vm:~/OSDI$ ./main.exe pid = 190697 main = 0x55d00a13218a printf = 0x7f94c1974cc0 a=0x55d00a135010, b=0x55d00a135018, c=0x7ffe4cb7e4b8, d=0x7ffe4cb7e4bc, *e=0x55d00aca62a0 */ ç„¶å¾Œåœ¨ /proc//maps ä¸­å¯ä»¥çœ‹åˆ°è©² Process çš„ Memory configuration: Address space layout randomization å¦‚æœæˆ‘å€‘é‡æ–°åŸ·è¡Œä¸€æ¬¡ç¨‹å¼ï¼Œæœƒç™¼ç¾ Address åˆä¸ä¸€æ¨£äº†ï¼Œé€™æ˜¯ç‚ºäº†é¿å…è¢«æ”»æ“Šï¼Œå°±æ˜¯ Address space layout randomization(ASLR) é€™æ¨£å¯ä»¥é¿å…æ”»æ“Šè€…ä½¿ç”¨è¨˜æ†¶é«”è£¡é¢çš„å‡½æ•¸ï¼Œä¾‹å¦‚: libc è£¡é¢çš„ system()ï¼Œå¦‚æœå¯ä»¥åŸ·è¡Œ system()ï¼Œé‚£éº¼å°±å¯ä»¥åŸ·è¡Œä»»æ„çš„æŒ‡ä»¤ OS æœƒéš¨æ©Ÿç”¢ç”Ÿæ¯å€‹ Section çš„ Address å¹¾ä¹æ‰€æœ‰çš„ OS éƒ½æ”¯æ´ ASLRï¼Œä¾‹å¦‚: Linux, BSD, Windows, MacOS ä½†æ˜¯ ASLR ä¹Ÿæœ‰ç¼ºé»ï¼Œå¦‚æœä¸ä½¿ç”¨ ASLR é‚£å°±å¯ä»¥æŠŠå¸¸ç”¨çš„ Function æ”¾åœ¨å›ºå®šçš„ä½ç½®ï¼Œé€™æ¨£å°±å¯ä»¥åŠ é€Ÿç¨‹å¼çš„åŸ·è¡Œ ç›®å‰å¤§éƒ¨åˆ†ç¡¬é«”éƒ½ä½¿ç”¨ phy.cache å¯ä»¥é™ä½é€™éƒ¨åˆ†çš„å½±éŸ¿ ç¾åœ¨çš„ Linux Kernel éƒ½æœƒä½¿ç”¨ ASLRï¼Œå³æ˜¯ KASLR Program in Memory ç›®å‰å¤§éƒ¨åˆ†çš„ä½œæ¥­ç³»çµ±è¨­è¨ˆä¸­ï¼ŒåŸ·è¡Œæª”èˆ‡åœ¨ Memory ä¸­çš„çµæ§‹å¹¾ä¹ä¸€æ¨£ï¼ŒOS åªéœ€è¦ Copy(mapping) å°±å¯ä»¥åŸ·è¡Œäº† ä¾‹å¦‚: Linux çš„ ELF(Executable and Linkable Format), Microsoft çš„ PE(Portable Executable) å°‡åŸ·è¡Œæª” Mapping 1:1 æ˜ å°„åˆ° Memoryï¼Œé€™æ¨£è®“ OS çš„å·¥ä½œèƒ½è®Šå¾—å¾ˆç°¡å–® å»¶ä¼¸é–±è®€: Memory Layout of Kernel and UserSpace in Linux. Process Life Cycle 3.3 Process Life Cycle ä¸‹é¢æ˜¯ä¸€å€‹ Unix Process Life Cycleï¼Œä½†åœ¨é€™è£¡åŠ å…¥äº†ä¸€äº› Linux çš„è§€å¿µ Parent Process é€šå¸¸æ˜¯ Shellï¼Œé€é fork() ç”¢ç”Ÿ Child Process Ready queue: ç•¶ä¸€å€‹æ–°çš„ Process ç”¢ç”Ÿæœƒé€²å…¥ Ready Queueï¼Œç­‰å¾… CPU è³‡æº Running: å¦‚æœ Scheduler é¸æ“‡åˆ°è©² Processï¼Œé‚£éº¼å°±æœƒé€²å…¥ Running ç‹€æ…‹ Waiting: åœ¨ Linux ä¸­ Waiting åˆ†ç‚ºå…©ç¨® Interruptible: å¯ä»¥è¢« Signal æ‰“æ–· Uninterruptible: ä¸èƒ½è¢« Signal æ‰“æ–·ï¼Œä½†æ˜¯å°‘æ•¸ä¾‹å¤–ä¸‹ä¾‹å¦‚ Kill -9 é‚„æ˜¯èƒ½å¤  Interruptible Terminate: é€™è£¡éœ€è¦ç”± OS å»å›æ”¶åˆ†é…çµ¦ Process çš„è³‡æºï¼Œä¾‹å¦‚: Memory, Kernel ä¸­å„²å­˜çš„ Process ç›¸é—œè³‡è¨Š Zombie: Linux ä¸­æœƒå‰©ä¸‹ä¸€å€‹å¤§ç´„ 4KB ~ 8KB çš„ Task structï¼Œç¨±ä½œ Zombie ä¿ç•™é€™å€‹ Zombie æ˜¯ç‚ºäº†è®“ Parent Process å¯ä»¥é€é wait() å–å¾— Child Process çš„è³‡è¨Šï¼Œ é€™è£¡å¦‚æœ Parent æ²’æœ‰æ­£ç¢ºçš„å›æ”¶ Child Processï¼Œä½†é‚„æ˜¯æŒçºŒé‹è¡Œï¼Œé€™æ¨£ Zombie å°±æœƒè¶Šä¾†è¶Šå¤šã€‚ ä½†å¦‚æœ Parent ä¹ŸçµæŸäº†ï¼Œé‚£éº¼ Zombie å°±æœƒè¢« init process å›æ”¶ï¼Œé€™æ¨£å°±ä¸æœƒæœ‰ Zombie Process #include &lt;stdlib.h&gt; #include &lt;sys/types.h&gt; #include &lt;unistd.h&gt; int main() { pid_t child_pid; /* Create a child process */ child_pid = fork(); if (child_pid &gt; 0) { /* Parent sleep */ sleep(60); } else { /* This is clild process will end immediately */ printf(\"Child pid %d\\n\", getpid()); exit(0); } return 0; } é€™å€‹ç¨‹å¼æœƒå°å‡º child_pidï¼Œæ­¤æ™‚å» top -p child_pid å°±å¯ä»¥çœ‹åˆ° child è®Šæˆ zombie ç‹€æ…‹ã€‚ fork() æœƒè¿”å› child pidï¼Œä½†åœ¨ child process ä¸­ child_pid æœƒæ˜¯ 0 3.4 Tack Contol Block(TCB, PCB) Process control block â‰ˆ Task control block Process control block(PCB) å°±æ˜¯ OS ç”¨ä¾†ç®¡ç† Process çš„è³‡æ–™çµæ§‹ï¼Œé€šå¸¸æœƒåŒ…å«ä»¥ä¸‹è³‡è¨Š: Process state: åŸ·è¡Œçš„ç‹€æ…‹ï¼Œä¾‹å¦‚: Running, Waiting, Ready CPU information: Process çš„ç‹€æ…‹ï¼Œä¾‹å¦‚: PC, Register Memory information: Memory ç‹€æ…‹ï¼Œä¾‹å¦‚: Text, Data section Schedule information: æ’ç¨‹è³‡è¨Šï¼Œä¾‹å¦‚: Priority I/O status information: I/O ç‹€æ…‹ï¼Œä¾‹å¦‚: File descriptor Using resource: Process ä½¿ç”¨çš„è³‡æºï¼Œä¾‹å¦‚: File, I/O device â€¦ 3.5 Three Scheduler Model Scheduler ä¸æ˜¯åªæœ‰ CPU Schedulerï¼Œé‚„æœ‰ Long-term Scheduler, Mid-term Scheduler: Long-term Scheduler(Job scheduler): æ±ºå®šå“ªäº› Process è¦é€²å…¥ Ready Queueï¼Œé€šå¸¸åœ¨å¾ˆå¤§å‹çš„ä¸»æ©Ÿä¸Šï¼Œä¾‹å¦‚: å°ç£æ‰ Linux ä¸­ä¸¦æ²’æœ‰ Long-term Schedulerï¼ŒTask ç”¢ç”Ÿå¾Œå°±æœƒé€²å…¥ Ready Queue Mid-term Scheduler(Swapper): ç•¶ Degree of Multiprogramming éé«˜æ™‚å¯èƒ½é€ æˆ(thrashing)ï¼Œå°‡ä¸€äº› Task swap out åˆ° Diskï¼Œç­‰åˆ°è³‡æºè¶³å¤ æ™‚å† swap in Linux Kernel ç›®å‰ä¹Ÿæ²’æœ‰ Mid-term Schedulerï¼Œä½† Linux ä¾ç…§ Task è¨˜æ†¶é«”çš„ä½¿ç”¨æƒ…æ³ï¼Œåœ¨ Memory ä¸è¶³æ™‚æœƒå°‡ä¸æ´»èºçš„ Task swap out åˆ° Disk Short-term Scheduler: CPU Scheduler å¤§éƒ¨åˆ†çš„ OS åªæœ‰ CPU Schedulerï¼Œé‡å°å„ç¨®äº‹ä»¶æœ‰å°ˆå±¬çš„ Waiting Queueï¼Œä¾‹å¦‚: ä¾‹å¦‚ I/O, Semaphore thrashing(è¼¾è½‰ç¾è±¡) æŒ‡çš„æ˜¯ç•¶è™›æ“¬è¨˜æ†¶é«”è¢«ä½¿ç”¨éåº¦ï¼Œå°è‡´å¤§éƒ¨åˆ†çš„å·¥ä½œåœ¨è™•ç† Page fault æ‰€é€ æˆçš„ Page Replacementï¼Œé€™æ¨£å°±æœƒé€ æˆ CPU æ•ˆèƒ½ä¸‹é™ 3.6 Context Switch(ctx-sw) ç›®å‰ä¸»æµçš„ OS éƒ½æ˜¯åªæœ‰ Task åŸ·è¡Œåœ¨ Kernel Space æ™‚æ‰èƒ½é€²è¡Œ Context switch Context switch ä¸»è¦æ˜¯åˆ‡æ› Register èˆ‡ Memory çš„å…§å®¹ Context switch çš„ overhead ä¸»è¦æ˜¯ç™¼ç”Ÿåœ¨ Cache memory çš„æ›´æ–° é¦–å…ˆ TaskA Mode change åˆ° Kernel mode ç„¶å¾Œå°‡ TaskA çš„è³‡è¨Š(TCB) å„²å­˜èµ·ä¾† è¼‰å…¥ TaskB çš„è³‡è¨Š æœ€å¾Œ TaskB Mode change åˆ° User mode Scheduler ä¹Ÿå°±æ˜¯ç­–ç•¥çš„éƒ¨åˆ†ä¸»è¦æ˜¯ç”¨ C å¯«çš„ï¼Œä½†åˆ‡æ›çš„éƒ¨åˆ†æ˜¯ç”¨ Assembly å¯«çš„ï¼Œå› ç‚ºè¦ç›´æ¥æ“ä½œ Register 3.7 Processes are divided into I/O and CPU I/O Bound process - I/O timeÂ Â» CPU time ä¾‹å¦‚: ftp server CPU Bound process - CPU timeÂ Â» I/O time ä¾‹å¦‚: image processing å¦‚æœå¯ä»¥é¸æ“‡çš„è©±ï¼Œè®“ç³»çµ±ä¸­åŒæ™‚å­˜åœ¨ I/O Bound process èˆ‡ CPU Bound processï¼Œå¯ä»¥è®“ç³»çµ±çš„æ•ˆç‡æœ€å¤§åŒ– é€šå¸¸ I/O Bound çš„å„ªå…ˆæ¬Šæ¯”è¼ƒé«˜ï¼Œå› ç‚ºè¶•å¿«è®“ CPU ç™¼å‡ºå‘½ä»¤çµ¦ I/O deviceï¼Œç„¶å¾Œå°±å¯ä»¥å»åŸ·è¡Œå…¶ä»–çš„ Task I/O Bound é€šå¸¸åªéœ€è¦ä¸€å°éƒ¨åˆ†çš„ CPU è³‡æºï¼Œå¦‚æœè¨­å®šæˆ CPU Bound å„ªå…ˆæ¬Šè¼ƒé«˜ï¼Œåè€Œæœƒé€ æˆ I/O Bound çš„ Task åœ¨çµæŸä¸€æ®µ I/O å¾Œé‚„è¦ç­‰å¾… CPU Bound çš„ Task çµæŸ é€ æˆ CPU ä½¿ç”¨ç‡ä¸‹é™ 3.8 Process Creation Linux ä¸­å¯ä»¥é€é fork, vfork, clone ä¾†ç”¢ç”Ÿ Process å¯¦éš›ä¸Šé€™ä¸‰å€‹åœ¨ Kernel ä¸­éƒ½æ˜¯å‘¼å« do_fork() ä¾†å®Œæˆ Linux ä¸­ pid 0 æ˜¯ idle processï¼Œå„ªå…ˆæ¬Šæœ€ä½ï¼Œåªè² è²¬è®“ CPU é€²å…¥ç¡çœ ç‹€æ…‹ é€šå¸¸ä¹Ÿå«åš swapperï¼Œæ¯é¡† core æœ‰ä¸€å€‹è‡ªå·±çš„ idle task pid 1 æ˜¯ç³»çµ±ä¸­ç¬¬ä¸€å€‹ user space çš„è¡Œç¨‹ï¼Œè² è²¬ä½œæ¥­ç³»çµ±çš„åˆå§‹åŒ– ä¾‹å¦‚: ç•¶é›»è…¦å•Ÿå‹•æ™‚çš„ Daemon Process fork å‡ºçš„ Process å…¶ç¨‹å¼ç¢¼èˆ‡çˆ¶ Process å®Œå…¨ç›¸åŒï¼Œå¦‚æœè¦è¼‰å…¥æ–°çš„ç¨‹å¼ç¢¼åˆ°è©² process ä¸­ï¼Œä½¿ç”¨ execve ç³»çµ±å‘¼å« å¦‚æœéœ€è¦å¤§é‡çš„åŸ·è¡Œ execveï¼Œé‚£ä½¿ç”¨ vfork æœƒæ¯”è¼ƒå¥½ï¼Œå› ç‚º vfork æœƒ Block parent process pid 0 Process(idle process) ä¹Ÿæ˜¯å”¯ä¸€æ²’æœ‰ä½¿ç”¨ fork() ç”¢ç”Ÿçš„ Processï¼Œå› ç‚º pid 0 æ˜¯ç³»çµ±å•Ÿå‹•æ™‚å°±ç”¢ç”Ÿçš„ Process ä½¿ç”¨ pstree -p å°±èƒ½çœ‹åˆ°ï¼Œæ‰€æœ‰çš„ Process éƒ½æ˜¯ç”± systemd(pid 1) ç”¢ç”Ÿçš„ ä¾‹å¦‚: å¾ bash å»åŸ·è¡Œ ls æœƒæœ‰ä»¥ä¸‹çš„æµç¨‹ bash fork å‡ºä¸€å€‹ child processï¼Œç„¶å¾Œ parent process wait() child process é€é execve() å»åŸ·è¡Œ ls ls åŸ·è¡Œå®Œå¾Œï¼Œé€é exit() çµæŸï¼Œå›åˆ° parent process 3.9 Process Termination åœ¨ UNIX-Like OS ä¸­ï¼Œå¦‚æœä¸€å€‹ Process Terminateï¼Œæœƒè®Šæˆ Zombie ç‹€æ…‹ï¼ŒZombie Process æ˜¯ç„¡æ³•è¢« kill çš„ï¼Œåªèƒ½é€é Parent Process ä½¿ç”¨ wait() ä¾†å›æ”¶ é€é wait() Parent Process å¯ä»¥å–å¾— Child Process çš„çµæŸç‹€æ…‹ï¼Œä¾‹å¦‚: ä½¿ç”¨äº†å¤šå°‘ç³»çµ±è³‡æº åŸºæ–¼ç‰¹å®šçš„éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°‡ Process kill æ‰ kill -9 pid æœƒç›´æ¥ç™¼é€ SIGKILL(signal 9) çµ¦è©² Processï¼Œè®“è©² Process ç«‹å³çµæŸ kill pid å‰‡æ˜¯ç™¼é€ SIGTERM(signal 15) çµ¦è©² Processï¼Œè®“è©² Process å„ªé›…çš„çµæŸè‡ªå·± æœ‰äº› OS è¨­è¨ˆ Parent process kill æ‰å¾Œï¼ŒChild process ä¹Ÿæœƒè¢« kill æ‰ UNIX-Like OS ä¸­ï¼Œå¦‚æœ Parent process è¢« kill æ‰ï¼ŒChild process æœƒè¢« init process(pid 1) æ¥ç®¡ init å…§éƒ¨æœ‰ä¸€å€‹ç„¡çª®è¿´åœˆï¼Œæœƒä¸æ–·çš„åŸ·è¡Œ wait()ï¼Œé€™æ¨£å°±å¯ä»¥å›æ”¶æ‰€æœ‰çš„ Zombie Process ä¾‹å¦‚æˆ‘å€‘å¯ä»¥é€é nohup æˆ– screen ä¾†è®“ Process åœ¨èƒŒæ™¯åŸ·è¡Œï¼Œé€™æ¨£å°±ä¸æœƒå› ç‚º Terminal è¢«é—œé–‰è€Œè¢« kill æ‰ Communication model between Process &amp; Process OS ä¿è­‰æ¯å€‹ Process ä¹‹é–“éƒ½å¯ä»¥ç¨ç«‹çš„é‹è¡Œ ä½†å¦‚æœçœŸçš„ Process éƒ½å®Œå…¨ç¨ç«‹é‹è¡Œï¼Œé‚£ç³»çµ±å°±æœƒè®Šå¾—å¾ˆé›£ä½¿ç”¨ ä¾‹å¦‚: copy-paste æ‰€ä»¥ OS æœƒæä¾›ä¸€äº›æ–¹æ³•è®“ Process communication 3.10 Interprocess Communication(IPC) IPC æ˜¯æŒ‡å¯ä»¥è®“å…©å€‹ç¨ç«‹çš„ Process äº’ç›¸å‚³éè¨Šæ¯ï¼Œå‚³éè¨Šæ¯çš„ç›®çš„å¤šåŠæ˜¯ å‚³éè³‡è¨Šï¼Œä¾‹å¦‚: copy-pasteã€information sharing åŒæ­¥ï¼Œä¾‹å¦‚: Parallel computing æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œä¾‹å¦‚: å°‡ Request èˆ‡ Worker åˆ†é–‹ IPC Model é€™è£¡è«‡çš„ä¸»è¦æ˜¯ IPC çš„åˆ†é¡ï¼Œè€Œä¸æ˜¯ IPC çš„å¯¦ä½œ å¦‚ä½•åœ¨ Process ä¹‹é–“å»ºç«‹ IPC å¯ä»¥å»ºç«‹å¤šå°‘æ¢ IPC åœ¨ Process ä¹‹é–“ å¯å¦å¤šå€‹ Process åŒæ™‚ä½¿ç”¨åŒä¸€å€‹ IPC IPC æœ‰æ²’æœ‰å®¹é‡é™åˆ¶ IPC ä¸­æ¯ä¸€å€‹ Message çš„å¤§å°æ˜¯å¦æ˜¯å›ºå®šçš„ IPC æ˜¯å–®å‘çš„é‚„æ˜¯é›™å‘çš„ Direct communication(ç›´æ¥å‚³é): æ¯å€‹éœ€è¦é€šè¨Šå¿…é ˆæ˜ç¢ºçš„æŒ‡å®šæ¥æ”¶è€…æˆ–ç™¼é€è€… å¯ä»¥æ˜¯å–®å‘ä¹Ÿå¯ä»¥æ˜¯é›™å‘çš„ ä¾‹å¦‚: Pipe Indirect communication(é–“æ¥å‚³é): Message æ˜¯ç™¼é€åˆ° Mailbox ä¸­ç„¶å¾Œç”± Receiver è‡ªè¡Œå–å‡º æ˜¯é›™å‘çš„ï¼Œä¸¦ä¸”å¯ä»¥å»ºç«‹å¤šæ¢ IPC æˆ–è®“å¤šå€‹ Process ä¸€èµ·æ¥æ”¶ å› ç‚ºæœ‰ Mailbox æ‰€ä»¥å°±è¦è€ƒæ…® Buffer çš„å•é¡Œ æ²’æœ‰ Buffer: é‚£å°±å¿…é ˆç­‰åˆ° Recv çµæŸï¼Œç™¼é€è€…æ‰èƒ½ç¹¼çºŒåŸ·è¡Œ å„ªé»æ˜¯é€Ÿåº¦é€šå¸¸æ¯”è¼ƒå¿«ï¼Œé€é Scheduler æˆ–è¨±æŸäº›è³‡è¨Šå¯ä»¥æ”¾åœ¨ Register ä¸­ç›´æ¥å‚³é å›ºå®š Buffer: ç™¼é€è€…å°‡è³‡æ–™ Send åˆ° Buffer ä¸­å°±å¯ä»¥ç¹¼çºŒåŸ·è¡Œ å¤šå€‹ Buffer: ç™¼é€è€…å¯ä»¥ä¸€ç›´é€è³‡æ–™ï¼Œä½†é€šå¸¸æœƒé™åˆ¶ç™¼é€çš„æ•¸é‡é¿å…æƒ¡æ„ç¨‹å¼ Direct communication é€šå¸¸ä½¿ç”¨ Process id ä¾†å°‡è¨Šæ¯ä¸Ÿçµ¦å°æ–¹: send(P, message) receive(Q, message), receive(&amp;Q, message) Receiver å¯ä»¥æŒ‡å®šæ˜¯è¦å¾å“ªè£¡æ”¶ï¼Œæˆ–è€…æ”¶ä»»ä½•è¨Šæ¯ï¼Œç”± OS ä¾†å‘ŠçŸ¥æ˜¯èª°é€çš„ Feature ä¸éœ€è¦ç‰¹åˆ¥çš„å»ºç«‹é€£æ¥ ç”±æ–¼ä½¿ç”¨ Process id ä¾†å‚³éè¨Šæ¯ï¼Œå› æ­¤åªèƒ½æ˜¯ä»»å…©å€‹ Process ä¹‹é–“å‚³éè¨Šæ¯ ç”± P å’Œ Q å…©å€‹å–®é …å‚³éä¾†çµ„åˆæˆä¸€å€‹é›™å‘å‚³é Indirect communication éœ€è¦ç”±ä½¿ç”¨è€…ä¾†å»ºç«‹å‚³è¼¸é€šé“ ä¾‹å¦‚: Linux çš„ mkfifo, pipe ä¾‹å¦‚: TCP/IP (å¦‚æœåœ¨åŒä¸€å°æ©Ÿå™¨ä¸Šå‚³è¼¸è³‡æ–™ï¼Œä¸æœƒç¶“é Network card) Feature æºé€šçš„è¡Œç¨‹å¯ä»¥å»ºç«‹å¤šå€‹é€šé“ï¼Œå¯ä»¥ç°¡åŒ–è¨­è¨ˆè¤‡é›œåº¦ å¯ä»¥ã€Œå¤šå€‹å‚³è¼¸è¡Œç¨‹ã€å°ã€Œå¤šå€‹æ¥æ”¶è¡Œç¨‹ã€ï¼Œå¸¸è¦‹æ–¼ Server çš„è¨­è¨ˆ é›™å‘ï¼Œä¾‹å¦‚: Shared memory å–®å‘ï¼Œä¾‹å¦‚: pipe Problems by many-to-many å¦‚æœæœ‰ã€Œå¤šå€‹å‚³è¼¸è¡Œç¨‹ã€å°ã€Œå¤šå€‹æ¥æ”¶è¡Œç¨‹ã€ ç”±èª°æ¥æ”¶ æ˜¯å¦ç”±ã€Œé€šé“ç®¡ç†ç¨‹å¼ã€æ±ºå®š? èª°å…ˆç™¼èµ·ï¼Œå°±ç”±èª°æ”¶ æ”¶äº†è¨Šæ¯ä¹‹å¾Œæ€éº¼è™•ç† ç§»é™¤è¨Šæ¯ï¼Œé€šå¸¸ç”¨æ–¼ Server å°‡ Task äº¤çµ¦ä¸€å€‹ Sub-Server ä¸€ç›´å­˜åœ¨ï¼Œé¡ä¼¼æ–¼å»£æ’­ Blocking &amp; Non-Blocking å¦‚æœæœ‰è¶³å¤ å¤šçš„ Buffer çš„è©±ï¼ŒProcess é–“çš„é€šè¨Šå¯ä»¥æ˜¯ Non-blocking é€å‡º Message å¾Œ Process ç¹¼çºŒä¸‹ä¸€å€‹å·¥ä½œ ä¾‹å¦‚: signal å¦‚æœ Buffer ä¸è¶³ï¼Œæˆ–è€…æ ¹æœ¬æ²’æœ‰ Buffer çš„è©±ï¼Œå°±åªèƒ½æ˜¯ Blocking é€å‡º Message å¾Œå¿…é ˆç­‰å¾… Receiver æ¥æ”¶å®Œç•¢ï¼Œæ‰èƒ½ç¹¼çºŒå·¥ä½œ é€™å€‹çš„å¥½è™•æ˜¯å¯ä»¥ç¢ºèªå°æ–¹å·²ç¶“æ”¶åˆ° Message 3.11 Communication method Direct or Indirect Shared Memory åœ¨ Physical memory ä¸Š Process A å’Œ Process B æ˜¯ä½¿ç”¨ä¸åŒçš„å€æ®µï¼Œä½†æ˜¯ Shared memory å°±ä½¿ç”¨åŒä¸€å€æ®µ è¦æ³¨æ„é€™è£¡æ˜¯ Physical memoryï¼Œä½†åœ¨ Process ä¸­æ˜¯ä¸åŒçš„ Logical address åœ¨ Linux ä¸Šå¯ä»¥é€é mmap() ä¾†å»ºç«‹ Shared memory Message Passing åœ¨ Process A æ™‚å‘¼å« Kernel copy è³‡æ–™åˆ° Kernel space Context switch åˆ° Process B æ™‚ï¼ŒKernel å†å°‡è³‡æ–™ copy åˆ° Process B çš„ Memory Producer-Consumer problem é€™è£¡å…ˆç°¡å–®è¨è«– Producer-Consumer Problem çš„æ¦‚å¿µï¼Œå¾Œé¢æœƒå†è¨è«–å¦‚ä½•è§£æ±º å‡å¦‚æœ‰å…©å€‹ Process å…±äº«ä¸€å€‹å›ºå®šå¤§å°çš„ Bufferï¼ŒProducer æœƒä¸æ–·çš„ç”¢ç”Ÿè³‡æ–™ï¼Œç„¶å¾Œæ”¾åˆ° Buffer ä¸­ç”± Consumer ä¾†å–å‡º å¦‚æœ Buffer æ»¿äº†ï¼ŒProducer å°±å¿…é ˆç­‰å¾… Consumer å–å‡ºè³‡æ–™ å¦‚æœ Buffer ç©ºäº†ï¼ŒConsumer å°±å¿…é ˆç­‰å¾… Producer ç”¢ç”Ÿè³‡æ–™ é€™æ¨£å¦‚æœæ²’æœ‰è¨­è¨ˆå¥½å°±å®¹æ˜“é€ æˆ Deadlock å¦‚æœæ˜¯å–®å°å–®çš„ Producer-Consumerï¼Œå¯ä»¥é€éä¸€å€‹ç’°ç‹€ Linked list è§£æ±ºï¼Œè©³æƒ…è«‹çœ‹ OS-CH03-é‡è¦çš„ç”Ÿç”¢æ¶ˆè²»å•é¡Œ Thread concept 3.12 Context switch main overhead The overhead of context-switch Store/restore the register file (~1KB) TLB miss (~1KB) CPU cache miss (~1MB) åœ¨ Context ä¸­æœ€ä¸»è¦çš„æ¶ˆè€—å°±æ˜¯ Cache missï¼Œé€™å–æ±ºæ–¼ç¡¬é«”çš„æ”¯æ´ Virtual cache: å°±éœ€è¦æŠŠ Flush Cacheï¼Œé€é MMU å°‡ Virtual address å°æ‡‰åˆ° Physical address Physical cache: ä¸éœ€è¦ Flush cache éœ€è¦ MMU è½‰æ› Virtual address æˆ Physical addressï¼Œæ‰èƒ½æ”¾å…¥ Cacheï¼Œè½‰æ›çš„éç¨‹å°±æœƒæœ‰ Latency ä¾‹å¦‚: CPU Cache miss åœ¨ç­‰å¾… L2 Cache æŠ“åˆ°è³‡æ–™ï¼Œæˆ–æ˜¯ L1 miss ä¹‹å¾Œéœ€è¦ MMU è½‰æ› L2 ä¹‹å¾Œæ‰èƒ½åšå­˜å– ä¾‹å¦‚: Process A/Bï¼Œé€²è¡Œäº†ä¸€å€‹ A -&gt; B -&gt; A çš„åˆ‡æ›ï¼Œå®ƒå€‘å„è‡ªåŸ·è¡Œçš„æ™‚å€™éƒ½æœƒæŠŠè³‡æ–™æ”¾å…¥ Cacheï¼ŒA åªèƒ½æœŸæœ› B æ²’æœ‰è¦†è“‹æ‰éœ€è¦çš„è³‡æ–™ Cache æ˜¯å¦æ”¯æ´ ASID (Address Space Identifier) åœ¨ TLB ä¸­åŠ å…¥ä¸€å€‹ Process IDï¼Œåªæœ‰ç•¶ ASID èˆ‡ Page number éƒ½ç›¸åŒæ™‚ï¼Œæ‰æœƒ Hit 3.13 Thread memory Thread åœ¨åŒä¸€å¡Š Virtual memory ä¸­åŸ·è¡Œï¼Œä½†æ˜¯æœ‰å„è‡ªçš„ Stack å› ç‚ºåœ¨åŒä¸€å¡Š Virtual memory ä¸­åŸ·è¡Œï¼Œæ‰€ä»¥ Thread1 å¯ä»¥å­˜å– Thread2 çš„ Stack è¦åšé€™æ¨£çš„å­˜å–è¦æ…é‡ï¼Œå› ç‚º Stack æœƒéš¨è‘— Function call è€Œè®Šå‹• Thread Local Storage åŒæ¨£çš„ Thread ä¹‹é–“ä¹Ÿæœƒæœ‰å„è‡ªçš„ Local variableï¼Œé€™äº› Local variable æœƒæ”¾åœ¨ Thread Local Storage ä¸­ï¼Œ é€™æ˜¯ç”± Compiler ä¾†è¨­è¨ˆçš„ï¼Œè®“æ¯å€‹ TLS åç§»é‡éƒ½ä¸ä¸€æ¨£ï¼Œé€™æ¨£å°±èƒ½è®“ Thread å­˜å–è‡ªå·±çš„ Local variableã€‚ 3.14 Thread history Many to One One to One Many to Many Many to One å¤šå°ä¸€å°±æ˜¯å…©å€‹ Thread å…±ç”¨ä¸€å€‹ PCBï¼Œé€™æ¨£çš„è©±å¦‚æœå…¶ä¸­ä¸€å€‹ Thread è·‘å»åš I/O çš„è©±ï¼Œé‚£æ•´å€‹ Process å°±æœƒè¢« Blockï¼Œé€™æ¨£å°±æœƒé€ æˆæ•´å€‹ Process éƒ½è¢« Blockã€‚ åŒæ™‚ç”±æ–¼ OS ä¸æœƒçŸ¥é“ PCB ä¸Šçš„æ˜¯å…©å€‹ Threadï¼Œæ‰€ä»¥ç„¡æ³•å†å¤šæ ¸å¿ƒä¸ŠåŸ·è¡Œï¼Œé€™æ¨£å°±æœƒé€ æˆæ•ˆèƒ½çš„ä¸‹é™ã€‚ Green thread Green thread æ˜¯ç‚ºäº†åœ¨åº•å±¤çš„ OS ä¸æ”¯æ´ Thread çš„æƒ…æ³ä¸‹ï¼Œé€é Library ä¾†æ¨¡æ“¬ Thread çš„è¡Œç‚ºï¼Œä½†é€™æ¨£å°±åªèƒ½ä½¿ç”¨ Many to One çš„æ¨¡å‹ï¼Œä¾‹å¦‚: Java çš„ Thread é€šå¸¸åªæœ‰åœ¨ OS Kernel ä¸æ”¯æ´ Multi-thread çš„æƒ…æ³ä¸‹ï¼Œæ‰æœƒä½¿ç”¨ Many to Oneï¼Œç”±æ–¼æ‰€æœ‰çš„ User thread åœ¨ Kernel éƒ½åªæœ‰ä¸€å€‹ PCBï¼Œ æ‰€ä»¥å¦‚æœ Thread è·‘å»åš Block çš„æ“ä½œæœƒå°è‡´å…¶ä»– Thread ä¹Ÿè¢« Blockã€‚ä¸¦ä¸”å°±ç®—æœ‰å¾ˆå¤š Processor é€šå¸¸ä¹Ÿåªæœ‰ä¸€å€‹ Thread åœ¨åŸ·è¡Œï¼Œå…¶ä»– Thread éƒ½åœ¨ç­‰å¾…ã€‚ One to One é€šå¸¸æ˜¯æœ€å¤š OS ä½¿ç”¨çš„ Modelï¼Œæ¯å€‹ Thread éƒ½æœ‰è‡ªå·±çš„ PCBï¼Œè¦é€é Memory control block ä¾†åˆ¤æ–·æ˜¯ Thread é‚„æ˜¯ Processï¼Œ å¦‚æœå…±ç”¨ Memory control block çš„è©±ï¼Œé‚£å°±åˆ¤å®šä»–æ˜¯ä¸€å€‹ Threadã€‚ ç”±æ–¼æ¯å€‹ Thread éƒ½æœ‰è‡ªå·±çš„ PCBï¼Œæ‰€ä»¥å¯ä»¥åœ¨å¤šæ ¸å¿ƒä¸ŠåŸ·è¡Œ å¤§éƒ¨åˆ†éƒ½æ˜¯ Non-blockingï¼Œæ‰€ä»¥åœ¨è™•ç† Block çš„ä»»å‹™ä¸Šæœƒå¾ˆæœ‰å½ˆæ€§ Many to Many ä¸Šé¢çš„ç¨±ä½œ User threadï¼Œä¸‹é¢ç¨±ä½œ Kernel threadï¼Œå°æ‡‰çš„æ–¹å¼æœ‰å¾ˆå¤šç¨®ï¼Œä¾‹å¦‚ä¸‹åœ–ä»£è¡¨ä¸Šé¢çš„ User thread å¯ä»¥åŒæ™‚ç™¼å‡ºåŒç­‰ Kernel thread æ•¸é‡çš„ System callï¼Œ ä½†ç¼ºé»æ˜¯éå¸¸è¤‡é›œä¸¦å¯«ä¸å¥½å¯«ï¼Œä¸¦ä¸”ä¸æ˜“ç†è§£ï¼Œè®“ç¨‹å¼è¨­è¨ˆè€…å¾ˆé›£é€²è¡Œå„ªåŒ–ã€‚ çœ‹èµ·ä¾†æ˜¯æœ€æœ‰å½ˆæ€§çš„ Thread Sun Solaris 9 ä¹‹å‰æ”¯æ´ Many to Many Model Sun Solaris 10 ä¹‹å¾Œæ”¹ç‚ºä¸»è¦æ”¯æ´ One to One Model Last Edit 10-21-2023 18:52"
  },"/jekyll/2023-10-17-container_of.html": {
    "title": "Note | Linux Kernel Macro container_of &amp; offsetof",
    "keywords": "OS Jekyll",
    "url": "/jekyll/2023-10-17-container_of.html",
    "body": "container_of é€™å€‹ Macro åœ¨ Linux kernel æœƒç¶“å¸¸è¢«ç”¨åˆ°ï¼Œå› æ­¤å…ˆç†è§£ container_of çµ•å°éå¸¸é‡è¦ container_of container_of çš„å®šç¾©åœ¨ &lt;include/linux/container_of.h&gt;ï¼Œä¸¦ä¸”éœ€è¦ä½¿ç”¨ Marco offsetofï¼Œcontainer_of å¯ä»¥é€éä¸€å€‹ struct ä¸­çš„æŸå€‹æˆå“¡ä¾†ç²å¾—è©² struct çš„èµ·å§‹ä½ç½®ï¼Œ é€™æ¨£çš„åšæ³•æœƒåœ¨ Linux kernel ä¸­è¢«é »ç¹çš„ä½¿ç”¨åˆ°ã€‚ ä¾‹å¦‚ Linux kernel ä¸­çš„ &lt;lib/rbtree.c&gt;, &lt;include/linux/list.h&gt;ï¼Œåœ¨ list.h ä¸­ container_of è¢«ç”¨ä¾†æ‰¾å°‹ list_last_entry, list_first_entryï¼Œ è€Œåœ¨ rbtree.c ä¸­å‰‡å¯ä»¥ç”¨ä¾†æ‰¾å°‹çˆ¶ç¯€é»ã€‚ /** * container_of - cast a member of a structure out to the containing structure * @ptr: the pointer to the member. * @type: the type of the container struct this is embedded in. * @member: the name of the member within the struct. * */ #define container_of(ptr, type, member) ({ \\ const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr); \\ (type *)( (char *)__mptr - offsetof(type,member) );}) typeof( ((type *)0 -&gt; member) ): å…ˆå®£å‘Šä¸€å€‹ (type *)0 (struct çš„ Null æŒ‡æ¨™)ï¼Œç„¶å¾ŒæŒ‡å‘ struct ä¸­çš„è©² memberï¼Œç„¶å¾Œé€é typeof() ç²å¾— member çš„ type const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr): å®£å‘Šè©² member type çš„ pointer *__mptr å°±èƒ½æŒ‡å‘ ptr æ‰€æŒ‡å‘çš„ä½ç½® (char *)__mptr å°‡ __mptr è½‰æ›ç‚º charï¼Œå› ç‚º char é•·åº¦ç‚º 1 byteï¼Œé€™æ¨£æ‰èƒ½æ­£ç¢ºåšä¹‹å¾Œé‹ç®— offsetof(type,member) æœƒè¿”å›å¾ struct èµ·å§‹ä½ç½®åˆ° member çš„åç§»é‡(byte) (type *)( (char *)__mptr - offsetof(type,member) ) æœ€å¾Œå°‡ __mptr - offset = struct çš„èµ·å§‹ä½ç½®ï¼Œç„¶å¾Œè½‰å› type* ä¸‹åœ–æ˜¯å¦‚ä½•é€é Offset æ‰¾åˆ° Struct èµ·å§‹ä½å€çš„èªªæ˜: å»¶ä¼¸é–±è®€: Rationale behind the container_of macro in linux/list.h, What is the purpose of __mptr in latest container_of macro? å»¶ä¼¸é–±è®€è§£é‡‹äº†ç‚ºä»€éº¼è¦å¦å¤–å»å®£å‘Š __mptrï¼Œæˆ‘ä¹Ÿå¥½å¥‡å¦‚æœå·²ç¶“æ‹¿åˆ° ptr ç‚ºä»€éº¼é‚„è¦ç‰¹åˆ¥å»ä½¿ç”¨ (type *)0 -&gt; memberï¼Œé€™æ¨£çš„æ–¹å¼ä¾†ç²å– member typeï¼Œå¦‚æœå°‡å…¶æ”¹ç‚ºä»¥ä¸‹ç¨‹å¼ç¢¼ï¼Œ ä¸€æ¨£å¯ä»¥é€²è¡Œä½¿ç”¨: Type çš„æª¢æŸ¥ï¼Œé€™æ¨£å¯ä»¥å¢åŠ å®‰å…¨æ€§ï¼Œç¢ºä¿ ptr çœŸçš„èˆ‡ member å‹åˆ¥ç›¸åŒ Kernel ä½¿ç”¨çš„ C standard æœ‰å¯èƒ½å°é€™ç¨®å¯«æ³•è·³å‡º Warning #define container_of(ptr, type, member) ({ \\ (type *)( (char *)ptr - offsetof(type,member) );}) Last Edit 10-18-2023 23:55"
  },"/jekyll/2023-10-10-test_case_generation.html": {
    "title": "Testing | Test Case Generation",
    "keywords": "software software_qualitiy Jekyll",
    "url": "/jekyll/2023-10-10-test_case_generation.html",
    "body": "Software testing course notes from CCU, lecturer Nai-Wei Lin. Test case çš„ç”¢ç”Ÿæ–¹å¼å¯èƒ½æ˜¯ç„¡çª®ç„¡ç›¡çš„ï¼Œå› æ­¤ä¹Ÿéœ€è¦ä¸€äº›ç­–ç•¥ä¾†å¹«åŠ©ç”¢ç”Ÿ Test case ä»¥ä¸‹æ˜¯æœ¬ç« ç¯€ä¸»è¦ä»‹ç´¹çš„ç›®æ¨™ï¼Œé€™å€‹ç« ç¯€æœ€å¾Œçš„åŸºæ–¼é™åˆ¶å¼çš„æ¸¬è©¦æœƒä½¿ç”¨ ECLiPSeclp ä¾†é€²è¡Œå¯¦ä½œï¼Œä¸æœƒåœ¨é€™è£¡ä»‹ç´¹ï¼Œ æœƒå¦å¤–é–‹ä¸€ç¯‡è¬›è¿°å¦‚ä½•ä½¿ç”¨ Constraint Logic Programming ä¾†ç”Ÿæˆæ¸¬è©¦æ¡ˆä¾‹ã€‚ Test case generation Equivalence class partitioning Boundary value analysis Domain specific information Constraint-based testing Test case generation çš„ç›®æ¨™æ˜¯å¾å¯èƒ½ç„¡çª®(possibly infinite) Collection of candidate test casesï¼Œ é¸å‡ºç›¡å¯èƒ½å°‘(Few)ä¸¦ä¸”æœ‰æ•ˆ(Effective)çš„ Test case Domain knowledge åœ¨æ¸¬è©¦ç‰¹å®šé ˜åŸŸçš„æ‡‰ç”¨æ™‚èƒ½èµ·åˆ°éå¸¸é—œéµçš„ä½œç”¨ Two Main Issues é€™å°±æ¶‰åŠå…©å€‹ä¸»è¦çš„å•é¡Œï¼Œå¯ä»¥é€éä¸€äº›åŸå‰‡ä¾†è§£æ±º: Few(å°‘): å° Input domains æ‰€æœ‰çš„ Value é€²è¡Œæ¸¬è©¦æ˜¯ä¸å¯èƒ½çš„ï¼Œæˆ‘å€‘åªèƒ½æŒ‘é¸ä¸€éƒ¨åˆ†çš„ Subset ä¾†æ¸¬è©¦ Equivalence class partitioning(ç­‰åƒ¹é¡åˆ¥åŠƒåˆ†) Test coverage criteria(æ¸¬è©¦è¦†è“‹æ¨™æº–) Effective(æœ‰æ•ˆ): æˆ‘å€‘å¸Œæœ›é¸æ“‡ä¸€å€‹ Subsetï¼Œèƒ½å¤ æ‰¾åˆ°æœ€å¤šçš„ Errors Boundary value analysis(é‚Šç•Œå€¼åˆ†æ) æ‹¿ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹å¼ç‚ºä¾‹ï¼Œå…¬å¼è§£ç‚º: $ax^2 + bx + c = 0$, $r = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$ å°‡æ¯å€‹ Input variable ä»¥ float(32 bit) è¡¨ç¤ºï¼Œæ‰€æœ‰å¯èƒ½çš„è¼¸å…¥å€¼æ•¸é‡å°‡æœƒæ˜¯: $2^{32} + 2^{32} + 2^{32} = 2^{96}$ 3.1 Equivalence Class Partitioning ä¸€çµ„ç²¾å¿ƒé¸æ“‡çš„è¼¸å…¥å€¼æ‡‰è©²èƒ½å¤ è¦†è“‹è¨±å¤šå…¶ä»–è¼¸å…¥å€¼ é€™ä»£è¡¨æˆ‘å€‘æ‡‰è©²æŠŠ Input domains(è¼¸å…¥åŸŸ) åŠƒåˆ†ç‚ºæœ‰é™æ•¸é‡çš„ Equivalence classes(ç­‰åƒ¹é¡åˆ¥) è€Œæ¸¬è©¦æ¯å€‹ Equivalence class ä¸­çš„ Representative value(ä»£è¡¨å€¼) å°±ç­‰æ–¼æ¸¬è©¦äº† Equivalence class ä¸­çš„æ‰€æœ‰å…¶ä»–å€¼ 3.1.1 Valid and Invalid Equivalence Classes Equivalence classes é€šå¸¸é€é Input constratint(è¼¸å…¥é™åˆ¶) ä¾†åŠƒåˆ† Input domain(è¼¸å…¥åŸŸ) é€™è£¡æœƒæœ‰å…©ç¨® Equivalence classesï¼ŒValid å’Œ Invalid Valid: ä»£è¡¨ç¨‹å¼çš„æœ‰æ•ˆè¼¸å…¥ Invalid: ä»£è¡¨æ‰€æœ‰å…¶ä»–å¯èƒ½çš„ç‹€æ…‹ An Example: If an input constraint specifies a range of values (e.g., the count can be from 1 to 999), it identifies one valid equivalence class (1 â‰¤ count â‰¤ 999) and two invalid equivalence classes (count &lt; 1 and count &gt; 999) 3.1.2 Partitioning Equivalence Classes å¦‚æœç¨‹å¼ä¸­çš„ Valid/Invalid Equivalence classes ä¸¦ä¸è¢«ç¨‹å¼ä»¥ç›¸åŒæ–¹å¼è™•ç†ï¼Œå‰‡éœ€è¦åŠƒåˆ†æ›´å¤šçš„ Equivalence classes å¦‚æœæˆ‘å€‘æœ‰ä¸€å€‹è¼¸å…¥å¹´é½¡ Y çš„ç¨‹å¼: Invalid: çš„è¼¸å…¥å¯èƒ½æœƒè¢«åŠƒåˆ†ç‚º Y &lt; 0 å’Œ Y &gt; 1000 (å› ç‚ºæ ¹æœ¬ä¸æœƒæœ‰äººæ´»åˆ° 1000 æ­²) Valid: æˆ‘å€‘ä¹Ÿå¯ä»¥æŠŠ Y &gt; 65 è·Ÿ Y &lt;= 65 å€åˆ†é–‹ä¾†ï¼Œå› ç‚ºå¤§æ–¼ 65 æ­²çš„é€€ä¼‘äººå£«å¯èƒ½æœ‰ä¸åŒçš„è¡Œç‚º é€™æ¨£æˆ‘å€‘å°±åœ¨ Invalid/Valid ä¸­å¦å¤–åŠƒåˆ†äº† 2 å€‹ Equivalence classes An Example: å›åˆ°ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹å¼ç‚ºä¾‹ï¼Œæ–¹ç¨‹å¼çš„è§£å–æ±ºæ–¼: $d = b^2 - 4ac$ $The\\;equation\\;has\\;two\\;different\\;real\\;roots\\;if\\;d&gt;0$ $The\\;equation\\;has\\;two\\;identical\\;real\\;roots\\;if\\;d=0.$ $The\\;equation\\;has\\;no\\;real\\;root\\;if\\;d&lt;0.$ å°‡ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹å¼ä¾ç…§ Root çš„æƒ…æ³åŠƒåˆ†ç‚ºä¸‰ç¨® Equivalence classï¼Œé€™æ¨£å°±èƒ½åœ¨é€™ä¸‰ç¨®æƒ…æ³ä¸‹æŒ‘é¸ a, b, c çš„ä»£è¡¨å€¼ 3.1.3 Input Space, Vectors, Points Input Space: Let x1, x2, â€¦, xn denote the input variables. Then these nvariables form an n-dimensional space that we call input space. Input Vector: The input space can be represented by a vector X, we call input vector, where X = [x1, x2, â€¦, xn]. Test Point: When the input vector X takes a specific value, we call it a test pointor a test case, which corresponds to a point in the input space. å‡å¦‚æœ‰ä¸€å€‹ Functionï¼Œæ¥å—å…©å€‹ Variable x, yï¼Œæ‰€æœ‰çš„å¯èƒ½è¼¸å…¥å€¼å°±æœƒæ˜¯ä¸€å€‹ Input Spaceï¼Œ é‚£éº¼æˆ‘å€‘çš„ Input Vector å°±æ˜¯é€™å€‹ 2D å¹³é¢ä¸Šçš„æ‰€æœ‰é»ï¼Œè€Œ Test Point å°±æ˜¯é€™å€‹æˆ‘å€‘é¸æ“‡é€²è¡Œæ¸¬è©¦çš„é» 3.1.4 Input Domain and Sub-Domain Domain: The input domainconsists of all the points representing all the allowable input combinations specified for the program in the product specification. Sub-Domain: An input sub-domainis a subset of the input domain. In general, a sun-domain can be defined by a set of inequalitiesin the form off(x1, x2, â€¦, xn) &lt; K, where â€œ&lt;â€ can also be replaced by other relational operators. Domain å°±æ˜¯åœ¨ç¨‹å¼è¦æ ¼å…è¨±ä¸‹çš„æ‰€æœ‰è¼¸å…¥å€¼ï¼Œè€Œé€™äº›è¼¸å…¥å€¼å¯ä»¥è¢«ç¨‹å¼ä¸­çš„ä¸ç­‰å¼æ‰€åŠƒåˆ†ç‚º Sub-Domain Input Domain Partitioning An input domain partitioningis a partition of the input domain into a number of sub-domains. These partitioned sub-domains are mutually exclusive, and collectively exhaustive. ä¾‹å¦‚: æ•´æ•¸è¼¸å…¥å¯ä»¥è¢«åŠƒåˆ†ç‚ºä¸‰å€‹ Sub-Domainï¼Œn &lt; 0, n = 0, n &gt; 0ï¼Œé€™ä¸‰å€‹ Sub-Domain äº’æ–¥ä¸”å®Œå…¨æ¶µè“‹äº†æ•´å€‹æ•´æ•¸ Domain 3.2 Test Coverage Criteria å¦‚æœ Equivalence classes çš„æ•¸é‡é‚„æ˜¯å¤ªå¤šï¼Œé‚£æˆ‘å€‘å°±éœ€è¦ Test coverage criteria(æ¸¬è©¦è¦†è“‹æ¨™æº–)ä¾†é™åˆ¶ Test Case çš„æ•¸é‡ï¼Œ åœ¨é€™è£¡æˆ‘å€‘é‚„ä¸æœƒè©³ç´°è«‡æœ‰å“ªå¹¾ç¨® Test coverage criteriaã€‚ Test Case Candidates Reduction: ä¸‹åœ–æ˜¯ä¸€å€‹æ¸›å°‘ Test Case çš„æµç¨‹ 3.3 Boundary Value Analysis é‚Šç•Œä¸Šçš„æ¸¬è©¦æ¡ˆä¾‹é€šå¸¸æ˜¯æœ€æœ‰æ•ˆçš„ï¼Œå› ç‚ºé‚Šç•Œæ˜¯æœ€å®¹æ˜“æ‰¾åˆ°éŒ¯èª¤çš„åœ°æ–¹ A boundaryis where two sub-domains meet. A point on a boundary is called a boundary point. Boundary points are input values with the highest probability of finding the most errors. 3.3.1 Definition of boundaries Linear Boundaries and Sub-Domains A boundary is a linear boundaryif it is defined by: $a_1x_1+ a_2x_2+ â€¦ + a_nx_n = K$ Otherwise, it is called a nonlinear boundary. A sub-domain is called a linear sub-domainif its boundaries are all linear ones. Open and Closed Boundaries A boundary is a closedone with respect to a specific sub-domain if all the boundary points belong to the sub-domain (&lt;=, &gt;=, =). A boundary is an openone with respect to a specific sub-domain if none of the boundary points belong to the sub-domain (&gt;, &lt;, !=). A sub-domain with all open boundaries is called an open sub-domain; One with all closed boundaries is called a closed sub-domain; otherwise it is a mixed sub-domain å¦‚æœä¸€å€‹é‚Šç•Œçš„ Point åœ¨ Domain ä¸­ï¼Œé‚£éº¼é€™å€‹é‚Šç•Œå°±æ˜¯ Close çš„ï¼Œå¦å‰‡å°±æ˜¯ Open çš„ï¼Œä¾‹å¦‚: Domain 1 &lt; x &lt;= 100 é‚Šç•Œ 1 ä¸¦ä¸å±¬æ–¼ Domainï¼Œå› æ­¤é€™å€‹é‚Šç•Œæ˜¯ Open çš„ é‚Šç•Œ 100 å±¬æ–¼ Domainï¼Œå› æ­¤é€™å€‹é‚Šç•Œæ˜¯ Close çš„ Interior and Exterior Points å±¬æ–¼ Sub-domain ä½†ä¸åœ¨é‚Šç•Œä¸Šçš„é»ç¨±ä½œ Interior point ä¸å±¬æ–¼ Sub-domain ä¸¦ä¸”ä¸åœ¨é‚Šç•Œä¸Šçš„é»ç¨±ä½œ Exterior point è€Œå…©æ¢ä»¥ä¸Šçš„é‚Šç•Œç›¸äº¤çš„é»ç¨±ä½œ Vertex point General Problems with Input Values Some input values cannot be handled by the program. These input values are under-defined. Some input values result in different output. These input values are over-defined. These problems are most likely to happen at boundaries. Under-defined input values(æœªå®šç¾©çš„è¼¸å…¥å€¼): ä¹Ÿå°±æ˜¯ç¨‹å¼ç„¡æ³•è™•ç†çš„ Input valueï¼Œä¾‹å¦‚: é™¤ä»¥é›¶ Over-defined inpyt values(éåº¦å®šç¾©çš„è¼¸å…¥å€¼): ä¹Ÿå°±æ˜¯ç¨‹å¼å¯ä»¥è™•ç†ä½†æ˜¯å¯èƒ½æœ‰ä¸åŒè¼¸å‡ºçš„ Input valueï¼Œä¾‹å¦‚: ä¸€å€‹æŠ•ç¥¨ç³»çµ±ï¼Œå¯èƒ½æœƒå› ç‚ºåœ°æ–¹çš„æ³•å¾‹è€Œæœ‰ä¸åŒçš„æŠ•ç¥¨å¹´é½¡é™åˆ¶ 3.3.2 Boundary Problems é€™è£¡åˆ—å‡º 5 å€‹ä¸»è¦çš„ Boundary Problems: Closure Problem(é–‰åˆå•é¡Œ): whether the boundary points belong to the sub-domain. Boundary shift/tilt Problem: where exactly a boundary is between the intended and the actual boundary. Boundary shift Problem: f(x1, x2, â€¦, xn) = K, where a small change in K. Boundary tilt Problem: f(x1, x2, â€¦, xn) = K, where a small change in some parameters. Missing/Extra boundary Problem: Missing: a boundary missing means that two neighboring sub-domains collapse into one sub-domain. Extra: An extra boundary further partitions a sub-domain into two smaller sub-domains. 3.4 Test Case Generation Strategy Weak N x 1 / 1 x 1 Strategy éƒ½æ˜¯ä¸€ç¨®ç”¨æ–¼é‚Šç•Œæ¸¬è©¦çš„ç­–ç•¥ï¼Œé€™è£¡æœƒä»‹ç´¹é€™å…©ç¨®ç­–ç•¥çš„å·®ç•°èˆ‡å„ªç¼ºé» 3.4.1 Weak N x 1 Strategy 3.4.3 Weak 1 x 1 Strategy 3.4.1 Weak N x 1 Strategy In an n-dimensional space, a boundary defined by a linear equationin the form off (x1, x2, â€¦, xn) = K would need nlinearly independent pointsto define it. We can select nsuch boundary points, called ON points, to precisely define the boundary. We can also select a point, called an OFF point, that receives different processing. The OFF Points é–‰åˆçš„é‚Šç•Œ: é‚£éº¼å®ƒçš„ Off point æœƒä½é‚Šç•Œçš„å¤–éƒ¨ é–‹æ”¾çš„é‚Šç•Œ: é‚£éº¼ä»–çš„ On point æœƒä½é‚Šç•Œçš„å…§éƒ¨ 0 &lt;= N &lt; 21 åœ¨é€™å€‹ä¾‹å­ä¸Šæœ‰å…©å€‹é‚Šç•Œï¼Œå…¶ä¸­ 0 æ˜¯ Close boundaryã€21 æ˜¯ Open boundary ON Points æ˜¯ 0, 21 é€™å…©å€‹ä½æ–¼é‚Šç•Œä¸Šçš„é» 0 æ˜¯ Close boundary, Off point -1 ä½æ–¼å¤–å´ 20 æ˜¯ Open boundary, Off point 20 ä½æ–¼å…§å´ Distance of the OFF Points éœ€è¦ Off point çš„ç†ç”±æ˜¯ï¼Œä»–èˆ‡é‚Šç•Œéå¸¸çš„æ¥è¿‘ï¼Œä»¥è‡³æ–¼é‚Šç•Œçš„ç´°å¾®è®ŠåŒ–éƒ½å°‡å½±éŸ¿ Off point çš„è™•ç† å¯¦éš›æ‡‰ç”¨ä¸Šï¼Œä½¿ç”¨ distance Îµ ä½œç‚º Off point èˆ‡é‚Šç•Œçš„åç§»è·é›¢ For integers, Îµ = 1. For numbers with nbinary digits after the decimal point, Îµ = 1/2n. ä¾‹å¦‚: æœ‰ä¸€å€‹ 0.001 ä½œç‚ºé‚Šç•Œå€¼ï¼Œé‚£éº¼ Îµ å°±æ˜¯ 1/23 = 1/8 Position of the OFF Points Off point æ‡‰è©²è¦ä½æ–¼æ‰€æœ‰ On point çš„ä¸­å¤® å°æ–¼ä¸€å€‹ 2D çš„ç©ºé–“ä¾†èªªï¼Œä»–æ‡‰è©²é¸æ“‡çš„æ–¹å¼å¦‚ä¸‹: é¸æ“‡ä½æ–¼å…©å€‹ On point çš„ä¸­é» æ ¹æ“šé€™å€‹é‚Šç•Œæ˜¯ Closed æˆ– Opend å‘å¤–æˆ–å‘å…§ç§»å‹• Îµ çš„è·é›¢ Total Test Points é™¤äº† ON/OFF Points æˆ‘å€‘ä¹Ÿæœƒå†é¸æ“‡ä¸€å€‹ Interior Point(å…§éƒ¨é»)åšç‚ºè©² Equivalence Class(Sub-Domain) çš„ä»£è¡¨ï¼Œ å› æ­¤ä¸€å€‹ N Dimensional domain å°‡æœƒæœ‰ (n + 1)*b + 1 å€‹ Test Pointsã€‚ Example: å‡è¨­æœ‰ä¸€å€‹ç¨…æ”¶ç´šè·å¦‚ä¸‹ï¼Œæ³¨æ„å…¶ä¸­ Close èˆ‡ Open çš„æ¢ä»¶ï¼Œé€™è£¡éƒ½æ˜¯ Integers é€™æ¨£çš„è©±æ—é‚Šçš„ Sub-Domain OFF Points å‰›å¥½æœƒé‡ç–Šåœ¨ä¸€èµ·å¯ä»¥çœç•¥æ‰ï¼Œ ä¸¦ä¸” Open domain ä¹Ÿå¯ä»¥çœç•¥ä¸€å€‹é‚Šç•Œçš„å€¼ï¼Œå› æ­¤åŸæœ¬æ‡‰è©²è¦æœ‰ 3 * 2 + 5 * 3 = 21 å€‹é»ï¼Œä½†æ˜¯æœ‰ 4 å€‹é‚Šæ˜¯é‡ç–Šçš„å› æ­¤ 21 - 4 * 2 = 13ï¼Œ æœ€çµ‚åƒ…ç”¨ä¸Š 13 å€‹ Test Pointsã€‚ Tax Rate: 0%: 0 &lt;= x &lt; 10000 (0~9999) 10%: 10000 &lt;= x &lt; 1000000 (10000~999999) 20%: 1000000 &lt;= x &lt; 100000000 (1000000~99999999) 30%: x &lt;= 100000000 (100000000~) é‚£å¦‚æœå‡è¨­ä¸€å€‹ 2D Sub-domainï¼Œä¸¦ä¸”å››å€‹é‚Šéƒ½æ˜¯å°é–‰çš„ï¼Œå°‡æœƒæ˜¯ (2 + 1) * 4 + 1 = 13 å€‹ Test Pointsï¼Œé€™è£¡å¿½ç•¥äº†èˆ‡æ—é‚Šçš„ Sub-domain é‡ç–Šçš„é» 3.4.2 Boundary Problem Detection of Werk N * 1 Strategy é€™è£¡èªªæ˜ Weak N x 1 Strategy åœ¨è™•ç† Boundary Problem æ™‚èƒ½åšåˆ°ä»€éº¼ï¼Œä¸èƒ½åšåˆ°ä»€éº¼ Closure problem å®šç¾©é‚Šç•Œæ˜¯æ˜¯å¦æ‰€æœ‰å¯èƒ½çš„é‚Šç•Œéƒ½è¢«åŒ…å«åœ¨å…§ Boundary shift problem é‚Šç•Œæ˜¯å¦æœ‰æ­£ç¢ºè¨­ç½®åœ¨æ‡‰è©²çš„ä½ç½® Boundary tilt problem é‚Šç•Œæ˜¯å¦æœ‰æ­£ç¢ºçš„å°é½Šæˆ–å¹³è¡Œ Missing boundary problem æ˜¯å¦æ‰€æœ‰çš„é‚Šç•Œéƒ½æœ‰è¢«å®šç¾© Extra boundary problem æ˜¯å¦æœ‰å¤šé¤˜çš„é‚Šç•Œ Weak N x 1 Strategy å¯ä»¥å¾ˆå¥½çš„è™•ç†å…¶ä»– Boundary problem ä½†ç„¡æ³•å®Œå…¨åµæ¸¬åˆ° Extra boundary problem 3.4.3 Weak 1 x 1 Strategy Weak 1 x 1 Strategy åœ¨æ¯å€‹é‚Šç•Œä¸Šåªæ”¾ç½®ä¸€å€‹ On point èˆ‡ä¸€å€‹ Off pointï¼Œæ¸›å°‘ Test Points æ•¸é‡ï¼Œä½†æ˜¯ä¹Ÿæœƒæœ‰ç¼ºé» One of the major drawbacks of weak N x 1 strategy is the number of test points used, (n+1)xb+1 for ninput variables and boundaries. Weak 1 x 1 strategy uses just one ON point for each boundary, thus reducing the total number of test points to 2xb+1. The OFF point is just Îµ distance from the ON point and perpendicular to the boundary. Weak 1 x 1 Strategy ä¹Ÿå¯ä»¥è™•ç† Boundary Problemï¼Œä½†æ˜¯åœ¨å‚¾æ–œä¸Šçš„è¡¨ç¾ä¸å¦‚ Weak N x 1 Strategyï¼Œä¸¦ä¸”è·Ÿ Weak N x 1 Strategy ä¸€æ¨£ç„¡æ³•å®Œå…¨åµæ¸¬åˆ° Extra boundary problem åœ¨ 2D å¹³é¢ä¸Šæ¯”è¼ƒèƒ½è¡¨ç¤ºå‡ºå…©ç¨®ç­–ç•¥çš„å·®ç•°ï¼Œå¯ä»¥çœ‹åˆ° Weak N x 1 Strategy åœ¨åŒå€‹ Domain çš„é‚Šç•Œä¸Šæœƒæœ‰ 3 å€‹ Pointsï¼Œè€Œ Weak 1 x 1 Strategy å‰‡åªæœ‰ 2 å€‹ Pointsï¼Œ ä¸‹åœ–å·¦å³åˆ†åˆ¥æ˜¯ Weak N x 1 Strategy å’Œ Weak 1 x 1 Strategy: 3.5 Looking for Equivalence Classes æ‰¾å°‹ Equivalence Classes(ç­‰åƒ¹é¡åˆ¥)çš„æ–¹æ³•èˆ‡éœ€è¦æ³¨æ„çš„é» Donâ€™t forget equivalence classes for invalid inputs. Organize your classifications into a table or an outline. Look for ranges of numbers. Look for membership in a group. Analyze responses to lists and menus. Look for variables that must be equal. Create time-determined equivalence classes. Look for variable groups that must calculate to a certain value or range. Look for equivalent output events. Look for equivalent operating environments. Donâ€™t Forget Equivalence Classes for Invalid Inputs é€šå¸¸ Invalid Inputs æ˜¯æœ€å®¹æ˜“ç”¢ç”Ÿ Bugs çš„ä¾†æº ä¾‹å¦‚ä¸€å€‹èƒ½æ¥å— 1 åˆ° 99 ä¹‹é–“ä»»ä½•æ•¸å­—çš„ç¨‹å¼ï¼Œé‚£å°±è‡³å°‘æœ‰å››å€‹ Equivalence Classes 1 &gt;= x &lt;= 99 x &lt; 1 x &gt; 99 Not a number(Is this true for all non-numbers?) Organize Your Classifications into a Table or an Outline æŠŠåˆ†é¡æ•´ç†æˆè¡¨æ ¼æˆ–è€…å¤§ç¶± æœƒç™¼ç¾æœ‰é€™éº¼å¤šçš„ Input/Output constraintsï¼Œè·Ÿç›¸é—œçš„ Equivalence Classesï¼Œéœ€è¦ä¸€ç¨®çµ„ç¹”æ–¹æ³• æœ€å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯ Table(è¡¨æ ¼)æˆ–è€… OutLine(å¤§ç¶±) Look for Ranges of Numbers å¦‚æœæ‰¾åˆ°ä¸€å€‹æ•¸å­—çš„ç¯„åœï¼Œä¾‹å¦‚: 1 åˆ° 99ï¼Œé€™äº›ç¯„åœå°±æ˜¯ Equivalence Classes é€šå¸¸æœƒæœ‰ä¸‰å€‹ Invalid Equivalence Classesï¼Œå°æ–¼ 1ã€å¤§æ–¼ 99ã€ä»¥åŠä¸æ˜¯æ•¸å­—çš„æƒ…æ³ ç•¶ç„¶ä¹Ÿæœƒæœ‰å¤šå€‹ç¯„åœçš„æƒ…æ³ï¼Œä¾‹å¦‚: Tax Look for Membership in a Group å¦‚æœä¸€å€‹ Input å¿…é ˆå±¬æ–¼æŸå€‹ Groupï¼Œé‚£éº¼ä¸€å€‹ Equivalence Class å‰‡åŒ…å«è©² Group çš„æ‰€æœ‰æˆå“¡ è€Œå¦ä¸€å€‹ Equivalence Class å‰‡åŒ…å«æ‰€æœ‰ä¸å±¬æ–¼è©² Group çš„æˆå“¡ ä¾‹å¦‚: è¦æ±‚è¼¸å…¥ä¸€å€‹åœ‹å®¶çš„åç¨±ï¼ŒValid Equivalence Class å°±æ˜¯æ‰€æœ‰åœ‹å®¶çš„åç¨±ï¼ŒInvalid Equivalence Class å°±æ˜¯æ‰€æœ‰ä¸æ˜¯åœ‹å®¶çš„åç¨± ä½†æ˜¯ï¼Œabbreviations(ç¸®å¯«)ã€almost correct spellings(å¹¾ä¹æ­£ç¢ºçš„æ‹¼å¯«)ã€native language spellings(æ¯èªæ‹¼å¯«)ã€name that are now out of date but were country names(æ›¾ç¶“å­˜åœ¨éçš„åç¨±)åˆè©²å¦‚ä½•è™•ç†? æ‡‰è©²åˆ†åˆ¥æ¸¬è©¦é€™äº›æƒ…æ³å—? é€šå¸¸ Specification ä¸æœƒæåˆ°é€™äº›æƒ…æ³ï¼Œä½†æ˜¯åœ¨æ¸¬è©¦ä¸­å¯èƒ½æœƒç™¼ç¾é€™äº›éŒ¯èª¤ Analyze Responses to Lists and Menus å°æ–¼å¿…é ˆå¾ List æˆ– Menu ä¸­é¸æ“‡çš„ Inputï¼Œæ¯å€‹é¸é …éƒ½æ˜¯ä¸€å€‹ Equivalence Class æ¯å€‹ Input éƒ½æ˜¯å…¶è‡ªèº«çš„ Equivalence Class Invaild Equivalence Class å‰‡æ˜¯æ‰€æœ‰ä¸åœ¨ List æˆ– Menu ä¸­çš„é¸é … ä¾‹å¦‚: â€œAre you sure? (Y/N)â€ï¼Œä¸€å€‹ Equivalence Class å°±æ˜¯ Yï¼Œå¦ä¸€å€‹ Equivalence Class å°±æ˜¯ Nï¼ŒInvalid Equivalence Class å°±æ˜¯å…¶ä»–æ‰€æœ‰é¸é … Look for Variables That Must Be Equal ä¾‹å¦‚ä¸€å€‹å¯ä»¥è¼¸å…¥ä»»ä½•é¡è‰²çš„ç¨‹å¼ï¼Œä½†å¿…é ˆæ˜¯é»‘è‰²ï¼Œé‚£éº¼æ‰€æœ‰çš„é¡è‰²éƒ½æ˜¯ Invalid Equivalence Classï¼Œè€Œé»‘è‰²å°±æ˜¯ Valid Equivalence Class æœ‰æ™‚é€™ç¨®é™åˆ¶åœ¨å¯¦éš›æ‡‰ç”¨ä¸­å¯èƒ½æœƒå‡ºç¾æ„å¤–æƒ…æ³: ä¾‹å¦‚é»‘è‰²å·²å”®ç½„ï¼Œåªå‰©ä¸‹å…¶ä»–é¡è‰² é€™ç¨®æ›¾ç¶“æœ‰æ•ˆä½†ç¾åœ¨ä¸å†æœ‰æ•ˆçš„é¸æ“‡ï¼Œæ‡‰è©²ç‚ºå®ƒå€‘å»ºç«‹ä¸€å€‹ Equivalence Class ä¾‹å¦‚: åœ¨é–å¹´æ™‚ February æœ‰ 29 å¤©ï¼Œä½†æ˜¯åœ¨éé–å¹´æ™‚ February åªæœ‰ 28 å¤©ï¼Œé€™æ¨£å°±æœƒæœ‰å…©å€‹ Equivalence Classes Create Time-Determined Equivalence Classes ä¾‹å¦‚ä¸€å€‹ç¨‹å¼é‚„æ²’æœ‰å¾ Disk å®Œæˆè®€å–ï¼Œåœ¨é€²è¡Œä¸­èˆ‡çµæŸä¸ŠæŒ‰ä¸‹ç©ºæ ¼éµæ˜¯ä¸åŒçš„ Equivalence Classes é€™ç¨®æƒ…æ³é€šå¸¸æœƒæœ‰ä¸‰å€‹ Equivalence Classesï¼Œä¸€å€‹æ˜¯é‚„æ²’é–‹å§‹è®€å–çš„æƒ…æ³ï¼Œä¸€å€‹æ˜¯è®€å–ä¸­çš„æƒ…æ³ï¼Œä¸€å€‹æ˜¯è®€å–å®Œç•¢çš„æƒ…æ³ Look for Variable Groups That Must Calculate to a Certain Value or Range ä¾‹å¦‚è¼¸å…¥ Triangle çš„ä¸‰å€‹é‚Šé•· åœ¨ Valid Equivalence Class ä¸­ï¼Œå®ƒå€‘çš„ç¸½å’Œæ‡‰è©²ç­‰æ–¼ 180Â° è€Œ Invalid Equivalence Class å‰‡æœƒæœ‰å…©å€‹åˆ†åˆ¥æ˜¯å¤§æ–¼ 180Â° èˆ‡å°æ–¼ 180Â° Look for Equivalent Output Events åœ¨æ­¤ä¹‹å‰æˆ‘å€‘å¼·èª¿çš„éƒ½æ˜¯ Input èˆ‡ Invalid Inputï¼Œé€™æ˜¯å› ç‚º Output é€šå¸¸æ›´è¤‡é›œï¼Œå› ç‚ºé€šéç¨‹å¼è™•ç†å¾Œçš„ Output æœƒæœ‰å¾ˆå¤šç¨®å¯èƒ½çš„æƒ…æ³ ä¾‹å¦‚æˆ‘å€‘æœ‰ä¸€å€‹ç”±ç¨‹å¼æ§åˆ¶çš„ç¹ªåœ–æ©Ÿï¼Œä»–æœ€å¤šå¯ä»¥ä¸€æ¬¡ç•« 4 å…¬å°ºçš„ç·šæ¢ æ€éº¼åˆ¤æ–·ä¸€å€‹ç·šæ¢æ˜¯ Valid Equivalence Class é‚„æ˜¯ Invalid Equivalence Class? æœ‰å¯èƒ½ç¹ªè£½äº†è¶…é 4 å…¬å°ºçš„ç·šæ¢ å¯èƒ½æ ¹æœ¬æ²’æœ‰ç¹ªè£½ç·šæ¢ ä¹Ÿæœ‰å¯èƒ½ç¹ªè£½äº†æ ¹æœ¬ä¸æ˜¯ç·šæ¢çš„æ±è¥¿ï¼Œä¾‹å¦‚: åœ“å½¢ åœ¨æ¸¬è©¦ä¸­ä¸åªè¦é—œæ³¨è¼¸å‡ºçš„æƒ…æ³ï¼Œä¹Ÿè¦é—œæ³¨è¼¸å‡ºä¸¦æ‰¾åˆ° Equivalence Classes Of Output Look for Equivalent Operating Environments åŒæ™‚å°æ–¼ç’°å¢ƒçš„è®ŠåŒ–ä¹Ÿè¦æ‰¾åˆ° Equivalence Classes ä¾‹å¦‚: ä¸€å€‹ç¨‹å¼è¦æ±‚è‡³å°‘è¦ 64K - 256K çš„å¯ç”¨ Memory é€™æ¨£å°±æœƒæœ‰ä¸‰å€‹ Equivalence Classesï¼Œç¬¦åˆè¦ç¯„èˆ‡å°æ–¼ 64Kã€å¤§æ–¼ 256Kçš„æƒ…æ³ Last Edit 10-28-2023 16:46 å‰©ä¸‹çš„éƒ¨åˆ†æ˜¯ Constraint-based testingï¼Œæœƒå¦å¤–è¬›è¿°å¦‚ä½•ä½¿ç”¨ CLP ä¾†ç”Ÿæˆæ¸¬è©¦æ¡ˆä¾‹"
  },"/jekyll/2023-10-09-operating_system_structure.html": {
    "title": "OS | Operating System Structure",
    "keywords": "OS Jekyll",
    "url": "/jekyll/2023-10-09-operating_system_structure.html",
    "body": "Operating System: Design and Implementation course notes from CCU, lecturer Shiwu-Lo. åœ¨é€™å€‹ç« ç¯€æœ‰ä»¥ä¸‹ä¸»è¦å¤§ç¶± OS Service Graphical User Interface &amp; Text-based User Interface System calls OS Structure Profiling/Debugging an OS Kernel OS Service 2.1 Purpose of OS ä¸€å°ä½œæ¥­ç³»çµ±çš„ä¸»è¦æœå‹™æ˜¯ä½¿å°æ–¼ User è€Œè¨€ Hardware è®Šçš„æ›´å¥½ä½¿ç”¨ï¼Œå° Designer è€Œè¨€èƒ½æé«˜ç³»çµ±ä½¿ç”¨ç‡ Simple to use Communications åŒä¸€å°é›»è…¦å…§éƒ¨ Process ä¹‹é–“çš„ Communications(IPC)ï¼Œä¾‹å¦‚: copy and paste è·¨é›»è…¦ä¹‹é–“çš„é€šè¨Šï¼Œä¾‹å¦‚: Network neighborhood, Network file system(NFS) Error detection ç•¶è»Ÿé«”ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼ŒOS èƒ½æ¡å–é©ç•¶çš„æªæ–½ã€Œè™•ç†ã€é€™å€‹éŒ¯èª¤ï¼Œä¾‹å¦‚: ä½¿ç”¨è€…å…‰ç¢Ÿæ©Ÿæ²’æœ‰ã€Œæ”¶åˆã€ï¼Œæç¤ºä½¿ç”¨è€… æä¾›ä¸€èˆ¬ç¨‹å¼çš„é™¤éŒ¯æ©Ÿåˆ¶ï¼Œä¾‹å¦‚: ptrace, core dump â€¦ OS Kernel çš„é™¤éŒ¯æ©Ÿåˆ¶ï¼Œä¾‹å¦‚: kgdb, kdb ptrace æ˜¯ä¸€ç¨® System callï¼Œå…è¨±ä¸€å€‹ Process è§€å¯Ÿå¦ä¸€å€‹ Processï¼Œgdb çš„åº•å±¤å°±ä½¿ç”¨ ptrace å¯¦ç¾ æä¾›ä½¿ç”¨è€…æ“ä½œä»‹é¢ï¼Œä¾‹å¦‚: Gnome, KDE â€¦ è¼‰å…¥æ‡‰ç”¨ç¨‹å¼çš„èƒ½åŠ›ï¼Œä¾‹å¦‚: execve() å¤šåŠŸèƒ½çš„ä½œæ¥­ç³»çµ±ï¼Œæœ€å°‘è¦èƒ½è­˜åˆ¥ã€ŒåŸ·è¡Œæª”ã€çš„æª”æ¡ˆæ ¼å¼ éƒ¨åˆ†åµŒå…¥å¼ç³»çµ± Kernel èˆ‡ User application ç·¨è­¯åœ¨åŒä¸€å€‹ mageï¼Œtask å³ç‚ºé€™å€‹ mage ä¸­çš„ä¸€å€‹ Functionï¼Œ é€™æ™‚å€™å°±ä¸éœ€è¦ã€ŒåŸ·è¡Œæª”ã€ è™•ç† I/O çš„èƒ½åŠ›ï¼Œä¾‹å¦‚: å„ç¨® Driver æª”æ¡ˆç³»çµ±ï¼Œä¾‹å¦‚: OS å°‡ Disk ä¸Šçš„ä¸€å€‹ Block æŠ½è±¡ç‚º Fileï¼Œå†å°‡ File æŠ½è±¡ç‚º Folderï¼ŒFolder ä¸­å¯ä»¥æ”¾å…¥ File Increase efficiency åˆ†é…å„ç¨®è³‡æºï¼Œä¾‹å¦‚: Memory åƒ…æœ‰ 4GBï¼ŒA ç¨‹å¼éœ€è¦ 3.2GBï¼ŒB ç¨‹å¼éœ€è¦ 1.4GBï¼Œå¦‚ä½•åˆ†é…ã€Œæœ‰é™ã€çš„ Memory Debian ä¸Šå¯ä»¥é€é free -hï¼Œcat /proc/swaps æŸ¥çœ‹ swap ä½¿ç”¨ç‹€æ³ çµ±è¨ˆè³‡æºçš„ä½¿ç”¨ç‡ï¼Œä¾‹å¦‚: å¯ä»¥ä½¿ç”¨ htop ç›£è¦– CPUã€DRAMã€I/O ç­‰æ•ˆèƒ½ï¼Œä½¿ç”¨ç‡ Protectionï¼Œç¢ºä¿ Process åªèƒ½æ“æœ‰ OS æ‰€åˆ†é…çš„è³‡æºï¼ŒProcess å„è‡ªç¨ç«‹ï¼Œä¸æœƒå—åˆ°éæ³•çš„å¹²æ“¾Â· Securityï¼Œç¢ºä¿ User Login å¾Œåªèƒ½å­˜å–è‡ªå·±çš„è³‡æºï¼Œä¾‹å¦‚: å­˜å–ä»–äººçš„å®¶ç›®éŒ„ 2.2 User interface GUI: GUI å°‡è¨±å¤šå‘½ä»¤ä»¥ Icon çš„å½¢å¼è¡¨ç¤ºï¼Œä¸¦ä¸”å¤§éƒ¨åˆ†å¯ä»¥ Drag and drop(æ‹–å‹•)çš„æ–¹å¼ å†è¼¸å…¥æ–¹å¼åŒ…å«: æ»‘é¼ ã€è§¸æ§é¢æ¿ã€è§¸æ§è¢å¹•ã€å¤šé»è§¸æ§çš„ç›´è¦ºåŒ–æ§åˆ¶ CLI: Text-mode é›–ç„¶éœ€è¦æ™‚é–“å­¸ç¿’ï¼Œä½†èƒ½å¾ˆæº–ç¢ºçš„ä¸‹é”å‘½ä»¤ ä¹Ÿå¯ä»¥å°‡å‘½ä»¤çµ„åˆæˆ Batch programï¼Œä¾‹å¦‚: shell script Text-mode æ¯” GUI æ›´ç©©å®š å¯ä»¥ä½¿ç”¨è¼•é‡ç´šçš„ Remote connectionï¼Œä¾‹å¦‚: ssh Text-mode ä¹Ÿå¯ä»¥çµåˆæŒ‡æ¨™è£ç½®(ä¾‹å¦‚: æ»‘é¼ )ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Library(ä¾‹å¦‚: ncurses) æ¨¡æ“¬ GUI ä»‹é¢(ä¾‹å¦‚: Linux kernel memuconfig) System Call 2.3 System call System call æ˜¯ OS Kernel å°å¤–é–‹æ”¾çš„ API æ³¨æ„æé¾æ›¸å°‡ System call å®šç¾©ç‚º OS å°å¤–é–‹æ”¾çš„ API ä½† OS æ¶µè“‹éå¸¸å»£æ³›ï¼Œå› æ­¤ System call æ‡‰è©²é™å®šæ–¼ Kernel æä¾›çš„ API Linux system call Linux æ‰€æœ‰çš„ System call å¯ä»¥åˆ°é€™å€‹è·¯å¾‘å»å°‹æ‰¾ /arch/x86/entry/syscalls/syscall_64.tblï¼Œæˆ–æ˜¯åˆ° Linux çš„ syscalls(2) â€” Linux manual pageï¼Œ å‰å››å€‹ System call ç‚º: 1. read, 2. write, 3. open, 4. close Call System call å¯ä»¥é€é libc(C standard library) å‘¼å« System call ä¾‹å¦‚: read, write, open, close Linux çš„ Man page ä¸­ï¼Œvolume 2 å³ç‚º System call çš„èªªæ˜ ä¾‹å¦‚: man 2 readï¼Œé€™è£¡è¦æ³¨æ„æ˜¯å¦æœ‰å®‰è£ sudo apt-get install manpages-dev å°‘æ•¸ System call ä¸¦æœªåŒ…å«åœ¨ Linux çš„ libc å…§ï¼Œé€™æ™‚å€™éœ€è¦è‡ªå·²å¯«å‡ºä¾† #define_GNU_SOURCE /* See feature_test_macros(7) */ #include &lt;unistd.h&gt; #include &lt;sys/syscall.h&gt; /* For SYS_xxx definitions */ long syscall(long number, ...); gettid() - libc æœªå¯¦ç¾çš„ System call åœ¨ Linux ä¸­: Process éƒ½æœ‰ä¸€å€‹ pit_t å¯ä»¥é€é getpid() ç²å¾— POSIX Thread(pthread) ä¹Ÿæœ‰ pthread_t å¯ä»¥é€é pthread_self() ç²å¾—ï¼Œ ä½†æ˜¯å¦‚æœæˆ‘æƒ³è¦ P1 çš„ thread2 èˆ‡ P2 çš„ thread1 é€šè¨Šï¼Œæˆ‘å€‘å°±éœ€è¦ä¸€å€‹çœŸå¯¦çš„ Thread ID(TID)ï¼Œé€™æ™‚å€™å°±è¦é€é System call ä¾†ç²å¾— tidï¼Œä½¿ç”¨ syscall(SYS_gettid) #define_GNU_SOURCE #include &lt;unistd.h&gt; #include &lt;sys/syscall.h&gt; #include &lt;sys/types.h&gt; #include &lt;signal.h&gt; int main(int argc, char *argv[]) { pid_t tid; /* gettid() returns ths caller's thread ID(TID). There is no glibc wrapper for this system call. */ tid = syscall(SYS_gettid); /* int tgkill(int tgid, int tid, int sig); send a signal to a thread. */ syscall(SYS_tgkill, getpid(), tid, SIGHUP); } Call System Call Method(From assembly language) Call System call çš„æ–¹å¼å¦‚ä¸‹(Calling convention): arch/ABI syscall# arg1 arg2 arg3 arg4 arg5 arg6 ret. val. arm64 x8 x0 x1 x2 x3 x4 x5 x0 x86-64 rax rdi rsi rdx r10 r8 r9 rax syscall# System call ç·¨è™Ÿ ret. val. System call return value Call System call çš„çµ„åˆèªè¨€å¦‚ä¸‹: ARM: svc #0, x86-64: syscall movq $60, %rax; // Call NO.60 System call, exit() movq $2, %rdi; // arg1 = 2, means exit(2) syscall; // Change to kernel mode, call System call å»¶ä¼¸é–±è®€: The Linux Kernel Module Programming Guide: System call 2.4 Special cases of system calls é¦–å…ˆè¦è¨è«– System call overhead é€™æ˜¯ç‚ºä»€éº¼æŠŠæŸäº› Module æ”¾åœ¨ Kernel çš„é€Ÿåº¦æœƒæå‡è¨±å¤šçš„åŸå›  System call ä¸»è¦çš„ Overhead ä¾†è‡ªæ–¼: CPU é€²è¡Œ Mode change çš„æ™‚å€™ï¼Œæ­¤æ™‚ CPU æœ‰åŒæ™‚æ•¸å€‹æŒ‡ä»¤åœ¨åŸ·è¡Œï¼Œåˆ‡æ›æ™‚æˆ–è¨±éœ€è¦ flush æ‰€æœ‰åŸ·è¡Œåˆ°ä¸€åŠçš„æŒ‡ä»¤ Kernel éœ€è¦å°‡ User space çš„æ‰€æœ‰æš«å­˜å™¨å­˜åœ¨ Kernel stackï¼ˆæ¯ä¸€å€‹ Taskï¼Œæ–¼ Kernel ä¸­æœ‰è‡ªå·±çš„ Stackï¼Œæ³¨æ„ï¼Œä¸æ˜¯ User mode stackï¼‰ æª¢æŸ¥æ¬Šé™ï¼Œåœ¨ System call ä¹‹å‰é‚„è¦æª¢æŸ¥ Task æ˜¯å¦æœ‰æ¬Šé™åŸ·è¡Œè©² System call ä¾ç…§ Kernel å…§éƒ¨çš„ Calling conventionï¼Œå‘¼å«å¯¦ç¾è©² System call çš„ Functionï¼Œä¾‹å¦‚ï¼šsys_read() =&gt; do_read() å› ç‚ºé€™äº› Overhead ä½¿å¾—åœ¨ User space åŸ·è¡Œçš„ç¨‹å¼ï¼Œé€Ÿåº¦æœƒæ¯”åœ¨ Kernel space åŸ·è¡Œçš„ç¨‹å¼æ…¢è¨±å¤š vDSO å› æ­¤ Linux çš„è¨­è¨ˆè€…æœƒå¸Œæœ›ç›¡å¯èƒ½åœ°é™ä½ Overheadï¼ŒvDSO(Virtual Dynamic Shared Object) æ˜¯å¯ä»¥å°‡ Kernel space çš„è³‡è¨Šï¼Œç›´æ¥æ˜ å°„åˆ° User space å¦‚æœè©² System call ä¸¦æ²’æœ‰ç‰½æ¶‰ã€Œå®‰å…¨æ€§ã€ï¼Œé‚£å°±ç›´æ¥æŠŠ Kernel space ä¸­çš„è³‡è¨Šå¯«å…¥ User spaceï¼Œè®“ç¨‹å¼å¯ä»¥é€é Function call çš„æ–¹å¼å–å¾—è©²è³‡æ–™ æœƒæ™‚å¸¸è®Šå‹•ï¼Œä½†åˆæ²’æœ‰æ©Ÿå¯†æ€§çš„è³‡è¨Š: __vdso_clock_gettime __vdso_getcpu __vdso_gettimeofday __vdso_time ä¸æœƒè®Šå‹•ï¼Œä½†ä¹Ÿæ²’æœ‰æ©Ÿå¯†æ€§çš„è³‡è¨Š: ç¬¬ä¸€æ¬¡å‘¼å«æ™‚ï¼ŒçœŸçš„ç”¢ç”Ÿ System callï¼Œlibc è¨˜éŒ„ä¸‹è©² Function çš„å€¼ ç¬¬äºŒæ¬¡å‘¼å«æ™‚ï¼Œç”± libc ç›´æ¥å›å‚³ï¼Œä¾‹å¦‚ï¼šgetpid() /proc/pid/maps /*...*/ 7ffe6b98e000-7ffe6b9af000 rw-p 00000000 00:00 0 [stack] 7ffe6b9fa000-7ffe6b9fd000 r--p 00000000 00:00 0 [vvar] 7ffe6b9fd000-7ffe6b9ff000 r-xp 00000000 00:00 0 [vdso] ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0 [vsyscall] é€™è£¡æ¯è¡Œéƒ½ç”±ä»¥ä¸‹å…§å®¹çµ„æˆ: addressã€permsã€offsetã€devã€inodeã€pathname vsyscall: åŠŸèƒ½ç­‰åŒæ–¼ vdsoï¼Œä½†æ˜¯è¼ƒç‚ºå¤è€ï¼Œä¸¦æœ‰å®‰å…¨æ€§å•é¡Œ(No support ASLR) vdso: å­˜æ”¾å¯å‘¼å«çš„ vDSO Functionï¼Œä¾‹å¦‚: clock_gettime() vvar: å­˜æ”¾ Kernel space mapping åˆ° User space çš„è³‡æ–™ï¼Œä¾‹å¦‚: clock_gettime() çš„ cur_time å»¶ä¼¸é–±è®€: Understanding Linux /proc/pid/mapsï¼ŒASLR If not using vDSO ä¸‹åœ–å·¦æ˜¯æ²’æœ‰ vDSO clock_gettime() æƒ³è¦å–å¾—æ™‚é–“çš„æµç¨‹ï¼Œè¦å»å‘¼å« timekeeping_update() æ›´æ–° cur_timeï¼Œå› æ­¤éœ€è¦ Mode change é€²å…¥ Kernel modeã€‚ è€Œåœ–å³å°±å°‡é€™å€‹è³‡æ–™çµæ§‹ç›´æ¥æ˜ å°„åˆ° User spaceï¼Œclock_gettime() å‘¼å« timekeeping_update() ä¸€æ¨£æœƒå»æ›´æ–° cur_timeï¼Œä½†ç›´æ¥å»è®€ vDSO ä¸­çš„è³‡æ–™ï¼Œé€™æ¨£çš„è©±é€Ÿåº¦å°±è·Ÿ Function call ä¸€æ¨£å¿«äº†ã€‚ vDSO Problem è³‡æ–™å­˜æ”¾åœ¨ vvar ä¸ä¸€å®šå°±æ˜¯ User è¦çš„è³‡æ–™æ ¼å¼ï¼Œä¾‹å¦‚: vvar ä¸­æ”¾çš„æ˜¯å¾é–‹æ©Ÿåˆ°ç¾åœ¨ç¶“éå¤šå°‘å€‹ Machine cyclesï¼Œä½†æ˜¯ gettimeofday() çš„å›å‚³å€¼æ˜¯è‡ª 1970/1/1 è‡³ä»Šç¶“éå¤šå°‘ç§’ï¼Œæ‰€ä»¥é€™è£¡æ˜¯æœ‰åº§è³‡æ–™è½‰æ›çš„ vDSO å…§éƒ¨çš„ç¨‹å¼ç¢¼æœƒåšé©ç•¶çš„è³‡æ–™è½‰æ› OS Structure 2.5 Monolithic system è¨±å¤šè‘—åçš„ OS éƒ½æ˜¯ Monolithic systemï¼Œä¾‹å¦‚: Linux, FreeBSD, Solaris ç›®å‰é€™äº›ä½œæ¥­ç³»çµ±éƒ½æ”¯æ´å‹•æ…‹è¼‰å…¥ Kernel module çš„åŠŸèƒ½ Linux çš„ lsmod å¯ä»¥åˆ—å‡ºç›®å‰å·²ç¶“è¼‰å…¥åˆ° Kernel çš„ module é€™è£¡åˆ—å‡º Linux Kernel ä¸­èˆ‡ File system ç›¸é—œçš„ module $ lsmod | grep fs autofs4 45056 2 btrfs 1294336 2 xor 24576 1 btrfs raid6_pq 114688 1 btrfs libcrc32c 16384 1 btrfs 2.6 In Linux Object Linux é›–ç„¶æ˜¯ä½¿ç”¨ C æ’°å¯«çš„ï¼Œä½†æ˜¯åœ¨ Kernel ä¸­å……æ»¿äº† Object-oriented(OO) çš„æ¦‚å¿µï¼ŒObject-oriented analysis and design(OOAD)ç‰©ä»¶å°å‘åˆ†æèˆ‡è¨­è¨ˆ ä¸‹é¢æ˜¯ä¸€å€‹ Linux Kernel ä¸­å¸¸è¦‹çš„ OO æ¦‚å¿µï¼Œä¸¦ä¸”ä½¿ç”¨ container_of ä¾†å–å¾—é€™å€‹ Linked list çš„èµ·å§‹ address(Linked list head) struct parport_driver { const char *name; /*property*/ void (*attach) (struct parport *); /*method*/ void (*detach) (struct parport *); /*method*/ struct list_head list; /*inherit list_head*/ }; struct list_head { struct list_head *next, *prev; }; #define list_entry(ptr, type, member) container_of(ptr, type, member) container_of /** Â * container_of - cast a member of a structure out to the containing structure Â * @ptr:Â  Â  Â  Â  the pointer to the member. Â * @type: Â  Â  Â  the type of the container struct this is embedded in. Â * @member: Â  Â  the name of the member within the struct. Â * */ #define container_of(ptr, type, member) ({Â  Â  Â  Â  Â  Â  Â  \\ const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr);Â  Â  \\ (type *)( (char *)__mptr - offsetof(type,member) );}) container_of ä¸»è¦æ˜¯é€éæˆå“¡ä¾†ç²å–è©² struct çš„èµ·å§‹ä½ç½®ï¼Œè©³ç´°å¯ä»¥çœ‹ Linux Kernel Macro container_of è·Ÿå»¶ä¼¸é–±è®€ å»¶ä¼¸é–±è®€: Linux æ ¸å¿ƒåŸå§‹ç¨‹å¼ç¢¼å·¨é›†: container_of Linux kernel é›–ç„¶æ˜¯ä½¿ç”¨ C èªè¨€å¯«çš„ï¼Œä½†åœ¨è£¡é¢å……æ–¥è‘— OO çš„æ¦‚å¿µï¼Œç•¶ç„¶æœ‰éƒ¨åˆ†è¦è·Ÿåº•å±¤æºé€šæ‰€æœ‰æ²’æœ‰å®Œå…¨ OO 2.7 Layered approach Layered approach åœ¨ OS çš„ç¼ºé»æ˜¯ï¼Œä¸¦ä¸ä¸€å®šèƒ½åˆ‡å‡º Layerï¼Œè·Ÿ Network ä¸å¤ªä¸€æ¨£ å°‡ç³»çµ±åˆ†æˆ N å±¤ ç¬¬ N å±¤å¯ä»¥ä½¿ç”¨ç¬¬ N-1 å±¤çš„åŠŸèƒ½ï¼Œä¸å¯ä»¥ä½¿ç”¨ N+1 å±¤çš„åŠŸèƒ½ ä¾‹å¦‚ I/O memagement éœ€è¦ Buffer å› æ­¤éœ€è¦ Memory managementï¼ŒMemory management æœ‰æ™‚ä¹Ÿéœ€è¦å°‡ Memory å¯«åˆ° Diskï¼Œå› æ­¤éœ€è¦ I/O managementï¼Œé€™æ¨£å°±å¾ˆé›£åˆ†å±¤ 2.8 Hardware Abstraction Layer å¸¸è¦‹çš„ Andriod OS èˆ‡ Windows æ¶æ§‹å¦‚ä¸‹: Andriod: å¯ä»¥çœ‹åˆ° Libraries è¢«æ”¾ç½®åœ¨ä¸­é–“å±¤ï¼Œæ˜¯å› ç‚ºç‚ºäº†èƒ½çµ¦å„å®¶å» å•†å•†æ¥­åŒ–ï¼Œè€Œæœ€ä¸Šæ–¹æ˜¯ Apach License å°±æ˜¯éš¨æ„çµ¦äººæ›´æ”¹çš„éƒ¨åˆ†ï¼Œ å¯ä»¥çœ‹åˆ° Hardware Abstraction Layer(HAL) è¢«æ”¾ç½®åœ¨ä¸­é–“å±¤ï¼Œç…§å¸¸ç†ä¾†èªªæ‡‰è©²æ”¾åœ¨ Hardware èˆ‡ Software ä¹‹é–“ï¼Œæ”¾åœ¨é€™è£¡æˆ–è¨±æ˜¯æƒ³è¦æŠŠ Kernel æœ‰æ›¿æ›çš„çš„å½ˆæ€§ã€‚ Windows: Windows çš„ HAL å°±è¢«æ”¾ç½®åœ¨ Kernel èˆ‡ Hardware ä¹‹é–“ï¼ŒæŠ½è±¡å±¤çš„ç›®æ¨™æ˜¯ï¼Œä¾‹å¦‚: å¸Œæœ› Kernel ä¸­æ²’æœ‰ Assemblyï¼Œä¸è¦å¤ªè·Ÿ Device ç›¸é—œã€‚ Kernel ä¹‹ä¸ŠåŒ…å«è‘— Virtual Memory Manager(æŠŠç¡¬é«”ç›¸é—œçš„éƒ¨åˆ†æŠ½å‡ºï¼Œå¦å¤–ä¸€å€‹ç›®éŒ„) Last Edit 10-10-2023 23:21"
  },"/jekyll/2023-09-23-software_testing_introduction.html": {
    "title": "Testing | Software Testing Introduction",
    "keywords": "software software_qualitiy Jekyll",
    "url": "/jekyll/2023-09-23-software_testing_introduction.html",
    "body": "Software testing course notes from CCU, lecturer Nai-Wei Lin. è»Ÿé«”æ¸¬è©¦æ˜¯ç¢ºä¿è»Ÿé«”å“è³ªçš„é‡è¦éç¨‹ï¼Œé€™å€‹éç¨‹ç¢ºä¿è»Ÿé«”ç”¢å“ç¬¦åˆé æœŸçš„éœ€æ±‚ï¼Œä¸¦ç¢ºä¿è»Ÿé«”ç”¢å“ç„¡ç¼ºé™·ï¼Œé€™è£¡ä»‹ç´¹è»Ÿæ¸¬çš„åŸºç¤æ¦‚è«–ã€‚ 1.1 What Is Software Testing æ¸¬è©¦æ˜¯ç¢ºè¡¨å“è³ªçš„æ–¹æ³•ä¹‹ä¸€ï¼ŒSoftware quality assurance(è»Ÿé«”å“è³ªä¿è­‰)æ¶‰åŠ Validation(ç¢ºæ•ˆ)/Verification(é©—è­‰)è»Ÿé«” Validation: ç¢ºæ•ˆå®¢æˆ¶çš„ Requirements èˆ‡è¨­è¨ˆå‡ºçš„ Specification ä¸€è‡´ Do we build the right software? Verification: é©—è­‰é–‹ç™¼çš„ Implementation èˆ‡è¨­è¨ˆå‡ºçš„ Specification ä¸€è‡´ Do we build the software right? è€Œè»Ÿé«”æ¸¬è©¦ä¸»è¦è‘—é‡åœ¨ Verification é€™éƒ¨åˆ†ï¼ŒValidation æ˜¯è¨­è¨ˆç«¯è¦è™•ç†çš„å•é¡Œ å»¶ä¼¸é–±è®€ Wiki: Verification and validation 1.1.1 Software Verification Verification ä¹Ÿåˆ†ç‚º Statically(éœæ…‹)èˆ‡ Dynamically(å‹•æ…‹) Statically: éœæ…‹é©—è­‰ä¸¦ä¸åŸ·è¡Œè»Ÿé«”ä¸‹é€²è¡Œï¼Œå®ƒåŒ…å« review, inspection, walkthrough, analysis ç­‰æŠ€è¡“ã€‚ éœæ…‹é©—è­‰ä¸»è¦é—œæ³¨é é˜²ç¼ºé™·ï¼Œé€šå¸¸éœ€è¦æœ‰ä¸€å®šçš„é–‹ç™¼ç¶“é©—çš„æ¸¬è©¦äººå“¡ä¾†é€²è¡Œ Dynamically: å‹•æ…‹é©—è­‰æœƒåŸ·è¡Œè»Ÿé«”ï¼Œå®ƒåŒ…å«å„ç¨®æ¸¬è©¦æŠ€è¡“ å‹•æ…‹é©—è­‰ä¸»è¦é—œæ³¨æ‰¾å‡ºå’Œä¿®å¾©ç¼ºé™·ï¼Œå‹•æ…‹æ¸¬è©¦ç³»çµ±çš„åŠŸèƒ½è¡Œç‚ºï¼ŒMemory/CPU ä½¿ç”¨æƒ…æ³ä»¥åŠç³»çµ±çš„æ•´é«”æ€§èƒ½ è€Œåœ¨ Software testing é€™é–€èª²ä¸­å¤§éƒ¨åˆ†é—œæ³¨çš„æ˜¯ Dynamically é€™éƒ¨åˆ†çš„å¯¦ä½œ å»¶ä¼¸é–±è®€ Static Testing vs. Dynamic Testing 1.1.2 Software testing è¦æ³¨æ„çš„æ˜¯è»Ÿé«”æ¸¬è©¦ä¸¦ä¸èƒ½è­‰æ˜è»Ÿé«”æ˜¯å®Œå…¨æ­£ç¢ºçš„ï¼Œè»Ÿé«”æ¸¬è©¦åƒ…èƒ½å¾é«”ä¸­æ‰¾åˆ°ç›¡å¯èƒ½å¤šçš„éŒ¯èª¤ã€‚å› ç‚ºè»Ÿé«”æ¸¬è©¦åªæ˜¯è­˜åˆ¥è»Ÿé«”ä¸­æ½›åœ¨çš„éŒ¯èª¤ï¼Œè€Œä¸æ˜¯è­‰æ˜è»Ÿé«”æ˜¯æ­£ç¢ºçš„ã€‚ Error, Fault, Failure, and Incident Error(éŒ¯èª¤): æ˜¯äººç‚ºæ‰€çŠ¯çš„éŒ¯èª¤ Fault(æ•…éšœ): æ˜¯æ–‡ä»¶æˆ–ç¨‹åºä¸­çš„ Error çš„çµæœ Failure(å¤±æ•—): ç•¶ Fault è¢«åŸ·è¡Œæ™‚å°±æœƒç™¼ç”Ÿ Failureï¼ŒFault çš„åŸ·è¡Œå°è‡´ç¨‹å¼ç„¡æ³•åŸ·è¡Œé æœŸçš„åŠŸèƒ½æˆ–çµæœ Incident(äº‹ä»¶): ç•¶ Failure ç™¼ç”Ÿæ™‚ï¼Œç”¨æˆ¶å¯èƒ½ä¸æœƒé¦¬ä¸Šç™¼ç¾ï¼Œä¸€å€‹ Incident æé†’ç”¨æˆ¶ Failure çš„ç™¼ç”Ÿ å»¶ä¼¸é–±è®€ Software Testing â€“ Bug vs Defect vs Error vs Fault vs Failure Test Case Software testing æ˜¯åŸ·è¡Œä¸€çµ„æ¸¬è©¦æ¡ˆä¾‹(Test Case) çš„è¡Œç‚ºï¼Œä»¥ä¾¿èƒ½å¤ æ‰¾å‡ºç¨‹å¼ä¸­çš„ Faultã€‚ ä¸€çµ„ Test case åŒ…å«ä¸€å€‹æ¸¬è©¦è¼¸å…¥åˆ—è¡¨å’Œä¸€å€‹ç›¸æ‡‰çš„é æœŸè¼¸å‡ºåˆ—è¡¨ æ¯å€‹ Test case éƒ½è¨­è¨ˆä¾†æª¢æŸ¥ç¨‹åºçš„æŸç¨®ç‰¹å®šåŠŸèƒ½æˆ–è¡Œç‚º è»Ÿé«”æ¸¬è©¦çš„ç”Ÿå‘½é€±æœŸï¼Œä»£è¡¨äº†å„å€‹æ­¥é©Ÿæ‰€ç”¢ç”Ÿçš„éŒ¯èª¤èˆ‡éŒ¯èª¤è¿½è¹¤ Why Do We Need Software Testing Software prevails in our living environment. Quality of software significantly influences our quality of life. Software faults in critical software systems may cause dramatic damages on our lives and finance. Carefully made programs have 5 faults per 1000 lines of code (LOC). Windows XP has 45M LOC, so it may have 225000 faults. 1.2 How Do We Do Software Testing ä½†æ˜¯åœ¨é€²è¡Œ Testing å‰æ‡‰è©²è¦å…ˆäº†è§£ Testing åˆ°åº•åœ¨æ¸¬è©¦ä»€éº¼? Test case ç†æƒ³çš„ç‹€æ³ä¸‹æ‡‰è©²æ˜¯ Specification âˆª Implementation çš„ç¯„åœï¼Œé€™æ¨£å°±èƒ½æ‰¾å‡ºæ‰€æœ‰ä¸åˆè¦ç¯„çš„ Faultã€‚ Faults of comission(éŒ¯èª¤çš„å§”ä»»): å¯¦éš›çš„è»Ÿé«”é–‹ç™¼å¾€å¾€éƒ½æœƒæœ‰è¶…å‡ºè¦æ ¼çš„éƒ¨åˆ†ï¼Œå¯èƒ½æ˜¯éœ€æ±‚è®Šæ›´æˆ–è€…æ˜¯åœ¨å¯¦ç¾åŠŸèƒ½æ™‚é‡åˆ°äº†æœªé è¦‹çš„æŒ‘æˆ°ã€‚ Faults of omission(éŒ¯èª¤çš„éºæ¼): åŒæ¨£çš„é–‹ç™¼ä¸­ä¹Ÿæœ‰å¯èƒ½æœƒæœ‰è¦æ ¼è¢«éºæ¼çš„æƒ…æ³ï¼Œå¯èƒ½æ˜¯è¦æ ¼ä¸Šçš„éŒ¯èª¤ã€æŠ€è¡“æŒ‘æˆ°ã€æ™‚é–“å£“åŠ›ç­‰åŸå› é€ æˆã€‚ 1.2.1 Test case Test Case æ¶‰åŠå…©å€‹ä¸»è¦å•é¡Œï¼Œå¦‚ä½• Test case generation(ç”¢ç”Ÿæ¸¬è©¦æ¡ˆä¾‹)ã€å¦‚ä½• Test case execution(åŸ·è¡Œæ¸¬è©¦æ¡ˆä¾‹) Test case execution: è¼¸å…¥ Input è‡³ Software å¾Œå¾—åˆ° Expected output èˆ‡ Output é€²è¡Œæ¯”å°ä¾†æ±ºå®šæ˜¯ Incident/Correct Excution ç›®å‰å¹¾ä¹éƒ½ä¾è³´æ–¼æ¸¬è©¦æ¡†æ¶ä¾†å¹«åŠ©åŸ·è¡Œï¼Œé€™é»ä¹‹å¾Œæœƒå†ä»‹ç´¹ Test case generation: è¦ç¢ºèªæ¸¬è©¦æ¡ˆä¾‹æœ‰å…©ç¨®æ–¹å¼ Black-box testing(Function testing): è»Ÿé«”è¢«è¦–ç‚ºä¸€å€‹é»‘ç›’å­ï¼Œå¾è¦æ ¼ä¸­æè¿°çš„åŠŸèƒ½ç¢ºå®šæ¸¬è©¦æ¡ˆä¾‹ White-box testing(Stucture testing): è»Ÿé«”è¢«è¦–ç‚ºä¸€å€‹ç™½ç›’å­ï¼Œå¾å¯¦æ–½çš„ç¨‹å¼çš„çµæ§‹ç¢ºå®šæ¸¬è©¦æ¡ˆä¾‹ Fuctional Testing vs Structure Testing Black-box å¾ Specification çš„è§’åº¦ä¾†è¨­è¨ˆ Test case å› è€Œè¼ƒé›£è¦†è“‹åˆ°æœªè¢«è¦å®šçš„è¡Œç‚º(Faults of comission) White-box å¾ Implementation çš„è§’åº¦ä¾†è¨­è¨ˆ Test case å› è€Œè¼ƒé›£è¦†è“‹åˆ°æœªè¢«å¯¦ç¾çš„è¡Œç‚º(Faults of omission) å› æ­¤å…©ç¨®æ–¹æ³•éƒ½ä¸è¶³å¤ ï¼Œåªæœ‰å…©ç¨®æ–¹æ³•éƒ½ä½¿ç”¨æ‰èƒ½ç›¡å¯èƒ½çš„è¦†è“‹ Specification âˆª Implementation è©¦æƒ³åœ¨æœªå­¸ç¿’è»Ÿé«”æ¸¬è©¦å‰æ˜¯æ€éº¼å»å¯« Testing? æˆ‘å¹¾ä¹éƒ½æ˜¯å¾çµæ§‹å»å‡ºç™¼ï¼Œå·²ç¾æœ‰çš„ç¨‹å¼å»é–‹ç™¼æ¸¬è©¦æ¡ˆä¾‹ï¼Œå› ç‚ºå£“æ ¹å°±æ²’è¨­è¨ˆå®Œæ•´çš„è¦æ ¼ã€‚ 1.2.2 Tracking of incidents Incident tracking system(äº‹ä»¶è¿½è¹¤ç³»çµ±)è² è²¬è¿½è¹¤æ‰€æœ‰éœ€è¦ä¿®å¾©çš„ Incidents(äº‹ä»¶)ï¼Œç¢ºä¿æ‰€æœ‰äº‹ä»¶éƒ½å¾—åˆ°å¦¥å–„è§£æ±º éœ€è¦çŸ¥é“äº‹ä»¶çš„ç›¸é—œäººå“¡ï¼Œæ‡‰åœ¨äº‹ä»¶å ±å‘Šå¾Œä¸ä¹…å¾—çŸ¥ é€™æ„å‘³è‘—ç³»çµ±æ‡‰è©²èƒ½å¤ è¿…é€Ÿåœ°é€šçŸ¥ç›¸é—œäººå“¡æœ‰é—œæ–°çš„äº‹ä»¶ï¼Œç¢ºä¿æ‰€æœ‰ç›¸é—œäººå“¡éƒ½èƒ½åŠæ™‚ç²å¾—æœ€æ–°çš„ä¿¡æ¯ï¼Œä¸¦å¯ä»¥ç«‹å³é–‹å§‹è™•ç†äº‹ä»¶ ä¸æœƒæœ‰äº‹ä»¶å› ç‚ºè¢«éºå¿˜è€Œæœªä¿®å¾© ç³»çµ±æœƒæŒçºŒè¿½è¹¤æ¯ä¸€å€‹äº‹ä»¶ï¼Œç›´åˆ°å®ƒè¢«ä¿®å¾©ï¼Œé˜²æ­¢ä»»ä½•äº‹ä»¶è¢«å¿½è¦–æˆ–éºå¿˜ ä¸æœƒå› å–®ä¸€ç¨‹åºå“¡çš„ä¸€æ™‚èˆˆèµ·è€Œæœªä¿®å¾©æŸå€‹äº‹ä»¶ ä¿®å¾©äº‹ä»¶çš„æ±ºå®šä¸æ‡‰è©²åªå–æ±ºæ–¼ä¸€å€‹äººçš„ä¸»è§€æ„é¡˜ï¼Œè€Œæ‡‰è©²åŸºæ–¼å°äº‹ä»¶çš„å®¢è§€è©•ä¼°å’Œåœ˜éšŠçš„å…±è­˜ æ¸›å°‘å› ç‚ºæºé€šä¸è‰¯è€Œæœªä¿®å¾©çš„äº‹ä»¶ é€™è¡¨ç¤ºç³»çµ±æ‡‰è©²ä¿ƒé€²è‰¯å¥½çš„æºé€šï¼Œä»¥é˜²æ­¢å› ç‚ºæºé€šå•é¡Œå°è‡´äº‹ä»¶æœªèƒ½è¢«ä¿®å¾© 1.2.3 Regression testing Regression testing(å›æ­¸æ¸¬è©¦) é‡è¤‡ä½¿ç”¨æ¸¬è©¦æ¡ˆä¾‹ä¾†æ¸¬è©¦æ›´æ”¹å¾Œçš„è»Ÿé«”ï¼Œç¢ºä¿ä¹‹å‰æ­£å¸¸é‹è¡Œçš„éƒ¨åˆ†æ²’æœ‰è¢«å½±éŸ¿é€ æˆæ–°çš„éŒ¯èª¤ï¼Œæ—¢æœ‰åŠŸèƒ½æ‡‰ç¹¼çºŒå¦‚å¸¸é‹è¡Œã€‚ å›æ­¸æ¸¬è©¦å¯ä»¥åœ¨ä¸åŒçš„æ¸¬è©¦éšæ®µæ‡‰ç”¨ï¼Œä¾‹å¦‚æ•´åˆæ¸¬è©¦æˆ–ç³»çµ±æ¸¬è©¦ï¼Œå…·é«”å–æ±ºæ–¼æ¸¬è©¦æ¡ˆä¾‹çš„ç´°åˆ†ç¨‹åº¦å’Œéœ€æ±‚ã€‚é€šå¸¸å®ƒå€‘è¢«æ”¾ç½®åœ¨æ•´åˆæ¸¬è©¦å’Œç³»çµ±æ¸¬è©¦ä¸­ã€‚ Regression testing æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼Œä½¿å…¶åœ¨è»Ÿé«”æ¸¬è©¦ä¸­æœ‰é‡è¦åœ°ä½: ç¢ºä¿ç©©å®šæ€§: å›æ­¸æ¸¬è©¦ç¢ºä¿æ–°çš„è»Ÿé«”è®Šæ›´ä¸æœƒå°ç¾æœ‰çš„åŠŸèƒ½é€ æˆè² é¢å½±éŸ¿ï¼Œç¢ºä¿è»Ÿé«”çš„æ•´é«”ç©©å®šæ€§å’Œå“è³ª ç¯€çœæ™‚é–“å’Œæˆæœ¬: è‡ªå‹•åŒ–å›æ­¸æ¸¬è©¦å¯ä»¥ç¯€çœå¤§é‡çš„æ¸¬è©¦æ™‚é–“ï¼Œç‰¹åˆ¥æ˜¯å°æ–¼é•·æœŸçš„è»Ÿé«”é–‹ç™¼å°ˆæ¡ˆæˆ–éœ€è¦é »ç¹é€²è¡Œç‰ˆæœ¬æ›´æ–°çš„æƒ…æ³ã€‚å› ç‚ºä¸éœ€è¦æ‰‹å‹•åŸ·è¡Œé‡è¤‡æ€§çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œæœ‰åŠ©æ–¼é™ä½æ¸¬è©¦æˆæœ¬ å¿«é€Ÿåé¥‹: å›æ­¸æ¸¬è©¦å¯ä»¥åœ¨æ¯æ¬¡è»Ÿé«”è®Šæ›´ä¹‹å¾Œè¿…é€Ÿé‹è¡Œï¼Œæä¾›é—œæ–¼è®Šæ›´å°è»Ÿé«”çš„å½±éŸ¿çš„å³æ™‚åé¥‹ï¼Œæœ‰åŠ©æ–¼å¿«é€Ÿè­˜åˆ¥ä¸¦è§£æ±ºå•é¡Œï¼Œå¾è€Œæé«˜é–‹ç™¼æ•ˆç‡ Regression testing ä¹Ÿå…·æœ‰ä¸€äº›æŒ‘æˆ°: åˆæœŸè‡ªå‹•åŒ–æˆæœ¬: ç‚ºäº†å¯¦ç¾è‡ªå‹•åŒ–å›æ­¸æ¸¬è©¦ï¼Œéœ€è¦å°‡æ¸¬è©¦æ¡ˆä¾‹è½‰åŒ–ç‚ºè‡ªå‹•åŒ–ç¨‹å¼ï¼Œæœƒé€ æˆç›¸ç•¶å¤§çš„å·¥ä½œé‡å’Œæˆæœ¬ ç¶­è­·æˆæœ¬é«˜: ç¶­è­·å›æ­¸æ¸¬è©¦å¥—ä»¶éœ€è¦æ™‚é–“å’Œè³‡æºã€‚ç•¶è»Ÿé«”è®Šæ›´é »ç¹æ™‚ï¼Œæ¸¬è©¦å¥—ä»¶æ›´æ–°æœƒç”¢ç”Ÿç›¸ç•¶çš„ç¶­è­·æˆæœ¬ åŸ·è¡Œæ™‚é–“: å¦‚æœå›æ­¸æ¸¬è©¦çš„æ¸¬è©¦æ¡ˆä¾‹è®Šå¾—éå¤šï¼Œå¯èƒ½éœ€è¦è¼ƒé•·çš„æ™‚é–“æ‰èƒ½å®Œå…¨åŸ·è¡Œï¼Œå¯èƒ½æœƒå°é–‹ç™¼æµç¨‹ç”¢ç”Ÿå»¶é²ï¼Œéœ€è¦ä»”ç´°è¨ˆåŠƒå’Œç®¡ç†å›æ­¸æ¸¬è©¦çš„åŸ·è¡Œæ™‚é–“ å»¶ä¼¸é–±è®€ ã€D13ã€‘æ¸¬è©¦é¡å‹ä»‹ç´¹:å›æ­¸æ¸¬è©¦ 1.2.4 Levels of testing Levels of testing(æ¸¬è©¦çš„å„å€‹éšæ®µ)ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å¹¾å€‹: Unit Test(å–®å…ƒæ¸¬è©¦): é€™æ˜¯æœ€åŸºæœ¬çš„æ¸¬è©¦éšæ®µï¼Œä¸»è¦é‡å°æœ€å°å–®å…ƒé€²è¡Œæ¸¬è©¦ï¼Œç¢ºä¿æ¯å€‹ç¨ç«‹çš„éƒ¨åˆ†éƒ½èƒ½æ­£å¸¸é‹ä½œ Integration Testing(æ•´åˆæ¸¬è©¦): æ­¤éšæ®µé‡å°è·¨ç‰©ä»¶æˆ–æ¨¡çµ„é€²è¡Œæ¸¬è©¦ï¼Œä»¥ç¢ºä¿å„å€‹æ¨¡çµ„ä¹‹é–“çš„äº¤äº’ä½œç”¨èƒ½å¤ æ­£å¸¸é‹ä½œ System Testing(ç³»çµ±æ¸¬è©¦):ç³»çµ±æ¸¬è©¦æ˜¯ä¸€ç¨®é¢¨éšªæ¸¬è©¦ï¼Œç›®çš„æ˜¯ç¢ºå®šæ•´å€‹ç³»çµ±æ˜¯å¦æ»¿è¶³ç‰¹å®šçš„åŠŸèƒ½æ€§å’ŒéåŠŸèƒ½æ€§éœ€æ±‚ï¼Œæ¸¬è©¦ç’°å¢ƒéœ€ç›¡å¯èƒ½å’Œæ­£å¼ä¸Šç·šçš„ç’°å¢ƒä¸€è‡´ Acceptance Testing(é©—æ”¶æ¸¬è©¦): ä¹Ÿè¢«ç¨±ç‚º UAT(ä½¿ç”¨è€…æ¥å—åº¦æ¸¬è©¦)ï¼Œé€™æ˜¯æœ€å¾Œä¸€å€‹æ¸¬è©¦éšæ®µï¼Œæœƒæ¨¡æ“¬çœŸå¯¦ä½¿ç”¨è€…æƒ…å¢ƒä¾†é©—è­‰è»Ÿé«”æ˜¯å¦ç¬¦åˆä½¿ç”¨è€…çš„éœ€æ±‚å’ŒæœŸæœ› æ¯ä¸€å€‹éšæ®µéƒ½æœ‰å…¶ç‰¹å®šçš„ç›®æ¨™å’Œé‡é»ï¼Œä¸”éœ€è¦æ ¹æ“šå…·é«”æƒ…æ³ä¾†é¸æ“‡æœ€é©åˆçš„ç­–ç•¥å’Œæ–¹æ³•2ã€‚ å»¶ä¼¸é–±è®€ ã€D11ã€‘ å¯¦ä¾‹ç°¡è¿°:æ¸¬è©¦å››éšæ®µèˆ‡æ¸¬è©¦æ–¹æ³• 1.3 Costs of Software Quality è»Ÿé«”æ¸¬è©¦çš„æˆæœ¬å¯ä»¥åˆ†ç‚ºå…©ç¨®ï¼ŒControl Costs(æ§åˆ¶æˆæœ¬)ï¼ŒFailure of Control Costs(å¤±æ•—æ§åˆ¶æˆæœ¬) Control Costs: Prevention costs(é é˜²æˆæœ¬): åŒ…æ‹¬æŠ•è³‡æ–¼å“è³ªåŸºç¤è¨­æ–½å’Œå“è³ªæ´»å‹•çš„è²»ç”¨ï¼Œé€™äº›æŠ•è³‡ä¸¦æœªé‡å°ç‰¹å®šçš„é …ç›®æˆ–ç³»çµ±ï¼Œè€Œæ˜¯å°æ•´å€‹çµ„ç¹”é€šç”¨ Appraisal costs(è©•ä¼°æˆæœ¬): åŒ…æ‹¬ç‚ºç‰¹å®šé …ç›®æˆ–ç³»çµ±åŸ·è¡Œçš„æ´»å‹•çš„è²»ç”¨ï¼Œç›®çš„æ˜¯ç‚ºäº†æª¢æ¸¬è»Ÿé«”éŒ¯èª¤ Failure of Control Costs: Internal failure costs(å…§éƒ¨å¤±æ•—æˆæœ¬): åŒ…æ‹¬ä¿®æ­£è¨­è¨ˆå¯©æŸ¥ã€è»Ÿé«”æ¸¬è©¦å’Œé©—æ”¶æ¸¬è©¦ä¸­æª¢æ¸¬åˆ°çš„éŒ¯èª¤çš„æˆæœ¬ï¼Œåœ¨è»Ÿé«”å®‰è£åˆ°å®¢æˆ¶ç«¯ä¹‹å‰å®Œæˆ External failure costs(å¤–éƒ¨å¤±æ•—æˆæœ¬): åŒ…æ‹¬ä¿®æ­£å®¢æˆ¶æˆ–ç¶­è­·åœ˜éšŠåœ¨è»Ÿé«”ç³»çµ±å®‰è£å¾Œæª¢æ¸¬åˆ°çš„æ‰€æœ‰å¤±æ•—çš„æˆæœ¬ æ‡‰è©²ä¿æŒåœ¨ Optimal software quality level é€™å€‹æ¨™æº–ä¹‹ä¸Šï¼ŒControl costs æ¸›å°‘ä¸æœƒè®“è»Ÿé«”å“è³ªçš„ç¸½æˆæœ¬ä¸‹é™ Test coverage criteria(æ¸¬è©¦è¦†è“‹ç‡æ¨™æº–)ï¼Œé€™æ˜¯ä¸€ç¨®è¡¡é‡è»Ÿé«”æ¸¬è©¦æ·±åº¦çš„æŒ‡æ¨™ï¼Œç”¨æ–¼ç¢ºå®šå·²ç¶“æ¸¬è©¦äº†è»Ÿé«”çš„å“ªäº›éƒ¨åˆ†ï¼Œä»¥åŠé‚„æœ‰å“ªäº›éƒ¨åˆ†å°šæœªé€²è¡Œæ¸¬è©¦ï¼Œå®ƒå¯ä»¥å¹«åŠ©æˆ‘å€‘ç¢ºå®šä½•æ™‚å¯ä»¥åœæ­¢è»Ÿé«”æ¸¬è©¦ è»Ÿé«”å“è³ªæˆæœ¬å½±éŸ¿è»Ÿé«”å“è³ªæ°´å¹³ï¼ŒæŠ•å…¥ç¢ºä¿è»Ÿé«”å“è³ªçš„è³‡æºæœƒç›´æ¥å½±éŸ¿è»Ÿé«”çš„æœ€çµ‚å“è³ª ä¾‹å¦‚: å¦‚æœæˆ‘å€‘æŠ•å…¥æ›´å¤šçš„è³‡æºé€²è¡Œæ¸¬è©¦ï¼Œé‚£éº¼å¯èƒ½æœƒç™¼ç¾æ›´å¤šçš„éŒ¯èª¤ï¼Œå¾è€Œæé«˜è»Ÿé«”çš„è³ªé‡ æ ¹æ“šå¯ç”¨çš„è»Ÿé«”å“è³ªè³‡æºä¾†ç¢ºå®šä½•æ™‚åœæ­¢è»Ÿé«”æ¸¬è©¦ï¼Œ ä¾‹å¦‚: å¦‚æœæˆ‘å€‘çš„è³‡æºæœ‰é™ï¼Œé‚£éº¼æˆ‘å€‘å¯èƒ½éœ€è¦åœ¨é”åˆ°ä¸€å®šçš„æ¸¬è©¦è¦†è“‹ç‡å¾Œå°±åœæ­¢æ¸¬è©¦ NOTE æœ¬ç¯‡åªæ˜¯è¬›è¿°è»Ÿé«”æ¸¬è©¦çš„æ¦‚è«–ï¼Œå¾ŒçºŒæœƒå†è¨è«–å„å€‹ç« ç¯€çš„ç´°ç¯€ Last edit 09-24-2023 15:50"
  },"/jekylls/2023-09-21-lexical_analysis.html": {
    "title": "Compiler | Lexical Analysis Notes",
    "keywords": "Compiler Jekylls",
    "url": "/jekylls/2023-09-21-lexical_analysis.html",
    "body": "Compilers course notes from CCU, lecturer Nai-Wei Lin. Lexical analysis(èªå½™åˆ†æ) å°‡æ–‡æœ¬è½‰æ›ç‚ºæœ‰æ„ç¾©çš„èªå½™æ¨™è¨˜(Token)ï¼Œé€™é€šå¸¸æ˜¯ Compiler æ­¥é©Ÿçš„ç¬¬ä¸€æ­¥ã€‚ Compilers: Principles, Techniques, and Tools ä»‹ç´¹ä½¿ç”¨ Regular Expression(RE, æ­£è¦è¡¨é”å¼)æè¿° Lexemes çš„æ–¹æ³•ï¼Œä¸¦é€éä¸€å€‹ Lexical-analyzer generator(èªå½™åˆ†æå™¨ç”Ÿæˆå·¥å…·)ä¾†é€²è¡Œä»£ç¢¼ç”Ÿæˆï¼Œ ä½¿æˆ‘å€‘å¯ä»¥å°ˆæ³¨åœ¨å¦‚ä½•æè¿° Lexemesã€‚ å› æ­¤æœƒå…ˆå­¸ç¿’ RE çš„ä½¿ç”¨æ–¹æ³•ï¼ŒRE èƒ½è¢«è½‰æ›ç‚º Nondeterministic Finite Automata(NFA, éç¢ºå®šæœ‰é™ç‹€æ…‹è‡ªå‹•æ©Ÿ)å•é¡Œåœ¨è½‰æ›ç‚º Deterministic Finite Automata(DFA, ç¢ºå®šæœ‰é™ç‹€æ…‹è‡ªå‹•æ©Ÿ)å•é¡Œï¼Œ ä¹‹å¾Œå°±èƒ½ç”¨ç¨‹å¼ç¢¼æ¨¡æ“¬è‡ªå‹•æ©Ÿé‹ä½œã€‚ 3.1 The Role of the Lexical Analyzer Lexical analyzer(èªå½™åˆ†æå™¨)ä¸»è¦ä»»å‹™å°±æ˜¯è®€å– Source code çš„è¼¸å…¥å­—ç¬¦(characters)ï¼Œä¸¦å°‡å…¶çµ„æˆç‚º Lexemeï¼Œä¸¦è¼¸å‡ºä¸€å€‹ Token åºåˆ—ï¼Œä¸¦åœ¨è­˜åˆ¥åˆ° Identifier æ™‚è¦å°‡å…¶æ·»åŠ åˆ° Symbol table ä¸­ã€‚ ä¸‹åœ–é¡¯ç¤ºä¸€å€‹ Syntax analyzer(èªæ³•åˆ†æå™¨)èˆ‡ Lexical analyzer äº’å‹•çš„éç¨‹ï¼Œå‘¼å« getNextToken ä¾†ä½¿èªå½™åˆ†æå™¨ä¸æ–·è®€å–å­—ç¬¦ï¼Œç›´åˆ°è­˜åˆ¥å‡ºä¸‹ä¸€å€‹ Token å°‡å…¶è¿”å›çµ¦èªæ³•åˆ†æå™¨ã€‚ èªå½™åˆ†æå™¨å¯ä»¥è¢«åŠƒåˆ†ç‚ºå…©å€‹éª¨ç‰Œæ•ˆæ‡‰çš„éç¨‹: æƒæä¸éœ€è¦è½‰è®Šç‚º Token çš„éƒ¨åˆ†çš„éç¨‹ ä¾‹å¦‚: éæ¿¾ Comments, Whitespace (blank, newline, tab â€¦) å¯¦éš›çš„ Lexical analysisï¼Œå¾æƒæçš„è¼¸å…¥ä¸­ç”¢ç”Ÿ Token èªå½™åˆ†æå™¨é‚„å¯ä»¥å°‡ Compiler çš„éŒ¯èª¤è¨Šæ¯èˆ‡ Source code çš„ç™¼ç”Ÿä½ç½®è¯ç¹«èµ·ä¾†ï¼Œä¾‹å¦‚: ç´€éŒ„æ›è¡Œç¬¦è™Ÿçš„è¡Œæ•¸ï¼Œä»¥ä¾¿åœ¨å‡ºéŒ¯æ™‚çµ¦äºˆä¸€å€‹è¡Œæ•¸ æŸäº›ç·¨è­¯å™¨ä¸­æœƒå°‡ Source code è¤‡è£½ä¸€ä»½ï¼Œä¸¦å°‡éŒ¯èª¤è¨Šæ¯æ’å…¥è©²ä½ç½® 3.1.1 Lexical Analysis Versus Parsing æŠŠ Lexical analysis(Scanning) èˆ‡ Syntax analysis(Parsing) åˆ†é–‹æœ‰ä¸‰å€‹åŸå› : ç°¡åŒ–ç·¨è­¯å™¨è¨­è¨ˆï¼Œåˆ†é›¢å¯ä»¥æ›´å¥½çš„å°ˆæ³¨åœ¨ä¸åŒä»»å‹™ä¸Š å¦‚æœæˆ‘å€‘æ­£åœ¨è¨­è¨ˆä¸€ç¨®æ–°çš„èªè¨€ï¼Œå°‡è©æ³•å’Œèªæ³•å•é¡Œåˆ†é–‹ä¹Ÿå¯ä»¥ä½¿æ•´é«”èªè¨€è¨­è¨ˆæ›´åŠ æ¸…æ™° æé«˜ç·¨è­¯å™¨çš„æ•ˆç‡ Lexical analyzer ç¨ç«‹å¾Œæˆ‘å€‘å°±å¯ä»¥å»æ›´æ–¹ä¾¿çš„å„ªåŒ– I/O çš„è™•ç† æé«˜ç·¨è­¯å™¨çš„å¯ç§»æ¤æ€§ï¼Œè¼¸å…¥è¨­å‚™ç‰¹å®šçš„ç‰¹æ€§å¯ä»¥é™åˆ¶åœ¨è©æ³•åˆ†æå™¨ä¸­ ä¾‹å¦‚: Windows çš„æ›è¡Œç¬¦æ˜¯ \\r\\nï¼ŒLinux ä¸Šçš„æ˜¯ \\n å»¶ä¼¸é–±è®€ Input Buffering in Compiler Design 3.1.2 Tokens, Patterns, and Lexemes åœ¨è¨è«– Lexical analyzerï¼Œé€™è£¡æœ‰ä¸‰å€‹éœ€è¦äº†è§£çš„è¡“èª: token(language): a set of strings if, identifier, relop Pattern(grammar): a rule defining a token if: if identifier: letter followed by letters and digits relop: &lt; or &lt;= or = or &lt;&gt; or &gt;= or &gt; Lexemes(sentence): a string matched by the parrern of a token if, Pi, count, &lt;, &lt;= å‡è¨­æœ‰ä»¥ä¸‹ Clang codeï¼Œä¾ç…§ Figure 3.2 print èˆ‡ score æ˜¯ Token id æ‰€åŒ¹é…çš„ Lexemeï¼Œ\"Total = %d\\n\" å‰‡æ˜¯èˆ‡ literal åŒ¹é…çš„ Lexemeã€‚ printf(\"Total = %d\\n\", score); åœ¨å¾ˆå¤šç¨‹å¼èªè¨€è¨­è¨ˆä¸­ï¼Œå¤§éƒ¨åˆ† Token è¢«åˆ†æˆä»¥ä¸‹å¹¾é¡: Reserved words(ä¿ç•™å­—)éƒ½æœ‰ä¸€å€‹ Tokenï¼Œä¿ç•™å­—çš„ Pattern èˆ‡ä¿ç•™å­—ç›¸åŒ Operators çš„ Tokenï¼Œå¯ä»¥è¡¨ç¤ºå–®å€‹é‹ç®—ç¬¦ï¼Œä¹Ÿæœ‰åƒ comparison æœ‰å¤šå€‹åŒé¡åˆ¥çš„é‹ç®—ç¬¦ Identifier åªç”¨ä¸€ç¨® Token è¡¨ç¤º Constants æœ‰ä¸€å€‹æˆ–å¤šå€‹ Tokenï¼Œä¾‹å¦‚ numberã€literal Punctuation symbol éƒ½æœ‰å„è‡ªçš„ Tokenï¼Œä¾‹å¦‚ (, ), ,, ; 3.1.3 Attributes for Tokens Attributes æ˜¯ç”¨ä¾†å€åˆ† Token ä¸­çš„ä¸åŒ Lexemeï¼Œä¾‹å¦‚ 0, 1 éƒ½èƒ½è·Ÿ Token number åŒ¹é…ï¼Œå› ç‚º Lexcial analyzer å¾ˆå¤šæ™‚å€™ä¸èƒ½åƒ…è¿”å›çµ¦ Syntax analyzer ä¸€å€‹ Token nameï¼Œ Token name å½±éŸ¿ Syntax analyzerï¼Œè€Œ Attributes æœƒå½±éŸ¿ Parsing ä¹‹å¾Œçš„ Semantic analyzerã€‚ &lt; if, &gt; &lt; identifier, pointer to symbol table entry &gt; &lt; relop, = &gt; &lt; number, value &gt; 3.3 Specification of Tokens Token çš„ä¸€ç¨®é‡è¦çš„è¡¨ç¤ºæ–¹å¼(è¦æ ¼)å°±æ˜¯ Regular expressionï¼ŒRE å¯ä»¥é«˜æ•ˆçš„æè¿°è™•ç† Token æ™‚è¦ç”¨åˆ°çš„ Patternã€‚ 3.3.3 Regular Expression Regular Expression(RE, æ­£è¦è¡¨é”å¼)æ˜¯ç”±è¼ƒå°çš„ RE æŒ‰ç…§ä»¥ä¸‹è¦å‰‡éè¿´å»ºæ§‹ï¼Œä¸‹é¢çš„è¦å‰‡å®šç¾©äº†æŸå€‹ Alphabet âˆ‘ çš„ RE: Îµ æ˜¯ä¸€å€‹ REï¼ŒL(Îµ) = {Îµ}ï¼Œä¹Ÿå°±æ˜¯è©²èªè¨€åªåŒ…å«ç©ºå­—ä¸² å¦‚æœ a æ˜¯ âˆ‘ ä¸­çš„ç¬¦è™Ÿï¼Œé‚£éº¼ a ä¹Ÿæ˜¯ä¸€å€‹ RE ä»£è¡¨ L(a) = {a}ï¼Œä¹Ÿå°±æ˜¯èªªé€™å€‹èªè¨€åƒ…åŒ…å«é•·åº¦ç‚º 1 çš„å­—ä¸² aã€‚ Suppose r and s are RE denoting L(r) and L(s) (r) (s) is a RE denoting L(r) âˆª L(s) (r)(s) is a RE denoting L(r)L(s) (r)* is a RE denoting (L(r))* (r) is a RE denoting L(r) Example: a | b {a, b} (a | b)(a | b) {aa, ab, ba, bb} a* {Îµ, a, aa, aaa, ...} (a | b)* the set of all strings of a's and b's a | a*b the set containing the string a and all strings consisting of zero or more a's followed by a b Order of operations: Priority Symbol Highest \\ High (), (?:), (?=), [] Middle *, +, ?, {n}, {n,}, {n,m} Low ^, $ Second lowest concatenation Lowest | Algebraic laws: 3.3.4 Regular Definitions ç‚ºäº†æ–¹ä¾¿è¡¨ç¤ºï¼Œæˆ‘å€‘å¯èƒ½æœƒçµ¦æŸäº› RE åˆ¥åï¼Œä¸¦åœ¨ä¹‹å¾Œçš„ RE ä¸­ä½¿ç”¨ç¬¦è™Ÿä¸€æ¨£ä½¿ç”¨é€™äº›åˆ¥åï¼Œä¾‹å¦‚: Name for regular expression $d_1 \\rightarrow r_1$ $d_2 \\rightarrow r_2$ $â€¦$ $d_n \\rightarrow r_n$ $where\\;r_i\\;over\\;alphabet\\cup ( d_1, d_2, â€¦, d_{i-1} )$ Examples: $letter \\rightarrow A | B | â€¦ | Z | a | b | â€¦ | z$ $digit \\rightarrow 0 | 1 | â€¦ | 9$ $identifier \\rightarrow letter(letter | digit)*$ ä¸Šé¢çš„ Examples å®šç¾©äº†ä¸€å€‹åƒ…èƒ½ç”± letter é–‹é ­ä½†çš„ identifier 3.3.5 Extensions of Regular Expressions RE å¾ŒçºŒæœ‰å…¶ä»–çš„æ“´å±•ï¼Œç”¨ä¾†å¢å¼· RE è¡¨é”å­—ä¸²çš„èƒ½åŠ›ï¼Œé€™è£¡æœƒä»‹ç´¹æœ€å¸¸è¢«ä½¿ç”¨çš„å¹¾ç¨®æ“´å±• One or more instances (r)+ denoting (L(r))+ r* = r+ | Îµ r+ = rr* Zero or one instance r? = r | Îµ Character classes [abc] = a | b | c [a-z] = a | b | â€¦ | z [^a-z] = any character except [a-z] Examples: $digit \\rightarrow 0 | 1 | â€¦ | 9$ $digits \\rightarrow digit^+$ $number \\rightarrow digits(.digits)?(E[+-]?digits)?$ ä¸Šé¢çš„ Examples å®šç¾©äº†å¾ digit åˆ° digits æœ€å¾Œåˆ° number çš„éç¨‹ 3.6 Finite Automata é€™è£¡ 3.6/3.7 ç« ä¸æœƒä¾ç…§èª²æœ¬é †åºï¼Œè€Œæ˜¯ä¾ç…§èª²ç¨‹é€²åº¦ã€‚ NFA çš„ Transition function å¯ä»¥æŒ‡å‘å¤šå€‹ Stateï¼ŒDFA çš„ Transition function åªèƒ½æŒ‡å‘ä¸€å€‹ State æœƒå…ˆä»‹ç´¹ç›¸å°ç°¡å–®çš„ DFA å†ä»‹ç´¹ NFAï¼Œé€™æ¨£å¯ä»¥æ›´å®¹æ˜“ç†è§£ NFA çš„é‹ä½œ è¦æ³¨æ„è‡ªå‹•æ©Ÿçš„å¹¾å€‹ç‰¹æ€§: è‡ªå‹•æ©Ÿæ˜¯ Recongnizer(è­˜åˆ¥å™¨)ï¼Œä»–å€‘åªèƒ½å°è¼¸å…¥çš„å­—ä¸²é€²è¡Œåˆ¤æ–· â€œYesâ€ or â€œNoâ€ Finite automata åˆ†ç‚ºå…©é¡ Nondeterministic finite automata (NFA, éç¢ºå®šæœ‰é™ç‹€æ…‹è‡ªå‹•æ©Ÿ) A symbol can label several edges out of the same state, the empty string(Îµ) is a possible label. Deterministic finite automata (DFA, ç¢ºå®šæœ‰é™ç‹€æ…‹è‡ªå‹•æ©Ÿ) For each state, and for each symbol of its input exactly one edge with that symbol leaving that state. 3.6.1 Nondeterministic Finite Automata An NFA consists of: A finite set of states A finite set of input symbols, default empty string is not in the set. A transition function (or transition table ) that maps (state, symbol) pairs to sets of states A state distinguished as start state A set of states distinguished as final states ä¸Šåœ–å·¦æ˜¯ NFAâ€™s transition graph åœ¨ç‹€æ…‹ 0 æœ‰ a, b å…©ç¨®ç‹€æ…‹è½‰ç§»ï¼Œåœ–å³æ˜¯ä»–å°æ‡‰çš„ç¯„ä¾‹ 3.6.2 Transition Tables NFA å¯ä»¥è¡¨ç¤ºç‚ºä¸€å¼µ Transition table(è½‰æ›è¡¨)ï¼Œä¾‹å¦‚: è½‰æ›è¡¨å¯ä»¥æ›´å®¹æ˜“çœ‹å‡º NFA çš„ç‹€æ…‹è½‰ç§»ï¼Œç¼ºé»æ˜¯ç•¶ NFA ç‹€æ…‹(Alphabet)å¾ˆå¤šæ™‚ï¼Œè½‰æ›è¡¨æœƒè®Šå¾—å¾ˆå¤§ä½”ç”¨ç©ºé–“ 3.6.3 Acceptance of Input Strings by Automata NFA accept è¼¸å…¥å­—ä¸² sï¼Œå¦‚æœå¾ Start state é–‹å§‹ï¼Œæœ‰ä¸€æ¢è·¯å¾‘å¯ä»¥èµ°åˆ° Final stateï¼Œé€™æ¢è·¯å¾‘çš„è½‰ç§»ç¬¦åˆé€™å€‹ Automata æ‰€å®šç¾©çš„èªè¨€ 3.6.4 Deterministic Finite Automata é€™è£¡æœƒå…ˆè«‡ä¸€å€‹ DFA æ€éº¼ç”¨ç¨‹å¼ç¢¼æ¨¡æ“¬ï¼Œå› ç‚ºç›¸è¼ƒæ–¼ DFA ç°¡å–®è¨±å¤š Deterministic finite automata (DFA, ç¢ºå®šæœ‰é™ç‹€æ…‹è‡ªå‹•æ©Ÿ) æ˜¯ NFA ä¸­çš„ä¸€ç¨®ç‰¹ä¾‹ï¼Œå…¶ä¸­: There are no moves on input Îµ For each state s and input symbol a, there is exactly one edge out of s labeled a. Algorithm 3.18 : Simulating a DFA. from Compiler: Principles, Techniques, and Tools p.150 Input: An input string ended with eof and a DFA with start state s 0 and final states F. Output: The answer â€œyesâ€ if accepts, â€œnoâ€ otherwise. begin s := s0; c := nextchar; while (c != EOF) do begin s := move(s, c); c := nextchar; end; if (s âˆˆ F) then return \"yes\"; else return \"no\"; end; 3.6.5 Simulation of an NFA NFA èˆ‡ DFA åœ¨æ¨¡æ“¬ä¸Šçš„æ¼”ç®—æ³•å¹¾ä¹ä¸€æ¨£ï¼Œæœ€å¤§çš„å€åˆ¥åœ¨æ–¼ Îµ-closure() çš„å»ºæ§‹ï¼Œå› ç‚º NFA åœ¨çµ¦å®šè¼¸å…¥çš„ç‹€æ³ä¸‹å¯ä»¥å­˜åœ¨å¤šå€‹ Stateï¼Œ å› æ­¤åœ¨æ¨¡æ“¬ä¸Šéœ€è¦è™•ç† State setã€‚èª²æœ¬ä¸­æœƒåœ¨ 3.6.4 æå‰ä»‹ç´¹ Algorithm 3.18 : Simulating a DFA. - p.151 Algorithm 3.22 : Simulating a NFA. from Compiler: Principles, Techniques, and Tools p.156 Input: An input string ended with eof and an NFA with start state s 0 and final states F Output: The answer â€œyesâ€ if accepts, â€œnoâ€ otherwise. begin S := Îµ-closure({S0}); c := nextchar(); while (c != EOF) do begin S := Îµ-closure(move(S, c)); c := nextchar(); end; if (S âˆ© F != âˆ…) then return \"yes\"; else return \"no\"; end; ä¸Šé¢çš„ Pseudocode æ¨¡æ“¬ NFA çš„é‹ä½œï¼Œå…¶ä¸­: move(s, c): å¾ state s è¼¸å…¥ c å¯ä»¥åˆ°é”çš„ NFA state set move(S, c): å¾ state s set S è¼¸å…¥ c å¯ä»¥åˆ°é”çš„ NFA state set Îµ-closure(s): æ²’æœ‰è¼¸å…¥å­—å…ƒï¼Œå¾ state s åƒ…é€šé Îµ-transitions å¯ä»¥åˆ°é”çš„ NFA state set Îµ-closure(S): æ²’æœ‰è¼¸å…¥å­—å…ƒï¼Œå¾ state s set S åƒ…é€šé Îµ-transitions å¯ä»¥åˆ°é”çš„ NFA state set nextchar(): å›å‚³ä¸‹ä¸€å€‹è¼¸å…¥å­—å…ƒ æ³¨æ„ä¸Šé¢çš„ S æ˜¯ NFA state setï¼Œè€Œ s æ˜¯ NFA state ä¸Šåœ–å·¦é‚Šçš„æœ€å¾Œçš„ S èˆ‡ Final state {3} æœ‰äº¤é›†ï¼Œå› æ­¤å›å‚³ â€œyesâ€ï¼Œå³é‚Šçš„å‰‡æ²’æœ‰äº¤é›†ï¼Œå›å‚³ â€œnoâ€ æ³¨æ„ä¸Šåœ–çš„ NFA ä¸¦æ²’æœ‰åŠ å…¥ Îµ-closure() å› ç‚ºæ²’æœ‰ä»»ä½• Îµ Stateï¼Œå› æ­¤å¯ä»¥åªé€é move() ä¾†æ¨¡æ“¬ NFA é‹ä½œ 3.6.6 Computation of Îµ-closure å¾ä¸Šé¢çš„ä¾‹å­å¯ä»¥èªªæ˜ move() æ˜¯å¦‚ä½•é‹ä½œï¼Œæ¥ä¸‹ä¾†é€™è£¡æœƒè¬›è§£ Îµ-closure() æ˜¯å¦‚ä½•é‹ä½œï¼Œç”¨ä¸€å€‹ DFS ä¾†æ‰¾å‡ºæ‰€æœ‰å¯ä»¥åˆ°é”çš„ Îµ-Stateï¼Œè¿”å›ä¸€å€‹ T set Computing Îµ-closure(T) Input: An NFA and a set of NFA states S. Output: T = Îµ-closure(S). begin push all states in S onto stack; T := S; while stack is not empty do begin pop t, the top element, off stack; for each state u with an edge from t to u labeled Îµ do begin if u is not in T then begin add u to T; push u onto stack; end; end; return T; end; ä¸Šé¢çš„ä¾‹å­çœ‹ä¼¼è¤‡é›œï¼Œå…¶å¯¦åªæ˜¯çµ„åˆäº† move() å’Œ Îµ-closure() çš„é‹ä½œ 3.7 From Regular Expressions to Automata å¾ RE è½‰æ›ç‚º NFAï¼Œå†å¾ NFA è½‰æ›ç‚º DFAï¼Œé€™è£¡æœƒç”¨é€™æ¨£çš„é †åºä¾†ä»‹ç´¹ 3.7.1 Construction of an NFA from a Regular Expression ä½¿ç”¨ McNaughton-Yamada-Thompson construction algorithmï¼Œå¯ä»¥å°‡ RE è½‰æ›ç‚º NFAã€‚ ä»¥ä¸Šèªªæ˜äº† (Îµ), (a), (s|t), (st), (s), çš„è½‰æ›éç¨‹ï¼Œè·Ÿä½¿ç”¨ (a|b)abb ä½œç‚ºä¾‹å­ä¾†ä¸€æ­¥æ­¥è½‰æ› åœ¨ Compilers: Principles, Techniques, and Tools p.161 - Example 3.24 æœ‰é¡ä¼¼çš„è½‰æ›éç¨‹ 3.7.2 Conversion of an NFA to a DFA ä½¿ç”¨ Subset construction algorithmï¼Œå¯ä»¥å°‡ NFA è½‰æ›ç‚º DFAã€‚ Subset construction çš„æ¦‚å¿µæ˜¯ DFA çš„æ¯å€‹ State éƒ½å°æ‡‰ NFA çš„ä¸€çµ„ Stateï¼Œä¹Ÿå°±æ˜¯ DFA çš„æ¯å€‹ State éƒ½ä»£è¡¨ NFA åœ¨è®€å–ç›¸åŒè¼¸å…¥å¾Œå¯èƒ½å­˜åœ¨çš„æ‰€æœ‰ç‹€æ…‹ã€‚ ä½†æ˜¯é€™æ¨£çš„è©± DFA çš„ State æ•¸é‡æœƒè®Šå¾—éå¸¸å¤šï¼Œå› æ­¤ Subset construction æœƒå°‡ç›¸åŒçš„ NFA State set åˆä½µæˆä¸€å€‹ DFA Stateã€‚ a DFA state â‰¡ a set of NFA states Find the inital state in the DFA Find all the states in the DFA Construct the transition table Find the final state of the DFA ä¾‹å¦‚ä¸€å€‹ NFA æœ‰ 3 å€‹ Stateï¼Œé‚£éº¼ä»–çš„ DFA æœ€å¤šæœƒæœ‰ 23 = 8 å€‹ State æ‰èƒ½è¡¨ç¤ºæ‰€æœ‰çš„ NFA State setï¼Œ ä½†æ˜¯åœ¨å¯¦éš›çš„èªè¨€è™•ç†ä¸­é€šå¸¸ä¸æœƒçœ‹åˆ°é€™ç¨®æŒ‡æ•¸å¢é•·ï¼Œä¸¦éæ‰€æœ‰çš„ NFA State çµ„åˆéƒ½æœƒå‡ºç¾åœ¨å¯¦éš›çš„è¼¸å…¥åºåˆ—ä¸­ã€‚ Algorithm 3.20 : The subset construction of a DFA from an NFA. from Compiler: Principles, Techniques, and Tools p.153 Input: An NFA N. Output: A DFA D with states Dstates and trasition table Dtran begin add Îµ-closure(s0) as an unmarked state to Dstates; while there is an unmarked state T in Dstates do begin mark T; for each input symbol a do begin U := Îµ-closure(move(T, a)); if U is not in Dstates then add U as an unmarked state to Dstates; Dtran[T, a] := U; end; end; ä¸Šé¢æ˜¯ä¸€å€‹å°‡ NFA è½‰æ›ç‚º DFA çš„ä¾‹å­ é€é Îµ-closure(), move($state, $symbols) æ‰¾å‡ºæ‰€æœ‰çš„ NFA State set å°‡ç›¸åŒçš„ NFA State set åˆä½µæˆä¸€å€‹ DFA State é€™æ¨£å°±èƒ½é€é DFA State ä¾†ç¹ªè£½å‡ºä¸€å¼µ DFA 3.7.3 Tiem Space Tradeoffs RE to NFA, simulate NFA time: O(|r| * |x|), space O(|r|) RE to NFA, NFA to DFA, simula time: O(|x|), space: O(2|r|) Lazy transition evaluation transitions are computed as needed at run time; computed transitions are stored in cache for later use. Lazy evaluation(æƒ°æ€§æ±‚å€¼)ï¼Œç›®çš„æ˜¯è¦æœ€å°åŒ–è¨ˆç®—æ©Ÿè¦åšçš„å·¥ä½œã€‚å¯ä»¥åœ¨ç©ºé–“è¤‡é›œåº¦ä¸Šå¾—åˆ°æ¥µå¤§çš„å„ªåŒ–ï¼Œå¾è€Œå¯ä»¥è¼•æ˜“æ§‹é€ ä¸€å€‹ç„¡é™å¤§çš„æ•¸æ“šé¡å‹ã€‚ Last Edit 10-02-2023 17:50"
  },"/jekyll/2023-09-20-compiler_introduction.html": {
    "title": "Compiler | Compilers Introduction",
    "keywords": "Compiler OS Jekyll",
    "url": "/jekyll/2023-09-20-compiler_introduction.html",
    "body": "Compilers course notes from CCU, lecturer Nai-Wei Lin. ç·¨è­¯å™¨é€™é–€èª²å¯ä»¥è®“äººæ›´æ·±å…¥çš„äº†è§£ Programming languageï¼Œå¦‚æœèƒ½çŸ¥é“ç·¨è­¯å™¨å¦‚ä½•å°‡ High level language è½‰æ›ç‚º Machine code èˆ‡èƒŒå¾Œçš„å·¥ä½œåŸç†ï¼Œ å°±èƒ½æ›´æœ‰æ•ˆçš„å»ç·¨å¯«ç¨‹å¼ã€‚åœ¨ä¿® OS çš„æ™‚å€™æ›´æœ‰æ„Ÿè¦ºï¼Œæœ‰äº›æ˜¯é‡å°ç·¨è­¯å™¨èˆ‡å¹³å°çš„å„ªåŒ–å»æ›´æ”¹å¯«æ³•ï¼Œæœ‰äº›å°å°çš„æ”¹å‹•å°±èƒ½æ¸›å°‘æ•¸è¡Œçš„æŒ‡ä»¤å»æå‡æ•ˆèƒ½ã€‚ linux/lib/rbtree.c åœ¨ 6.4 ç‰ˆåšäº†ä¸€å€‹éå¸¸ç°¡å–®çš„ commitï¼Œå°‡ bitwise | æ›æˆ +ï¼Œé€™å€‹æ›¿æ›ä½¿ x86 å¹³å°ä¸Šå¯ä»¥ä½¿ç”¨ lea Assembleï¼Œ å°‡å…©é“æŒ‡ä»¤è®Šæˆä¸€é“æŒ‡ä»¤ã€‚æ­£æ˜¯äº†è§£ Compiler Optimization æ‰èƒ½çŸ¥é“é€™æ¨£ä¿®æ”¹æœ‰ä»€éº¼ç”¨ã€‚ Human use nature languages to communicate with each other Human use programming language to communicate with computers 1.1 Language Processors å»£ç¾©çš„èªª Compiler å°±æ˜¯ä¸€å€‹å¯ä»¥å°‡ä¸€å€‹ Language ç¿»è­¯æˆå¦ä¸€å€‹ Language çš„å·¥å…·ï¼ŒåŒæ™‚ Compiler çš„å¦ä¸€å€‹é‡è¦åŠŸèƒ½æ˜¯ç™¼ç¾ç¿»è­¯éç¨‹ä¸­ Original language çš„éŒ¯èª¤ã€‚ ä¸Šåœ–å±•ç¤ºäº†ä¸€å€‹ Compiler èˆ‡ Interpreter çš„å·®ç•°ï¼Œå¦å¤– Java language process çµåˆäº†å…©è€…çš„éç¨‹ï¼Œæ—¢æœ‰ Target code ä¹Ÿæœ‰ç”¨æ–¼åŸ·è¡Œç¨‹åºçš„ Interpreterã€‚ ä½†æ˜¯ä¸€å€‹ç¨‹å¼èªè¨€å¾ Compile åˆ° Execute é™¤äº† Compiler é‚„æœ‰å¾ˆå¤šå…¶ä»–çš„è™•ç†ç¨‹åºï¼Œå¦‚: Preprocessorã€Assemblerã€Linkerã€Loaderã€‚ä½†é€™è£¡å°ˆæ³¨æ–¼ Compiler çš„éƒ¨åˆ†ï¼Œ åœ¨ 1.2 å†è©³ç´°èªªæ˜ Compiler çš„çµæ§‹ã€‚ 1.2 The Structure of a Compiler é¦–å…ˆæˆ‘å€‘å¯ä»¥æŠŠ Compiler åˆ†ç‚º Frontend/Backend å…©å€‹éƒ¨åˆ†: Analysis(Front-End): å°‡ Source code åˆ†è§£æˆå¤šå€‹çµ„æˆè¦ç´ ï¼Œä¸¦åœ¨é€™äº›è¦ç´ ä¹‹ä¸ŠåŠ å…¥èªæ³•çµæ§‹ã€‚ä½¿ç”¨é€™å€‹çµæ§‹ä¾†å»ºç«‹ Intermediate codeï¼Œä¸¦ä¸”å¯ä»¥æª¢æŸ¥åŸå§‹ç¨‹å¼æ˜¯å¦ç¬¦åˆæ­£ç¢ºçš„èªæ³•èˆ‡èªæ„ï¼Œä¸¦ä¸”æä¾›è³‡è¨Šçµ¦ä½¿ç”¨è€…ä¿®æ”¹ã€‚ ä¸¦ä¸”æŠŠ Source code çš„è³‡è¨Šæ”¶é›†ç‚º Symbol tableï¼Œä¹‹å¾Œå°‡ Intermediate code èˆ‡ Symbol table ä¸€èµ·é€çµ¦å¾Œç«¯ã€‚ Synthesis(Back-End): æ ¹æ“š Intermediate code èˆ‡ Symbol table ä¾†å»ºç«‹ç›®æ¨™ç¨‹å¼ ä¸Šåœ–éƒ½æ˜¯ Compiler çš„çµæ§‹ï¼Œå³åœ–è¡¨è¿°äº†æ¯å€‹æ­¥é©Ÿä¹‹é–“çš„æ›´å¤šç´°ç¯€ æœ‰äº›ç·¨è­¯å™¨åœ¨å‰ç«¯èˆ‡å¾Œç«¯ä¹‹é–“æœƒæœ‰ Machine-independent optimization(æ©Ÿå™¨ç„¡é—œçš„æœ€ä½³åŒ–)æ­¥é©Ÿï¼Œé€™å€‹æœ€ä½³åŒ–çš„ç›®çš„æ˜¯åœ¨ Intermediate code ä¹‹é–“é€²è¡Œè½‰æ›ã€‚ 1.2.1 Lexical analysis Lexical analysis(èªå½™åˆ†æ)ä¹Ÿè¢«ç¨±åš Scanning(æƒæ)ï¼Œæ˜¯ç·¨è­¯å™¨çš„ç¬¬ä¸€å€‹æ­¥é©Ÿï¼Œé€²è¡Œè®€å–åŸå§‹ç¨‹å¼çš„å­—å…ƒä¸²æµï¼Œä¸¦ä¾æ“š Lexeme(è©ç´ )ä¾†ç”¢ç”Ÿ Token(è©å½™å–®ä½)ä½œç‚ºè¼¸å‡ºã€‚ Lexeme: æ˜¯ Source code ä¸­å…·æœ‰ç›¸åŒæ„ç¾©çš„å­—ç¬¦åºåˆ—ï¼Œå¦‚ int, return, = éƒ½æ˜¯ Lexemeã€‚ Token: æ˜¯ Lexical analysis å¾Œçš„çµæœï¼Œå®ƒçš„å½¢å¼å¯èƒ½åƒ &lt;token-name, attribute-value&gt; ä¾‹å¦‚ Position = initial + rate * 60 åœ¨ç¶“é Lexical Analysis å¾Œæœƒè®Šæˆ: &lt;id, 1&gt; &lt;=&gt; &lt;id, 2&gt; &lt;+&gt; &lt;id, 3&gt; &lt;*&gt; &lt;60&gt; é€™æ¨£çš„ Token å…¶ä¸­ Position å°æ‡‰ &lt;id, 1&gt;ï¼Œid ä»£è¡¨ identifierï¼Œè€Œ 1 æŒ‡å‘ Symbol table ä¸­æ‰€å°æ‡‰çš„æ¢ç›® 1.2.2 Syntax analysis Syntax analysis(èªæ³•åˆ†æ)ä¹Ÿè¢«ç¨±åš Parsing(è§£æ)ï¼Œä½¿ç”¨ Lexical analysis ç”¢ç”Ÿçš„ Token ä¾†å»ºç«‹ Syntax treeã€‚ä¹‹å¾Œæœƒä»‹ç´¹ Context free grammar ä¾†æè¿°ç¨‹å¼èªè¨€çš„èªæ³•çµæ§‹ï¼Œ ä¸¦è‡ªå‹•ç‚ºæŸäº›é¡å‹çš„èªæ³•å»ºæ§‹é«˜æ•ˆç‡èªæ³•åˆ†æå™¨çš„æ¼”ç®—æ³•ã€‚ 1.2.3 Semantic analysis Semantic analysis(èªæ„åˆ†æ) ä½¿ç”¨ Syntax tree å’Œ Symbol table ä¸­çš„è³‡è¨Šä¾†æª¢æŸ¥åŸå§‹ç¨‹å¼æ˜¯å¦ç¬¦åˆç¨‹å¼èªè¨€çš„è¦å‰‡ï¼Œä¸¦ä¸”åœ¨é€™è£¡æ”¶é›†å‹åˆ¥çš„è³‡è¨Šã€‚ Type checking: é€™æ˜¯ Semantic analysis çš„é‡è¦éƒ¨åˆ†ï¼Œæª¢æŸ¥æ¯å€‹é‹ç®—å­æ˜¯å¦å…·æœ‰ä¸€è‡´çš„é‹ç®—å…ƒã€‚ä¾‹å¦‚: Array çš„ Index æ‡‰è©²è¦ç‚º intï¼Œè‹¥æœ‰ float å°±æ‡‰è©²å›å ±éŒ¯èª¤ã€‚ Coercion: ç¨‹å¼èªè¨€ä¹Ÿå¯ä»¥åšå‹åˆ¥è½‰æ›ï¼Œä¾‹å¦‚ Position = initial + rate * 60ï¼Œè€Œæ‰€æœ‰è®Šæ•¸éƒ½å·²ç¶“å®£å‘Šç‚º floatï¼Œæ­¤æ™‚å°±èƒ½å°‡ 60 è½‰æ›ç‚º 60.0ã€‚ 1.2.4 Intermediate code generation åœ¨ Source code è®Šæˆ Target code çš„éç¨‹ä¸­å¯èƒ½æœƒç”¢ç”Ÿä¸€å€‹åˆ°å¤šå€‹çš„ Intermediate representation(IR, ä¸­é–“è¡¨è¿°)ä¹Ÿå¯ä»¥ç¨±ä½œç‚º Intermediate code(ä¸­é–“ç¢¼)ï¼Œ Syntax tree ä¹Ÿå¯ä»¥ç®—åšæ˜¯ä¸€ç¨® IRï¼Œé€™äº›ä¸­é–“è¡¨è¿°æ‡‰è©²è¦æœ‰å…©å€‹é‡è¦çš„æ€§è³ª: Easy to produce(æ˜“æ–¼ç”Ÿç”¢), Easy to translate(æ˜“æ–¼è½‰è­¯ç‚º Machine language) ä¾‹å¦‚ä½¿ç”¨é¡ä¼¼ Assembly language çš„ä¸€ç¨®ä¸‰ä½å€ç¢¼ä½œç‚º Intermediate code: t1 = inttofloat(60) t2 = id3 * t1 t3 = id2 + t2 id1 = t3 ä½¿ç”¨ Intermediate code é‚„èƒ½ä½¿æˆ‘å€‘æ›´å¥½çš„åˆ†é›¢å‰ç«¯èˆ‡å¾Œç«¯ï¼Œä¸¦ä¸”ä¹Ÿå¢åŠ äº†ç§»æ¤æ€§èˆ‡å„ªåŒ–çš„å¯èƒ½æ€§ ä½¿ç”¨å¤šå±¤çš„ IR å¯ä»¥ä½¿æ¯å±¤éƒ½å°ˆæ³¨åœ¨ä¸åŒçš„ç›®æ¨™ä¸Šï¼Œé€™æ¨£å¯ä»¥ä½¿ç·¨è­¯éç¨‹åˆ†éš”å¾Œæ›´æ˜“æ–¼æ¨¡å¡ŠåŒ– å¦‚æœä¸ä½¿ç”¨ Intermediate codeï¼Œæˆ‘å€‘å¯èƒ½è¦å»æ‡‰å°å¤šç¨®å°æ‡‰ä¸åŒå¹³å°çš„è½‰æ› 1.2.5 Code optimization Code optimization çš„ç›®çš„åœ¨æ–¼å°‡ç¨‹å¼ç¢¼è®Šå¾—æ›´ã€Œå¥½ã€ï¼Œé€™è£¡æŒ‡çš„ä¸¦ä¸åªæ˜¯æ•ˆèƒ½ä¸Šçš„æå‡ï¼Œä¾‹å¦‚æ›´çŸ­æˆ–è€…å ç”¨è³‡æºæ›´å°‘çš„ç›®çš„ç¢¼ã€‚ åˆ†ç‚º Machine-independent(æ©Ÿå™¨ç„¡é—œ) å’Œ Machine-dependent(æ©Ÿå™¨ç›¸é—œ)çš„æœ€ä½³åŒ–: Machine-independent: ç™¼ç”Ÿåœ¨ Compiler çš„ä¸­é–“éšæ®µï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆ Intermediate code çš„æ™‚å€™å¯ä»¥é€²è¡Œå„ªåŒ–ã€‚é€™ç¨®å„ªåŒ–ä¸¦ä¸ä¾è³´æ–¼ç‰¹å®šçš„å¹³å°ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸åŒçš„ç¡¬é«”å¹³å°ä¸Šé‡ç”¨ã€‚ Machine-dependent: ç™¼ç”Ÿåœ¨ Compiler çš„æœ€å¾Œéšæ®µï¼Œä¹Ÿå°±æ˜¯å°‡ Intermediate code è½‰åŒ–ç‚º Target code çš„æ™‚å€™é€²è¡Œå„ªåŒ–ï¼Œæ­¤æ™‚å°±è¦è€ƒæ…®ä¸åŒçš„æ©Ÿå™¨æœ‰ä¸åŒçš„ CPU æ¶æ§‹èˆ‡æŒ‡ä»¤é›†ï¼Œ æ­¤æ™‚å°±èƒ½åˆ©ç”¨å¹³å°çš„ç‰¹æ€§ä¾†å¹«åŠ©å„ªåŒ–ã€‚ ä¾‹å¦‚ 1.2.4 å±•ç¤ºçš„ä¸‰ä½å€ç¢¼ï¼Œæˆ‘å€‘å¯ä»¥å°å…¶é€²è¡Œå¹³å°ç„¡é—œçš„å„ªåŒ–ï¼Œç›´æ¥å°‡ 60 è½‰ç‚º 60.0 æ›¿ä»£æ•´æ•¸å°±å¯ä»¥æ¶ˆé™¤ inttofloat é‹ç®—ï¼Œä¸¦å¯ä»¥å°‘å» t3 = id2 + t2 çš„é‹ç®—ï¼Œ æŠŠå€¼ç›´æ¥å‚³çµ¦ id1ï¼Œé€™æ¨£å°±èƒ½å¾—åˆ°ä¸€å€‹æ›´çŸ­çš„ Intermediate codeã€‚ t1 = id3 * 60.0 id1 = id2 + t1 Compiler Optimization é€šå¸¸æœƒå¦å¤–é–‹ä¸€é–€èª²ç‰¹åˆ¥è¬›è¿°ï¼Œç›®å‰è¶Šä¾†è¶Šå¼·å¤§çš„ç¾ä»£ç·¨è­¯å™¨æ‰€åšçš„ç¨‹å¼ç¢¼æœ€ä½³åŒ–å·²è¶…å‡ºè¨±å¤šäººé æ–™ã€‚å»¶ä¼¸é–±è®€: ä½ æ‰€ä¸çŸ¥é“çš„ C èªè¨€ï¼šç·¨è­¯å™¨å’Œæœ€ä½³åŒ–åŸç†ç¯‡ 1.2.6 Code generation Code generator(ä»£ç¢¼ç”Ÿæˆå™¨)å°‡æœƒä»¥ Intermediate code ä½œç‚ºè¼¸å…¥ï¼Œä¸¦å°‡å…¶æ˜ å°„è‡³ Target codeï¼Œä¾‹å¦‚ Assembly languageã€‚ Target code è‹¥æ˜¯ Assembly languageï¼Œå°±å¿…é ˆç‚º Intermediate code çš„è®Šæ•¸åˆ†é… Memory address æˆ– Register A crucial aspect of code generation is the judicious assignment of registers to hold variables ä¾‹å¦‚ 1.2.5 çš„å„ªåŒ–éå¾Œçš„ä¸­é–“ç¢¼ï¼Œé€™è£¡é€²è¡Œç¿»è­¯æˆçµ„åˆèªè¨€ LDF R2, id3 // id3 çš„å…§å®¹è¼‰å…¥ R3 Regiester MULF R2, R2, #60.0 // R2 èˆ‡ 60.0 é€²è¡Œä¹˜æ³•é‹ç®— LDF R1, id2 // id2 çš„å…§å®¹è¼‰å…¥ R2 Regiester ADDF R1, R1, R2 // R1 èˆ‡ R2 çš„å€¼ç›¸åŠ å­˜åˆ° R1 STF id1, R1 // R1 çš„å…§å®¹å­˜å…¥ id1 ä¸­ é€™è£¡å¿½ç•¥äº†å°æ–¼ Identifiers å„²å­˜åˆ†é…çš„å•é¡Œï¼Œåœ¨å¾Œé¢æœƒè¨è«–åˆ° 1.2.9 Compiler-construction tools è·Ÿå…¶ä»–è»Ÿé«”é–‹ç™¼ä¸€æ¨£ï¼Œé–‹ç™¼ Compiler ä¹Ÿå¯ä»¥åˆ©ç”¨è¨±å¤šç¾ä»£é–‹ç™¼å·¥å…·ï¼Œé™¤äº†é€šç”¨çš„è»Ÿé«”é–‹ç™¼å·¥å…·ä¹‹å¤–ä¹Ÿæœ‰ä¸€äº›æ›´åŠ é‡å° Compiler çš„å·¥å…·ã€‚ Scanner generators: å¯ä»¥æ ¹æ“šä¸€å€‹èªè¨€çš„ Lexemes çš„æ­£è¦è¡¨é”å¼(Regular Expression)æè¿°ä¾†ç”Ÿæˆèªå½™åˆ†æå™¨ Lex, Flex Parser generators: å¯ä»¥æ ¹æ“šä¸€å€‹ç¨‹å¼èªè¨€çš„èªæ³•(Context free grammars)æè¿°è‡ªå‹•ç”Ÿæˆèªæ³•åˆ†æå™¨ Yacc, Bison Syntax-directed translation engines: ç”¨æ–¼ Traversal syntax tree ä¸¦ä½¿ç”¨ Attribute grammars ç”Ÿæˆä¸­é–“ä»£ç¢¼ Code-generator generators: æ ¹æ“šä¸­é–“èªè¨€ç¿»è­¯æˆç›®æ¨™æ©Ÿå™¨çš„æ©Ÿå™¨èªè¨€çš„è¦å‰‡(Tree grammars) ä¾†ç”Ÿæˆä»£ç¢¼ç”Ÿæˆå™¨ Data-flow analysis engines: å¯ä»¥å¹«åŠ©æ”¶é›† Data-flow(ç¨‹å¼ä¸­çš„è³‡æ–™å‚³é)ï¼Œæ˜¯ Compiler å„ªåŒ–çš„é‡è¦éƒ¨åˆ† Compiler-construction toolkits: å¯ç”¨æ–¼æ§‹é€ ç·¨è­¯å™¨ä¸åŒéšæ®µçš„å·¥å…· 1.3 Formal Language Theory Compilers: Principles, Techniques and Tools æ›¸ä¸­ 1.3 è«‡è«–çš„æ˜¯ç¨‹å¼èªè¨€æ­·å²ï¼Œé€™è£¡æ”¹ç‚ºè¨è«–èªè¨€çš„å®šç¾©èˆ‡è‡ªå‹•æ©Ÿã€‚ 1.3.1 Language definition åœ¨è«‡è«– Formal Language(å½¢å¼èªè¨€)å‰é¦–å…ˆè¦è«‡çš„æ˜¯ Alphabet, String, Language çš„ä¸åŒå®šç¾©: Alphabet: a finite set of symbols. {0, 1}: binary alphabet String: a finite sequence of symbols from the alphabet. 1011: a string of length 4 Îµ: the empty string Language: a set of strings on the alphabet. {00, 01, 10, 11}: the set of strings of length 2 âˆ…: the empty set å°æ–¼ String èˆ‡ Language æœ‰ä»¥ä¸‹çš„åŸºæœ¬é‹ç®—: 1.3.2 Grammars &amp; Metalanguage Grammars: The sentences in a language may be defined by a set of rules called a grammar. ä¾‹å¦‚æœ‰èªæ³•è¦å‰‡ G: the set of binary strings of length 2 é‚£éº¼ L : {00, 01, 10, 11} å°±æ˜¯ç¬¦åˆè©²èªæ³•è¦å‰‡çš„å¥å­ Metalanguage : a language used to define another language å¦‚æœé€éä¸€ç¨®èªè¨€ä¾†å®šç¾©å¦ä¸€ç¨®èªè¨€ï¼Œé‚£éº¼è©²èªè¨€(Metalanguage) å¿…é ˆæ˜¯æœ‰æ˜ç¢ºçš„è¦å‰‡æ‰èƒ½æ¸…æ¥šä½œå‡ºæ¸…æ¥šçš„å®šç¾©ï¼Œé€™æ¨£æ‰æœ‰å¯èƒ½å¯¦ä½œä¸‹å€‹éšæ®µçš„ Automata 1.3.3 Automata æˆ‘å€‘èƒ½åœ¨ Compiler ä¸­éœ€è¦å¯¦ä½œçš„å°±æ˜¯ Automataï¼ŒAutomata å¾€å¾€èˆ‡ Formal language å¯†åˆ‡é—œè¯ï¼Œè‡ªå‹•æ©Ÿè¢«ç”¨ä½œå¯èƒ½æ˜¯ç„¡é™çš„å½¢å¼èªè¨€çš„æœ‰é™è¡¨ç¤ºã€‚ å› æ­¤å¯ä»¥åœ¨å¯¦ä½œä¸Šé€é Automata ä½¿èªè¨€è¼¸å…¥ä¸¦é€šé(Accept) èˆ‡ (Transform)è½‰æ›ã€‚ Acceptor(æ¥å—å™¨): ä¸€ç¨®è‡ªå‹•æ©Ÿï¼Œç”¨ Grammar ç¢ºå®šè¼¸å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ç‚ºè©²èªè¨€çš„å¥å­ Transducer(è½‰æ›å™¨): ä¸€ç¨®è‡ªå‹•æ©Ÿï¼Œä¾ç…§ Grammar çš„å®šç¾©ä¾†è½‰æ›è¼¸å…¥çš„å­—ç¬¦ä¸²æˆç‚ºå¦ä¸€ç¨®èªè¨€ã€‚ ç‹€æ…‹æ©Ÿé€é State, Event, Output, Input ä¾†é”æˆå¦‚ä½•ç²¾ç¢ºåœ°æè¿°å’Œè™•ç†å¯èƒ½ç„¡çª®å¤§çš„ä¿¡æ¯é›†åˆã€‚ 1.3.4 Compiler-Compiler æ—¢ç„¶ Compiler æ˜¯é€é Grammars ä¾†é€²è¡Œå°ä¸€ç¨®èªè¨€çš„é€šé(Accept) èˆ‡ (Transform)è½‰æ›ï¼Œé€™å€‹ Grammars å¿…å®šæ˜¯ä¸€ç¨®ç²¾ç¢ºçš„è¦æ ¼(Specification)ï¼Œ é€™å°±è®“æˆ‘å€‘å¯ä»¥é€é Specification ä¾†æ’°å¯« Automataï¼Œä½¿æˆ‘å€‘å¯ä»¥é€é Grammars ä¾†è‡ªå‹•ç”Ÿæˆ(Generate automatically) Automata é‚£éº¼å®šç¾© Grammars çš„å…ƒèªè¨€(Metalanguage) å¿…ç„¶ä¹Ÿæ˜¯æœ‰ç²¾ç¢ºçš„è¦å‰‡å­˜åœ¨ï¼Œé‚£æˆ‘å€‘ç•¶ç„¶ä¹Ÿå¯ä»¥é€é Matelanguage ä¾†é€²è¡Œ Compiler çš„è‡ªå‹•ç”Ÿæˆï¼Œ é€™å°±æ˜¯ Compiler-Compiler(ç·¨è­¯å™¨çš„ç·¨è­¯å™¨) æˆ– Compiler-Generator(ç·¨è­¯å™¨ç”Ÿæˆå™¨) ä½¿ç”¨ä¸åŒçš„ Matelanguage ä¾†å®šç¾© Compiler ä¸åŒéšæ®µçš„å…ƒä»¶ï¼Œæˆ‘å€‘å°±èƒ½ä»¥æ­¤ä¾†è‡ªå‹•ç”Ÿæˆé€™äº›å…ƒä»¶ é€™æ˜¯æˆ‘å€‘åœ¨å„å€‹éšæ®µå¯ä»¥ä½¿ç”¨çš„ Matelanguageï¼Œä»¥åŠé€éé€™äº› Matelanguage æˆ‘å€‘å¯ä»¥æ€éº¼å»å¯¦ä½œ Automata Lexical syntax: Regular expression: finite automata, lexical analyzer Syntax: Context free grammars: pushdown automata, parser Semantics: Attribute grammars: attribute evaluators, type checker Intermediate code generation: Attribute grammars: intermediate code generator Code generation: Tree grammars: finite tree automata, code generator NOTE This is first note of compilers, focus on the introduction of compilers. Last edit 09-23-2023 13:32"
  },"/jekyll/2023-09-12-operating_system_introduction.html": {
    "title": "OS | Operating System Introduction",
    "keywords": "OS Jekyll",
    "url": "/jekyll/2023-09-12-operating_system_introduction.html",
    "body": "Operating System: Design and Implementation course notes from CCU, lecturer Shiwu-Lo. Introduction 1.1 Why need OS 1.3 User mode/Kernel mode 1.5 User space/Kernel space 1.6 Memory management 1.7 Change mode &amp; System call 1.8 Signal &amp; Systemcall 1.9 Monolithic kernel 1.10 Kernel module 1.1 Why need OS ä½œæ¥­ç³»çµ±ä½¿é›»è…¦æ›´æ˜“æ–¼ä½¿ç”¨ ç£ç¢Ÿæ˜¯ç”± Block(é€šå¸¸ç‚º4K) æ‰€çµ„æˆï¼ŒOS å°‡ç£ç¢ŸåŠƒåˆ†ç‚º Fileï¼Œå†å°‡æª”æ¡ˆæ­¸é¡ç‚º Folder æ‰æ˜“æ–¼ä½¿ç”¨ã€‚ å¯ç¨‹å¼åŒ–(Programmable) è®Šå¾—æ›´å®¹æ˜“ï¼ŒOS èƒ½åŸ·è¡ŒåŸ·è¡Œæª”ï¼ŒCPU åŸ·è¡Œä¸åŒç¨‹å¼ç¢¼å°±æœƒæœ‰ä¸åŒåŠŸèƒ½ã€‚ OS ä½¿ç¨‹å¼ç¢¼æŠ½è±¡ç‚ºåŸ·è¡Œæª”ï¼Œèƒ½å¤ å¾å„å€‹åœ°æ–¹è¼‰å…¥å¯åŸ·è¡Œçš„ç¨‹å¼ç¢¼ï¼Œä¸¦ä¸”è³¦äºˆé‚è¼¯ä¸Šçš„æ”¯æ´ã€‚ ç¡¬é«”æŠ½è±¡åŒ–(Hardware abstraction) å¦‚æ»‘é¼ ã€è§¸æ§æ¿è¢« OS æŠ½è±¡åŒ–ç‚ºä¸€å€‹æŒ‡æ¨™è£ç½®ï¼Œä½¿ä½¿ç”¨è€…èƒ½çµ±ä¸€æ“ä½œã€‚ OS ä¸Šä¸æœƒåªé‹è¡Œä¸€å€‹ç¨‹å¼ï¼Œå› æ­¤å¿…é ˆæœ‰æ‡‰ç”¨ç¨‹å¼ä¹‹é–“çš„é€šè¨Šï¼Œå¦‚: Copy &amp; Pasteã€‚ ä½¿é›»è…¦çš„ç¡¬é«”ä½¿ç”¨æ›´æœ‰æ•ˆç‡(è³‡æºåˆ†é…) ä¸€å°é›»è…¦å¯èƒ½æœ‰å¤šå€‹ç¡¬é«”å­˜åœ¨ï¼ŒOS å¯ä»¥ä½¿é€™äº›ç¡¬é«”ä¸€èµ·å·¥ä½œã€‚ ä¾‹å¦‚åœ¨è¶³å¤ è¨˜æ†¶é«”çš„æƒ…æ³ä¸‹å¯ä»¥åŒæ™‚è¼‰å…¥å¤šå€‹åŸ·è¡Œæª”ä¸¦åŸ·è¡Œï¼Œä¸¦ä½¿ç”¨ç¡¬ç¢Ÿå †æ”¾æš«æ™‚ç”¨ä¸åˆ°çš„è¨˜æ†¶é«”ï¼Œä»¥ç©ºå‡ºè¨˜æ†¶é«”çµ¦çœŸæ­£éœ€è¦çš„ç¨‹å¼ã€‚ é€é CPU Schedulerï¼Œä½¿ I/Oã€CPU éƒ½èƒ½ç¶­æŒåœ¨é«˜ä½¿ç”¨ç‡ã€‚ 1.3 User mode/Kernel mode å¤§éƒ¨åˆ†çš„ä½œæ¥­ç³»çµ±ä»¥é›™ç³»çµ±(Dual-Mode)(Linux, Windows)ï¼Œå¯åˆ†ç‚º User mode èˆ‡ Kernel mode: Dual mode operation User mode: CPU æ‰€æä¾›çš„åŸ·è¡Œæ¨¡å¼ï¼Œåªèƒ½å­˜å–æœ‰é™çš„ç¡¬é«”è³‡æºï¼Œå¦‚: æ™®é€šé‹ç®—æ‰€éœ€çš„æš«å­˜å™¨ã€éƒ¨åˆ†è¨˜æ†¶é«”å…§å®¹ Various applications: libreoffice, gnuplot, pdf viewer GUI: X11, Gnome, KDE System manager: bash, vi, ls, mount, passwd Development tools: gcc, gdb System service: sftpd, sshd Basic inetrnet communication software: Browser, ftp Other library: courses, math Standard function library: Parts defined in POSIX like, libC, pthread Kernel mode: CPU æ‰€æä¾›çš„åŸ·è¡Œæ¨¡å¼ï¼Œå¯ä»¥å°ç¡¬é«”åšä»»ä½•çš„è®Šæ›´ï¼Œåœ¨ Kernel mode èƒ½é¡å¤–æ§åˆ¶çš„éƒ¨åˆ†å¦‚ä¸‹: æ§åˆ¶æš«å­˜å™¨(Control register)ï¼Œä¾‹å¦‚æ§åˆ¶ MMU(Memory management unit) çš„ç›¸é—œæš«å­˜å™¨ã€æ‰€æœ‰è¨˜æ†¶é«” Memory management Schedule and thread management Inter-Process communication Virtual memory Network communication Scheduler File system Safety, Authority management I/O Subsystem é€™ç¨®æ¨¡å¼ä¸‹ Kernel mode æ‰èƒ½å®Œå…¨çš„æŒæ§ç¡¬é«”ï¼Œä»Šå¤©å¦‚æœ User mode ä¸Šçš„ç¨‹å¼æƒ³è¦å­˜å–ç¡¬ç¢Ÿå‰‡éœ€è¦é€é System call ä¾†é€²è¡Œæ“ä½œã€‚åœ¨ Linux çš„è¨­è¨ˆåŸå‰‡æ˜¯é€Ÿåº¦ç¬¬ä¸€ï¼Œç•¶ç„¶ç¨‹å¼è¶Šé è¿‘ç¡¬é«”å°±æœƒæ›´å¿«ã€‚ ä½†å¦‚æœ User mode æƒ³è¦æ“ä½œç¡¬é«”è¦é€é System call ä¾†é€²è¡Œä¹Ÿå°±æ˜¯æ”¹è®Šæ¨¡å¼(Change mode)ï¼Œä½†é€™æ¨£æœƒç”¢ç”Ÿä¸€å®šçš„æ¶ˆè€—ã€‚è€Œåœ¨ Kernel mode ä¸­é€²è¡Œæ“ä½œç¡¬é«”å°±åªç­‰æ–¼ Function call çš„æ¶ˆè€—è€Œå·²ã€‚ User mode æƒ³è¦é€²è¡Œåˆ‡æ›å°±å¯èƒ½éœ€è¦ä¿å­˜ç•¶å‰ç‹€æ…‹ä»¥å›å¾©ã€æ¸…é™¤ Pipelineã€æ¸…é™¤ TLB å’Œ Cache é€™äº›é¡å¤–æ¶ˆè€—ã€‚ Dual mode é€šå¸¸éœ€è¦ç¡¬é«”é¡å¤–æ”¯æ´ï¼Œä¾‹å¦‚æä¾›ä¸€å€‹ Mode bit çš„æš«å­˜å™¨ä¾†æ±ºå®šç¾åœ¨æ˜¯å“ªä¸€ç¨® Modeã€‚ ä¾‹å¦‚ä¸€å€‹ç¶²é ï¼Œå¯ä»¥å°‡éœæ…‹é é¢æ”¾åœ¨ Kernel modeï¼Œå‹•æ…‹é é¢åœ¨ User modeã€‚ ä½†ä¸æ˜¯å°‡æ‰€æœ‰ç¨‹å¼éƒ½æ”¾åœ¨ Kernel modeï¼Œå› ç‚ºåªè¦æ˜¯ç¨‹å¼å°±æœƒæœ‰ Bugï¼Œåœ¨ Kernel mode ä¸­ç™¼ç”Ÿäº† Bug å¾ˆå¯èƒ½å°è‡´æ•´å€‹ç³»çµ±çš„å´©æ½°ã€‚ 1.5 User space/Kernel space è™›æ“¬è¨˜æ†¶é«”(Virtual memory)ä¹Ÿåˆ†ç‚º User/Kernel spaceï¼Œé€™ä¸»è¦æ˜¯ç‚ºäº†ä¿è­· Memory èˆ‡ Hardwareã€‚ CPU åœ¨åˆ‡åˆ†è¨˜æ†¶é«”æ™‚æ¯å€‹å–®ä½æœƒé™„åŠ ä¸€äº›å±¬æ€§ï¼Œå…¶ä¸­ä¸€å€‹é‡è¦çš„å±¬æ€§å°±æ˜¯æŒ‡å‡ºè©²å–®ä½ç‚º User/Kernel spaceã€‚ Task ä¹‹é–“ä¸èƒ½è®€å–å„è‡ªçš„ User spaceã€‚ Kernel æ‰èƒ½æ”¹è®Šæ¬Šé™ï¼ŒI/Oï¼Œä¸¦ä¸”æ“æœ‰æ‰€æœ‰çš„å­˜å–æ¬Šã€‚ å¯å¦å­˜å– Kernel space User space Privilege instructions Kernel mode âœ“ âœ“ âœ“ User mode Â  âœ“ Â  1.6 Memory management Virtual memory çš„ç®¡ç†å–®ä½å¯ä»¥åˆ†ç‚ºå…©ç¨®ï¼Œåˆ†é (Paging)ï¼Œåˆ†æ®µ(Segmentation): Paging: å°‡é€£çºŒçš„è¨˜æ†¶é«”åœ¨é‚è¼¯ä¸Šè®Šæˆ 4K å¤§å°çš„ Page æ–¹ä¾¿è»Ÿã€ç¡¬é«”å°è¨˜æ†¶é«”é€²è¡Œç®¡ç† é€™æ˜¯ç›®å‰æœ€å¸¸è¦‹çš„åšæ³•ï¼Œåœ¨ç®¡ç†ä¸Šå¯ä»¥è¼ƒå¥½çš„åˆ†é…è¨˜æ†¶é«” ä½œæ¥­ç³»çµ±æœƒç›¡é‡ä½¿ç”¨ Huge page(å¤§åˆ†é )ï¼Œä¸€å€‹ Huge page å¯ä»¥æœ‰ 2M åˆ° 1G çš„å¤§å°ï¼Œå› ç‚ºé€™æ¨£éœ€è¦çš„ Page æ•¸é‡è¼ƒå°‘ï¼Œ åœ¨ç¡¬é«”ç®¡ç†ä¸Šæœƒå¸Œæœ› Page ç›¡é‡å¤§ä¸€é»ã€‚ ä½†æ˜¯ Linux åœ¨ User space å¹¾ä¹æ²’æœ‰ä½¿ç”¨å¤§åˆ†é ï¼Œé™¤éç‰¹åˆ¥å»è¨­å®šè¦ä½¿ç”¨ Huge pageï¼Œå› ç‚ºåœ¨è»Ÿé«”ä¸Šç®¡ç† Page åè€Œ 4K å¯ä»¥æ¸›å°‘è¨˜æ†¶é«”æµªè²»ã€‚ Segmentation: å°‡é€£çºŒçš„è¨˜æ†¶é«”åœ¨é‚è¼¯ä¸Šè®Šæˆå„å€‹å¤§å°ä¸ä¸€çš„ Segmentï¼Œæ¯å€‹ Segment å°æ‡‰åˆ°ç¨‹å¼çš„ç‰¹å®šç”¨é€” x86 åœ¨ 32 ä½å…ƒæ¨¡å¼æ”¯æ´ segmentation Segment åœ¨é…ç½®ä¸Šæ¯”è¼ƒå›°é›£ï¼Œä½†åœ¨åµŒå…¥å¼ç³»çµ±ä¸­å› ç‚ºæ²’æœ‰ä»€éº¼å‹•æ…‹é…ç½®çš„éœ€æ±‚å› æ­¤è¼ƒå¸¸ç”¨ ä»¥ä¸Šçš„æ–¹æ³•éƒ½éœ€è¦ç¡¬é«”æ”¯æ´ï¼Œæ˜¯å› ç‚º CPU èˆ‡ç¡¬é«”çš„è™•ç†é€Ÿåº¦å› æ­¤éœ€è¦ç¡¬é«”æ”¯æ´æ‰èƒ½ä½¿é€Ÿåº¦æå‡ã€‚ 1.7 Change mode &amp; System call å¾ User mode åˆ‡æ›åˆ° Kernel modeï¼Œæ˜¯é€é syscall é€™å€‹çµ„èªä¾†é€²è¡Œ: OS init æ™‚æœƒå‘Šè¨´ CPU ç•¶ä½¿ç”¨è€…å‘¼å« syscall çš„æ™‚å€™ï¼ŒæŒ‡ä»¤æŒ‡æ¨™(%RIP Register)æ‡‰è©²è¨­å®šç‚ºä½•(system call çš„é€²å…¥é»)ï¼Œsyscall åšå…©ä»¶äº‹: ä¿å­˜ç•¶å‰çš„ç¨‹å¼ç‹€æ…‹ï¼Œä»¥ä¾¿ä¹‹å¾Œè¿”å› å°‡æ¨¡å¼åˆ‡æ›ç‚º Kernel modeï¼Œä¾‹å¦‚å°‡ Mode bit è¨­ç‚º 0 æº–å‚™è¦è¢«å‘¼å«çš„ System callï¼Œä¾‹å¦‚åœ¨x86-64æ¶æ§‹ä¸­çš„ %RAX Register æ”¾å…¥è¦è¢«å‘¼å«çš„ System call ç·¨è™Ÿ åˆ‡æ› Stack: User space stack ä¸€é–‹å§‹åªé…ç½® 16Kï¼Œä¸å¤ å†é€ Signal çµ¦ Kernel ä¸€æ¬¡å¤šè¦ 4K Page æœ€å¤šæˆé•·åˆ° 8M Kernel space stack çš„å¤§å°ä¸¦ä¸æœƒå¾ˆå¤§ï¼Œä¸¦ä¸” System call ä¹Ÿä¸æœƒä½¿ç”¨ç”¢ç”Ÿå †ç–Šçš„å¯«æ³• User/Kernel mode çš„å †ç–Šæ˜¯åˆ†é–‹çš„ï¼ŒKernel ä¸èƒ½ç”¢ç”Ÿ faultï¼Œæ‰€ä»¥åœ¨ Kernel mode ä½¿ç”¨çš„æ˜¯ Kernel space stack ç©©å®šæ€§: ä¾‹å¦‚ User mode å·²ç¶“æ•…æ„åŸ·è¡Œäº†ä¸€å€‹ 7.8M å †ç–Šçš„ç¨‹å¼ï¼Œæ­¤æ™‚ Change mode ä½†æ²’æœ‰ä½¿ç”¨ Kernel space é€™æ¨£å°±æœƒé‡åˆ° Segmentation fault ä¿å¯†æ€§: åŒæ™‚ User space stack å¦‚æœåŸ·è¡Œå®Œæ²’æœ‰é€²è¡Œæ¸…ç©ºä¹Ÿæœ‰å¯èƒ½æ´©æ¼ Kernel çš„è³‡æ–™ åœ¨ syscall æº–å‚™ system call çš„æ™‚å€™åŒæ™‚é‚„è¦æº–å‚™åŸ·è¡Œç’°å¢ƒï¼Œä¾‹å¦‚åŸ·è¡Œ write(clang) å°±è¦æº–å‚™å¥½è¦ä½¿ç”¨çš„ stack ä¾†å‘¼å« C å‡½æ•¸ å¦‚æœåœ¨æ²’è¾¦æ³•åˆ‡æ›å †ç–Šçš„ç³»çµ±ä¸Šï¼Œä¹Ÿè¦ç›¡é‡è¡¨ç•™ä¸€å€‹çµ¦ Kernel mode ä½¿ç”¨çš„å †ç–Šå¤§å° 16K å¾ Kernel mode å›åˆ° User modeï¼Œéœ€è¦ç”¨åˆ° sysret æŒ‡ä»¤ä¾†é€²è¡Œï¼Œæ­¤æ™‚ OS æœƒè¿”å›åœ°å€(æ¥ä¸‹ä¾†åŸ·è¡Œçš„ User mode ç¨‹å¼ç¢¼)ï¼Œsysret åšå…©ä»¶äº‹: è¿”å› user mode çš„ç¨‹å¼ç¢¼ä½ç½®ï¼Œä¾‹å¦‚ x64 æ”¾åœ¨ %RCX Register åˆ‡æ›ç‚º user modeï¼Œä¾‹å¦‚å°‡ Mode bit è¨­ç‚º 1 ä¸æ˜¯æ‰€æœ‰çš„ System call éƒ½æœƒé€²è¡Œå®Œæ•´çš„ Context switchï¼Œä¾‹å¦‚ getpid()ï¼Œå°±ä¸éœ€è¦æŠŠç•¶å‰çš„ç¨‹å¼ç‹€æ…‹ä¿å­˜å®Œæ•´ã€‚ System call handler å¿…é ˆç¢ºä¿å¾ Kernel è¿”å› User mode æ™‚ï¼Œç¨‹å¼å°‡ä¾†å¯ä»¥ç¹¼çºŒåŸ·è¡Œ Super user ä¹Ÿæ˜¯ä½¿ç”¨ç›¸åŒçš„ System call é€²å…¥é»ï¼Œå¤§éƒ¨åˆ†çš„ System call æœƒåˆ¤æ–·æ¬Šé™ä½† uid=0 çš„æ™‚å€™å°±ç›´æ¥é€šéï¼ŒGeneral user çš„ uid &gt; 1000ã€‚ Linux å®šç¾©äº†ç´„ 400 System call(Function)ï¼Œå¤§éƒ¨åˆ†éƒ½é€é syscall é€²å…¥ Kernelã€‚ 1.8 Signal &amp; Systemcall ç•¶ Kernel æœ‰ç‰¹åˆ¥äº‹ä»¶éœ€è¦ä¸»å‹•é€šçŸ¥ Processï¼Œå°±ä½¿ç”¨ Signal æ©Ÿåˆ¶ï¼ŒSignal æ¥å—å…©å€‹é‡è¦åƒæ•¸: äº‹ä»¶ç·¨è™Ÿã€ç™¼ç”Ÿè©²äº‹ä»¶æ™‚å‘¼å«è©²ç¨‹å¼æ‰€å®šç¾©çš„ç‰¹å®šå‡½æ•¸ äº‹ä»¶ç·¨è™Ÿ: ä¾‹å¦‚ SIGINT çš„ç·¨è™Ÿæ˜¯ 2ï¼Œè¡¨ç¤ºéµç›¤ä¸­æ–·(ä¾‹å¦‚ Ctrl + C)ï¼Œæ¯ç¨® Signal éƒ½æœ‰å”¯ä¸€çš„ç·¨è™Ÿï¼ŒOS ä¸­å·²è¢«å®šç¾© è©²äº‹ä»¶ç™¼ç”Ÿæ™‚æ‰€è™•ç†çš„å‡½æ•¸ï¼Œå¯ä»¥æ˜¯ç¨‹å¼è‡ªå·±å®šç¾©çš„å‡½æ•¸æˆ–æ˜¯ç³»çµ±é»˜èªçš„å‡½æ•¸å‘¼å« Linux kernel åªå…è¨±ä¸€å€‹ Process åŒæ™‚é–“ç™¼å‡ºä¸€å€‹ Blocking system callï¼Œéœ€è¦ç­‰å¾… Kernel å®Œæˆè©²å·¥ä½œ(System call)æ‰å›å‚³çš„ç³»çµ±å‘¼å«ã€‚ ç•¶ Process ç™¼å‡º Blocking system call å¾Œï¼Œè©² System call é‚„æœªçµæŸå‰å¦‚æœç™¼ç”Ÿ signal(ä¾‹å¦‚ Ctrl + C)ï¼ŒKernel è©²å¦‚ä½•è™•ç†? ä¸ç†æœƒè©² Signalï¼Œç¹¼çºŒå®Œæˆ System call è™•ç†è©² Signalï¼Œè©² System call è®Šæˆå¤±æ•—ï¼Œé€šå¸¸ä½œæ¥­ç³»çµ±æœƒé‡æ–°èµ·å§‹(Redo)è©² System call å»¶ä¼¸é–±è®€ Linux Signalsã€Interruption of system calls when a signal is caught 1.9 Monolithic Kernel å‡å¦‚ä¸€å€‹äººä¸€å¤©å¯ä»¥è®€ 1000 è¡Œç¨‹å¼ç¢¼ï¼ŒLinux kernel çš„æˆé•·é€Ÿåº¦å¯èƒ½æ˜¯ä¸€å¤©è¶…é 3000 è¡Œã€‚ Monolithic kernel å¤§éƒ¨åˆ†çš„ç³»çµ±åŠŸèƒ½éƒ½è¨­è¨ˆåœ¨ Kernel mode ä¸­ï¼Œé€™æ¨£çš„å¥½è™•æ˜¯åŸ·è¡Œæ•ˆç‡ï¼Œå„å€‹æ¨¡çµ„é–“çš„æºé€šåƒ…ç‚º Function callï¼Œ ä½†åŒæ¨£çš„ Kernel ä¹Ÿè®Šå¾—è¶Šä¾†è¶Šè¤‡é›œï¼Œä¹Ÿå®¹æ˜“ç”¢ç”ŸéŒ¯èª¤ã€‚ Micro kernel ç›¡å¯èƒ½çš„å°‡ OS çš„ç³»çµ±æœå‹™åŸ·è¡Œæ–¼ User modeï¼Œè®“ç³»çµ±è®Šçš„è¼ƒç‚ºç©©å®šï¼Œ ä½†æ˜¯ User mode çš„ Process é€šè¨Šéœ€è¦è§¸ç™¼ Context switch èˆ‡ Mode changeï¼Œæ•ˆèƒ½è¼ƒç‚ºä½è½ã€‚ è¨­è¨ˆæ¨¡å¼ ç³»çµ±ç¨‹å¼ æ•ˆèƒ½ æ ¸å¿ƒå¤§å° é€šè¨Šæ¶ˆè€— OS Monolithic å¤§éƒ¨åˆ†åœ¨ Kernel mode é«˜ å¤§ Function call çš„æ¶ˆè€— Linux, BSD Micro å¤§éƒ¨åˆ†åœ¨ User mode ä½ å° Context switch çš„æ¶ˆè€— Minix, L4, Android Linux åœ¨å®‰å…¨æ€§æ€è€ƒä¸Šå¯ä»¥æ€è€ƒ root çš„æ¬Šé™æ˜¯å¦å¤ªå¤§äº†ï¼Œroot æœ‰æ¬Šçœ‹åˆ°æ‰€æœ‰çš„è³‡è¨Šï¼Œåœ¨å®‰å…¨æ€§ä¸Šå¯ä»¥é€éåŠ å¯†ä¾†åšåˆ°ã€‚ Context switch &amp; Mode change é€™å…©å€‹è¦åˆ†æ¸…æ¥š: Context switch: åŸæœ¬åœ¨åŸ·è¡Œ Process Aï¼Œç¾åœ¨è¦æ›æˆ Process B Mode change: Process A åŸæœ¬åŸ·è¡Œåœ¨ User modeï¼Œå› ç‚ºè¦åŸ·è¡Œ System call ç¾åœ¨è¦åˆ‡æ›åˆ° Kernel mode 1.10 Kernel Module Kernel moduel åœ¨æ„ç¾©ä¸Šå°±æ˜¯æ ¸å¿ƒçš„æ’ä»¶ï¼Œå¯ä»¥æ“´å……æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œæœ€ç›´è§€çš„æ’ä»¶å°±æ˜¯é©…å‹•ç¨‹å¼ã€‚ Monolithic è¨­è¨ˆä¸‹çš„ Kernel module é‹è¡Œåœ¨ Kernel modeï¼ŒMicro kernel å‰‡ç›¸åã€‚ Kernel module åœ¨éœ€è¦çš„æ™‚å€™å†è¼‰å…¥ï¼Œä¾‹å¦‚ USB å¦‚æœæ˜¯æ˜¯ä¸€å€‹ ext4 file systemï¼Œ æ’å…¥é›»è…¦å¾Œ Linux Kernel èªå‡ºå¾Œå°±èƒ½è¼‰å…¥ ext4 module ä¾†è®€å–è©² USB lsmod åˆ—å‡ºç›®å‰çš„ Kernel moduleï¼Œä¸¦ä¸” Kernel module ä¹‹é–“æœƒæœ‰ç›¸ä¾æ€§ï¼Œä¾‹å¦‚å¦‚æœ Network æ˜¯ä¸€å€‹å¯«å¥½çš„ Kernel Moduleï¼Œ é‚£å®ƒå°±æœƒä¾è³´æ–¼ Network card çš„ Kernel moduleã€‚ Main Memory 1.11 Main memory usage 1.12 Memory and storage consistency 1.13 Linux base file system management 1.11 Main memory usage Linux å°‡ä¸»è¨˜æ†¶é«”åˆ†ç‚ºä¸‰ç¨®ä¸»è¦ç”¨é€”: Cache memory(Page cache): å°‡ Disk æˆ– SSD ç­‰å„²å­˜è£ç½®ä¸Šçš„å…§å®¹æš«å­˜æ–¼è¨˜æ†¶é«”ä¸­ï¼Œä»¥æé«˜å­˜å–é€Ÿåº¦ æª”æ¡ˆç³»çµ±çš„ Metadata!? Buffer memory: èˆ‡ I/O ä¹‹é–“çš„çš„è³‡æ–™äº¤æ›ï¼ŒDMA ä¸»è¦æ˜¯ CPU çš„é€Ÿåº¦é«˜æ–¼å‘¨é‚Šé€Ÿåº¦ï¼Œæ ¼å¼çš„è½‰æ›ç­‰ç­‰(å¦‚ç¶²è·¯å¡) Program memory: å°‡è¨˜æ†¶é«”åˆ†é…çµ¦ç¨‹å¼ä½¿ç”¨ï¼Œå¦‚: ç¨‹å¼å¯ä»¥é€é malloc(èƒŒå¾Œçš„ System call å¸¸å¸¸æ˜¯ brk)ã€nmap ç­‰å‡½æ•¸ç´¢å–è¨˜æ†¶é«” åŸ·è¡Œæª”å¿…é ˆè¼‰å…¥ä¸»è¨˜æ†¶é«”å¾Œæ‰èƒ½åŸ·è¡Œ Linux åŸå‰‡ä¸Šæœƒç›¡å¯èƒ½çš„ä½¿ç”¨æ‰æ‰€æœ‰è¨˜æ†¶é«”ä»¥åŠ é€Ÿ I/Oï¼Œç•¶è¨˜æ†¶é«”ä¸è¶³æ™‚ Linux æœƒé‡‹æ”¾ Cache memory å’Œ Buffer memoryã€‚ 1.12 Memory and storage consistency ä¸»è¨˜æ†¶é«”æ¡ç”¨ DRAM æ–·é›»å¾Œå¤±å»å…§å®¹ï¼Œå› æ­¤éœ€è¦éæ®ç™¼æ€§çš„ç¬¬äºŒå±¤å„²å­˜è£ç½®(Secondary storageï¼ŒDisk, SSD)ã€‚ è€Œé›»è…¦å¿…é ˆå°‡ç¬¬äºŒå±¤å„²å­˜è£ç½®çš„å…§å®¹è¼‰å…¥è¨˜æ†¶é«”å¾Œæ‰å¯ä»¥ä¾› CPU é‹ç®— å¯ä»¥é€éæ˜ç¢ºçš„ç¨‹å¼ç¢¼å­˜å–è³‡æ–™ï¼Œå¦‚: open, read, write ä¹Ÿå¯ä»¥é€é mmap çš„æ–¹å¼å°‡æª”æ¡ˆ Maping åˆ°æ‡‰ç”¨ç¨‹å¼çš„è¨˜æ†¶é«”ç©ºé–“åŠ ä»¥è™•ç† ç¨‹å¼èˆ‡ OS éƒ½å¿…é ˆå®šæœŸçš„å°‡è³‡æ–™å›å­˜åˆ°ä¸‹å±¤è£ç½® OS èˆ‡ I/O å‡½æ•¸åº«éƒ½å¯èƒ½é€é Buffering çš„æ©Ÿåˆ¶ï¼Œä»¥æ‰¹æ¬¡çš„æ–¹å¼å¯«å‡ºè³‡æ–™ä»¥å¢åŠ æ•ˆç‡ æ‡‰ç”¨ç¨‹å¼å¯ä»¥å‘¼å«å‡½æ•¸å¼·åˆ¶å°‡è³‡æ–™å¯«å‡ºï¼Œå¦‚: sync, fsync, fdatasyc æ•ˆèƒ½ä¸Šçš„è€ƒé‡ read &gt; writeï¼Œread ä¸èƒ½å»¶é²ï¼Œå»¶é²å°‡å°è‡´ç¨‹å¼ç„¡æ³•åŸ·è¡Œã€‚ çµæœä¸Šçš„è€ƒé‡ write &gt; readï¼Œç•¶ä½¿ç”¨è€…ä½¿ç”¨ Ctrl+S é€²è¡Œå„²å­˜æ™‚ï¼Œè‹¥åœ¨ä¸­é€”ç•¶æ©Ÿè³‡æ–™ä¸¦æ²’æœ‰çœŸçš„å¯«å…¥ Diskï¼Œä½¿ç”¨è€…å°‡ç„¡æ³•æ¥å—ã€‚ write å¾€ä¸‹å¯«å…¥æ™‚ä¸ä¸€å®šé¦¬ä¸ŠæŠŠè³‡æ–™å¯«å…¥ Diskï¼Œæœ‰å¯èƒ½åªæ˜¯å…ˆæš«æ™‚å­˜åœ¨ Memory/Buffer ä¸­ï¼ŒåŒæ™‚è£ç½®ä¸Šå¯èƒ½ä¹Ÿæœƒæœ‰ Buffer ä¾‹å¦‚ SSDã€‚ é€™è£¡æœ‰ä¾‹å¦‚ Write-throughï¼ŒWrite-back ç­‰ä¸åŒæ–¹å¼çš„å¯«å…¥æ˜¯ OS èƒ½é€²è¡Œæ“ä½œçš„ã€‚ Write-through: å¯«å…¥ Main memory æ™‚åŒæ™‚å¯«å…¥ Cache é€™æ¨£å¯ä»¥ä¿è­‰è³‡æ–™çš„ä¸€è‡´æ€§ Write-back: å¯«å…¥æ•¸æ“šæ™‚å…ˆå¯«å…¥ Cacheï¼Œä¸¦å°‡è³‡æ–™æ¨™è¨˜ç‚º dirty(å·²ä¿®æ”¹ä½†æœªå¯«å›ä¸»è¨˜æ†¶é«”)ï¼Œç„¶å¾Œåœ¨ç¨å¾Œçš„æ™‚é–“é»å°‡è³‡æ–™å¯«å›è¨˜æ†¶é«”ï¼Œä¾‹å¦‚: Cache éœ€è¦æ–°çš„ç©ºé–“ä¾†å„²å­˜æ–°çš„æ•¸æ“š æ·±å…¥æ€è€ƒï¼Œå¦‚æœè£ç½®ä¸Šèƒ½æœ‰é›»æ± çš„è©±å°±èƒ½ä¿è­‰å¯«å…¥æ™‚éƒ¨ä»½çš„å®‰å…¨æ€§ï¼Œå¦‚æœå·²ç¶“å¯«å…¥è£ç½®ä¸Šçš„ Buffer æ­¤æ™‚é›»æºå‡ºç¾æ„å¤–ä¹Ÿèƒ½çŸ­æ™‚é–“å…§é€²è¡Œå„²å­˜ å»¶ä¼¸é–±è®€: Write-through vs Write-back 1.13 Linux base file system management ä¹å­—æª”æ¡ˆæ¬Šé™ç®¡ç†ï¼Œåˆ†ç‚ºæª”æ¡ˆèˆ‡è³‡æ–™å¤¾ï¼Œè©³æƒ…å¯çœ‹é³¥å“¥çš„ä»‹ç´¹ ç¬¬ä¸ƒç« ã€Linux ç£ç¢Ÿèˆ‡æª”æ¡ˆç³»çµ±ç®¡ç† Linux çš„æª”æ¡ˆç³»çµ±æ”¯æ´ ACL(Access control list) ACL å¯ä»¥å°å„å€‹ä½¿ç”¨è€…æˆ–å„å€‹ç¾¤çµ„åˆ†åˆ¥è¨­å®šæ¬Šé™ ACL ä¾è³´åº•å±¤çš„æª”æ¡ˆç³»çµ±æ”¯æ´ï¼Œå¦‚: EXT4, BTRFS ç­‰éƒ½æ”¯æ´ ACL å¯ä»¥ä½¿ç”¨æŒ‡ä»¤ setfval èˆ‡ getfacl åˆ†åˆ¥è¨­å®šåŠè®€å–æª”æ¡ˆæˆ–ç›®éŒ„çš„æ¬Šé™ ä½†æ˜¯æœ‰æ™‚å¾Œ Normal user ä¹Ÿéœ€è¦æ›´æ”¹æ¬Šé™ä¾†åŸ·è¡ŒæŸäº›ç¨‹å¼ï¼Œä¾‹å¦‚: passwd, ä»–æœƒåœ¨åŸ·è¡Œä¸­ä½¿ç”¨ setuid ä¾†æš«æ™‚æ”¹è®Šä½¿ç”¨è€…æ¬Šé™ï¼Œ ç›´åˆ° passwd åŸ·è¡ŒçµæŸ(æˆ–è€…æ˜¯è©²ç¨‹å¼æ”¾æ£„ root æ¬Šé™) Computer world ä¸­çš„æ¬Šé™å¾€å¾€èˆ‡ç¾å¯¦ä¸–ç•Œçš„æ¬Šé™ä¸ç›¸ç­‰ Linux ä¸­ root æ“æœ‰æœ€é«˜æ¬Šé™ï¼Œroot å¯ä»¥å°æª”æ¡ˆç³»çµ±ã€æ‡‰ç”¨ç¨‹å¼(è¨˜æ†¶é«”)é€²è¡Œå„å¼æ¨£çš„æ“ä½œ root å¯ä»¥å­˜å–æ‰€æœ‰ä½¿ç”¨è€…çš„æª”æ¡ˆ(ç”šè‡³æ˜¯æ©Ÿå¯†æª”æ¡ˆ)ï¼Œé€™èˆ‡çœŸå¯¦çš„æ¬Šé™ä¸ç¬¦åˆ(è€é—† = Normalï¼Œç³»çµ±ç®¡ç†è€… = Super) ç›®å‰å¤§éƒ¨åˆ†çš„ Linux æä¾›è³‡æ–™å¤¾åŠ å¯†çš„åŠŸèƒ½ï¼Œå¯ä»¥éƒ¨åˆ†æ”¹å–„å•é¡Œ I/O Subsystem 1.14 I/O Subsystem &amp; Control 1.15 I/O Subsystem transfers data 1.16 CPU and DMA compete for memory access 1.14 I/O Subsystem &amp; Control å‘¨é‚Šè£ç½®å¯èƒ½æœ‰ä¸åŒå„²å­˜è³‡æ–™çš„æ–¹å¼ï¼Œä¾‹å¦‚æ»‘é¼ éµç›¤å¯èƒ½åƒ…éœ€è¦å…§å»ºæš«å­˜å™¨ï¼Œè€Œç¶²è·¯å¡ã€ç¡¬ç¢Ÿå¯èƒ½æœ‰è‡ªå·±çš„å…§éƒ¨è¨˜æ†¶é«”ï¼Œå„²å­˜çš„è³‡æ–™èˆ‡å‘¨é‚Šçš„æ™¶ç‰‡ä¾†é‹ä½œè£ç½®ã€‚ I/O Subsystem æ˜¯ OS çš„ä¸€å€‹é‡è¦éƒ¨åˆ†ï¼Œè² è²¬ç®¡ç†ç¨‹å¼çš„ I/O è«‹æ±‚ã€‚ I/O Subsystem çš„æ§åˆ¶æµç¨‹é€šå¸¸å¦‚ä¸‹: å‘å‘¨é‚Šä¸‹é”å‘½ä»¤ æ–¼è¨˜æ†¶é«”åŠå‘¨é‚Šä¹‹é–“åšè³‡æ–™å‚³è¼¸ é€šçŸ¥è™•ç†å™¨ã€Œå·¥ä½œå·²å®Œæˆã€ Memory mapped I/O ç›®å‰ä¸»æµä½¿ç”¨çš„ I/O æ–¹å¼ å°‡å‘¨é‚Šçš„æ§åˆ¶ã€Œæš«å­˜å™¨ã€è¨˜æ†¶é«”ã€æ˜ å°„åˆ° CPU çš„ã€Œè¨˜æ†¶é«”æ˜ å°„ç©ºé–“(Memory space)ã€ ä¾‹å¦‚ä½¿ç”¨æŒ‡ä»¤: MOV CX, 0xFFFFFFFF; å‡è¨­ 0xFFFFFFFF æ˜¯è£ç½®è¨˜æ†¶é«”ï¼Œå°‡ CX register çš„å€¼æ”¾åˆ°ä½ç½® 0xFFFFFFFF å°±ç­‰æ–¼å‘ä¸‹å„²å­˜è³‡æ–™ ä¸Šåœ–æ¨¡æ“¬ä¸€å€‹å¯èƒ½çš„ MMIOï¼ŒDRAM èˆ‡ä¸åŒçš„ Device åˆ†åˆ¥è¢«æ˜ å°„åˆ°ä¸åŒçš„è¨˜æ†¶é«”å€æ®µã€‚è£ç½®æœ‰è‡ªå·±çš„æ§åˆ¶æš«å­˜å™¨ã€ å»è¨­å®šè®€å–çš„æŒ‡ä»¤ä¾†åœ¨è£ç½®çš„æ™¶ç‰‡ä¸ŠåŸ·è¡Œï¼Œåœ¨è£ç½®æš«å­˜å™¨è®€å¯«çš„ç¨‹å¼å°±è¢«ç¨±ä½œ(Device driver)é©…å‹•ç¨‹å¼ Port mapped I/O ç›®å‰åœ¨ä¸€äº›åµŒå…¥å¼è™•ç†å™¨ä¸Šä½¿ç”¨ï¼Œå› ç‚º x86 æ˜¯è¼ƒå¤è€çš„æ¶æ§‹å› æ­¤ä¹Ÿæœ‰æ”¯æ´ PMIO ä½¿ç”¨ç‰¹åˆ¥çš„æŒ‡ä»¤ï¼Œå°‡è³‡æ–™å‚³è¼¸åˆ°ç‰¹å®šçš„ã€ŒPortã€ï¼Œæ³¨æ„: Port å’Œ Memory space æ˜¯åˆ†é–‹çš„å®šå€ç©ºé–“ x86-32 çš„ I/O Port çš„å®šå€ç©ºé–“åªæœ‰ 0~65535 x86-32 çš„è¨˜æ†¶é«”å®šå€ç©ºé–“åªæœ‰ 0~4G ä½¿ç”¨çš„æŒ‡ä»¤å½¢å¼å¦‚ä¸‹: out 0x255, AX; å°‡ AX register å¯«åˆ° 0x255 Portï¼Œå°è£ç½®å¯«å…¥è³‡æ–™ in AX, 0x100 å¾ 0x100 Port å°‡è³‡æ–™å¯«åˆ° AX registerï¼Œå°‡è£ç½®è³‡æ–™å–å› Deviceã€Memory åˆ†åˆ¥ç”¨ä¸åŒçš„å®šå€æ–¹å¼ï¼ŒI/O Bus ç‚º 64K å³æœ€å¤š 65536ï¼ŒMemory å‰‡å¯ä»¥åˆ°æœ€å¤§ 4Gï¼Œé€™ç¨®æ¶æ§‹ä¸‹æŒ‡å®šçš„é€Ÿåº¦é€šå¸¸æ¯”è¼ƒæ…¢ï¼Œå› ç‚º MMIO å¯ä»¥æ›´ç°¡å–®èˆ‡ç›´æ¥çš„é€²è¡Œ I/Oã€‚ å»¶ä¼¸é–±è®€ I/Oå°æ‡‰çš„æ–¹å¼ 1.15 I/O Subsystem transfers data å‚³è¼¸è³‡æ–™ä¸Šï¼Œä¸€èˆ¬ä¾†èªªä¸æœƒä½¿ç”¨ CPU é€²è¡Œï¼Œå› ç‚º CPU è¦åšæ›´é‡è¦çš„äº‹ã€‚DMA(Direct memory access) æ˜¯ç›¸å°ç°¡å–®çš„ç¡¬é«”ï¼Œ å°ˆé–€ç”¨ä¾†åšä¸»è¨˜æ†¶é«”å°ä¸»è¨˜æ†¶é«”çš„å‚³è¼¸æˆ–è£ç½®è¨˜æ†¶é«”å°ä¸»è¨˜æ†¶é«”çš„å‚³è¼¸ã€‚ ç°¡å–®çš„ DMA åªè¦è¨ˆæ•¸å™¨ï¼Œè¢«æ¬ç§»è³‡æ–™çš„é–‹å§‹ä½ç½®ï¼Œè¦æ¬å…¥è³‡æ–™çš„é–‹å§‹ä½ç½®ï¼Œé€™æ¨£ä¸‰å€‹ Register å°±å®Œæˆä¸€å€‹èƒ½æ¬ç§»é€£çºŒè³‡æ–™çš„ DMA DMA å¯ä»¥å±¬æ–¼ Bus çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚: ISAï¼Œæˆ–è€…æ˜¯è£ç½®çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚: PCI (DMA and Cache)Coherency problem åªè¦æœ‰å…©ç¨®ä»‹é¢å­˜å–åŒä¸€å€‹å„²å­˜è£ç½®å°±ä¸€å®šæœƒæœ‰å¦‚ä½•åŒæ­¥çš„å•é¡Œ DMA ç›´æ¥å­˜å–è¨˜æ†¶é«”ï¼Œä½† CPU é€é Cache å­˜å–è¨˜æ†¶é«”ï¼Œé€™é€ æˆè³‡æ–™ä¸ä¸€è‡´(Cache çš„è³‡æ–™ä¸€å®šæ¯” Main memory æ–°) å¾è¨˜æ†¶é«”å¯«å‡ºè³‡æ–™åˆ°è£ç½®æ™‚ï¼Œå¿…é ˆå°‡ cache çš„è³‡æ–™ flush åˆ°è¨˜æ†¶é«”(å¯«å…¥ä¸»è¨˜æ†¶é«”) å¾è£ç½®è®€å–è³‡æ–™åˆ°è¨˜æ†¶é«”æ™‚ï¼Œå¿…é ˆå…ˆ invalid ç›¸å°æ‡‰çš„ cache line Alignment DMA å‚³è¼¸çš„è³‡æ–™çš„é–‹å§‹åŠçµæŸä½ç½®ï¼Œé€šå¸¸è¦å’Œ Cache(Cache line) å’Œ Memory çš„å¯¬åº¦é€²è¡Œå°é½Š é€™éƒ¨åˆ†çš„é™åˆ¶å¯èƒ½ä¾†è‡ªæ–¼ DMA Controller ç›´æ¥å°‡è³‡æ–™ä»¥ã€Œå›ºå®šçš„å¤§å°ã€æ›´æ–°åˆ° Cacheã€‚ä¾‹å¦‚: x86 æ˜¯ 64 å€‹ Byteï¼Œé‚£å‚³è¼¸è³‡æ–™å°±è·Ÿ 64 Byte å°é½Šã€‚ç¡¬é«”åœ¨é€™è£¡æ²’æœ‰ç‰¹åˆ¥åšè™•ç†ï¼Œä½¿å¾—éå°é½Šçš„è³‡æ–™ä¹Ÿå¯ä»¥éƒ¨ä»½æ›´æ–° Disk èˆ‡ DRAM ä¹‹é–“çš„äº¤æ›ä¹Ÿè¦ä½¿ç”¨ buffer ä¾†é€²è¡Œäº¤æ›ï¼Œæ‰èƒ½é¿å…ä½é€Ÿè®€å¯«å»å ç”¨å¯¶è²´çš„ Bus è³‡æºã€‚ç•¶ bufdisk å°‡è³‡æ–™å‚³çµ¦ bufRAM å¾Œæ­¤æ™‚è¦è™•ç†çš„å°±æ˜¯ bufcache èˆ‡ bufRAM ä¹‹é–“çš„ä¸€è‡´æ€§ Cache èˆ‡ DMA çš„è³‡æ–™ä¸ä¸€è‡´æ€§è§£æ±ºä¹‹é“ (DEV =&gt; CPU) ä½¿ç”¨ç¡¬é«”è§£æ±ºï¼Œç¡¬é«”è‡ªå‹•æœƒå°‡ DMA çš„å‚³è¼¸æ›´æ–°åˆ° Cache å…§(Cache coherence algorithm) æŸäº›è™•ç†å™¨ï¼Œä¾‹å¦‚æ—©æœŸçš„ ARM è™•ç†å™¨ï¼Œé€™éƒ¨åˆ†éœ€è¦ç‰¹åˆ¥çš„æŒ‡ä»¤è¨­å®šè©²æ®µè¨˜æ†¶é«”çš„ã€Œå±¬æ€§ã€ ä¾‹å¦‚ç›´æ¥å°‡è©²æ®µè³‡æ–™ç›´æ¥å¾ cache ä¸Šå®Œæ•´ç§»é™¤(flush)ï¼Œé€™æ¨£å°±èƒ½ç¢ºä¿ CPU è®€å–è¨˜æ†¶é«”æ™‚å¾ Main memory è®€å– ç”¨ç¡¬é«”ä¾†é€²è¡Œè™•ç†çš„è©±å¯ä»¥åˆ†æ®µå»è™•ç†ï¼Œé€™æ¨£å°±èƒ½åœ¨åˆ†æ®µä¸­å·å·å‚³è¼¸è³‡æ–™ï¼Œç¸½æœ‰ä¸€äº› Cycle æ²’æœ‰è¢«ä½¿ç”¨ (CPU =&gt; DEV) è¨­å®šè®“ CPU åœ¨è©²è¨˜æ†¶é«”å€æ®µé€²è¡Œå¯«å…¥æ™‚ï¼Œä½¿ç”¨ Write through æˆ– Noncacheableï¼Œç›´é”è£ç½®ä¸Šçš„è¨˜æ†¶é«” Noncacheable: ç›´æ¥å°‡è³‡æ–™å¯«å…¥è©²æ®µè¨˜æ†¶é«”è€Œä¸é€é Bufferï¼Œé€™æ¨£èƒ½ç¢ºä¿ DMA çš„è³‡æ–™æ˜¯æœ€æ–°çš„ï¼Œä½†æœƒé™ä½æ•ˆèƒ½ã€‚ å»¶ä¼¸é–±è®€ Cacheå’ŒDMAä¸€è‡´æ€§ 1.16 CPU and DMA compete for memory access å¦‚æœ CPU ç™¼ç”Ÿ Last-level-cache(LLC) miss æ™‚ï¼ŒCPU å¯èƒ½æœƒåˆ DMA çˆ­å¥ªå­˜å–æ¬Š: å¦‚æœ CPU è¨ªå• LLC æ™‚ï¼Œå¦‚æœç™¼ç¾æ²’æœ‰æ‰€éœ€è¦çš„æ•¸æ“šï¼ŒCPU å¯èƒ½æœƒå˜—è©¦ç›´æ¥å­˜å– Main memoryï¼Œè‹¥æ­¤æ™‚ DMA ä¹Ÿæ­£åœ¨é€²è¡Œå­˜å–ï¼Œ å°±æœƒç”¢ç”Ÿçˆ­å¥ªå­˜å–æ¬Šã€‚ DMA æ¯æ¬¡éƒ½åªå‚³è¼¸å°é‡è³‡æ–™ï¼Œé‚£å°±å¯ä»¥å¾ˆå¿«çš„ç¦®è®“æ§åˆ¶æ¬Šçµ¦ CPUï¼Œä½†é€™æ¨£çš„å‚³è¼¸æ¨¡å¼å¾ˆæ²’æ•ˆç‡ DMA åšå¤§é‡å‚³è¼¸å¯ä»¥æå‡ I/O çš„æ•ˆèƒ½ï¼Œä½†å¯èƒ½æœƒé€ æˆ CPU ç­‰å¾… DMA å®Œæˆå‚³è¼¸è€Œé–’ç½® å»¶ä¼¸é–±è®€ Burst mode ç›®å‰åœ¨ PCI ä¸Šæ¯å€‹ Device éƒ½æœ‰è‡ªå·±çš„ DMA Arbiter ç”¨ä¾†åˆ†é…ä¸åŒçš„ Device çš„å­˜å–æ¬Šï¼Œé€šå¸¸æ˜¯é€Ÿåº¦è¶Šå¿«çš„è£ç½®å„ªå…ˆæ¬Šè¶Šé«˜ DMA çš„å…¶ä»–è­°é¡Œ DMA çš„å®šå€ç©ºé–“ éƒ¨åˆ† DMA çš„å®šå€ç©ºé–“å¯èƒ½åªæœ‰ 32bitï¼ŒOS å¿…é ˆç›¡å¯èƒ½çš„å°‡ DMA èƒ½ä½¿ç”¨çš„è¨˜æ†¶é«”ä¿ç•™çµ¦ DMA ä½¿ç”¨ I/O MMU ä¸»è¦è®“ DMA å­˜å–å¯¦é«”ä½ç½®ä¸é€£çºŒçš„è¨˜æ†¶é«” é¿å…æƒ¡æ„çš„è£ç½®æˆ–é©…å‹•ç¨‹å¼ DDIO (Data Direct I/O) åœ¨æŸäº› Intel å¹³å°ä¸Šï¼ŒDMA çš„å‚³è¼¸å¯ä»¥è·³é DRAM ç›´æ¥å‚³è¼¸åˆ° cacheï¼Œä¾‹å¦‚: Xeon, DDIO ä¾‹å¦‚ ARM ä¸Šçš„ ACP(Access to Shared Caches)ï¼Œå³ä½¿ç”¨ DMA å°é€™å€‹è£ç½®é€²è¡Œæ“ä½œï¼Œ å…¶å…§å®¹ä¹Ÿæœƒè¢«åŒæ­¥åˆ° cache memory è£¡é¢ï¼ŒåŒ…æ‹¬ L1 å’Œ L2 cache Access to Shared Caches vs. Traditional methods I/O Subsystem notify the CPU 1.17 Interrupt hardware concept 1.20 Interrupt vector table 1.21 Interrupt Service Routine 1.22 Bottom half 1.23 Bottom half and Top half 1.24 Polling 1.25 Buffering OS äº¤ä»˜å·¥ä½œçµ¦å‘¨é‚Šè£ç½®å¾Œï¼Œæ–¼å·¥ä½œå®Œæˆå¾Œé€šçŸ¥ CPU çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨: Interrupt Polling Interrupt + Polling 1.17 Interrupt hardware concept Interrupt æ˜¯ä¸€ç¨®æ”¹è®Šç¨‹å¼æ­£å¸¸åŸ·è¡Œæµç¨‹çš„æ©Ÿåˆ¶ï¼Œå¯ä»¥ç”± Device æˆ–è€… CPU æœ¬èº«ç”¢ç”Ÿ Legacy Interrupt ç”±å¯¦é«”ç·šè·¯æ§‹æˆï¼Œæ¯å€‹è£ç½®é€£æ¥åˆ°å¯¦é«”çš„ä¸­æ–·ç·šï¼Œä¸­æ–·ç·šé€£æ¥åˆ° Programmable interrupt controller(PIC, å¯ç¨‹å¼åŒ–ä¸­æ–·æ§åˆ¶å™¨)ï¼ŒPCI å†å‘ CPU çš„ INT è…³ä½ç™¼å‡ºä¸­æ–·è¨Šè™Ÿ PC ä¸­æ–·ç·šä¹Ÿå°±å…± 15 æ¢ï¼Œä½†æ˜¯ Device é€šå¸¸ä¸åª 15 å€‹ï¼Œå› æ­¤å¿…é ˆæ•¸å€‹è£ç½®å…±ç”¨ä¸€æ¢ä¸­æ–·ç·š Message Signaled Interrupts æ‰€æœ‰ Devices å…±ç”¨ä¸€çµ„ä¸­æ–·ç·šè·¯ï¼Œè£ç½®åœ¨ä¸­æ–·ç·šè·¯ä¸Šå¯«å…¥è‡ªå·±çš„ä¸­æ–·ç·¨è™Ÿï¼Œå°±æœƒè§¸ç™¼ CPU ä¸­æ–· é€™æ¨£å°±é¡ä¼¼åœ¨ä¸€æ¢ç·šä¸Šå‚³è¼¸ç·¨ç¢¼ï¼Œç¶“éè§£ç¢¼å™¨å¾Œæ¨å‘ CPUï¼Œè®“ CPU å°è‡ªå·±é€å‡ºä¸­æ–·ï¼Œä¾‹å¦‚: PCI çš„ MSI-X æ”¯æ´ 2048 å€‹ä¸­æ–·ç·¨è™Ÿ CPU æœƒè¨­è¨ˆå¥½ IVT çš„ä½ç½®ï¼Œç”± OS æ”¾å…¥é©ç•¶çš„ ISR é€™éƒ¨åˆ†ä¹Ÿæ˜¯é©…å‹•ç¨‹å¼(Device Drver) çš„ä¸€éƒ¨åˆ† 1.20 Interrupt vector table Interrupt è™•ç†æµç¨‹: Interrupt Request: ç•¶ä¸­æ–·è«‹æ±‚ç™¼ç”Ÿæ™‚ï¼Œå°‡æ‰€æœ‰ä¸­æ–· Disableï¼Œå°‡ CPU åˆ‡æ›åˆ° Kernel mode Store State: æš«åœç›®å‰çš„ Process ä¸¦ä¿å­˜æ­¤ Process çš„åŸ·è¡Œç‹€æ³ Interrupt Vector Table: OS æ ¹æ“š Interrupt ID æŸ¥è©¢ IVTï¼Œä¸¦å–å¾— Interrupt Service Routine çš„é–‹å§‹ä½ç½® Interrupt Service Routine: åŸ·è¡Œ ISR Restore State: æ¢å¾©ä¹‹å‰ Process çš„åŸ·è¡Œç‹€æ³ é€™æ™‚å€™ä¸ä¸€å®šæ¢å¾©åŸæœ¬çš„ Processï¼Œå› ç‚º System call å¯èƒ½æ”¹è®Š Process çš„ç‹€æ…‹ï¼Œç”± Scheduler ä¾†æ±ºå®šä¸‹ä¸€å€‹åŸ·è¡Œçš„ Process(ä¸ä¸€å®šæ˜¯åŸæœ¬çš„ Process) IVT æ”¾ç½®çš„æ˜¯ ISR çš„é–‹å§‹ä½ç½® ISR é–‹é ­éƒ½æ˜¯ç”¨çµ„èªå¯«çš„ï¼Œå¦‚æœ C çš„åŸ·è¡Œç’°å¢ƒè¨­å®šå¥½ä¹Ÿå¯ä»¥ç”¨ C 1.21 Interrupt Service Routine ç™¼ç”Ÿ Interrupt æ™‚æ˜¯ Disable Interruptï¼Œä½†åœ¨ ISR çš„æ™‚å€™å¯ä»¥è¦–æƒ…æ³æ±ºå®šæ˜¯å¦è¦ Enable Interruptï¼Œè¦å…è¨±å“ªå¯« Interruptï¼Œå¦‚æœå† ISR ä¸­ Enable interrupt è¡¨ç¤ºå…è¨±å·¢ç‹€ä¸­æ–·(Nested Interrupt) Nested Interrupt: ã€Œä¸€å€‹ä¸­æ–·ï¼Œè¢«å¦ä¸€å€‹ä¸­æ–·çµ¦ä¸­æ–·ã€ Linux ä¸­ï¼ŒISR åªè™•ç†å¿…é ˆç«‹å³è™•ç†çš„éƒ¨åˆ†ï¼Œå‰©é¤˜çš„éƒ¨åˆ†äº¤ç”± Kernel thread è™•ç†ã€‚ä¾‹å¦‚: ksoftirqd ISR ä¸­ä¸èƒ½å‘¼å«ä»»ä½•æœƒé€ æˆã€Œwaitã€çš„å‡½æ•¸ï¼Œä¾‹å¦‚: semaphore ä¸­çš„ wait() å¾è¨­è¨ˆä¸Š wait() çš„ä¸»é«”æ˜¯ task (can context swtich)ï¼ŒISR åªæ˜¯ä¸€å€‹æœ‰è‡ªå·±å †ç–Šçš„å‡½æ•¸ï¼Œä¸æ˜¯ task å¾é‚è¼¯ä¸Š ISR æ˜¯è™•ç† I/O ä¸­çš„ã€Œå¿…è¦éƒ¨åˆ†ã€(ç·Šæ€¥æ€§)ï¼Œå› æ­¤ä¸æ‡‰è©² wait() å¦‚æœç¨‹å¼é‚è¼¯ä¸Šå¿…é ˆè¦ wait()ï¼Œå°±è¦è€ƒæ…®æ˜¯å¦æŠŠé€™éƒ¨åˆ†ç•™çµ¦ Bottom half è§£æ±º 1.22 Bottom half Bottom half å¯ä»¥åˆ†ç‚ºä¸‰ç¨® softirq, tasklet, work-queue Softirq å¯ä»¥åœ¨å¤šå€‹ CPU ä¸Šå¹³è¡Œé‹è¡Œï¼Œå¿…é ˆåœ¨ç·¨è­¯æ™‚éœæ…‹è¨»å†Š Tasklet æ˜¯å»ºç«‹åœ¨ softirq ä¹‹ä¸Šçš„ä¸€ç¨®æ©Ÿåˆ¶ï¼Œtasklet å¯ä»¥å‹•æ…‹è¨»å†Šå’ŒéŠ·æ¯€ï¼Œç›¸åŒé¡å‹çš„ tasklet ä¸èƒ½åœ¨å¤šå€‹ CPU ä¸ŠåŒæ™‚é‹è¡Œ Work-queue æ˜¯ä¸€ç¨®å®Œå…¨ä¸åŒçš„æ©Ÿåˆ¶ï¼Œwork-queue å¯ä»¥ç¢ºä¿åŒä¸€ç¨®é¡å‹çš„ driver åªæœƒåœ¨åŒä¸€å€‹ CPU ä¸Šé‹è¡Œ å¾æ•ˆèƒ½é«˜ä½ä¸Šæ˜¯å¾å·¦å¾€å³æ’åºï¼Œå¾æ˜“å¯«ç¨‹åº¦ä¸Šæ˜¯å¾å³å¾€å·¦æ’åº ç†è«–ä¸Šé€™ä¸‰å€‹éƒ½æ‡‰è©²ç”± Kernel thread ä¾†å‘¼å« å¦‚æœæ˜¯ Kernel thread(task) é‚£å°±å¯ä»¥ wait() å¯¦éš›ä¸Š softirq, tasklet åœ¨ Linux kernel å¯ä»¥ç”± Linux kernel æä¾›çš„ä¸€å°æ®µç¨‹å¼ç¢¼åœ¨ ISR çµæŸæ™‚å‘¼å« é€™æ¨£çš„è©±ä»–æ˜¯åŸ·è¡Œåœ¨ ISR ä¸­ï¼Œé€™æ¨£æ˜¯ä¸èƒ½ wait() æœƒè¨­è¨ˆæˆ ISR ä¹Ÿå¯ä»¥å‘¼å«çš„åŸå› æ˜¯ï¼Œå¦‚æœé€™æ¬¡ ISR Loading ä¸¦ä¸é‡çš„æ™‚å€™å°±ä¹¾è„†å…¨éƒ¨çš„å·¥ä½œéƒ½åœ¨ ISR å®Œæˆï¼Œé€™æ¨£çš„æ¶ˆè€—æœƒæ¯”å‘¼å« Kernel thread æ›´å°‘ åœ¨ Driver Architecture ç¯‡ç« æœƒæ›´è©³ç´°çš„èªªæ˜ ksoftirqd æœ€å¤šå¯« 32 å€‹é©…å‹•ç¨‹å¼åœ¨è£¡é¢ï¼Œåªæœ‰é«˜é€Ÿè£ç½®æœƒæ›åœ¨ ksoftirqd ä¾‹å¦‚: Network Card å»¶ä¼¸é–±è®€: Difference between SoftIRQs and Tasklets, tasklet, taskqueue, work-queue â€“ which to use? 1.23 Bottom half and Top half Bottom half çš„ softirq æ¯å€‹ Core å°±åªæœ‰ä¸€å€‹ ps -e | grep softirq åœ¨é€™è£¡ Top half, Bottom half åˆ†åˆ¥æŒ‡çš„æ˜¯: Top half: æ˜¯æŒ‡ä¾†ç«‹åˆ»éŸ¿æ‡‰çš„ Interrupt æ™‚è™•ç†çš„ä¸­æ–·å‡½æ•¸ï¼Œåœ¨é€™å€‹éšæ®µåŸ·è¡Œå¿«é€Ÿä¸”å¿…è¦çš„ç¡¬é«”æ“ä½œï¼Œå¦‚: ä¿å­˜ç‹€æ…‹ï¼Œå’Œå‘¼å« Bottom half Bottom half: è·Ÿ Top half çš„å€åˆ¥æ˜¯åŸ·è¡ŒæœŸé–“ Interrupt æ˜¯å•Ÿç”¨çš„ é€™è£¡é€²å…¥ Bottom half çš„å·¥ä½œæœƒè¢«åŒ…è£æˆä¸€å€‹ Struct å…©å€‹ Pointerï¼ŒåŒ…å« Function, Dataï¼Œç„¶å¾Œå°‡é€™å€‹ Struct åŠ å…¥ä¸€å€‹ Linked listï¼Œ ä¹‹å¾Œç­‰å¾… CPU æœ‰ç©ºé–’æ™‚ softirq æœƒå¾ä¸­å–å‡º Struct ä¾†åŸ·è¡Œ Bottom halfã€‚ Function pointer: è©²å‡½æ•¸å®šç¾©äº† Bottom half å¯¦éš›çš„åŸ·è¡Œå·¥ä½œï¼ŒåŒ…å«: è™•ç†è³‡æ–™ï¼Œå•Ÿå‹•å¦ä¸€å€‹ I/O ç­‰ç­‰ Data pointer: æŒ‡å‘å·¥ä½œç›¸é—œçš„è³‡æ–™ï¼Œç¡¬é«”çš„è³‡æ–™ï¼Œè¦è¨ˆç®—çš„åƒæ•¸ï¼Œéœ€è¦ä¿®æ”¹çš„ Memory ç­‰ç­‰ åœ¨ Linux ä¸­ï¼Œç•¶ top half æ±ºå®šå°‡ä¸€äº›å·¥ä½œæ¨é²åˆ° bottom half æ™‚ï¼Œé€™äº›å·¥ä½œæœƒè¢«åŒ…è£æˆä¸€å€‹çµæ§‹ï¼Œè©²çµæ§‹åŒ…å«å…©å€‹æŒ‡æ¨™ï¼šä¸€å€‹å‡½æ•¸æŒ‡æ¨™å’Œä¸€å€‹è³‡æ–™æŒ‡æ¨™Â¹ã€‚ 1.24 Polling å¦‚æœç³»çµ±çš„ Loading å¾ˆè¼•ï¼Œä¸¦ä¸”ç³»çµ±è«‹æ±‚çš„æ™‚é–“æ¯”è¼ƒæ²’è¦å‰‡æ™‚ Interrupt æœƒæ¯”è¼ƒå¥½ï¼Œä½†å¦‚æœè² è¼‰é«˜ Interrupt è¢«ä¸æ–·çš„é€å‡ºï¼Œ é€™æ¨£å¯èƒ½æœƒå°è‡´ CPU ä¸æ–·çš„å»è™•ç† Interruptï¼Œæ­¤æ™‚ Polling æœƒæ¯”è¼ƒå¥½ èˆ‡ Interrupt ä¸åŒï¼ŒPolling æ˜¯ OS æ¯éš”ä¸€æ®µæ™‚é–“ä¸»å‹•å»æ¢è©¢è£ç½®çš„ç‹€æ…‹ å¦‚æœæ•¸å€‹ Device å…±ç”¨åŒä¸€æ¢ Interrupt é‚£éº¼ç•¶ Interrupt ç™¼ç”Ÿæ™‚ï¼ŒOS å¿…é ˆ æŸäº›è£ç½®åŒæ™‚æ”¯æ´ Interrupt å’Œ Pollingï¼Œä¾‹å¦‚: Network Cardï¼Œå¯ä»¥åœ¨è² è¼‰é‡é«˜/ä½æ™‚åšåˆ‡æ› åƒæ»‘é¼ è·Ÿéµç›¤å°±é€šå¸¸æ˜¯æ¡ç”¨ Pollingï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œä¾‹å¦‚: é›»ç«¶æ»‘é¼  1.25 Buffering and Kernel bypass read(fd, buf, 200) æœƒç”¨æ‰å››å€‹ Register read(): æœ¬èº«å°±æ˜¯åƒæ•¸(No. 3 Interrupt, $AX è¦è¨­å®šç‚º 3) fd: å¾å“ªè£¡è®€è³‡æ–™ buf: buffer çš„èµ·å§‹ä½ç½®ï¼Œ200 Buffer size read å‘¼å«å¾Œ Kernel æœƒé…ç½® krl_bufï¼ŒDMA å‚³è¼¸æœƒå°‡è³‡æ–™å¾ dsk_buf æ¬ç§»åˆ° krl_buk æœ€å¾Œç”± Kernel å°‡è³‡æ–™ Copy åˆ° Userspace Kernel bypass: æ˜¯æŒ‡ä¸éœ€è¦é€é Linux kernel çš„åŠŸèƒ½ï¼Œä½¿ç”¨è‡ªå·±å¯¦ç¾çš„ç›¸åŒåŠŸèƒ½çš„ç¨‹å¼ç¢¼ç›´æ¥å°‡ Device çš„è³‡æ–™ Copy åˆ° Userspace é€™å¯ä»¥å¹«åŠ©è§£æ±ºåœ¨é«˜ concurrent ä¸‹ç”±æ–¼ Interrupt Handling, Memory Copy, Context switch, Locality miss, CPU Affinity, Memory Management æ‰€é€ æˆçš„æ€§èƒ½ç“¶é ¸ ä»£è¡¨çš„æŠ€è¡“æœ‰ DPDK, eBPF ç­‰ç­‰ å»¶ä¼¸é–±è®€: kernel-bypass å†…æ ¸æ—è·¯æŠ€æœ¯ä»‹ç» Scheduler and File System 1.26 Process and Thread of Linux åœ¨ Linux æä¾›ä¸‹åˆ— System call fork(), vfork() ç”¢ç”Ÿ Process clone() ç”¢ç”Ÿ Task(Process, Thread) execve() å°‡ä¸€å€‹åŸ·è¡Œæª”å…§çš„ç¨‹å¼è¼‰å…¥è©² Task ä¸­ å° Linux ä¾†è¬› Process, Thread éƒ½æ˜¯ Task Linux ä½¿ç”¨ Task struct ä¾†æè¨´ Process, Thread Process, Thread çš„å·®ç•°åªæ˜¯ã€Œå…±äº«è³‡æºçš„å¤šå¯¡ã€ï¼Œå°¤å…¶æ˜¯è¨˜æ†¶é«”æ˜¯å¦å…±ç”¨ fork, vfork, clone éƒ½æ˜¯å‘¼å« Kernel ä¸­çš„ do_fork æœ‰ä¸€äº› Thread åªåŸ·è¡Œæ–¼ Kernel modeï¼ŒLinux ç¨±ç‚º Kernel thread 1.27 Scheduler å¦‚æœåªèªª Scheduler é€šå¸¸æŒ‡çš„æ˜¯ CPU Scheduler å‚³çµ±ä¸Š Scheduler å¸Œæœ›é”æˆä»¥ä¸‹ç›®æ¨™ ä¾ç…§å„ªå…ˆæ¬Šè³¦äºˆå„ªå…ˆæ¬Šçš„å…¬å¹³æ€§ æ‰€æœ‰çš„ Task éƒ½å¯ä»¥åœ¨åˆç†çš„æ™‚é–“å…§ï¼Œå†æ¬¡ç²å¾— CPU ä½¿ç”¨æ¬Š å„ªåŒ– I/O æ•ˆèƒ½ï¼Œä¾‹å¦‚: è™•ç† I/O çš„è¨­å‚™å¯ä»¥å…ˆåŸ·è¡Œï¼Œæ¥ä¸‹ä¾†å·¥ä½œäº¤çµ¦ I/O è¨­å‚™ Linux æ›´é€²ä¸€æ­¥çš„é”åˆ°ä»¥ä¸‹ç›®æ¨™ Multi-core ä¸Šèƒ½åšåˆ° Load balance Scheduler æœ¬èº«ä¸è‡³æ–¼é€ æˆ Multi-core çš„æ•ˆèƒ½ç“¶é ¸ å°å¤šåª’é«”ã€éŠæˆ²æœ‰æ›´å¥½çš„æ”¯æ´ï¼ŒCFS Linux é‚„æœªé”åˆ°çš„ç›®æ¨™ Real-time system çš„æ”¯æ´ Linux åœ¨æ‰‹æ©Ÿä¸Šçš„ Scheduler æ¯” iOS çš„ Scheduler æ›´è€—é›»(iOS ä¸¦ä¸æ˜¯çœŸæ­£çš„å¤šå·¥ OS) 1.28 File system åœ¨æª”æ¡ˆç³»çµ±è¦æ³¨æ„åˆ°é€™äº›: æ–°æŠ€è¡“å¦‚ï¼š SSDã€ç®¡ç†çš„å•é¡Œ(å¤§æª”æ¡ˆã€é›¶ç¢æª”æ¡ˆ)ã€å­˜å–è¡Œç‚º(å¾ªåº/éš¨æ©Ÿå­˜å–)ã€æª”æ¡ˆçš„é‡è¤‡æ€§å•é¡Œã€æ··åˆç¡¬ç¢Ÿ(SSD\\HDD) Linux ä½¿ç”¨ Virtual file system(VFS), å…¼å®¹å¤šç¨®æª”æ¡ˆç³»çµ±ï¼Œå¤§éƒ¨åˆ†é€™äº›æª”æ¡ˆç³»çµ±éƒ½ä½¿ç”¨ã€Œi-nodeã€çš„æ¦‚å¿µæè¿°æª”æ¡ˆ i-node: ç”¨æ–¼æè¿°æª”æ¡ˆæˆ–ç›®éŒ„ï¼Œè£¡é¢å„²å­˜è³‡æ–™çš„å±¬æ€§å’Œä½ç½®ï¼Œä¾‹å¦‚: æ‰€æœ‰è€…ã€è¨±å¯æ¬Šã€å¤§å°ã€æœ€å¾Œä¿®æ”¹æ™‚é–“ç­‰ VFS: é€éçµ±ä¸€çš„ä»‹é¢ï¼Œä½¿ç„¡è«–åº•å±¤çš„æª”æ¡ˆç³»çµ±æ˜¯ä»€éº¼ï¼Œéƒ½èƒ½é€éä»‹é¢è™•ç†ï¼Œä¾‹å¦‚: open(), read(), write() File system: ç”¨æ–¼ç®¡ç†åº•å±¤è£ç½®è³‡æ–™å­˜å–çš„æ©Ÿåˆ¶ï¼Œä¾‹å¦‚: ext4, NTFS, FAT32 â€¦ Linux å®˜æ–¹çš„ File system æ˜¯ ext4â€™ ext4ï¼š æ˜¯ Journaling file systemï¼Œå› æ­¤ç•¶ç™¼ç”Ÿæ„å¤–ï¼Œæª”æ¡ˆç³»çµ±ä¸è‡³æ–¼å®Œå…¨ææ¯€ï¼Œä¸¦ä¸”èƒ½å¿«é€Ÿæ¢å¾©(fsck.ext4) Linux æ”¯æ´ btrfsï¼Œbtrfs å€Ÿç”¨äº† zfs çš„å¾ˆå¤šæ¦‚å¿µï¼Œä¸»è¦åŒ…æ‹¬: snapshot, copy-no-write, hot plugging HDD/SSD, difference disk load balance, backup support Hardware progress 1.29 SMP and CMP 1.30 Single-ISA heterogeneous multi-core 1.31 UMA and NUMA ç›®å‰å·²ç¶“å¾ˆé›£æå‡ CPU çš„ Clock ç›¸åŒæ¶æ§‹ä¸‹ï¼Œæå‡ Clock æ˜¯æœ€ç›´æ¥æ–¹å¼ä¾†çš„æå‡ Performance æé«˜ Clock æœƒé‡åˆ°å¤§é‡çš„ç†±ï¼Œä¹Ÿæ˜¯æå‡æ•ˆèƒ½çš„ç“¶é ¸ Processor, Menory, Storage ç­‰ç­‰è—‰ç”±ä¸æ–·çš„ã€Œè¤‡è£½ï¼Œè²¼ä¸Šã€ç”¢ç”Ÿå¹³è¡Œé‹ä½œ å¹³è¡Œé‹ä½œå¾€å¾€éœ€è¦è»Ÿç¡¬é«”çµåˆ å¾ˆå¤šæ™‚å€™ï¼Œç¡¬é«”æä¾›ã€Œå¤šç¨®é¸æ“‡ã€çµ¦è»Ÿé«”é€²è¡Œå„ªåŒ– å¯«å¹³è¡ŒåŒ–ç¨‹å¼ï¼Œç¨‹å¼ç¢¼æ¯å¹´å¯ä»¥æœ‰ 23% çš„æ•ˆèƒ½æå‡ï¼Œå¦å‰‡åªæœ‰ 4.6% å¹³è¡Œè™•ç†æ¶æ§‹æŒ‡çš„æ˜¯ã€ŒåŒæ™‚ä½¿ç”¨å¤šå€‹ Process(Core)ã€ä¾‹å¦‚: PC å¸¸è¦‹çš„ Multi-Core Process ä»–çš„å„ªé»: æé«˜ç”¢èƒ½: åœ¨å·¥ä½œå¯ä»¥å¹³è¡ŒåŒ–æ™‚ï¼Œç”¢èƒ½å°‡ä»¥å€æ•¸æå‡ æˆæœ¬è€ƒé‡: ç›¸è¼ƒæ–¼é«˜æ™‚è„ˆçš„ Processorï¼Œå·¥ä½œå¹³è¡ŒåŒ–å¾Œï¼Œæ•¸å€‹æ™‚è„ˆä½çš„ Processor èƒ½å¾—åˆ°ä¸€æ¨£çš„æ•ˆæœ å¢åŠ å¯é åº¦: é«˜éšä¼ºæœå™¨å¯ä»¥æä¾› Processor, Memory ç†±æ’æ‹”çš„åŠŸèƒ½ï¼Œä¾‹å¦‚: Linux, å¯ä»¥åœ¨ä¸åœæ©Ÿçš„æƒ…æ³ä¸‹æ›´æ› CPU 1.29 SMP and CMP Symmetirc multiprocessor(SMP, å°ç¨±å¤šè™•ç†) æ¯å€‹ Processor çš„åœ°ä½æ˜¯ç­‰åƒ¹çš„ï¼Œæ‡‰ç”¨ç¨‹å¼å¯ä»¥åœ¨é€™äº›è™•ç†å™¨ä¸Šåšè½‰ç§»(migration) åœ¨é€™å€‹æ¶æ§‹ä¸Šæ‰€æœ‰ Processor éƒ½å…±äº«ä¸€å€‹å…±åŒçš„ Main memoryï¼Œæœ‰å¯èƒ½æœƒå°è‡´è¨˜æ†¶é«”å­˜å–è¡çªè€Œå½±éŸ¿æ•ˆèƒ½ Chip multiprocessor(CMP, å–®æ™¶ç‰‡å¤šè™•ç†) ä¹Ÿç¨±ä½œ Multi-core å°‡å¤šé¡† (Core)Processor é›†æˆè‡³ä¸€é¡†æ™¶ç‰‡ æ¯å€‹ Core éƒ½æœ‰è‡ªå·±çš„ Cache å¯ä»¥æ¸›å°‘å°å…±ç”¨ Memory çš„å­˜å–éœ€æ±‚ å…±äº«æœ€ä¸‹å±¤çš„ Last level cache(LLC)ï¼Œå› æ­¤ä¸åŒ Core ä¹‹é–“çš„è½‰ç§»æ¯”è¼ƒå¿«é€Ÿ Simultaneous multithreading(SMT, åŒæ­¥å¤šåŸ·è¡Œç·’) åœ¨ä¸€é¡† Processor ä¸Šç”¨ç¡¬é«”æ¨¡æ“¬å‡º N é¡† Processï¼Œç¡¬é«”çš„ä¸»è¦æˆæœ¬æ˜¯ Logical register æ•¸é‡å¢åŠ  N å€ èƒ½æ›´æœ‰æ•ˆçš„åˆ©ç”¨ Processor å…§éƒ¨çš„ Function unitï¼Œå¦‚: åŠ æ³•å™¨ï¼Œä¹˜æ³•å™¨ç­‰ Intel å®£ç¨±ä»–å€‘å¯¦ç¾çš„ SMT(Hyper-threading) å¢åŠ  5% çš„æ™¶ç‰‡é¢ç©ï¼Œå¯ä»¥ç²å¾— 15% ~ 30% çš„æ•ˆèƒ½æå‡ AMD æ–¼ 2017 æ¨å‡ºçš„ Zen CPU ä¹Ÿå¯¦ç¾äº† SMT ä¸Šæ–¹å³åœ–æœ‰å…©å€‹ Instruction flow(Register set) å»ç«¶çˆ­è³‡æºï¼Œä¾‹å¦‚: Floating point unit, Adder, Loader, Storer SMT ä¸æ˜¯å»å¢åŠ ç³»çµ±çš„é€Ÿåº¦ï¼Œæ˜¯å¢åŠ ç³»çµ±çš„ä½¿ç”¨ç‡ï¼Œå‰ææ˜¯æœ‰è¶³å¤ çš„ Task è·Ÿé€²è¡Œçš„é‹ç®—å¯ä»¥ Loop unrollingï¼Œ ä¾‹å¦‚: Fibonacci å› ç‚ºæ¯æ¬¡éƒ½å¿…é ˆç®—å‡ºå‰ä¸€å€‹æ•¸å­—æ‰èƒ½ç¹¼çºŒå¾Œé¢æ•¸å­—çš„é‹ç®— å»¶ä¼¸é–±è®€: Algorithm Efficiency - Is partially unrolling a loop effective if it requires more comparisons? 1.30 Single-ISA heterogeneous multi-core åœ¨å­¸è¡“ä¸Šæ˜¯å¤šå€‹è™•ç†å™¨ï¼Œé€™äº›è™•ç†å™¨ä½¿ç”¨åŒæ¨£çš„æŒ‡ä»¤é›†ï¼Œä½†æ˜¯è™•ç†å™¨çš„å…§éƒ¨è¨­è¨ˆ(Micro-Architecture)ä¸åŒ ä¾‹å¦‚: Clockï¼ŒPipeline depthï¼ŒFunciont unit number æœ‰äº›ç¨‹å¼æŒ‡ä»¤å¹³è¡Œåº¦é«˜ï¼Œé©åˆ Pipelineã€Superscalar æœ‰äº›ç¨‹å¼æŒ‡ä»¤å¹³è¡Œåº¦ä½ï¼Œé©åˆ In-order issueã€High clock processor å›  Instruction set ç›¸åŒï¼ŒOS å¯ä»¥å¹«åˆé©çš„ Task æŒ‘é¸é©åˆçš„ Processor ARM ä¸Šå¯¦ç¾çš„ Big-Little æ¶æ§‹æ˜¯ä¸Šè¿°çš„ä¸€å€‹å¯¦ç¾ é›–ç„¶ Processor é‹ç®—é€Ÿåº¦ä¸åŒï¼Œä½†å…¶ Instruction set ç›¸å®¹ OS å¯ä»¥ä¾ç…§éœ€æ±‚ä½¿ç”¨é«˜æ•ˆèƒ½ Processor(Big) æˆ–çœé›»å‹ Processor(Little) åœ¨ Big.Little ä¸­å¯ä»¥åš Task migrationï¼Œé€™éƒ¨åˆ†æ˜¯ OS è·Ÿ Programmer éœ€è¦å»è€ƒæ…®çš„ SMT æ˜¯ç”± DM Tullsen, SJ Eggers, HM Levy æ‰€æå‡º Simultaneous multithreading: Maximizing on-chip parallelism, ISCA, 1995. Intel æ–¼ 2002 å¯¦ç¾é€™å€‹æ§‹æƒ³ï¼Œä¸¦å°‡å®ƒç¨±ä¹‹ç‚º hyperthreading Big.LITTLE çš„æ¦‚å¿µç”± R Kumar, KI Farkas, NP Jouppi, P Ranganathan, DM Tullsen æå‡º Single-ISA heterogeneous multi-core architectures: The potential for processor power reduction, MICRO, 2003. æ›´å²å®³çš„æ˜¯ï¼šé€™äºŒå€‹æ¶æ§‹çš„å‰µæƒ³ä¾†è‡ªæ–¼åŒä¸€å€‹å¯¦é©—å®¤ https://cseweb.ucsd.edu/~tullsen/ 1.32 UMA and NUMA ç›®å‰ç‚ºæ­¢(2018)æ‰€ä½¿ç”¨çš„ Processor memory architecture å¤§éƒ¨åˆ†ç‚º Uniform memory access(UMA) å¤§è‡´ä¸Šå¯ä»¥èªª: æ¯å€‹ Processor å­˜å–ä»»ä½•ä½ç½®çš„ Memory çš„é€Ÿåº¦éƒ½æ˜¯ç›¸ç­‰çš„ UMA æ¶æ§‹ä½¿ç”¨ä¸€å¥—è¨˜æ†¶é«”æ’æ§½ï¼Œä¹Ÿå°±æ˜¯å…±äº« Memory bus å°æ–¼ UMA Processor è€Œè¨€ï¼Œç•¶ Processor å¢åŠ æ™‚ï¼Œè¨˜æ†¶é«”é »å¯¬æ˜¯æ•ˆèƒ½ç“¶é ¸æ‰€åœ¨(Intel core i9 æ˜¯æœ‰ 18C36T çš„ UMA Processor) Non-Uniform memory access(NUMA) å‚³çµ±ä¸Šæ˜¯æ’å…©å€‹ä»¥ä¸Šçš„ CPUï¼Œå¦‚éƒ¨åˆ†æ©Ÿæ¶å¼ä¼ºæœå™¨: HP DL380 Gen7 AMD çš„ threadripper å°‡å…©é¡† CPU å°è£åœ¨ä¸€èµ·ï¼Œthreadripper ä¸Šå¯ä»¥çœ‹åˆ°å…©å€‹ DRAM æ’æ§½ å° NUMA ä¾†èªªè¨˜æ†¶é«”åˆ†ç‚º Local, Remoteï¼Œå­˜å– Local æ™‚çš„é€Ÿåº¦æœƒè¼ƒå¿« é€™æ¨£çš„åšæ³•å…©é‚Šéƒ½æœƒæœ‰ç¨ç«‹æ§åˆ¶çš„ Memory busï¼Œé¿å…äº†éƒ¨åˆ†çš„è¨˜æ†¶é«”é »å¯¬çš„æ•ˆèƒ½ç“¶é ¸ Driver Architecture Driver ä¸­å¯å»¶é²è™•ç†(Bottom half) çš„å½¢å¼å°±åˆ†æˆä¸‰ç¨®ï¼Œé€™éƒ¨åˆ†åœ¨ Bottom half ç°¡å–®æé: softirq(è»Ÿä¸­æ–·) softirq æ”¯æ´ SMPï¼ŒåŒä¸€å€‹ softirq å¯ä»¥åœ¨ä¸åŒçš„ CPU ä¸ŠåŒæ™‚é‹è¡Œï¼Œsoftirq å¿…é ˆæ˜¯ Reentrancy(å¯é‡å…¥çš„) softirq æ˜¯åœ¨ç·¨è­¯æœŸé–“éœæ…‹è¨»å†Šï¼Œä¸åƒ tasklet é‚£æ¨£èƒ½è¢«å‹•æ…‹è¨»å†Šæˆ–å»é™¤ HI_SOFTIRQ, TIMER_SOFTIRQ, NET_TX_SOFTIRQ, NET_RX_SOFTIRQ, SCSI_SOFTIRQ, TASKLET_SOFTIRQ åŸºæœ¬åŸå‰‡æ˜¯ä½¿ç”¨åœ¨é«˜é€Ÿè£ç½®æˆ–è©²è£ç½®ä¸èƒ½è¢«å»¶é²ï¼Œå¦‚: Network RX/TX, Timer inputerret, Disk, tasklet softirq åœ¨ Kernel ç·¨è­¯æ˜¯å°±å·²ç¶“å®šç¾©ã€è¨»å†Šå¥½ï¼Œé€šå¸¸æ˜¯ä¸æœƒå»åšæ”¹å¯«ã€‚æœƒä½¿ç”¨ softirq çš„åŸå› ä¸»è¦æ˜¯å› ç‚ºç™¼ç¾ I/O çš„æ•ˆèƒ½ç“¶é ¸æ˜¯åœ¨ CPUï¼Œ å‰ææ˜¯è¦æœ‰è¶³å¤ çš„ Processorã€‚ tasklet tasklet ä¸å…è¨±å…©å€‹ç›¸åŒé¡å‹çš„ tasklet åŒæ™‚åŸ·è¡Œï¼Œå³ä½¿åœ¨å…©å€‹ work-queue ç”± Kernel theard ä¾†å¯¦ç¾ï¼Œæ‰€ä»¥å¯ä»¥è¢« context switch(å‰å…©ç¨®åªèƒ½è¢« ISR æ‰“æ–·) é©åˆéœ€è¦é•·æ™‚é–“åŸ·è¡Œï¼Œæˆ–éœ€è¦ seelp é»˜èªå¯ä»¥è¢« Interruptï¼Œä¸æŒæœ‰ä»»ä½• Locked å»¶ä¼¸é–±è®€: V-Softirq in Linux Device Driver â€“ Linux Device Driver Tutorial, Linux softirq, tasklet, workqueue ä¸‹é¢æ˜¯ Interrupt é›¢é–‹æ™‚è§¸ç™¼ softirq çš„æµç¨‹èˆ‡ç¨‹å¼ç¢¼: ksoftirq æ˜¯åœ¨ Kernel thread æœƒå»å‘¼å« Loopï¼Œé€™å€‹ Loop æœƒä¸æ–·å»æ‹¿å·¥ä½œä¾†åšï¼Œé€™å€‹ Loop å¯ä»¥è¢« ISR æˆ– ksoftirqd å‘¼å«ï¼Œ å¦‚æœæ˜¯ç”± ksoftirqd å‘¼å«é‚£å°±å¯ä»¥ sleepï¼Œä½†å¦‚æœæ˜¯ç”± ISR å‘¼å« Loop å‰‡æ˜¯åŸ·è¡Œåœ¨ Interrupt context é‚£å°±ä¸èƒ½ sleepã€‚ æœƒè¨­è¨ˆ ISR å¯ä»¥å‘¼å« Loop çš„åŸå› æ˜¯ Linux ç‚ºäº†å„ªåŒ–ï¼Œå¦‚æœ Interrupt æ‰€è§¸ç™¼çš„å·¥ä½œä¸¦ä¸å¤šï¼Œå°±ä¹¾è„†åœ¨ ISR ä¸­è™•ç†å®Œ è‹¥æ˜¯ç”± ksoftirq å‘¼å«å°±æœƒè®“ Interrupt å…ˆçµæŸï¼Œå¾ŒçºŒè®“ Scheduler ä¾†å®‰æ’ Task é€²è¡Œå·¥ä½œ invoke_softirq() æœƒå» Loop ä¸­æ‹¿å–å·¥ä½œä¾†åŸ·è¡Œ force_irqthreads ç”¨é€™å€‹è®Šæ•¸ä¾†åˆ¤åˆ¥æ˜¯ Interrupt context å‘¼å«é‚„æ˜¯ Kernel thread __do_softirq(), do_softirq_own_stack() éƒ½æ˜¯å»åŸ·è¡Œ softirqï¼Œå·®ç•°åœ¨ IRQ STACK è©³ç´°å¯è¦‹å»¶ä¼¸é–±è®€ wakeup_softirqd() å‰‡æ˜¯å«é†’ ksoftirqd æŠŠå‰©ä¸‹çš„å·¥ä½œäº¤çµ¦ ksoftirqd ä¾†æ’ç¨‹ å»¶ä¼¸é–±è®€: Linux kernelçš„ä¸­æ–­å­ç³»ç»Ÿ softirq ç›¸è¼ƒæ–¼ softirq, work-queue çš„æµç¨‹å–®ç´”å¾ˆå¤šï¼Œä¸æœƒé‹è¡Œåœ¨ Interrupt context: General rules for driver writing å…±ç”¨çš„è³‡æ–™è·Ÿèª°å…±ç”¨ï¼Œé›™æ–¹æ˜¯å¦æœƒåŒæ™‚åŸ·è¡Œ: æœƒ: å°±è¦ä½¿ç”¨ spinlock(Mulit-Processor)ã€semaphore(Signle-Processor) ä¸æœƒï¼Œé‚£è¦æ³¨æ„æ˜¯å¦æœƒ Preempt: èª°æœƒ Preemmpt èª° å¦‚æœå–®ä¸€æ–¹å‘å¦‚ A Preempt Bï¼ŒB å» Disable A å°±ä¸æœƒæœ‰ Rest conditionï¼Œä¾‹å¦‚: Scheduler, Local IRQ, Bottom half å¦‚æœæ˜¯é›™å‘çš„ Preempt é‚£å°±æ˜¯æœƒåŒæ™‚åŸ·è¡Œ è¦å¾ˆæ¸…æ¥šç¨‹å¼ä¸­éš±è—çš„æ„æ€ ä¾‹å¦‚: malloc æ˜¯å¦æœƒé€ æˆ Context switch, write æœƒåš I/O å‹•ä½œæœƒä¸æœƒ Context switch Start the OS 1.33 Start the OS ç‚ºä»€éº¼ä¸èƒ½ç›´æ¥å¾ Disk å•Ÿå‹• OSï¼Œé€™æ˜¯å› ç‚º Disk ä¹Ÿéœ€è¦ Driver ä¾†å•Ÿå‹• CPU èƒ½ç›´æ¥æ§åˆ¶ DARM, ROM æ˜¯å› ç‚ºé€™å…©è€…éƒ½æ˜¯ Byte address CPU åªè¦åœ¨ Address bus ä¸Šæ”¾å…¥è¦è®€å–çš„è³‡æ–™çš„ Address å°±èƒ½å¾ Data bus ä¸Šè®€å–æƒ³è¦çš„è³‡æ–™ Disk å±¬æ–¼ Block device éœ€è¦ä¸‹é”å‘½ä»¤å‘Šè¨´ Disk éœ€è¦ç¬¬å¹¾å€‹ Blockï¼Œä¹‹å¾Œ Disk å†è¬› Block å¯«åˆ°è»Ÿé«”æŒ‡å®šçš„ä½ç½®ï¼Œå¦‚ï¼š (ATA-8, ATAPI) å¦‚æœæ²’æœ‰è»Ÿé«”é©…å‹•çš„æƒ…æ³ä¸‹ CPU ç„¡æ³•ç›´æ¥è®€å– Diskï¼Œå› æ­¤éœ€è¦åœ¨ PC æ¶æ§‹ä¸­åœ¨ Boot rom ä¸­æ”¾å…¥ã€ŒBIOSã€ï¼Œ BIOS çš„é‡è¦ç›®çš„å°±æ˜¯è®€å– Disk ä¸Šçš„ Boot sectorã€‚ Bootstrap BIOS(ROM) è®€å– Boot sector(é€šå¸¸æ˜¯ Disk ä¸Šçš„ç¬¬ 0 å€‹ Block) BIOS æœƒå¸¶èµ·ä¾†çš„æ˜¯ GRUB(Boot loader)ï¼Œç¾åœ¨ä¹Ÿå¯ä»¥å¾ BIOS ä½¿ç”¨ UEFI(BIOS ä¹Ÿèªå¾— OS) å¦‚æœå¸¶èµ·çš„ OS æ˜¯ Linux é‚£éº¼å°±å¿…é ˆæŠŠé–‹æ©Ÿç›¸é—œçš„æª”æ¡ˆæ”¾åœ¨ /boot ä¸‹ï¼Œä¸¦ä¸” GRUB èªå¾—è©²ç›®éŒ„ä½¿ç”¨çš„æª”æ¡ˆç³»çµ± Linux kernel å…ˆæƒæè£ç½®ç‹€æ…‹ï¼Œæ ¹æ“šè£ç½®ç‹€æ…‹é…ç½®è¨˜æ†¶é«”(Virtual memory layout)ï¼Œä¹‹å¾Œå†å•Ÿå‹• Cache å…ˆè¨­å®š Virtual memory æ˜¯å› ç‚ºé€™è£¡å¿…é ˆå°‡æ˜ å°„åˆ° I/O çš„éƒ¨åˆ†è¨­å®šç‚º Non-cached Linux kernel å•Ÿå‹•å¾Œï¼Œå•Ÿå‹•ç¬¬ä¸€å€‹ User space çš„ç¨‹å¼ï¼Œå‚³çµ±ä¸Šæ˜¯ initï¼Œä¹Ÿæœ‰è¨±å¤š Linux æ”¹ç”¨ systemdï¼Œä»–å€‘çš„ pid éƒ½æ˜¯ 1ï¼Œ è² è²¬ Linux å¾ŒçºŒçš„åˆå§‹åŒ– é€™è£¡æ˜¯å› ç‚ºå°æ‡‰ I/O çš„å€æ®µ(ä¾‹å¦‚: DMA)ï¼Œä¸å¸Œæœ›é€™äº›æ“ä½œè¢« Cacheï¼Œå¦‚æœè¢« Cache å¯èƒ½æœƒå°è‡´è³‡æ–™ä¸ä¸€è‡´ï¼Œå› æ­¤è¦å…ˆè¨­å®š Non-cached BIOS limitations BIOS å¿…é ˆè¦èªå¾— Disk ä¸Šçš„é–‹æ©Ÿ Blockï¼Œå¦‚æœ BIOS ä¸æ”¯æ´è©² Diskï¼Œå°‡ç„¡æ³•å•Ÿå‹• OS(ä¾‹å¦‚: å®¹é‡è¶…é BIOS çš„å®šå€ç¯„åœ) BIOS å…§å«å¤šç¨®é©…å‹•ç¨‹å¼ï¼Œä¾‹å¦‚è¦æ”¯æ´ USB å¤§éƒ¨åˆ† BIOS ä¸æ”¯æ´è—èŠ½è£ç½®ï¼Œå› æ­¤é–‹æ©Ÿæ™‚çš„è—èŠ½æ»‘é¼ ï¼Œéµç›¤ç­‰ç­‰éƒ½ä¸èƒ½èˆ‡ BIOS äº’å‹• Last Edit 10-09-2023 18:27"
  },"/jekyll/2023-09-07-test_case_generation_based_on_constraint_logic_graph.html": {
    "title": "Paper | Test Case Generation Based on Constraint Logic Graph",
    "keywords": "software software_qualitiy generate_test_case Jekyll",
    "url": "/jekyll/2023-09-07-test_case_generation_based_on_constraint_logic_graph.html",
    "body": "Chiao-Yi Huang, â€œTest Case Generation Based on Constraint Logic Graphâ€, 2015. æœ¬è«–æ–‡æè¿°ä¸€ç¨®åŸºæ–¼é™åˆ¶é‚è¼¯åœ–æ‰€é€²è¡Œçš„é™åˆ¶å¼æ¡ˆä¾‹ç”¢ç”ŸæŠ€è¡“çš„é»‘ç®±æ¸¬è©¦ï¼Œä¸¦å°‡è©²æ¸¬è©¦æ¡ˆä¾‹ç”¢ç”Ÿå™¨å¯¦ä½œæˆä¸€å€‹ Eclipse çš„å¤–æ›å¥—ä»¶ã€‚ 1. Introduction 1.1 Motivation æ ¹æ“š Standish åœ˜éšŠçš„ 2015 CHAOS å ±å‘ŠæŒ‡å‡ºç›®å‰é–‹ç™¼é«˜å“è³ªçš„è»Ÿé«”ç³»çµ±ååˆ†å›°é›£ï¼Œç¢ºä¿è»Ÿé«”å“è³ªçš„ä¸»è¦æ–¹æ³•å³æ˜¯è»Ÿé«”æ¸¬è©¦ã€‚ é€™è£¡æŒ‡å‡ºäº†å¹¾å€‹æ¸¬è©¦æµç¨‹: Unit testing(å–®å…ƒæ¸¬è©¦) Integration testing(æ•´åˆæ¸¬è©¦) System testing(ç³»çµ±æ¸¬è©¦) Acceptance testing(é©—æ”¶æ¸¬è©¦) è€Œ Tase case çš„ç”¢ç”Ÿå¯ä»¥åˆ†ç‚ºå…©ç¨®æ–¹æ³•: Black-box testing(é»‘ç®±æ¸¬è©¦) åœ¨æ¸¬è©¦å‰å…ˆä¾ç…§è¦æ ¼æ…˜ç”Ÿæ¸¬è©¦æ¡ˆä¾‹ï¼Œæ˜¯æœ¬è«–æ–‡ä½¿ç”¨çš„æ–¹å¼ï¼Œé€é UML Class diagram æ­é… OCL ä¾†æè¿°è¦æ ¼ White-box testing(ç™½ç®±æ¸¬è©¦) å…¶ä¸­é‡å°å–®å…ƒæ¸¬è©¦çš„ Tase case å¯ä»¥åˆ†æˆå…©ç¨®æƒ…æ³: Valid test case(ç¬¦åˆå‰ç½®æ¢ä»¶çš„æ¸¬è©¦æ¡ˆä¾‹) ç¬¦åˆç¨‹å¼é æœŸè¼¸å…¥èˆ‡è¼¸å‡ºçš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œéœ€è¦å…ˆå¾—çŸ¥æ¸¬è©¦å‰å¾Œçš„ç³»çµ±ç‹€æ…‹(system pre-state/post-state)ï¼Œåƒæ•¸(argument)ï¼Œå›å‚³å€¼(return value) Invalid test case(ä¸ç¬¦åˆå‰ç½®æ¢ä»¶è¡Œç‚ºæ¸¬è©¦æ¡ˆä¾‹) å¯å°ç¨‹å¼ç”¢ç”ŸéŒ¯èª¤çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œä¹Ÿå°±æ˜¯åœ¨ Java ä¸­æ‰€ç™¼ç”Ÿçš„ä¾‹å¤–ç‹€æ³(exception)ã€‚ 1.2 Method é™åˆ¶å¼æ¸¬è©¦æ¡ˆä¾‹ç”¢ç”Ÿ(constraint-based test case generation)æŠ€è¡“æ˜¯ä¸€ç¨®é‡è¦çš„æ¸¬è©¦æ¡ˆä¾‹è‡ªå‹•ç”¢ç”ŸæŠ€è¡“ï¼Œ å°‡æ¸¬è©¦æ¡ˆä¾‹ç”¢ç”Ÿå•é¡Œåˆ¶å®šç‚ºé™åˆ¶æ»¿è¶³å•é¡Œ(Constraint Satisfaction Problem)ï¼Œä»¥æ­¤æœ‰å››å€‹ä¸»è¦å•é¡Œéœ€è¦è§£æ±º: è»Ÿé«”è¡Œç‚ºè¦æ ¼çš„æè¿° è»Ÿé«”ç­‰åƒ¹è¡Œç‚ºçš„åˆ†å‰² è»Ÿé«”æ¸¬è©¦è¦†è“‹æ¨™æº–çš„æ»¿è¶³ è»Ÿé«”ç­‰åƒ¹è¡Œç‚ºæ‰€å°æ‡‰çš„é™åˆ¶æ»¿è¶³å•é¡Œçš„æ•˜è¿° ç¬¬ä¸€å€‹å•é¡Œï¼Œæœ¬è«–æ–‡å°‡ç‰©ä»¶é™åˆ¶èªè¨€é‹ç®—å¼(Object constraint language expression)è½‰æ›ç‚ºé™åˆ¶é‚è¼¯åœ–(CLG)ï¼Œä»¥ CLG ä¾†è¡¨ç¾å—æ¸¬å‡½æ•¸çš„ç¨‹å¼è¡Œç‚ºã€‚ ç¬¬äºŒå€‹å•é¡Œï¼Œæœ¬è«–æ–‡å®šç¾©ä¸€å€‹å®Œæ•´çš„é™åˆ¶é‚è¼¯åœ–è·¯å¾‘å°±ä»£è¡¨ä¸€å€‹å®Œæ•´çš„ç¨‹å¼è¡Œç‚ºï¼Œå³ç‚ºä¸€å€‹ç­‰åƒ¹é¡(Equivalence class)ï¼Œ é€ç”± CLGï¼ŒåŸæœ¬æ˜¯ç„¡é™çµ„åˆçš„æå–æ­£è¦å¼(DNF)çš„å—æ¸¬å‡½å¼ç¨‹å¼è¡Œç‚ºï¼Œè®Šæˆå¯æ•¸çš„å—æ¸¬å‡½å¼ç¨‹å¼è¡Œç‚ºï¼Œå°‡é€™äº›ç¨‹å¼è¡Œç‚ºåˆ†å‰²æˆä¸€å€‹å¯ä»¥è¢«ç®¡ç†çš„ç­‰åƒ¹é¡é›†åˆï¼Œ ç­‰åƒ¹é¡å…§çš„å…¨éƒ¨æ¸¬è©¦æ¡ˆä¾‹éƒ½è¢«ç•¶ä½œæ‰¾éŒ¯èª¤çš„èƒ½åŠ›éƒ½ç›¸åŒï¼Œåªè¦å¾æ¯å€‹ç­‰åƒ¹é¡ä¸­æŒ‘å‡ºä¸€çµ„æ¸¬è©¦æ¡ˆä¾‹ï¼Œå³å¯ç”¢ç”Ÿå‡ºå¿…è¦çš„æ¸¬è©¦æ¡ˆä¾‹ã€‚ ç¬¬ä¸‰å€‹å•é¡Œï¼Œé€™è£¡åˆ†ç‚ºå…©å€‹éƒ¨åˆ†ä¾†è¨è«–ï¼š ç¬¬ä¸€ç‚ºè¦æ ¼è¦†è“‹æ¨™æº–ï¼Œç”±é¸æ“‡çš„è¦æ ¼è¦†è“‹æ¨™æº–è©•ä¼°è¦æ ¼è¦†è“‹åº¦éœ€è¦åˆ°ç”šéº¼ç¨‹åº¦ï¼Œæˆ‘å€‘æä¾›äº†ä¸‰ç¨®è¦†è“‹æ¨™æº–ã€‚ Decision coverage (DC) Decision condition coverage (DCC) Multiple condition coverage (MCC) ç¬¬äºŒéƒ¨åˆ†å‰‡æ˜¯é‡å°å·²ç¶“ç”¢ç”Ÿçš„é™åˆ¶é‚è¼¯åœ–æ˜¯å¦ç”¢ç”Ÿè¶³å¤ æ•¸é‡çš„å¯è¦–å®Œæ•´è·¯å¾‘ï¼Œç¨±ä¹‹ç‚ºé™åˆ¶é‚è¼¯åœ–è¦†è“‹æ¨™æº–ã€‚ ç¬¬å››å€‹å•é¡Œï¼Œå°‡å¯å¯¦è¡Œè·¯å¾‘ä¸Šçš„é™åˆ¶å¼æ”¶é›†ï¼Œä¸¦å°‡é€™äº›é™åˆ¶å¼è½‰æ›æˆé™åˆ¶é‚è¼¯ç¨‹å¼ï¼Œ å°±å¯ä»¥ä½¿ç”¨é™åˆ¶é‚è¼¯èªè¨€æ‰¾è§£å™¨(Constraint logic programming solver)(ECLiPSeclp) æ±‚å‡ºæ¸¬è©¦è³‡æ–™(æ¸¬è©¦è³‡æ–™åŒ…å«æ¸¬è©¦è¼¸å…¥èˆ‡é æœŸè¼¸å‡ºèˆ‡ç³»çµ±ç‹€æ…‹)ï¼Œ æœ€å¾Œå°‡æ¸¬è©¦è³‡æ–™è½‰æ›æˆéœ€è¦çš„å¹³å°çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œè€Œåœ¨æœ¬ç¯‡è«–æ–‡ä¸­å¯ä»¥é‡å° Java çš„å¹³å°è½‰æ›æˆ JUnit æ¸¬è©¦æ¡ˆä¾‹ã€‚ åœ–äºŒç‚ºä¾ç…§é€™å››å€‹å•é¡Œæ‰€å»ºæ§‹çš„æ¸¬è©¦å·¥å…·æ•´é«”æ¶æ§‹ï¼Œä»¥ä¸‹èªªæ˜å„å€‹æ¶æ§‹çš„åŠŸèƒ½ é™åˆ¶é‚è¼¯åœ–è½‰æ›å™¨: æè¿°å¦‚ä½•æ ¹æ“šæˆ‘å€‘å¾—åˆ°çš„å—æ¸¬å‡½å¼çš„ ç‰©ä»¶é™åˆ¶èªè¨€(OCL) ç”¢ç”Ÿä»–ç›¸å°æ‡‰çš„ é™åˆ¶é‚è¼¯åœ–(CLG) è·¯å¾‘æ¢åˆ—å™¨: å¾ é™åˆ¶é‚è¼¯åœ–(CLG) ç”¢ç”Ÿ å¯å¯¦è¡Œè·¯å¾‘(feasible path) çš„æ–¹æ³•ï¼Œä¸€æ¢å®Œæ•´çš„è·¯å¾‘ä¹Ÿä¸ä»£è¡¨é€™æ¢è·¯å¾‘å¯ä»¥ç”¢ç”Ÿæ¸¬è©¦æ¡ˆä¾‹ï¼Œ å¿…é ˆèƒ½åˆ†è¾¨å®ƒæ˜¯å¦ç‚ºå¯å¯¦è¡Œè·¯å¾‘ é™åˆ¶é‚è¼¯ç¨‹å¼ç”¢ç”Ÿå™¨: æˆ‘å€‘éœ€è¦çš„è³‡æ–™ä¸åƒ…æ˜¯å—æ¸¬å‡½å¼ç›¸é—œè³‡æ–™ï¼Œé‚„éœ€è¦ç”¢ç”ŸåŸ·è¡Œæ­¤å—æ¸¬å‡½å¼æ™‚ç›¸å°æ‡‰çš„åŸ·è¡Œå‰èˆ‡åŸ·è¡Œå¾Œçš„ç’°å¢ƒï¼Œ æˆ‘å€‘æ ¹æ“š UML çš„é—œè¯ä¸­å°æ–¼ç‰©ä»¶çš„é™åˆ¶æ‰¾åˆ°é©åˆçš„ç³»çµ±ç‹€æ…‹ï¼Œä¸¦ä¸”æ¯å€‹ç‰©ä»¶éƒ½æœƒæ»¿è¶³è‡ªèº«å®šç¾©çš„æ†å®šæ¢ä»¶ã€‚ è€Œåœ¨å¾…æ¸¬å‡½å¼çš„è·¯ç·šä¸­ï¼Œå¯èƒ½æœƒå‘¼å«å…¶ä»–çš„å‡½å¼ï¼Œç‚ºäº†è®“å‡½å¼å‘¼å«èƒ½æ­£å¸¸çš„é‹ä½œä¸¦ä¸”ç¬¦åˆæ‡‰æœ‰çš„é™åˆ¶å¼ï¼Œæˆ‘å€‘é‚„æœƒåœ¨æ¸¬è©¦æ¡ˆä¾‹ä¸­è£œä¸Šå…¶ä»–å‡½å¼çš„æ¨¡æ“¬ã€‚ æ¸¬è©¦è³‡æ–™è§£æå™¨ å¾—åˆ°æ¸¬è©¦è³‡æ–™å¾Œï¼Œç”±æ–¼æ¸¬è©¦è³‡æ–™åªæ˜¯ç´”æ–‡å­—ï¼Œé€éæ­¤è§£æå™¨å¾—åˆ°æ¸¬è©¦è³‡æ–™çš„è©³ç´°è³‡è¨Šã€‚ æ¸¬è©¦è…³æœ¬ç”¢ç”Ÿå™¨ é€™è£¡çš„æ¸¬è©¦è³‡æ–™æ˜¯èˆ‡å¹³å°ç„¡é—œçš„ï¼Œéœ€è¦é€éæ¸¬è©¦è…³æœ¬ç”¢ç”Ÿå™¨ä½¿æ¸¬è©¦è³‡æ–™å¯¦é«”åŒ–æˆç‚ºæ¸¬è©¦æ¡ˆä¾‹ï¼Œé€™è£¡ä½¿ç”¨ JUnitã€‚ 2. Related Technology Research 2.1 - 2.7 ç‚ºä½¿ç”¨çš„å·¥å…·èˆ‡æŠ€è¡“ä»‹ç´¹ï¼Œ2.8 ä»‹ç´¹äº†ç›¸é—œçš„ç ”ç©¶ï¼Œ 2.3 Constraint Logic Programming(CLP), 2.6 JUnit, 2.7 GraphViz ä»‹ç´¹è«‹åƒè€ƒåŸè«–æ–‡ 2.1 Unified Modeling Language(UML) 2.2 Object constraint language(OCL) 2.4 Coverage Criteria 2.5 Test quality assessment 2.8 Related research 2.1 Unified Modeling Language(UML) é—œæ–¼ UML é€™è£¡æœ‰ä»‹ç´¹ï¼Œé€™è£¡ä¸å†è´…è¿°ã€‚ 2.2 Object constraint language(OCL) OCL å¯ä»¥æ›´åš´è¬¹çš„æè¿° UML ä¸­æœ‰é—œç³»çµ±è¦æ ¼çš„æ‰€æœ‰è³‡è¨Šï¼Œæ˜¯ UML çš„æ“´å±•ã€‚OCL ä½¿ç”¨ä¸‰ç¨®é™åˆ¶å¼(Constraint)æè¿°é¡åˆ¥è¡Œç‚º: Class invariant æ­¤é¡åˆ¥åœ¨æ•´å€‹ç”Ÿå‘½é€±æœŸä¸­éƒ½æ‡‰è©²æ»¿è¶³çš„æ¢ä»¶ Method pre-condition Method åŸ·è¡Œå‰æ‡‰è©²æ»¿è¶³çš„æ¢ä»¶ Method post-condition Method åŸ·è¡Œå¾Œæ‡‰è©²æ»¿è¶³çš„æ¢ä»¶ 2.4 Coverage Criteria Coverage Criteria(æ¸¬è©¦è¦†è“‹æ¨™æº–)æ˜¯ç”¨ä¾†è¡¡é‡æ¸¬è©¦åš´è¬¹çš„ç¨‹åº¦ï¼Œæ¸¬è©¦è¦†è“‹æ¨™æº–è¶Šåš´è¬¹ä»£è¡¨æ‰€éœ€é–‹ç™¼æˆæœ¬æé«˜ä½†è»Ÿé«”å“è³ªä¹Ÿæé«˜: Decision coverage(DC, æ±ºç­–è¦†è“‹) ç¨‹å¼çš„æ§åˆ¶æµç¨‹åœ–ä¸­æ¯ä¸€å€‹æ±ºç­–çµæ§‹é»çš„çœŸèˆ‡å‡å€¼éƒ½å¿…é ˆåŸ·è¡Œéï¼Œå› æ­¤æ¯å€‹ Edge(é‚Šç•Œ)éƒ½æœƒè¢«åŸ·è¡Œé Condition coverage(CC, æ¢ä»¶è¦†è“‹) ä¸€å€‹æ±ºç­–æœ‰å¯èƒ½åŒ…å«ä¸€å€‹ä»¥ä¸Šçš„æ¢ä»¶ï¼Œæ‰€æœ‰çš„æ¢ä»¶éƒ½å¿…é ˆåŸ·è¡Œéï¼Œä½†ä¸éœ€è¦ç‰¹åˆ¥åŒ…å« DC æ¨™æº– Decision condition coverage(DCC, æ¢ä»¶æ±ºç­–è¦†è“‹) æ¢ä»¶èˆ‡æ±ºç­–è¦†è“‹éƒ½éœ€è¦æ»¿è¶³ï¼Œä»£è¡¨æ‰€æœ‰æ¢ä»¶èˆ‡æ±ºç­–çš„çœŸèˆ‡å‡å€¼éƒ½å¿…é ˆåŸ·è¡Œéä¸€æ¬¡ï¼Œä½†ä¸ç”¨åŒ…å«æ‰€æœ‰çš„æ¢ä»¶çµ„åˆ Multiple condition coverage(MCC, å¤šé‡æ¢ä»¶è¦†è“‹) æ¯å€‹æ¢ä»¶çš„çœŸèˆ‡å‡å€¼éƒ½å¿…é ˆåŸ·è¡Œéä¸€æ¬¡ï¼Œä¸”æ¯å€‹æ¢ä»¶çµ„åˆéƒ½å¿…é ˆåŸ·è¡Œéä¸€æ¬¡ï¼Œå¦‚æœæ¢ä»¶ç‚º n å€‹ï¼Œéœ€è¦åŸ·è¡Œ 2n æ¬¡ ç²—é«”æ˜¯æœ¬è«–æ–‡æœƒä½¿ç”¨åˆ°çš„æ¸¬è©¦è¦†è“‹æ¨™æº– 2.5 Test quality assessment é€™è£¡ä½¿ç”¨ Mutation testing ä¾†è©•ä¼°æ¸¬è©¦æ¡ˆä¾‹çš„å“è³ªï¼ŒMutation testing æ˜¯ä¸€ç¨®æ¸¬è©¦æ¡ˆä¾‹çš„å“è³ªè©•ä¼°æ–¹æ³•ï¼Œ å°‡å¾…æ¸¬ç¨‹å¼æ”¹è®Šå¹¾å€‹ Operation ä¾†æ¸¬è©¦ Test case èƒ½å¦æ‰¾å‡ºé€™äº›æ”¹è®Šã€‚ å»¶ä¼¸é–±è®€: Paper An Analysis and Survey of the Development of Mutation Testing. 2.8 Related research 2.8.1 Test Case Generation Based on UML/OCL åœ¨ [17] ä»–å€‘æ“´å¤§äº†HOL ç‚ºåŸºåº•çš„æ¸¬è©¦æ¡†æ¶ï¼Œ[HOL-TestGen] [20]ï¼Œå¯ä»¥æ”¯æ´ UML/OCL çš„è¦æ ¼ã€‚ä»–å€‘å…¶ä¸­ä¸€å€‹ä¸»è¦çš„è²¢ç»ï¼Œ æ˜¯æ“´å……ä»¥è¦æ ¼ç‚ºåŸºåº•çš„æ¸¬è©¦æ¡ˆä¾‹ç”¢ç”Ÿå™¨æ¨å‘ç‰©ä»¶å°å‘çš„è¦æ ¼ã€‚ [17] A . D. Brucker, P. K. Matthias, L. Delphine, W. Burkhart, â€œA Specification-Based Test Case Generation Method for UML/OCL,â€ Models in Software Engineering, vol. 6627, pp. 334-348, 2011. [20] A . D. Brucker, W.Burkhart, â€œInteractive Testing with HOL-TestGen,â€ in Proceedings of the 5th International Conference on Formal Approaches to Software Testing, 2006. åœ¨ [18]ä¸­ï¼Œä»–å€‘å±•ç¤ºäº†TOTEM(Testing Object-orienTed systEms with the unified Modeling language)ï¼Œä¸€å€‹å¯¦ç”¨çš„æ¸¬è©¦æ–¹æ³•ã€‚æ¸¬è©¦éœ€æ±‚å¾æ—©æœŸçš„é–‹ç™¼æ–‡ä»¶ä¸­å–å¾—ï¼Œ å¦‚ç”¨ä¾‹åœ–(use case diagram)ã€ç”¨ä¾‹èªªæ˜(use case description)ã€èˆ‡æ¯å€‹ç”¨ä¾‹èˆ‡é¡åˆ¥ç›¸é—œçš„äº¤äº’é—œä¿‚åœ–(interaction diagram)ï¼Œ ä»–å€‘åœ¨æ´»å‹•åœ–(activity diagram)ä¸­æ•æ‰åœ¨ç”¨ä¾‹ä¹‹é–“çš„é€£çºŒé—œä¿‚ï¼Œå› æ­¤å…è¨±ç”¨ä¾‹åºåˆ—çš„è¦æ ¼è¢«æ¸¬è©¦ã€‚ [18] L . Briand, L. Yvan, â€œA UML-Based Approach to System Testing,â€ in Proceedings of the 4th International Conference on The Unified Modeling Language, Modeling Languages, Concepts, and Tools, 2001. åœ¨ [19]ä¸­æå‡ºå±¬æ€§ç‚ºåŸºåº•çš„æ¸¬è©¦(property-based testing)ï¼Œçµåˆäº†è»Ÿé«”æ¨¡å‹(UML) èˆ‡é™åˆ¶å±¬æ€§(OCL) ä¾†è¨è«–ï¼Œä»–å€‘æ–·å®šäº†ç³»çµ±å…ƒä»¶çš„å…©ç¨®ä¸åŒçš„å±¬æ€§ï¼Œ ä¾‹å¦‚ç„¡ç‹€æ…‹èˆ‡ç‹€æ…‹ç›¸é—œï¼Œå¯ä»¥ç”¢ç”Ÿå®Œæ•´å±¬æ€§ç‚ºåŸºåº•çš„æ¸¬è©¦å¥—ä»¶ï¼Œç”¢ç”Ÿçš„æ¸¬è©¦å¥—ä»¶å¯ä»¥è¡¨é”æˆ QuickCheck[21] çš„å½¢å¼ã€‚ [19] M . A. Francisco, M. C. Laura, â€œAutomatic Generation of Test Models and Properties form UML Models with OCL Constraints,â€ in Proceedings of the ACM 12th Workshop on OCL and Textual Modeling, 2012. 2.8.2 Test Case Generation Based on Constraint [22] æ˜¯å°‡åŸºæ–¼é™åˆ¶å¼çš„ç ”ç©¶ç”¨åœ¨æ¸¬è©¦ä¸Šçš„å…ˆé©…ï¼Œä»–å€‘æå‡ºäº†é€éåŸºæ–¼é™åˆ¶å¼æ¸¬è©¦ï¼Œè‡ªå‹•ç”¢ç”Ÿæ¸¬è©¦è¼¸å…¥ç”¨åœ¨åŸºæ–¼éŒ¯èª¤çš„æ¸¬è©¦(fault-based testing)ã€‚ [22] R . A. DeMillo and A. J. Offutt, â€œConstraint-Based Automatic Test Data Generation,â€ IEEE Transcations on Software Engineering, vol. 17, no. 9, pp. 900-910, 1991. [23] æå‡ºäº†ç¬¬ä¸€å€‹å¾C ç¨‹å¼è½‰æ›æˆéœæ…‹å–®è³¦å€¼å½¢å¼(static single assignment form)ï¼Œä½¿æ‰€æœ‰è®Šæ•¸éƒ½åªæœƒè¢«è³¦äºˆæœ€å¤šä¸€æ¬¡çš„å€¼ï¼Œ æ¥è‘—å¯ä»¥é€éé€™å€‹æ–¹æ³•æœ‰ç³»çµ±åœ°å–å¾—æ§åˆ¶æµç¨‹åœ–ä¸­æ¯ä¸€æ¢ä¸åŒåŸ·è¡Œè·¯å¾‘çš„é™åˆ¶å¼ï¼Œé€²è¡Œç¬¦è™ŸåŸ·è¡Œ(symbolic execution)ã€‚æœ€å¾Œï¼Œ é€éé™åˆ¶æ‰¾è§£å™¨(constraint solvers) è‡ªå‹•çš„ç”¢ç”Ÿæ‰€æœ‰å¯å¯¦è¡Œè·¯å¾‘çš„æ¸¬è©¦è¼¸å…¥ã€‚ [23] A . Gotlieb, B. Botella and M. Rueher, â€œAutomatic Test Data Generation Using Constraint Solving Techniques,â€ in Proceedings of the 1998 ACM Symposium on Software Testing and Analysis, 1998. [24] ä½¿ç”¨ç¬¦è™ŸåŸ·è¡Œä¾†æ”¶é›†åœ¨Ada ç¨‹å¼ä¸­ä¸åŒè·¯å¾‘çš„é™åˆ¶å¼ã€‚ä»–ä½¿ç”¨é™åˆ¶é‚è¼¯ç¨‹å¼(constraint logic programming) ä¾†è‡ªå‹•çš„ç”¢ç”Ÿé‡å°æ‰€æœ‰å¯å¯¦è¡Œè·¯å¾‘çš„æ¸¬è©¦è¼¸å…¥ã€‚ [24] C . Meudec, â€œATGen : Automatic Test Data Generation Constraint Logic Programming and Symbolic Execution,â€ Journal of Software Testing, Verification and Reliability, vol. 11, no. 2, pp. 81-96, May, 2011. [25] æå‡ºäº†å¯ä»¥å¾VDMçš„è¦æ ¼ä¸­è‡ªå‹•ç”¢ç”Ÿæ¸¬è©¦æ¡ˆä¾‹ï¼Œä»–å€‘å°‡å¾…æ¸¬ç¨‹å¼çš„ VDM è¦æ ¼ä¸­çš„ç¬¦è™Ÿè½‰æ›æˆä¸€éšé‚è¼¯æ¼”ç®—(first-order logiccalculus) çš„æå–ç¯„å¼(disjunctive normal form)ã€‚ æ¯ä¸€å€‹åˆå–(conjunctive) çš„æ¼”ç®—éƒ½æ˜¯ç­‰åƒ¹é¡(equivalence class)ï¼Œè€Œä»–å€‘ä¹Ÿæœ‰è€ƒæ…®é—œæ–¼ç”¢ç”Ÿä¸€ç³»åˆ—å‡½å¼å‘¼å«æ™‚è¦è®“æ•´å€‹ç¨‹å¼è™•åœ¨ä¸€å€‹é©ç•¶çš„ç³»çµ±ç’°å¢ƒä¸­åšæ¸¬è©¦ã€‚ [25] J . Dick and A. Faivre, â€œAutomating The Generation and Sequencing of Test Cases from Model-Based Specifications,â€ in Proceedings of the 1st International Symposium on Formal Methods Eurpoe, 1993. 3. Constraint Logic Graph Generator 3.1 OCL Syntactic analysis 3.2 AST Post-Processor 3.3 Constraint Logic Graph Generator Architeture 3.4 Definition of Constraint logic graph 3.5 Generation of Constraint logic graph é€™è£¡ä»‹ç´¹å¦‚ä½•å°‡ Method çš„ OCL è½‰ç‚º CLGï¼Œæ¶æ§‹åœ–å¦‚ä¸‹: MUT means Method unit testing ä¸»è¦æµç¨‹å¦‚ä¸‹: ä½¿ç”¨ DresdenOCL(OCL åˆ†æå™¨)è®€å– OCL çš„è¦æ ¼ AST é€é OCL åˆ†æå™¨çµæœä¾†å»ºç«‹ AST ç¶“é Post-Processing(AST é‡æ§‹å™¨) å› ç‚º OCL å¯èƒ½å› ç‚º User çš„ç¿’æ…£é€ æˆè½‰æ› GLC çš„å›°é›£ï¼Œå› æ­¤éœ€åšé‡æ§‹ æ ¹æ“šä¸åŒçš„ Coverage Criteria å°‡ AST è½‰æ›ç‚º CLG æ¯å€‹é™åˆ¶å¼ç”¢ç”Ÿä¸€å€‹ CLG subgraphï¼Œå†æ ¹æ“šå„å€‹ Function å°‡ CLG subgraph çµåˆæˆä¸€å€‹ Complete CLG ä¸€å€‹ Complete CLG å¯ä»¥åˆ†æˆå…©ç¨®ï¼Œç¬¦åˆ/ä¸ç¬¦åˆ Pre-condition çš„ Complete CLG 3.1 OCL Syntactic analysis OCL æœ‰ä¸‰ç¨®é™åˆ¶å¼(invariant, pre, post) é€™æ¨£æ¯ç¨®æƒ…å¢ƒå°±è¦å»ºç«‹ä¸€å€‹ Abstract syntax tree(AST)ï¼Œ é€™è£¡æœƒé€é Dresden OCL ä¾†åˆ†æ OCLï¼Œå…¶ä¸­æ¯ä¸€å€‹ Operator éƒ½æœƒç”¢ç”Ÿä¸€å€‹ Subtreeã€‚ 3.1.1 Structure of Abstract syntax tree AST çš„æ¯ä¸€å€‹ Node éƒ½ä»£è¡¨ä¸€å€‹ OCL çš„é‹ç®—å¼ï¼Œä»¥ä¸‹æ˜¯ä½œè€…æ‰€è¨­è¨ˆçš„ Node: public ASTNode(Constraint obj) { super(); this.id = node_count++; // Auto-increment id this.constraint = obj; // Type provided by DresdenOCL parents = new ArrayList&lt;INode&gt;(); // Point to parents } ASTNode å¸¸ç”¨å‡½æ•¸ public abstract CLGNode toCLG(Criterion criterion); ç”¢ç”Ÿ CLG çš„å‡½æ•¸ï¼Œå›å‚³æ­¤ ASTNode æ‰€ç”¢ç”Ÿçš„ CLG çš„ç¬¬ä¸€å€‹ CLGNode public abstract Classifier getType(); æ¯å€‹ ASTNode éƒ½æ˜¯é‹ç®—å¼ï¼Œå‡½å¼å›å‚³æ­¤ ASTNode çš„å›å‚³å‹æ…‹ public abstract String getState(); å–å¾—æ­¤ASTNode çš„æ˜¯åœ¨å“ªå€‹ç‹€æ…‹(invã€preã€post) public abstract ASTNode toDeMorgan(); æ ¹æ“š De Morganâ€™s law å°æ­¤ ASTNode å–åå€¼ public abstract ASTNode toPreProcessing(); å°‡ASTNode è½‰æ›æˆé©åˆç”¢ç”Ÿé™åˆ¶é‚è¼¯åœ–ä¸”æ¯”è¼ƒç°¡å–®çš„ ASTNodeï¼Œå†æ ¹æ“šæ–°çš„ ASTNode çµæ§‹ä¾†ç”¢ç”Ÿ CLG Constraint: é‡å°é™åˆ¶å¼æ‰€å®šç¾©çš„ç‰©ä»¶å‹åˆ¥ï¼Œä¾›å…§éƒ¨éœ€ä½¿ç”¨åˆ°é™åˆ¶å¼æ™‚ä½¿ç”¨ public Constraint(Model model, tudresden.ocl20.pivot.pivotmodel.Constraint obj, ASTNode spec) { super(obj); this.dresden_constraint = obj; // Type provided by DresdenOCL this.model = model; // Point to UML model this.spec = spec; // Point to AST root node this.spec.addPreviousNode(this); } é€™è£¡åªèˆ‰èƒ½ç”¢ç”Ÿåˆ†æ”¯çš„ ASTNode ç‚ºä¾‹å­ï¼Œå…¨éƒ¨çš„ Node è«‹åƒè€ƒè«–æ–‡ IfExp: æŒ‡å‘ thenExp èˆ‡ elseExp public IfExp(Constraint obj, ASTNode conditionExp, ASTNode thenExp, ASTNode elseExp) { super(obj); this.conditionExp = conditionExp; this.thenExp = thenExp; this.elseExp = elseExp; conditionExp.addPreviousNode(this); thenExp.addPreviousNode(this); elseExp.addPreviousNode(this); } IfExp çš„æŠ½è±¡èªæ³•æ¨¹å¦‚åœ–ï¼Œæ ¹ç¯€é»ç‚ºIfExp conditionExpï¼šASTNode ç¬¬ä¸€å€‹å­æ¨¹ï¼Œç‚ºcondition çš„é‹ç®—å¼ thenExpï¼šASTNode ç¬¬äºŒå€‹å­æ¨¹ï¼Œç‚ºthen çš„é‹ç®—å¼ elseExpï¼šASTNode ç¬¬ä¸‰å€‹å­æ¨¹ï¼Œç‚ºelse çš„é‹ç®—å¼ OperationCallExp: this.parameters: ç¬¬äºŒå€‹å­æ¨¹é–‹å§‹ï¼Œä¸é™å€‹æ•¸çš„åƒæ•¸ this.isMethod: æ˜¯å¦ç‚ºå‡½æ•¸å‘¼å« public OperationCallExp( Constraint obj, ASTNode source, String name, Classifier type, boolean isMethod, Collection&lt;ASTNode&gt; parameters ) { super(obj, source, name, type); this.parameters = new ArrayList&lt;ASTNode&gt;(parameters); this.isMethod = isMethod; } IteratorExp: è¿­ä»£å™¨ä¾é å‘¼å« IterateExp ä¾†ç”¢ç”Ÿè¿­ä»£çš„ AST global_iterate_id: ä¾†ç”¢ç”Ÿè¿­ä»£çš„æ¬¡æ•¸ addPreviousNode: å°‡æ­¤æ¬¡è¿­ä»£è®Šç‚ºä¸‹æ¬¡è¿­ä»£çš„ Parent public IterateExp(Constraint obj, ASTNode source, String name, ASTNode accInitExp, ASTNode bodyExp) { super(obj, source, name, accInitExp.getType()); this.accInitExp = accInitExp; // Initial value of the iterator this.bodyExp = bodyExp; // Body of the iterator accInitExp.addPreviousNode(this); bodyExp.addPreviousNode(this); this.iterate_id = global_iterate_id++; } 3.1.2 Example Triangle ä»¥ä¸‹æ˜¯ä¸€å€‹ Triangle çš„ä¾‹å­ï¼Œé€™è£¡æœ‰ä¸‰å€‹é™åˆ¶å¼(pre, post, post)è¦å‚³æ›æˆ AST: package tcgen context Triangle::Triangle(sa : Integer, sb : Integer, sc : Integer): OclVoid pre EdgeErrorException: sa + sb &gt; sc and sb + sc &gt; sa and sa + sc &gt; sb and sa &gt; 0 and sb &gt; 0 and sc &gt; 0 post: sideA = sa and sideB = sb and sideC = sc context Triangle::category() : String post: result = if sideA@pre = sideB@pre then if sideB@pre = sideC@pre then 'Equilateral' else 'Isosceles' endif else if sideA@pre = sideC@pre then 'Isosceles' else if sideB@pre=sideC@pre then 'Isosceles' else 'Scalene' endif endif endif ä¸Šåœ–æ˜¯ Triangle çš„ Post è¢«è½‰åŒ–ç‚º AST çš„çµæœï¼Œå…¶ä»–çš„è½‰æ›å¯ä»¥åƒè€ƒè«–æ–‡ 3.2 AST Post-Processor å› ç‚º User åœ¨æå¯«ç‰©ä»¶æ™‚æœƒæœ‰ä¸€äº›å£èªä¸Šçš„ç¿’æ…£ï¼Œå› æ­¤æœƒå°‡ AST å†é‡æ§‹æˆçµæ§‹ç°¡å–®çš„ ASTï¼Œä»–çš„æ¢ä»¶å¦‚ä¸‹: ä¸ç¬¦åˆå‰ç½®æ¢ä»¶çš„é‡æ§‹ï¼Œä»¥æ­¤ç”¢ç”Ÿä¸ç¬¦åˆ Pre-condition çš„ CLG Flat IfExp(æ‰å¹³åŒ– IfExp) Flat Logic Operator(æ‰å¹³åŒ– Logic Operator) iterate Operator simplifyï¼Œåªèƒ½å‡ºç¾ variable = set of variables -&gt; iterate(â€¦) 3.2.1 AST reconstruction ä»¥ä¸‹èªªæ˜ AST é‡æ§‹ä¸­æ¯å€‹æ¢ä»¶çš„æ–¹æ³• ä¸ç¬¦åˆå‰ç½®æ¢ä»¶çš„é‡æ§‹ ä½œè€…èªç‚ºå¦‚æœ Function æœ¬èº«æ²’æœ‰éŒ¯èª¤ä½†è·³å‡º Expection æ™‚ï¼Œä»£è¡¨ Function çš„ Pre-condition ä¸ç¬¦åˆæ‰æœƒé€ æˆ Expection çš„ç™¼ç”Ÿï¼Œ æ‰€ä»¥å°±å°‡ Pre-condition è½‰æ›ç‚º (not, éå‰ç½®æ¢ä»¶)ï¼Œä¾†ç”¢ç”Ÿä¸ç¬¦åˆå‰ç½®æ¢ä»¶çš„ CLGã€‚ ä¸Šåœ–æ˜¯ä¸€å€‹ä¸ç¬¦åˆ Pre-condition çš„ Triangleï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„æ¢ä»¶åˆ¤æ–·éƒ½æ˜¯ç›¸åçš„ Flat IfExp å¦‚æœåœ¨ä¸ç”¢ç”Ÿåˆ†æ”¯çš„é‹ç®—å¼åº•ä¸‹æœ‰ IfExpï¼Œå‰‡å¿…é ˆå°‡ AST æ‰å¹³åŒ–ï¼Œä½¿ IfExp æ‹‰åˆ°é‹ç®—å¼ 1 çš„ä¸Šå±¤ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç¯„ä¾‹: context Class::method() : return_type pre: exp1 op (if exp2 then exp3 else exp4) é€™å€‹ä¾‹å­å¯ä»¥ç”¨ä¸‰å…ƒé‹ç®—å¼ä¾†ç†è§£ï¼ŒA = (B ? C : D)ï¼Œåœ¨æŸäº›èªè¨€ä¸­æ²’æœ‰ ? å°±æœƒä½¿ç”¨ if å–ä»£ æ‰å¹³åŒ–å¾Œå°‡ if æ‹‰åˆ°æœ€ä¸Šå±¤ï¼Œå¦‚ä¸‹: context Class::method() : return_type pre: if exp2 then exp1 op exp3 else exp1 op exp4 Flat Logic Operator é‚è¼¯é‹ç®—çš„æ‰å¹³åŒ–ä¸»è¦æœ‰å…©ç¨®ç‹€æ³: Binary operation(2å…ƒé‹ç®—), not operation(noté‹ç®—) Binary operation çš„ç‹€æ³è·Ÿ IfExp é¡ä¼¼ï¼Œå¦‚åœ¨ä¸ç”¢ç”Ÿåˆ†æ”¯çš„ Operator ä¸‹æœ‰é‚è¼¯é‹ç®—å¼ï¼Œå°±å°‡ IfExp æ‹‰åˆ°æœ€ä¸Šå±¤: context Class::method() : return_type pre: exp1 op (exp2 or exp3) &lt;!-- Flat --&gt; context Class::method() : return_type pre: if exp2 or exp3 then exp1 op true else exp1 op true not operation å‰‡é€é De Morganâ€™s laws ä¾†æ‹†è§£ï¼Œä¸‹è¡¨æ˜¯é‡å° Operation è€Œå®šç¾©å‡ºçš„ DeOperation: å¦‚æœæœ‰ exp1 and exp2 åš not é‹ç®—ï¼Œå‰‡æœƒè®Šæˆ (not (exp1)) or (not (exp2))ï¼Œä¸Šè¡¨çš„å¯é æ€§å¯ä»¥é€éçœŸå€¼è¡¨ä¾†åšé©—è­‰: Iterate Operator çš„æ ¼å¼ç°¡å–®åŒ– ç”±æ–¼ iterate çš„åœ–è¼ƒç‚ºè¤‡é›œï¼Œç‚ºäº†è®“é™åˆ¶é‚è¼¯åœ–ä¸­çš„é™åˆ¶å¼ç°¡å–®åŒ–ï¼Œæˆ‘å€‘åªæ¥å—å¦‚é‡æ§‹æ¢ä»¶ 4 çš„æ ¼å¼ã€‚ è‹¥ä½¿ç”¨è€…æä¾›çš„ç‰©ä»¶é™åˆ¶èªè¨€ä¸­çš„é‹ç®—å¼ä¸ç¬¦ä»¥ä¸Šçš„æ ¼å¼ï¼Œåœ¨æˆ‘å€‘çš„ç³»çµ±ä¸­æœƒå¼·åˆ¶é‡æ§‹ã€‚ variable = set of variables -&gt; iterate(â€¦) 3.3 Constraint Logic Graph Generator Architeture 3.3.1 ä¸ç¬¦åˆå‰ç½®æ¢ä»¶çš„å®Œæ•´é™åˆ¶é‚è¼¯åœ– ä¸ç¬¦åˆå‰ç½®æ¢ä»¶çš„é™åˆ¶é‚è¼¯åœ–åœ¨ AST Post-prossing å°±å°‡å‰ç½®æ¢ä»¶é‡æ§‹ï¼Œå› æ­¤ä¸éœ€è¦åœ¨ CLG ç”¢ç”Ÿå™¨æ¶æ§‹ä¸­åšé¡å¤–å‹•ä½œï¼Œ ä½†æ˜¯ä¸€å€‹ Funciton å¯èƒ½æœ‰å¤šå€‹ä¸åŒçš„ Execption è·³å‡ºï¼Œé€™æ™‚å°±éœ€è¦å¯«å¤šå€‹å‰ç½®æ¢ä»¶ï¼Œé€™æ¨£å°±æœƒæœ‰å…©å€‹ç¨ç«‹çš„ CLGã€‚ context Class::Method(Parameter : Type) pre Constraint_Name_1 : Constraint_1 pre Constraint_Name_2 : Constraint_2 å¤šå€‹å‰ç½®æ¢ä»¶ä¾†å¯¦ç¾å¤šå€‹ä¾‹å¤–æè¿°ï¼Œä¸¦ä¸”ä»¥é™åˆ¶å¼çš„åç¨±ä¾†åšç‚º Exception çš„åç¨± 3.3.2 ç¬¦åˆå‰ç½®æ¢ä»¶çš„å®Œæ•´é™åˆ¶é‚è¼¯åœ– æ ¹æ“š OCL è¨­è¨ˆçš„ä¸‰ç¨®é™åˆ¶å¼ï¼ŒæŠŠæ‰€æœ‰å‰ç½®èˆ‡å¾Œç½®æ¢ä»¶çµåˆ Function çš„ CLG å°±æ˜¯è©² Function çš„æ‰€æœ‰å¯èƒ½çš„é™åˆ¶é‚è¼¯åœ–ï¼Œ è€Œåœ¨è§£æä¸­ä¸€å€‹å‰ç½®æ¢ä»¶å°±æ˜¯ä¸€å€‹é™åˆ¶å¼ï¼Œæ‰€ä»¥é€™è£¡éœ€è¦æŠŠæ‰€æœ‰å‰ç½®æ¢ä»¶èˆ‡å¾Œç½®æ¢ä»¶éŠœæ¥èµ·ä¾†ã€‚ CLG çš„åšæ³•å°±æ˜¯æ‰¾å‡ºå¾…æ¸¬ Function çš„ Pre/Post-Condition çš„é›†åˆã€‚ 3.4 Definition of Constraint logic graph é™åˆ¶ç¯€é»(Constraint Node): ä»¥æ–¹æ¡†è¡¨ç¤º å”¯ä¸€å«æœ‰é™åˆ¶å¼çš„ AST çš„ Nodeï¼Œåœ¨é™åˆ¶ç¯€é»ä¸­çš„ä¸€å®šéƒ½æ˜¯å¸ƒæ—é‹ç®—å¼ï¼Œä¸¦åªæœ‰ä»¥ä¸‹å¯èƒ½: Relational Operator(é—œä¿‚é‹ç®—å¼) True/False Symbol Boolen Operator(å¸ƒæ—é‹ç®—å¼) Not Operator(å¦é‹ç®—å¼) é€£æ¥ç¯€é»(Connection Node): ä»¥è±å½¢è¡¨ç¤º ä½œç‚ºé€£æ¥ç”¨ï¼ŒCLG ä¸­å”¯ä¸€æœƒé€£æ¥åˆ°åˆ†æ”¯çš„åœ–å½¢ èµ·å§‹ç¯€é»(Start Node): é»‘è‰²åœ“å½¢ CLG çš„èµ·é»ï¼Œæ‰€æœ‰ CLG éƒ½éœ€è¦ç”±æ­¤ Node é–‹å§‹ çµæŸç¯€é»(End Node): é»‘è‰²åœ“å½¢å¸¶å¤–æ¡† CLG çš„çµæŸé»ï¼Œæ‰€æœ‰ CLG éƒ½éœ€è¦ç”±æ­¤ Node çµæŸ 3.5 Generation of Constraint logic graph æ¯ä¸€é¡† Abstract syntax tree(AST) éƒ½æ˜¯ä¸€å€‹é‹ç®—å¼ï¼Œæ‰€ä»¥æ¯å€‹é‹ç®—å¼éƒ½å¯ä»¥é€é Call toCLG(criterion) ä¾†é€éèµ°è¨ªç”¢ç”Ÿé™åˆ¶é‚è¼¯å­åœ–ã€‚ å¦‚æœé€™é¡†æ¨¹æ²’æœ‰åˆ†æ”¯å°±ä»£è¡¨è©²æ¨¹ä¸‹çš„æ‰€æœ‰ç¯€é»éƒ½ç”¢ç”Ÿåœ¨åŒä¸€å€‹ CLG é™åˆ¶ç¯€é»å…§ï¼Œå¦‚ä¸‹åœ–: åœ¨é€™ä¹‹å¾Œçš„è¨è«–æœƒä»¥ä¸‰ç¨®ä¸åŒçš„ Covaerage criteria èˆ‡æœƒç”¢ç”Ÿåˆ†æ”¯çš„é‹ç®—å¼ä¾†åšè¨è«–ï¼Œä¸‹è¡¨èªªæ˜ä»€éº¼é‹ç®—å¼æœƒç”¢ç”Ÿåˆ†æ”¯: 3.5.1 Decision Coverage IfExp IfExp èˆ‡åŸå§‹å®šç¾©ç›¸åŒï¼Œå¦‚æœ If å…§ç‚º True å°±åŸ·è¡Œ Then é‹ç®—å¼ï¼Œå¦å‰‡åŸ·è¡Œ Else é‹ç®—å¼ï¼Œå› ç‚ºä½¿ç”¨ DC æ¨™æº–æ‰€ä»¥ä¸æœƒå†å±•é–‹ IfExpï¼Œä½†éœ€è¦ä¸€å€‹ False çš„åˆ†æ”¯ã€‚ toCLG(Criterion criterion) { ASTNode astNotNode = new OperationCallExp(node.conditionExp, \"not\"); return ifCLG( node.conditionExp.toCLG(criterion), node.thenExp.toCLG(criterion), astNotNode.toCLG(criterion), node.elseExp.toCLG(criterion) ); } ifCLG( (CLGNode condNode, CLGNode condEnd), (CLGNode thenNode, CLGNode thenEnd), (CLGNode notCondNode, CLGNode notCondEnd), (CLGNode elseNode, CLGNode elseEnd)):(CLGNode, CLGNode) { ConnectionNode beginConnecting = new ConnectionNode(); ConnectionNode endConnecting = new ConnectionNode(); beginConnecting.connect(condNode); beginConnecting.connect(notCondNode); condEnd.connect(thenNode); notCondEnd.connect(elseNode); thenEnd.connect(endConnecting); elseEnd.connect(endConnecting); return (beginConnecting, endConnecting); } ä¸Šåœ–æ˜¯ IfExp AST &amp; CLG çš„è½‰æ›å°ç…§åœ– IterateExp å› ç‚º CLP çš„è®Šæ•¸æ˜¯ä¸€å€‹å›ºå®šå€¼ï¼Œå› æ­¤æœƒåœ¨è®Šæ•¸å¾Œé¢åŠ ä¸Š Iterate çš„ç·¨è™Ÿ å·¦é‚Šçš„è¿´åœˆåœ¨æ¢ä»¶çµ‚æ­¢å‰æœƒä¸æ–·è¿­ä»£ ç´¯åŠ å™¨(IterateAcc) Init è¿´åœˆè¨ˆæ•¸å™¨(IterateIndex) Init è¿´åœˆæ¢ä»¶åˆ¤æ–· Collection å–å‡ºé€™æ¬¡è¿­ä»£çš„å€¼ IterateAcc = IterateBody IterateIndex++ å‰ç¶´ # ä»£è¡¨æ˜¯ä½œè€…å‰µé€ çš„è®Šæ•¸ï¼Œå¾Œé¢çš„æ•¸å­—æ˜¯ç‚ºäº†å€åˆ†æ˜¯ç¬¬å¹¾å€‹ Iterate çš„é‹ç®—å¼ ä¸Šåœ–æ˜¯ IterateExp AST &amp; CLG çš„è½‰æ›å°ç…§åœ– DC Example of Triangle: DC åªéœ€è¦å±•é–‹ Decision çš„çœŸå‡å€¼ ä»¥ä¸‹æ˜¯ä¸€å€‹ Triangle çš„å‰ç½®æ¢ä»¶ AST ç¬¦åˆ Pre-Condition CLG çš„çµæœï¼Œä¸¦ä¸”ä¹‹å¾Œçš„æ¸¬è©¦è¦†è“‹æ¨™æº–éƒ½æœƒä»¥ Triangle ç‚ºä¾‹: ä»¥ä¸‹æ˜¯ç¬¦åˆ/ä¸ç¬¦åˆ Pre-condition çš„å…©ç¨® CLG: DC ä¸­ä¸ç¬¦åˆ Pre-condition çš„ CLG æœƒå°‡æ‰€æœ‰çš„é‹ç®—å¼åš DeOperationï¼Œä¸¦ä¸”åœ¨ DC ä¸­ä¸æœƒå±•é–‹ Boolean(or) é‹ç®—å¼ï¼Œå› æ­¤åªæœƒæœ‰ä¸€æ¢è·¯å¾‘: è€Œç¬¦åˆ Pre-condition çš„ CLG ä¸­ Boolean(and) åœ¨ DC æ¨™æº–ä¸­ä¹Ÿä¸æœƒå±•é–‹å› æ­¤åªæœƒæœ‰ Pre-condition çš„é™åˆ¶å¼èˆ‡ Post-condition çš„é™åˆ¶å¼: Triangle::category å› ç‚ºåªæœ‰ Post-condition æ•…æ²’æœ‰æ¥å…¶ä»–é™åˆ¶é‚è¼¯åœ–: 3.5.2 Decision condition coverage DCC èˆ‡ DC çš„ä¸åŒåœ¨æ–¼éœ€è¦å±•é–‹æœ‰åˆ†æ”¯çš„é™åˆ¶é‚è¼¯å­åœ–ï¼Œæ‰€æœ‰æ¢ä»¶èˆ‡æ±ºç­–çš„çœŸèˆ‡å‡å€¼éƒ½å¿…é ˆåŸ·è¡Œéä¸€æ¬¡ï¼Œä½†ä¸ç”¨åŒ…å«æ‰€æœ‰çš„æ¢ä»¶çµ„åˆ and &amp; or and é‹ç®—å¼ä¾†èªª Exp1 and Exp2ï¼Œå…©è€…ç‚ºçœŸæ‰ç‚ºçœŸï¼Œå› æ­¤åœ¨ CLG çš„è§’åº¦ä¾†çœ‹å°±æ˜¯å…©å€‹ç¯€é»é€£åœ¨ä¸€èµ· or é‹ç®—å¼å‰‡æ˜¯ Exp1 or Exp2ï¼Œå…¶ä¸­ä¹‹ä¸€ç‚ºçœŸå³ç‚ºçœŸï¼Œæ•…å¾ CLG çš„è§’åº¦ä¾†çœ‹ Exp1/2 å¯ä»¥è¦–ä½œå…©æ¢è·¯å¾‘ä¸Šçš„ç¯€é»ï¼Œ ä¸¦ä¸”æ ¹æ“š DCC çš„å®šç¾©ï¼Œè‡³å°‘æœ‰ä¸€æ¬¡çš„ True èˆ‡ Falseï¼Œå› æ­¤æœƒå¦‚ä¸‹åœ–æ‰€ç¤º: xor &amp; implies xor é‹ç®—å¼ç‚º Exp1 xor Exp2ï¼Œå…©è€…ä¸åŒæ‰ç‚ºçœŸï¼Œå› æ­¤åœ¨ CLG çš„è½‰æ›åœ–å¦‚ä¸‹ï¼Œå…¶ä¸­ not(Exp1) ä»£è¡¨å– Exp1 çš„åå€¼ implies é‹ç®—å¼ç‚º Exp1 implies Exp2ï¼Œè¦–ä½œ (not exp1) or exp2 DCC Example of Triangle: ä»¥ä¸‹æ˜¯ä¸€å€‹ Triangle çš„å‰ç½®æ¢ä»¶ AST ä¸ç¬¦åˆ Pre-Condition CLG çš„çµæœï¼Œå› ç‚º DCC éœ€è¦å±•é–‹ Boolean(or) é‹ç®—å¼ï¼Œå› æ­¤ä¸ç¬¦åˆ Pre-condition çš„ CLG éœ€è¦å±•é–‹: æ¯é‡åˆ°ä¸€æ¬¡ or ç”¢ç”Ÿä¸€å€‹æ¢ä»¶ç‚ºå‡å…¶é¤˜ç‚ºçœŸçš„è·¯å¾‘ï¼Œè€Œ AST å…±æœ‰å…­å€‹ or é‹ç®—å¼ï¼Œå› æ­¤ CLG æœƒæœ‰å…­æ¢è·¯å¾‘ï¼Œå¦‚ä¸‹åœ–: è€Œåœ¨ä½¿ç”¨ DCC æ™‚ç”¢ç”Ÿçš„ç¬¦åˆ Pre-condition çš„ CLGï¼Œå› ç‚ºå‰ç½®æ¢ä»¶çš†ç‚º and æ•…åªæœ‰ä¸€æ¢æ˜é¡¯è·¯å¾‘: 3.5.3 Multiple condition coverage MCC èˆ‡ DCC ä¸åŒçš„æ˜¯ï¼ŒMCC éœ€è¦å±•é–‹æ‰€æœ‰çš„æ¢ä»¶çµ„åˆï¼Œå› æ­¤æœƒæœ‰ 2n + 1 æ¢è·¯å¾‘ï¼Œå…¶ä¸­ n ç‚ºæ¢ä»¶çš„æ•¸é‡ or å› æ­¤åœ¨çœŸå€¼è¡¨ä¸­å¯ä»¥ç™¼ç¾ Exp1 or Exp2 ä¸€å…±æœƒæœ‰ä¸‰ç¨®å¯èƒ½è®“æ­¤é‹ç®—å¼ç‚ºçœŸï¼Œå› æ­¤ CLG æœƒå¦‚ä¸‹åœ–: DCC Example of Triangle: å› ç‚ºé€™æ¨£ç”¢ç”Ÿçš„ CLG éå¸¸è¤‡é›œæ‰€ä»¥é€™è£¡å°±ä¸æ”¾ä¸Šï¼Œä½†é€™å€‹ CLG å› ç‚ºæœ‰äº”å€‹åŒä¸€å±¤ç´šçš„ or å› æ­¤æœƒæœ‰ 25 = 32 + 1 æ¢è·¯å¾‘ã€‚ 4. Equivalence Class CLG Path Generator 4.1 CLG Paths lister 4.2 Path Post-Processor 4.3 Constraint Logic Program Coverage Criteria 4.4 Triangle Example - Paths and Test Case é€™è£¡æè¿°å¦‚ä½•å°‡ CLG ä¸­çš„ç­‰åƒ¹è¡Œç‚ºåšåˆ†å‰²ï¼Œä¹Ÿå°±æ˜¯å¾ CLG ä¸­åˆ†å‰²å‡ºä¸åŒçš„ Complete Pathï¼Œç”¢ç”Ÿæ¸¬è©¦è·¯å¾‘çš„æ¶æ§‹åœ–å¦‚ä¸‹: ç•¶æ»¿è¶³ä»¥ä¸‹å…©å€‹æ¢ä»¶çš„å…¶ä¸­ä¸€å€‹ï¼Œè·¯å¾‘æ¢åˆ—å°±æœƒçµæŸ: å¯å¯¦è¡Œè·¯å¾‘çµ„æ»¿è¶³è¦†è“‹æ¨™æº– å¤±æ•—çš„è·¯å¾‘æ¬¡æ•¸å·²ç¶“è¶…éå¯å®¹è¨±éŒ¯èª¤æ¬¡æ•¸ æ•´å€‹ CLG çš„è·¯å¾‘æ¢åˆ—å™¨å·¥ä½œæµç¨‹å¦‚ä¸‹: é€é CLG è¦†è“‹æ¨™æº–æ‰¾å°‹å®Œæ•´è·¯å¾‘ ç¶“ç”± Path Post-Processing äº¤çµ¦ CLP Generator ç„¶å¾Œç”± Eclipseclp æ±‚è§£(æ¸¬è©¦è³‡æ–™) æ”¶é›†è·¯å¾‘èˆ‡æ¸¬è©¦è³‡æ–™ç›´åˆ°æ¢ä»¶é”æˆ é€™è£¡æ‰€ä½¿ç”¨çš„ CLP Generator ä½¿ç”¨ Y.-T. Lan, Automatic Conversion from UML/OCL Specification to CLP Specification, 2015. æ‰€æå‡ºçš„æ–¹æ³• 4.1 CLG Paths lister ä½œè€…ä½¿ç”¨ BFS ä¾†å° CLG Traverse 4.1.1 PathFinder Object Implementation ä½œè€…å¯¦ä½œäº†ä¸€å€‹åç‚º FeasiblePathFinder Classï¼Œä»–çš„å±¬æ€§èˆ‡åƒæ•¸èˆ‡æ–¹æ³•å¦‚ä¸‹: FeasiblePathFinder(CoverageCriterion criterion, CLGNode graph, Model model) CoverageCriterion criterion; //è¦†è“‹æ¨™æº– Queue&lt;List&lt;CLGNode&gt;&gt; path_queue; //æœªå®Œæ•´è·¯å¾‘ä½‡åˆ— Model model; //UML é¡åˆ¥åœ– Path getNextPath() æœƒå¾æ­¤ CLG çš„ StartNode åŠ å…¥ path_queueï¼Œåœ¨ä¹‹å¾Œçš„æ¯æ¬¡è¿­ä»£æŠŠå¾€ä¸‹çš„ Node å…¨éƒ¨åŠ å…¥ path_queueï¼Œå¦‚æœæœ‰å¤šæ¢ path å°±è¤‡è£½ç¾æœ‰çš„ List&lt;CLGNode&gt; ä¸¦æŠŠä¸åŒçš„åˆ†æ”¯åŠ å…¥ä¸åŒçš„ List&lt;CLGNode&gt;ï¼Œ ä¸¦æª¢æŸ¥æ˜¯å¦æœ‰å·²ç¶“å®Œæ•´çš„ Pathï¼Œæœ‰å‰‡æš«åœä¸¦ Return path isCompletePath(List&lt;CLGNode&gt; path) æª¢æŸ¥æ˜¯å¦ç‚ºå®Œæ•´è·¯å¾‘ï¼Œå®Œæ•´è·¯å¾‘çš„æœ€å¾Œç¯€é»å¿…ç„¶æ˜¯ EndNodeã€‚ å¦‚æœå·²ç¶“ç”¢ç”Ÿéçš„ Complete Path ï¼Œå†æ¬¡è¢«ç”¢ç”Ÿå°±åˆ¤æ–·å·²ç¶“æ²’æœ‰è·¯å¾‘å¯ä»¥ç”¢ç”Ÿï¼Œå› æ­¤æœƒå›å‚³ nullï¼Œé€™æ¨£å°±å¯ä»¥é¿å…ç„¡é™è¿´åœˆ 4.2 Path Post-Processor ä¸€å€‹å®Œæ•´è·¯å¾‘éœ€è¦åšå¾Œè™•ç†æ‰èƒ½è½‰æ›æˆ CLPï¼ŒPath Post-Processor å°è·¯å¾‘åšä¸‰ä»¶äº‹: é‚Šç•Œå€¼å°‹æ‰¾å™¨(Boundary value finder) éš±å«å¾Œç½®æ¢ä»¶çš„å¾©åŸå™¨(Implicit post-condition meger) ä»¥éœæ…‹å–®è³¦å€¼å½¢å¼(Static Single Assignment Formï¼ŒSSA Form) å†æ¬¡çµ¦äºˆå„å€‹è®Šæ•¸åç¨± 4.2.1 Boundary value finder é€éé‚Šç•Œå€¼ç†è«–ï¼Œå°æ–¼ Path ä¸­çš„æ¯å€‹é™åˆ¶å¼éƒ½è¦–åš Domain çš„ä¸€æ¢é‚Šç•Œï¼Œé€éå‘¼å« getBoundaryCombinationVariants() ç”¢ç”Ÿç¬¦åˆçš„è·¯å¾‘å¦‚ä¸‹: ä¸Šåœ–å·¦ç‚ºåŸå§‹é‚Šç•Œï¼Œåœ–å³åˆ†åˆ¥ç‚º å…§éƒ¨é»ï¼Œå…©æ¢å°é–‰é‚Šç•Œä¸Šçš„å…©å€‹é»ï¼Œä»¥è¦éæ­· &lt;, = å¯ä»¥è¨ˆç®—ç‚º 1 + nop - 1 4.2.2 Implicit Post-Condition Restorer åœ¨ CLG ä¸­å¦‚æœåœ¨ Post-Condition ä¸­æ²’æœ‰ç‰¹åˆ¥æŒ‡å®šç‰©ä»¶çš„å±¬æ€§æ˜¯å¦æœ‰æ”¹è®Šï¼Œå°±ä»£è¡¨å—æ¸¬å‡½å¼åŸ·è¡Œå‰å¾Œçš„å±¬æ€§æ˜¯ä¸€æ¨£çš„ï¼Œå› æ­¤åœ¨ç”¢ç”Ÿæ¸¬è©¦è·¯å¾‘å¾Œå¯ä»¥å…ˆåˆ¤æ–· Post-Condtion æ˜¯å¦æœ‰å®šç¾© Pre-State çš„æ”¹è®Šï¼Œ å¦‚æœæ²’æœ‰å°±åœ¨å®Œæ•´è·¯å¾‘ä¸Šè£œä¸Šéš±å«çš„ Post-Condtionï¼Œå¦‚ä¸‹: &lt;!-- Complete Path --&gt; self@pre.sideA &lt;&gt; self@pre.sideB self@pre.sideA = self@pre.sideC result = â€œIsoscelesâ€ &lt;!-- Add Post-Processing --&gt; self.sideA = self.sideA self.sideB = self.sideB self.sideC = self.sideC ä¸‹é¢ä¸‰å€‹ Post-Processor ç”¢ç”Ÿçš„é™åˆ¶å¼æœƒè¢«åŠ å…¥å®Œæ•´è·¯å¾‘ä¸­ 4.2.3 Static Single-Assignment Processor å› ç‚º CLP ä¸­æ¯å€‹è®Šæ•¸éƒ½åªèƒ½æœ‰ä¸€å€‹å€¼ï¼Œå› æ­¤é‡åˆ°è¿´åœˆæ™‚å°±éœ€è¦å¦å¤–è™•ç†è®Šæ•¸åç¨±ï¼Œä¾‹å¦‚ä»¥ä¸‹çš„ä¾‹å­: æ¯æ¬¡è¿­ä»£å°±åœ¨å¾Œé¢åŠ ä¸Šæ•¸å­—ä»£è¡¨é€™æ¬¡è¿­ä»£çš„è®Šæ•¸ï¼Œä¸¦å°‡å…¶æ”¶é›†å°±èƒ½çŸ¥é“ä¸€æ¬¡è¿­ä»£ä¸Šçš„æ‰€æœ‰é™åˆ¶å¼ã€‚ 4.2.4 Path Object Implementation ä»¥ä¸‹æ˜¯ Path Class çš„å±¬æ€§ã€åƒæ•¸èˆ‡æ–¹æ³•å¦‚ä¸‹: Path(List&lt;CLGNode&gt; nodes, Model model) List&lt;CLGNode&gt; nodes; int id; List&lt;ASTNode&gt; actual_asts; Model model; Constraint dresden_constraint; List&lt;ASTNode&gt; getASTNodes() å–å¾—å…¨éƒ¨é™åˆ¶ç¯€é»ä¸­çš„æŠ½è±¡èªæ³•æ¨¹(å›å‚³ actual_asts) void analysisASTNodes() æœƒå…ˆå‘¼å« prepareNewSymbolTable() ä¾†æº–å‚™è®Šæ•¸çš„ç¬¦è™Ÿè¡¨ï¼Œé‡å°#IterateAccã€#IterateIndexã€#IterateElement ä¸‰å€‹è®Šæ•¸åšç‰¹åˆ¥è™•ç†ï¼Œ è‹¥é€™ä¸‰å€‹è®Šæ•¸åœ¨ Operator çš„å·¦é‚Šå‰‡å°‡è®Šæ•¸åç¨±æ›¿æ›æˆ OriginalName + Number private List&lt;OperationCallExp&gt; getEqualExpsForAttributeConsistency() åµæ¸¬æ˜¯å¦æœ‰å±¬æ€§åœ¨ Post-Condtion ä¸­æœ‰æ”¹è®Šï¼Œè‹¥ç„¡å‰‡å›å‚³ä¸€ç³»åˆ—çš„ Attribute = Attribute@Pre private HashMap&lt;String, Integer&gt; prepareNewSymbolTable() æº–å‚™æ‰€æœ‰ Variable çš„ç¬¦è™Ÿè¡¨ï¼ŒString ç‚ºè®Šæ•¸åç¨±ï¼ŒInteger ç‚ºè®Šæ•¸çš„ä½ç½®ï¼Œ1 æ˜¯ self, 2 é–‹å§‹æ˜¯ parameter, 3 æ˜¯ parameter çš„ return value private Set&lt;Attribute&gt; findUnchangedPropertyForParameter(final HashMap&lt;String, Set&lt;PropertyCallExp&gt;&gt; changedPropertyCallExprs, Parameter parameter) åµæ¸¬æ˜¯å¦æœ‰å±¬æ€§åœ¨ Post-Condtion ä¸­æœ‰æ”¹è®Šï¼Œè‹¥ç„¡å‰‡å›å‚³ä¸€ç³»åˆ—çš„ Attribute = Attribute@Pre public List&lt;Path&gt; getBoundaryCombinationVariants() é€éå‘¼å« calculateVariants() å–å¾—ä¾†æºè·¯å¾‘ä¸­ç¬¦åˆé‚Šç•Œå€¼è¦†è“‹çš„çµ„åˆï¼Œæ¥è‘—è¤‡è£½ç›¸å°æ‡‰æ•¸é‡çš„è·¯å¾‘ä¸¦å°‡çµ„åˆä¸­çš„ OperationCallExp å–ä»£åŸæœ¬çš„ï¼Œä¸¦è¼¸å‡ºå…¨éƒ¨çµ„åˆçš„ Queue private List&lt;List&lt;Pair&lt;Integer, String&gt;&gt;&gt; calculateVariants() æœƒå°‡ CLG ä¸­çš„é™åˆ¶ç¯€é»çš„ AST Node ä¸­çš„é‚Šç•Œå–å‡ºï¼Œä¸¦ä»¥ä¸€å€‹å›ºå®šè¦å‰‡ä¾†è½‰æ› ä¾‹å¦‚ä¹‹å‰çš„ A &lt;= B, B &lt;= Cï¼Œæœƒå°‡ &lt;= çš„ä½ç½®å–å‡ºï¼Œä»¥ Â«, &lt;=, =&lt;, == çš„çµ„åˆä¾†å–ä»£ï¼Œä¸¦åˆªé™¤ä¸åˆç†çš„çµ„åˆ == 4.3 Constraint Logic Program Coverage Criteria é€™ç« ç¯€æœƒä»‹ç´¹ Coverage Criteria çš„ Interfaceï¼Œè¦æ³¨æ„é€™è£¡è«‡çš„æ˜¯ç‚ºäº†ç”¢ç”Ÿè·¯å¾‘çš„æ¸¬è©¦è¦†è“‹æ¨™æº–ï¼Œåœ¨ CLG Coverage Criteria ä¸­ä½œè€…ç›®å‰åƒ…æœ‰ Edge Coverageï¼Œ ä¹Ÿå°±æ˜¯å°æ‰€æœ‰é‚Šç•Œè¦†è“‹ã€‚ 4.3.1 Coverage Criteria Interface void addFeasiblePath (List&lt;CLGNode&gt; path) ç•¶ Path å·²ç¶“ç¢ºå®šæœ‰è§£ï¼Œé€™æ¢ Path æ”¾å…¥ Feasible Path ä¸­ void addInfeasiblePath (List&lt;CLGNode&gt; path) ç•¶ Path ç„¡è§£ï¼Œé€™æ¢ Path æ”¾å…¥ Infeasible Path ä¸­ void analysisTagetGraph(CLGNode graph) åœ¨ç”¢ç”Ÿå®Œå®Œæ•´çš„é™åˆ¶é‚è¼¯åœ–ä¹‹å¾Œï¼Œæˆ‘å€‘æœƒä½¿ç”¨æ­¤å‡½å¼ä¾†å¹«å¿™åˆ†æé€™å¼µå®Œæ•´çš„é™åˆ¶é‚è¼¯åœ–æœƒéœ€è¦è¦†è“‹é‚£äº›è³‡è¨Š boolean meetRequirement() æ­¤å‡½å¼æ˜¯å¹«å¿™æª¢æ¸¬æ˜¯å¦å·²ç¶“å°‡è©²è¦†è“‹åˆ°çš„åœ°æ–¹éƒ½å·²ç¶“è¦†è“‹åˆ°äº† boolean isVisitedFeasiblePath (List&lt;CLGNode&gt; path) æ­¤å‡½å¼æ˜¯å¹«å¿™æª¢æ¸¬è¼¸å…¥çš„é€™æ¢è·¯å¾‘æ˜¯å¦å·²ç¶“è¢«æ¨™è¨»ç‚ºå¯å¯¦è¡Œè·¯å¾‘ boolean isVisitedInfeasiblePath (List&lt;CLGNode&gt; path) æ­¤å‡½å¼æ˜¯å¹«å¿™æª¢æ¸¬è¼¸å…¥çš„é€™æ¢è·¯å¾‘æ˜¯å¦å·²ç¶“è¢«æ¨™è¨»ç‚ºä¸å¯å¯¦è¡Œè·¯å¾‘ 4.3.2 Edge Coverage Set&lt;ImmutablePair&lt;CLGNode, CLGNode&gt;&gt; all_branches; //å…¨éƒ¨çš„é‚Š(é»èˆ‡é»çš„é…å°) Set&lt;ImmutablePair&lt;CLGNode, CLGNode&gt;&gt; visited_branches; //å·²ç¶“èµ°è¨ªéçš„é‚Š Set&lt;List&lt;CLGNode&gt;&gt; infeasible_path; //å·²èµ°è¨ªéä¸å¯å¯¦è¡Œè·¯å¾‘ Set&lt;List&lt;CLGNode&gt;&gt; feasible_path; //å·²èµ°è¨ªéå¯å¯¦è¡Œè·¯å¾‘ é€éæ¯”è¼ƒ all_branches èˆ‡ visited_branches å…©å€‹é›†åˆå…§çš„é‚Šï¼Œç”¨ä¾†æŸ¥çœ‹æ˜¯ å¦å…¨éƒ¨çš„é‚Šéƒ½å·²ç¶“è¢«èµ°è¨ªéã€‚ å› ç‚ºä¸åŒæ¸¬è©¦æ¨™æº–æœƒæœ‰ä¸åŒçš„ CLG å› æ­¤åœ¨èµ°è¨ªå®Œå…¨éƒ¨è·¯å¾‘å°±ä»£è¡¨é”æˆæ¸¬è©¦è¦†è“‹æ¨™æº– 4.4 Triangle Example - Paths and Test Case åœ¨é€™è£¡æˆ‘åªèˆ‰ç”¨äº† Triangle Consturctor çš„ç¬¦åˆ/ä¸ç¬¦åˆ Pre-condition ç‚ºä¾‹å­: 4.4.1 Decision coverage testcase Triangle åœ¨ DC æ¸¬è©¦æ¨™æº–ä¸‹ç¬¦åˆ Pre-condition çš„æ¸¬è©¦è³‡æ–™åªæœ‰ä¸€æ¢ï¼Œå¦‚ä¸‹: Path Parameter Return value Post-condition 1 1, 1, 1 void Triangle(1, 1, 1) Triangle åœ¨ DC æ¸¬è©¦æ¨™æº–ä¸‹ä¸ç¬¦åˆ Pre-condition çš„æ¸¬è©¦è³‡æ–™æœƒæœ‰ï¼Œä½†æ˜¯åœ¨ Boundary value finder ä¸ŠæœƒæŠŠ or åšå±•é–‹ï¼Œå› æ­¤æœƒæœ‰ä¸ƒæ¢è·¯å¾‘ï¼Œå¦‚ä¸‹: Path Parameter Execption 1 -10, -10, -10 void 7æ¢ Paths minumum solutions éƒ½ç›¸åŒï¼Œé€™è£¡ä¸å…¨éƒ¨åˆ—å‡º 4.4.2 Decision condition coverage testcase Triangle åœ¨ DCC ä¸‹ä¸ç¬¦åˆ Pre-condition çš„æ¸¬è©¦ 5. Test Case Generator 5.2 Performance of Coverage Criteria ç”±æ–¼ Coverage Criteria æœƒç”¢ç”Ÿä¸åŒçš„ CLGï¼Œç”¢ç”Ÿè·¯å¾‘çš„æ™‚é–“èˆ‡æ¶µè“‹åˆ°çš„å…§å®¹ä¹Ÿä¸ä¸€æ¨£ï¼Œæˆ‘å€‘å°‡ç¯„ä¾‹è³‡è¨Šé¡¯ç¤ºåœ¨ä¸‹è¡¨ï¼Œ Class info åˆ†åˆ¥ä»£è¡¨: Class Num, Association Num, Function Num, Can be excption function Num: IntegerRange: iterate æ¸¬è©¦ RecursionExample: fibonacci, factorial Triangle, Date: è¡¨ç¾è¤‡é›œçš„åˆ†æ”¯æ¸¬è©¦ Laboratory: é—œè¯å¤šå€‹é¡åˆ¥çš„ç‰©ä»¶ Example Class info AST Node Iteration IntegerRange 1/0/2/0 38 Yes RecursionExample 1/0/2/2 49 No Triangle 1/0/2/1 213 No Date 1/0/8/1 816 No Laboratory 3/3/8/1 124 No ç„¶å¾Œåˆ†åˆ¥å±•ç¤ºä¸‰ç¨® Coverage Criteria çš„ç”¢ç”Ÿçµæœï¼Œä¸»è¦åˆ†åˆ¥è¨è«–ç¬¦åˆ/ä¸ç¬¦åˆ Pre-condition çš„ç”¢ç”Ÿçµæœ: å°±è·Ÿé æ–™çš„ä¸€æ¨£æ‰€èŠ±è²»æ™‚é–“ DC &gt; DCC &gt; MCC Date æ˜¯èŠ±è²»æ™‚é–“æœ€é•·çš„ç¯„ä¾‹ï¼Œå› ç‚º Date ä¸­æœ‰æ›´å¤šçš„ if, or é‹ç®—å¼ Laboratory æ˜¯èŠ±è²»æ™‚é–“ç¬¬äºŒé•·çš„ç¯„ä¾‹ï¼Œå› ç‚º Laboratory ä¸­æœ‰è¨±å¤šé—œè¯ç‰©ä»¶ï¼Œå°è‡´éœ€è¦ä¸€ä½µç”¢ç”Ÿæ‰èƒ½å®Œæˆ åŒæ™‚åœ¨ DCC, MCC ä¸­æœƒç”¢ç”Ÿè¨±å¤šæ¢ä¸å¯å¯¦è¡Œè·¯å¾‘ï¼Œä¾‹å¦‚ä»¥ä¸‹çš„ä¾‹å­: context Date::Date(y : Integer, m : Integer, d : Integer) pre DateErrorException: if (y.mod(400) = 0) or (y.mod(4) = 0 and y.mod(100) &lt;&gt; 0) then d &lt;= 29 DCC æœƒç”¢ç”Ÿä¸€æ¢å·¦ç‚ºçœŸï¼Œå³ç‚ºå‡çš„ä¾‹å­: y.mod(400) = 0, y.mod(4) &lt;&gt; 0, y.mod(100) &lt;&gt; 0 æ²’æœ‰æ•¸å­—èƒ½å¤ ç¬¦åˆé€™ä¸‰å€‹æ¢ä»¶ï¼Œå› æ­¤é€™æ¢è·¯å¾‘æ˜¯ä¸å¯å¯¦è¡Œçš„ context Date::Date(y : Integer, m : Integer, d : Integer) pre DateErrorException: if ((m = 1) or (m = 3) or (m = 5) or (m = 7) or (m = 8) or (m = 10) or (m = 12)) then d &lt;= 31 MCC ç‚ºäº†ç”¢ç”Ÿæ‰€æœ‰çš„çµ„åˆï¼Œæœƒæœ‰ m=1, m=3 é€™æ¨£çš„ä¾‹å­å‡ºç¾ 5.3 Quality of Coverage Criteria ä½¿ç”¨ PIT ä¾†é©—è­‰ä¸‰ç¨® Coverage Criteria ä¸‹ç”¢ç”Ÿçš„ Test Case çš„å“è³ªï¼ŒDC åœ¨å„æ–¹é¢éƒ½è¡¨ç¾å¾—è¼ƒå·®ï¼Œè€Œ DCC, MCC é›–ç„¶ MCC å¯ä»¥ç”¢ç”Ÿæ›´å¤šçš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œ ä½†å…©è€…çš„çªè®Šåˆ†æ•¸å¹¾ä¹ä¸€æ¨£ï¼Œå› æ­¤ä¸€èˆ¬æƒ…æ³ä¸‹ä½¿ç”¨ DCC å³å¯åšåˆ° MCC å·®ä¸å¤šç¨‹åº¦çš„è¦†è“‹åº¦ã€‚ ä½†æ˜¯åœ¨å¹¾å€‹ç‰¹å®šæ¡ˆä¾‹ä¸‹ï¼Œéƒ½ç„¡æ³•é”åˆ° 100% çš„è¦†è“‹åº¦ï¼Œå› ç‚ºé€é CLP æ‰¾è§£æ™‚æœƒå„ªå…ˆæ‰¾å‡ºæœ€ç°¡çš„è§£(æœ€å°å€¼)ï¼Œå› æ­¤ä¾‹å¦‚: parm &lt; 10 çªè®Šç‚º parm &lt;= 10 æ™‚ï¼Œ å°±ç„¡æ³•æ‰¾å‡ºå…¶ä¸­éŒ¯èª¤ã€‚ 6. Conclusion and Future Work ä½œè€…å¯¦ä½œå‡ºäº†å¯ä»¥è¼”åŠ©æ¸¬è©¦é©…å‹•é–‹ç™¼çš„ç³»çµ±ï¼ŒåŸºæ–¼é™åˆ¶é‚è¼¯åœ–çš„æ¸¬è©¦æ¡ˆä¾‹ç”¢ç”Ÿå™¨ï¼Œé€éè¦æ ¼æ–‡ä»¶ç”¢ç”Ÿé»‘ç®±å‡½å¼æ¸¬è©¦æ¡ˆä¾‹ã€‚ OCL åƒ…èƒ½æ”¯æ´éƒ¨åˆ† String èˆ‡éƒ¨åˆ† Collection èˆ‡å®Œæ•´çš„ Integer å‹æ…‹ã€‚ ä¸¦åœ¨æ’°å¯«æ™‚éœ€è¦æ˜ç¢ºå¯«å‡ºä½¿ç”¨åˆ°çš„ç‰©ä»¶çš†ç‚ºå‰ç½®ç‹€æ…‹(æ„æŒ‡obj@pre)ï¼Œé¿å…æˆ‘å€‘èª¤åˆ¤æˆå¾Œç½®æ¢ä»¶æœ‰è¢«æ›´å‹•ã€‚ å¦å¤–å°±æ˜¯å¦‚ä½•åˆ¤æ–·ç„¡æ•ˆçš„æ¸¬è©¦è·¯å¾‘ï¼Œå¦‚ 5.2 æ‰€è¿°çš„ç„¡æ•ˆè·¯å¾‘å°‡æµªè²»å¤§é‡çš„æ™‚é–“ï¼Œå› ç‚ºé€™è£¡ç„¡æ•ˆçš„åˆ¤æ–·æ–¹å¼æ˜¯ä»¥ CLP çš„æ±‚è§£èˆ‡è¶…æ™‚ä¾†æ±ºå®šï¼Œ å¦‚æœæœ‰å¤šå€‹ç„¡è§£è·¯å¾‘å°‡å¿…ç„¶æ¶ˆè€—å›ºå®šçš„ç­‰å¾…æ™‚é–“ã€‚ NOTE Last edit 11-15-2023 12:55"
  },"/jekyll/2023-09-07-Introduction_OCL.html": {
    "title": "Note | Object Constraint Language Concepts (Unfinished)",
    "keywords": "software tool Jekyll",
    "url": "/jekyll/2023-09-07-Introduction_OCL.html",
    "body": "Object Constraint Language(OCL) ç‰©ä»¶é™åˆ¶èªè¨€ã€‚ 1. Introduction é€šå¸¸åªä½¿ç”¨ UML æ˜¯ä¸è¶³ä»¥å®Œå…¨è¦ç¯„ä¸€å€‹è»Ÿé«”ç³»çµ± æ‰€ä»¥é‚„éœ€è¦ Constraint ä¾†å®Œå…¨è¦ç¯„ä¸€å€‹è»Ÿé«”ç³»çµ± Constraint æ˜¯å°è»Ÿé«”ç³»çµ±çš„ä¸€å€‹æˆ–å¤šå€‹å€¼çš„é™åˆ¶ Object Constraint Language(OCL) æ˜¯ä¸€ç¨®åŸºæ–¼ Text çš„èªè¨€ï¼Œç”¨æ–¼æè¿°é€™äº› Constraints ä¸Šåœ–å±•ç¤ºäº†ä¸€å€‹ Flight çš„ Class invariantï¼Œå¦‚æœ type == passengerï¼Œé‚£éº¼ airplane.type ä¹Ÿå¿…é ˆç‚º passengerï¼ŒåŒæ¨£çš„ cargo ä¹Ÿåªèƒ½å°æ‡‰ cargo é€™æ„æ€å°±å¦‚æœæ˜¯å®¢é‹èˆªç­å°±è¦å°æ‡‰å®¢æ©Ÿï¼Œè²¨é‹èˆªç­å°±è¦å°æ‡‰è²¨æ©Ÿã€‚ 2. Basic Object Constraint Language 2.2.1 Kinds of Constraints å›  UML é¡åˆ¥åœ–ä¸­ç„¡æ³•åŒ…å«ä¸€äº›ç´°ç¯€è³‡è¨Šï¼Œè‹¥ä»¥è‡ªç„¶èªè¨€æè¿°ï¼Œå¸¸é€ æˆé–‹ç™¼è€…èˆ‡ä½¿ç”¨è€…é–“èªçŸ¥å·®ç•°ï¼Œæ‰€ä»¥ä½¿ç”¨ç‰©ä»¶é™åˆ¶èªè¨€åš´è¬¹çš„æè¿° UML é¡åˆ¥åœ–ä¸­æœ‰é—œç³»çµ±è¦æ ¼çš„æ‰€æœ‰è³‡è¨Šï¼Œç‚º UML æ¨™æº–çš„æ“´å……æ©Ÿåˆ¶ã€‚ ç‰©ä»¶é™åˆ¶èªè¨€ä½¿ç”¨ä¸‰ç¨®é™åˆ¶å¼(constraint)ä¾†æè¿°é¡åˆ¥çš„è¡Œç‚º: Class invariant(é¡åˆ¥æ†å®šæ¢ä»¶): a constraint that must alwaysbe met by all instances of the class. é‡å°ä¸€å€‹é¡åˆ¥è€Œè¨€ï¼Œæ­¤é¡åˆ¥çš„ä»»ä½•ç‰©ä»¶åœ¨æ•´å€‹ç”Ÿå‘½é€±æœŸçš†é ˆæ»¿è¶³è‡ªèº«å®šç¾©çš„æ†å®šæ¢ä»¶ Method pre-condition(å‡½å¼å‰ç½®æ¢ä»¶): a constraint that must always be true beforethe execution of the operation. é‡å°ä¸€å€‹å‡½å¼è€Œè¨€ï¼Œåœ¨æ­¤å‡½å¼è¢«å‘¼å«ä¹‹å‰é ˆæ»¿è¶³å‰ç½®æ¢ä»¶ï¼Œæ‰èƒ½ç¢ºä¿å‹•ä½œæ­£ç¢º Method post-condition(å‡½å¼å¾Œç½®æ¢ä»¶): a constraint that must always be true afterthe execution of the operation. é‡å°ä¸€å€‹å‡½å¼è€Œè¨€ï¼Œè‹¥åœ¨æ­¤å‡½å¼è¢«å‘¼å«ä¹‹å‰æ»¿è¶³å‰ç½®æ¢ä»¶ï¼Œå‰‡æ­¤å‡½å¼åœ¨è¢«å‘¼å«å¾Œï¼Œä¸€å®šæ»¿è¶³å¾Œç½®æ¢ä»¶ Other constraints(å…¶ä»–é™åˆ¶å¼) åœ¨ OCL2 ä¹‹å¾Œé‚„æœ‰å…¶ä»–çš„é™åˆ¶å¼åŠ å…¥å¦‚: Derive, Init, Let, Def, Package ä¾‹å¦‚: ä¸€å€‹æ ¡åœ’å€Ÿæ›¸ç³»çµ±ï¼Œé‚£éº¼ Class invariant å¿…é ˆç‚º Studentï¼Œå› ç‚ºæ ¡å¤–äººå£«ä¸èƒ½å€Ÿé–±ï¼Œ è€Œé‚„æ›¸æ™‚ Pre-condition å¿…é ˆç‚ºè‡³å°‘è¦æœ‰é‚£æœ¬è¦é‚„çš„æ›¸ï¼ŒPost-condition å‰‡å¿…é ˆæ²’æœ‰å·²ç¶“é‚„å›å»çš„æ›¸ã€‚ 2.2.2 Constraint Context and Self Every OCL expression is bound to a specific context. The context is often the element (classor method) that the constraint is attached to. The context may be denoted within the expression using the keyword â€˜selfâ€™. â€˜selfâ€™ is implicit in all OCL expressions. Similar to â€˜thisâ€™ in Java. ä¾‹å¦‚: ä»¥ä¸‹çš„ OCLï¼Œcontext Person å®£å‘Šäº†é€™å€‹ Constraint æ˜¯å±¬æ–¼ Person é€™å€‹ Classï¼Œè€Œ self å‰‡å°ˆæŒ‡é€™å€‹ Person çš„ attribute context Person inv: self.age &gt;= 0 2.2.3 Notation OCL å¯ä»¥å–®ç¨å¯«åœ¨ä¸€å€‹æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥å¯«åœ¨ UML çš„ Class diagram è£¡é¢ï¼Œé€™äº›è¡¨ç¤ºæ–¹æ³•éƒ½æ˜¯ç›¸åŒçš„ 2.2.4 Elements of an OCL Expression In an OCL expression these elements may be used: basic types: String, Boolean, Integer, Real. classifiers from the UML model and their features attributes, and class attributes query operations, and class query operations (i.e., those operations that do not have side effects) associations from the UML model Including Rolenames at either end of an association OCL åŒæ¨£æœ‰å‹åˆ¥çš„æ¦‚å¿µï¼Œä¸¦ä¸”å¯ä»¥ä½¿ç”¨ UML çš„ Class diagram ä¸­çš„ Attributeï¼ŒOperationï¼ŒAssociation ç­‰ç­‰ Basic types ä»¥ä¸‹è¡¨ç¤ºäº† OCL çš„åŸºæœ¬å‹åˆ¥ï¼Œå¯ä»¥ä½¿ç”¨åœ¨ OCL çš„è¡¨é”å¼ context Airline inv: name.toLower = 'klm' context Passenger inv: age &gt;= ((9.6 -3.5)* 3.1).floor implies mature = true é€™è£¡è¡¨ç¾å‡ºäº† name.toLower å¿…é ˆç‚º Stringï¼Œè€Œ age å‰‡ç‚º floatï¼Œmature å‰‡ç‚º boolean Attributes OCL ä¸­æœ‰å°ˆæŒ‡ Object å¯¦ä¾‹çš„ Attributeï¼Œä¹Ÿæœ‰å°ˆæŒ‡ Class çš„ Attribute Class attribute æœƒåœ¨æ‰€æœ‰ Object å¯¦ä¾‹ä¸­å…±äº« Object attribute å‰‡æ˜¯æ¯å€‹ Object å¯¦ä¾‹éƒ½æœ‰è‡ªå·±çš„ Attribute ä»¥ä¸‹æ˜¯ä¸€å€‹ä¾‹å­: -- Object attribute context Flight inv: self.maxNrPassengers&lt;= 1000 -- Class attribute context Passenger inv: age &gt;= Passenger.minAge é€™è£¡çš„ maxNrPassengers ç‚ºå°ˆæŒ‡ Flight Object çš„ Attributeï¼Œè€Œ age å‰‡ç‚ºæ‰€æœ‰ Passenger Class çš„ Attribute The @Pre Keyword The @pre keyword indicates the value of an attribute at the start of the execution of the operation The keyword must be postfixed to the name of the item concernedsize = size@pre + 1 ä¾‹å¦‚ size = size@pre + 1: size@pre è¡¨ç¤ºåœ¨åŸ·è¡Œé€™å€‹ Operation å‰çš„ size size è¡¨ç¤ºåœ¨åŸ·è¡Œé€™å€‹ Operation å¾Œçš„ size Example: ä¾‹å¦‚ä¸€å€‹ Triangle çš„å®Œæ•´ OCL å¯èƒ½æœƒé¡ä¼¼ä»¥ä¸‹ï¼Œå…¶ä¸­åŒ…å«äº†: Class invariant: ä¸‰è§’å½¢çš„ä¸‰é‚Šé•·å¿…é ˆç¬¦åˆä¸‰è§’ä¸ç­‰å¼ Constructor(int sa, int sb, int sc): Triangle çš„å»ºæ§‹å¼ Pre-condition: è¼¸å…¥å€¼å¿…é ˆç¬¦åˆä¸‰è§’ä¸ç­‰å¼ Post-condition: å»ºæ§‹å¾Œçš„ a, b, c æ‡‰è©²ç­‰æ–¼è¼¸å…¥çš„ sa, sb, sc Method: category(): ç”¨ä¾†åˆ¤æ–·ä¸‰è§’å½¢çš„é¡å‹ Post-condition: å›å‚³å€¼æ‡‰è©²ç‚º Equilateral, Isosceles, Scalene context Triangle inv: a + b &gt; c and a + c &gt; b and b + c &gt; a context Triangle::Triangle(int sa, int sb, int sc) pre IllegealArgException: sa + sb &gt; sc and sa + sc &gt; sb and sb + sc &gt; sa post: a = sa and b = sb and c = sc context Triangle::category(): String post: result= if a@pre = b@pre then ifa@pre = c@pre then 'Equilateral' else 'Isosceles' endif else if a@pre = c@pre then 'Isosceles' else if b@pre = c@pre then'Isosceles' else 'Scalene' endif endif endif 3. Collection in OCL OCL ä¸­æœ‰å·²ç¶“å®šç¾©å¥½çš„é—œæ–¼ Collection çš„æ“ä½œï¼Œèªæ³•ä¸Šä½¿ç”¨: collection -&gt; operation ä¾†è¡¨ç¤ºå° Collection çš„æ“ä½œ 3.1 Four Subtypes of Collection é€™è£¡æœ‰å››ç¨®å‹æ…‹çš„ Collection å¯ä»¥å®£å‘Š: Set: arrivingFlights(from the context Airport) Non ordered, unique elements OrderedSet: passengers(from the context Flight) Ordered, unique elements Bag: arrivingFlights.duration (from the context Airport) Non ordered, non unique elements Sequence: passengers.age (from the context Flight) Ordered, non unique elements Basic Collection Operations Boolean isEmpty(): å¦‚æœ Collection ç‚ºç©ºå‰‡å›å‚³ True notEmpty(): å¦‚æœ Collection ä¸ç‚ºç©ºå‰‡å›å‚³ True includes(object): å¦‚æœ Collection ä¸­åŒ…å« object å‰‡å›å‚³ True excludes(object): å¦‚æœ Collection ä¸­ä¸åŒ…å« object å‰‡å›å‚³ True includesAll(Collection): å¦‚æœ Collection ä¸­åŒ…å«æ‰€æœ‰ Collection ä¸­çš„å…ƒç´ å‰‡å›å‚³ True excludesAll(Collection): å¦‚æœ Collection ä¸­ä¸åŒ…å«æ‰€æœ‰ Collection ä¸­çš„å…ƒç´ å‰‡å›å‚³ True Integer size(): å›å‚³ Collection çš„å¤§å° count(object): å›å‚³ Collection ä¸­ç¬¦åˆæ¢ä»¶çš„å…ƒç´ å€‹æ•¸ sum(): å›å‚³ Collection ä¸­æ‰€æœ‰å…ƒç´ çš„ç¸½å’Œ Coolection including(object): å›å‚³ä¸€å€‹æ–°çš„ Collectionï¼ŒåŒ…å«äº† object excluding(object): å›å‚³ä¸€å€‹æ–°çš„ Collectionï¼Œç§»é™¤äº† object union(Collection): å›å‚³ä¸€å€‹æ–°çš„ Collectionï¼ŒåŒ…å«äº†åŸæœ¬çš„ Collection å’Œå¦ä¸€å€‹ Collection intersection(Collection): å›å‚³ä¸€å€‹æ–°çš„ Collectionï¼ŒåŒ…å«äº†åŸæœ¬çš„ Collection å’Œå¦ä¸€å€‹ Collection çš„äº¤é›† -(Collection): å›å‚³ä¸€å€‹æ–°çš„ Collectionï¼Œå¾ä¸€å€‹ Collection ä¸­ç§»é™¤å¦ä¸€å€‹ Collection çš„å…ƒç´  symmetricDifference(Collection): å›å‚³ä¸€å€‹æ–°çš„ Collectionï¼ŒåŒ…å«äº†åŸæœ¬çš„ Collection å’Œå¦ä¸€å€‹ Collection çš„å·®é›† Operations for Ordered Collection first(): å›å‚³ç¬¬ä¸€å€‹å…ƒç´  last(): å›å‚³æœ€å¾Œä¸€å€‹å…ƒç´  at(index): å›å‚³ index çš„å…ƒç´  indexOf(object): å›å‚³ object åœ¨ Collection ä¸­çš„ index insertAt(index, object): å°‡ object æ’å…¥åˆ° index çš„ä½ç½® append(object): å°‡ object æ’å…¥åˆ°æœ€å¾Œä¸€å€‹ä½ç½® prepend(object): å°‡ object æ’å…¥åˆ°ç¬¬ä¸€å€‹ä½ç½® subSequence(lower, upper): è¿”å›ä¸€å€‹åŒ…å«å¾è¼ƒä½ index åˆ°è¼ƒé«˜ index çš„å…ƒç´ çš„æ–° Sequence subOrderedSet(lower, upper): è¿”å›ä¸€å€‹åŒ…å«å¾è¼ƒä½ index åˆ°è¼ƒé«˜ index çš„å…ƒç´ çš„æ–° OrderedSet Loop Collection Operations NOTE Last edit 11-20-2023 00:11"
  },"/jekyll/2023-08-06-gdb_introduction.html": {
    "title": "Note | GNU Debugger Quick Notes",
    "keywords": "software tool Jekyll",
    "url": "/jekyll/2023-08-06-gdb_introduction.html",
    "body": "è¨˜éŒ„å¦‚ä½•ä½¿ç”¨ GDB é€²è¡Œé–‹ç™¼èˆ‡é™¤éŒ¯ï¼Œä»¥å‰éƒ½æ˜¯ç”¨ç›´è¦ºã€æ¸¬è©¦çš„æ–¹å¼ä¾†é€²è¡Œé™¤éŒ¯ï¼Œä¹Ÿå¾ˆå°‘ç”¨ debug mode ä¸æ˜¯ä¸€ä»¶å¥½äº‹ä¹Ÿå¾ˆæ²’æ•ˆç‡ï¼Œ è—‰æ­¤å»ºç«‹ Debug çš„å¥½ç¿’æ…£ã€‚ã€Œå¯¦éš›ä¸Šåœ¨æˆ‘è·æ¶¯ä¸­ 95% çš„ Bug éƒ½èƒ½é€é debug mode è§£æ‰ã€ï¼PTTé„‰æ°‘ Reference: GDB: The GNU Project Debugger, GDB User Manual jasonblog: é€šé GDB å­¸ç¿’ C èªè¨€ Jserv: ä½ æ‰€ä¸çŸ¥é“çš„ C èªè¨€: é–‹ç™¼å·¥å…·å’Œè¦æ ¼æ¨™æº– 1. GNU Debugger(GDB) Introduction GDB æ˜¯ GUN ç³»çµ±ä¸‹çš„æ¨™æº–é™¤éŒ¯å·¥å…·ï¼Œä½¿æˆ‘å€‘èƒ½æŸ¥çœ‹ç¨‹å¼åœ¨é‹è¡Œä¸­å…§éƒ¨ç™¼ç”Ÿäº†ä»€éº¼ï¼Œæˆ–æ˜¯å´©æ½°æ™‚æ­£åœ¨åšä»€éº¼ã€‚ æ­¤å¤– GDB ç¶“éç§»æ”œéœ€æ±‚çš„èª¿ä¿®èˆ‡é‡æ–°ç·¨è­¯ï¼Œç¾åœ¨è¨±å¤šçš„ UNIX Like ç³»çµ±ä¸Šéƒ½å¯ä»¥ä½¿ç”¨ GDBã€‚ GDB æœ€ä¸»è¦çš„å››é …åŠŸèƒ½æœ‰: Start your program, specifying anything that might affect its behavior. Make your program stop on specified conditions. Examine what has happened, when your program has stopped. Change things in your program, so you can experiment with correcting the effects of one bug and go on to learn about another. GDB ç›®å‰æ‰€èƒ½æ”¯æ´çš„èªè¨€: Ada Assembly C C++ D Fortran Go Objective-C OpenCL Modula-2 Pascal Rust 2. Using GDB to development 2.1 Debuging Program 2.2 Setting Breakpoints 2.3 Check status ã€Œä¸€æ—¦ä½ å·²ç¶“ç¿’æ…£æ–¼åœ¨ REPL ç’°å¢ƒä¸‹é€²è¡Œæ¢ç´¢æ€§çš„ç·¨ç¨‹ï¼Œå¿…é ˆé€²è¡Œã€Œç·¨å¯«-ç·¨è­¯-é‹è¡Œã€é€™æ¨£å¾ªç’°å¯¦åœ¨æœ‰é»ä»¤äººç”Ÿå­ã€‚ã€â€”jasonblog: é€šé GDB å­¸ç¿’ C èªè¨€ REPL(Read-Eval-Print Loop) ç’°å¢ƒå¯ä»¥è®“æˆ‘å€‘æ–¹ä¾¿çš„äº†è§£ç•¶ä¸‹åœ¨åšä»€éº¼ï¼Œå¦‚æœé€éé¡ä¼¼ REPL çš„æ–¹å¼ä¾†é€²è¡Œå°éœ€è¦ç·¨è­¯å¾Œé‹è¡Œçš„ç¨‹å¼é€²è¡Œé–‹ç™¼ã€ è¿½è¹¤ä»£ç¢¼ã€é™¤éŒ¯éƒ½éå¸¸æœ‰å¹«åŠ©ã€‚ 2.1 Debuging Program ä½¿ç”¨ GDB å°±éœ€è¦ debugging information çµ¦ GDB ä½¿ç”¨ï¼Œé€™è£¡ gcc è¦å¸¶å…¥åƒæ•¸ -gï¼Œgcc Option for Debuggingï¼Œ ç„¶å¾Œå°±å¯ä»¥å•Ÿå‹• gdb é€²è¡Œ debugï¼Œä¹‹å¾Œè¼¸å…¥ run æŒ‡ä»¤å°±å¯ä»¥é‹è¡Œç¨‹å¼ã€‚å¦‚æœç¨‹å¼éœ€è¦å¸¶å…¥åƒæ•¸çš„è©±ï¼Œ å°±ç›´æ¥åœ¨ run å¾Œé¢åŠ å…¥åƒæ•¸å°±å¥½ã€‚ -g Produce debugging information in the operating systemâ€™s native format (stabs, COFF, XCOFF, or DWARF). GDB can work with this debugging information. gcc -g main.c -o main gdb main # Reading symbols from main... (gdb) run # Program output. (gdb) run ${argv} # Program output. å¦‚æœæƒ³å°å·²ç¶“é‹è¡Œä¸­çš„ç¨‹å¼é€²è¡Œ Debug å°±è¦ä½¿ç”¨ attachï¼Œä¸¦ä¸”è¦çŸ¥é“è©² Process pidï¼Œ ä½†æ³¨æ„å°é‹è¡Œä¸­çš„ç¨‹å¼é€²è¡Œ Debug æœ‰å¯èƒ½å¹²æ“¾æ­£åœ¨é‹è¡Œçš„ç¨‹å¼ï¼Œæœ‰æ›´å¤šçš„ç´°ç¯€å¯ä»¥æŸ¥çœ‹ Debugging an Already-running Processã€‚ ps -ef | grep ${program_name} gbd ${pid} 2.2 Setting Breakpoints ä½¿ç”¨ info breakpoints å¯ä»¥æŸ¥çœ‹å·²ç¶“è¨­ç½®çš„ä¸­æ–·é»ï¼Œèˆ‡ä¸­æ–·é»çš„ Type, Address, Whatã€‚ä¸­æ–·é»æœ‰å¤šç¨®å½¢å¼ï¼Œ é€™è£¡ä¸»è¦è¬›å¹¾ç¨®å¸¸ç”¨çš„ä¸­æ–·é»ï¼Œæ›´å¤šå…§å®¹å¯ä»¥çœ‹ Setting Breakpoints: Breakpoint and Continue ä½¿ç”¨ break æˆ– b è¨­ç½®ï¼Œå¯ä»¥è¨­ç½®åœ¨ç›®æ¨™çš„è¡Œæ•¸æˆ–æ˜¯å‡½æ•¸åç¨±ï¼Œ ç•¶ç„¶å¦‚æœé‡åˆ°æ–·é»å¾Œæƒ³è¦ç¹¼çºŒç¨‹å¼ï¼Œä½¿ç”¨ continue å°±å¯ä»¥äº†: # set breakpoint at line 23 (gdb) break main.c:23 # set breakpoint at function main (gdb) break main Breakpoint with condition ä¹Ÿå¯ä»¥è¨­å®šç•¶æ¢ä»¶å‡ºç¾æ™‚æ‰æœƒä¸­æ–·ï¼Œä¾‹å¦‚æ‡·ç–‘æ˜¯ç¨‹å¼ä¸­å‡ºç¾éæœŸæœ›çš„å€¼ï¼Œå°±å¯ä»¥åœ¨é€™è£¡è¨­ç½®æ–·é»è§€å¯Ÿã€‚ä¸¦ä¸”ä¹Ÿå¯ä»¥é€é condition ä¿®æ”¹æ–·é»çš„æ¢ä»¶ã€‚ (gdb) break test.c:23 if b==0 # if this break point number is 1, change condition. (gdb) condition 1 b==1 Breakpoint with rule ä¾ç…§è¦å‰‡ä¾†è¨­å®šæ–·é»ï¼Œä¾‹å¦‚å‡½æ•¸åç¨±ï¼Œæª”æ¡ˆï¼Œç­‰ç­‰â€¦ # break all function (gdb) rbreak . # break all prefix is printNum* function (gdb) rbreak printNum* # break all function in test.c (gdb) rbreak test.c:. # break all function in test and prefix is print (gdb) rbreak test.c:^print Skip breakpoints multiple times æˆ‘å€‘ä¹Ÿå¯ä»¥è¨­ç½®è·³éæŸçš„æ–·é»å¹¾æ¬¡ï¼Œä¾‹å¦‚ä¸€å€‹å‡½æ•¸å‰ 10 æ¬¡éƒ½æ²’å‡ºç¾å•é¡Œè¦è·³éå‰ 30 æ¬¡çš„ä¸­æ®µï¼Œä¹‹å¾Œå¯ä»¥é€é info breakpoints çœ‹åˆ°è¨­ç½®ã€‚ (gbd) ignore 1 30 Watchpoint è§€å¯Ÿé»æ˜¯è¨­ç½®ç•¶æŸå€‹è®Šæ•¸æˆ–é¡å‹ç”¢ç”Ÿè®ŠåŒ–æ™‚é€²è¡Œè§€å¯Ÿï¼Œæœ‰ wathc, rwatch, awatchï¼Œ # break if a changes (gbd) watch a # break when a is read (gbd) rwatch a # break when a is write (gbd) awatch a Clean and disable/enable breakpoint Disable/Enable # disable all point (gbd) disable (gbd) disable ${break_num} # enable all point (gbd) enable (gbd) enable ${break_num} (gbd) enable delete ${break_num} Clear/Delete # clean all point clear clear ${function_name} clear ${file_name}:${function_name} clear ${line} clear ${file_name}:${line} # delete all point delete delete ${break_num} 2.3 Check status åœ¨ GDB ä¸­æœ‰å¤šç¨®æŸ¥çœ‹è®Šæ•¸ã€è¨˜æ†¶é«”å€å¡Šã€è¨˜æ†¶é«”å…§å®¹çš„æ–¹æ³•ï¼Œé€™è£¡æˆ‘å€‘å¯ä»¥ä½¿ç”¨ print å°å‡ºè®Šæ•¸çš„å…§å®¹ã€‚ (gdb) print 1 + 1 # $1 = 2 # $1 is a temp variable, only live in this debug session. ä¾‹å¦‚å¦‚æœæœ‰ä»¥ä¸‹ç¨‹å¼ï¼Œç„¶å¾Œå»è¨­ç½®ä¸­æ–·é»è§€å¯Ÿè®Šæ•¸ã€‚ int main() { int x = 10; return 0; } (gdb) break main (gdb) run (gdb) print x # $1 = 0 (gdb) next (gdb) print x # $2 = 10 (gdb) set x = 20 (gdb) print x # $3 = 20 æŸ¥çœ‹è®Šæ•¸åœ¨è¨˜æ†¶é«”çš„åœ°å€ï¼Œå€å¡Šå¤§å°ï¼Œè¨˜æ†¶é«”å…§å®¹ï¼Œåœ¨ GDB ä¸­ä¸€å€‹æ•¸å­—çš„ä½ä½å…ƒåœ¨å‰é«˜ä½å…ƒåœ¨å¾Œï¼Œæ‰€ä»¥è¦å¾å·¦å¾€å³è®€ï¼Œ x æ˜¯å¾ä¸€å€‹ä½ç½®é–‹å§‹è®€å– Memoryï¼Œ4b ä»£è¡¨ 4 byteã€‚ (gdb) print &amp;x # $4 = (int *) 0x7fffffffe37c (gdb) print sizeof(x) # $5 = 4 (gdb) print sizeof(double) # $6 = 8 æŸ¥çœ‹è¨˜æ†¶é«”çš„å…§å®¹ï¼Œæ ¼å¼ç‚º x/[n][f][u] addrï¼Œå…¶ä¸­ n ç‚ºé¡¯ç¤ºçš„å–®å…ƒæ•¸ï¼Œf æ˜¯è¦é¡¯ç¤ºçš„æ ¼å¼ï¼Œu æ˜¯å–®å…ƒé•·åº¦ã€‚ (gdb) x/4xb &amp;x # 0x7fffffffe37c: 0x6f 0x00 0x00 0x00 (gdb) set x = 0x12345678 (gdb) x/4xb &amp;x # 0x7fffffffe37c: 0x78 0x56 0x34 0x12 (gdb) x/4tb &amp;x # 0x7fffffffe37c: 01111000 01010110 00110100 00010010 å¯ä»¥ç”¨ ptype ä¾†æª¢æŸ¥çµ¦å®šè®Šæ•¸æˆ–é¡å‹çš„è©³ç´°é¡å‹å®šç¾©ã€‚ (gdb) ptype x # type = int (gdb) ptype &amp;x # type = int * (gdb) ptype main # type = int (void) Note ä»¥ä¸Šå¤§æ¦‚å°±æ˜¯å¸¸æœƒç”¨åˆ°çš„ä¸»è¦æŒ‡ä»¤ï¼Œé‚„æœ‰æ›´å¤šç´°ç¯€å¯ä»¥çœ‹ GDB æ‰‹å†Šï¼ŒGDB User Manualã€‚"
  },"/jekyll/2023-08-05-linux_kernel_complie.html": {
    "title": "OS | Linux Kernel Compilation",
    "keywords": "OS linux Jekyll",
    "url": "/jekyll/2023-08-05-linux_kernel_complie.html",
    "body": "è¨˜éŒ„ä¸€ä¸‹å¦‚ä½•ç·¨è­¯èˆ‡æ›´æ› Linux kernel ç‰ˆæœ¬ï¼Œä»¥ç”¨ä¾†é€²è¡Œé–‹ç™¼æ¸¬è©¦ Linux kernel moduleã€‚ Reference: Jserv: Linux æ ¸å¿ƒæ¨¡çµ„é‹ä½œåŸç†, é³¥å“¥ç§æˆ¿èœ: Linux æ ¸å¿ƒç·¨è­¯èˆ‡ç®¡ç† å¦‚æœæƒ³è¦é–‹ç™¼ Linux kernel moduleï¼Œå°±å¯èƒ½æœƒç¢°åˆ°è¦æ›´æ–° Kernel çš„æƒ…æ³ï¼Œé€™è£¡ç´€éŒ„ä¸€ä¸‹å¦‚ä½•é€²è¡Œ Kernel çš„ç·¨è­¯èˆ‡å®‰è£ã€‚ 1.å–å¾— Source Code æœ‰ä»¥ä¸‹ä¸‰ç¨®æ–¹æ³•å¯ä»¥ä½¿ç”¨: ä½¿ç”¨ Distribution æä¾›çš„æ ¸å¿ƒåŸå§‹ç¢¼æª”æ¡ˆã€‚ å–å¾— www.kernel.org ä¸Šæ‰€æä¾›çš„æ ¸å¿ƒåŸå§‹ç¢¼ã€‚ ä¿ç•™åŸæœ¬è¨­å®šï¼šåˆ©ç”¨ Patch å‡ç´šæ ¸å¿ƒåŸå§‹ç¢¼ã€‚ å…¶ä¸­ä½¿ç”¨ Patch çš„è©±éœ€è¦å°‡é–“éš”ä¸­çš„æ¯å€‹ patch éƒ½é€²è¡Œ patchï¼Œæƒ³è¦ç”± 3.10.85 å‡ç´šåˆ° 3.10.89 çš„è©±ï¼Œ é‚£éº¼å°±å¾—è¦ä¸‹è¼‰ patch-3.10.86, patch-3.10.87, patch-3.10.88, patch-3.10.89 ç­‰æª”æ¡ˆã€‚ é€™è£¡ä½¿ç”¨ www.kernel.org æ‰€æä¾›çš„åŸå§‹ç¢¼ï¼Œå…¶ä¸­: mainline: æœ€æ–°çš„ã€ç©æ¥µé–‹ç™¼çš„ç‰ˆæœ¬ï¼Œå› æ­¤æœ‰è¼ƒé«˜çš„è®ŠåŒ–èˆ‡æ›´æ–°é »ç‡ã€‚ stable: ç©©å®šç‰ˆæœ¬ï¼Œé€™äº›ç‰ˆæœ¬æœƒåŒ…å« Mainline çš„ä¸€äº›ä¿®å¾©å’Œæ”¹é€²ï¼Œä½†ä¸æ˜¯å…¨éƒ¨éƒ½æœƒæ”¶å…¥ã€‚ longterm: é•·æœŸæ”¯æŒçš„ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ç”Ÿç”¢ç’°å¢ƒå…§é•·æ™‚é–“ç©©å®šé‹è¡Œã€‚ ä¸‹è¼‰å¾Œè§£å£“ç¸®æ”¾ç½®ï¼Œé€™è£¡é¸æ“‡æ”¾åœ¨ /usr/src: tar -Jxvf ${linux_kernel} -C /usr/src/ 2.å‰è™•ç†èˆ‡é…ç½®æ ¸å¿ƒåŠŸèƒ½ é–‹å§‹é…ç½®å‰å…ˆè¨˜å¾—åˆªé™¤æª”æ¡ˆä¸­å¯èƒ½æœ‰çš„ Object file(.o) å’Œ Configï¼Œmrproper æœƒæ¸…é™¤éå»æ›¾ç¶“é…ç½®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ã€‚ cd /usr/src/${linux_kernel} make mrproper make clean è©³ç´°é…ç½®èˆ‡èªªæ˜çœ‹ é³¥å“¥ç§æˆ¿èœ: Linux æ ¸å¿ƒç·¨è­¯èˆ‡ç®¡ç†ï¼Œé€™è£¡ç›´æ¥è¤‡è£½åŸä¾†çš„ Kernel configï¼Œé€™å€‹ .config å°±æ˜¯æ ¸å¿ƒçš„é…ç½®æª”æ¡ˆã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨ make menuconfig ä¾†é€²å…¥æ–‡å­—åœ–å½¢ä»‹é¢ä¾†é€²è¡Œé…ç½®ï¼Œä½†æ˜¯æˆ‘å€‘é€™è£¡ä½¿ç”¨åŸæœ¬çš„ Kernel configã€‚ cp /boot/config-${old_linux_kernel} /usr/src/${linux_kernel} 3.ç·¨è­¯æ ¸å¿ƒæª”æ¡ˆ é€™è£¡ä½¿ç”¨å¤šæ ¸å¿ƒæ•¸å»é€²è¡Œç·¨è­¯ï¼Œå› ç‚ºç·¨è­¯ Kernel æ˜¯ä¸€å€‹å¾ˆé•·æ™‚é–“çš„å·¥ä½œï¼Œé€™å¹¾å€‹æ ¸å¿ƒå¯ä»¥åŒæ™‚é€²è¡Œç·¨è­¯çš„è¡Œç‚ºï¼Œé€™æ¨£åœ¨ç·¨è­¯æ™‚é€Ÿåº¦æœƒæ¯”è¼ƒå¿«ã€‚ æœ€å¾Œè£½ä½œå‡ºä¾†çš„è³‡æ–™æ˜¯è¢«æ”¾ç½®åœ¨ /usr/src/${linux_kernel} é€™å€‹ç›®éŒ„ä¸‹ï¼Œä¹‹å¾Œæ‰æœƒé€²è¡Œå®‰è£ã€‚ make -j ${core_number} clean bzImage modules bzImage: ç·¨è­¯æ ¸å¿ƒ modules: ç·¨è­¯æ¨¡çµ„ Tip: åœ¨é€™ä¸€æ­¥æˆ‘é‡åˆ°å¹¾æ¬¡ç·¨è­¯éŒ¯èª¤ï¼Œè¦å›é ­å»ä¿®æ”¹ .config ç­‰è¨­å®šã€‚è¨˜éŒ„ä¸€ä¸‹æœ€å¾Œçš„è§£æ±ºæ–¹æ³•: ä¸»è¦æ˜¯ä¸€äº›ç³»çµ±ç°½ç« æª¢æŸ¥éœ€è¦è§£æ±ºï¼Œåƒè€ƒä¸­æœ‰æ­£ç¢ºé…ç½®çš„æ–¹æ³•ï¼Œé‚„æœ‰ç·¨è­¯æ™‚çš„ä¾è³´é …æ²’æœ‰å®‰è£ï¼Œé‡åˆ°å°±å®‰è£å°±å¥½ã€‚ 4.å¯¦éš›å®‰è£æ ¸å¿ƒ 4.1 å®‰è£æ¨¡çµ„èˆ‡æ ¸å¿ƒ é¦–å…ˆå®‰è£ modulesï¼Œæœƒæ”¾ç½®åœ¨ /lib/modules/$(uname -r) ç›®éŒ„ä¸‹ï¼Œç›´æ¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å°±å¥½: make modules_install # check modules ll /lib/modules/ æ ¸å¿ƒå‰‡æœƒæ”¾ç½®åœ¨ /boot ä¸‹ï¼Œä¸¦ä¸”æª”åç‚º vmlinuz é–‹é ­ï¼Œé€™è£¡å¯ä»¥å»çœ‹ vmlinuz çš„æ­·å²ã€‚é€™è£¡é³¥å“¥æœ‰è¬›å¦‚ä½•é…ç½®å¤šå€‹å…§æ ¸æ¨¡å¡Šï¼Œ ä¸‹é¢æ˜¯ä¸é€²è¡Œé…ç½®å¤šæ¨¡å¡Šç›´æ¥å®‰è£çš„æ–¹æ³•: cp arch/x86/boot/bzImage /boot/vmlinuz-${linux_kernel_version} chmod a+x /boot/vmlinuz-${linux_kernel_version} # Backup config file cp .config /boot/config-${linux_kernel_version} cp System.map /boot/System.map-${linux_kernel_version} gzip -c Module.symvers &gt; /boot/symvers-${linux_kernel_version} restorecon -Rv /boot 4.2 ç·¨è¼¯é–‹æ©Ÿé¸å–® (grub) grub2-mkconfig æ˜¯ç”¨ä¾†ç”Ÿæˆ grub æ–‡ä»¶çš„ï¼Œå› ç‚ºé è¨­è¼ƒæ–°ç‰ˆæœ¬çš„ Kernel æœƒæ”¾åœ¨æœ€å‰é¢ä½œç‚ºé è¨­çš„é–‹æ©Ÿé¸å–®é …ç›®ï¼Œ æ‰€ä»¥é€™è£¡æ‡‰è©²æœƒçœ‹åˆ°å‰›å‰›å®‰è£çš„æ ¸å¿ƒæ”¾åœ¨ç¬¬ä¸€ä½å‡ºç¾æ‰å°ï¼Œå¦å‰‡ç­‰ç­‰å¯èƒ½æœƒç”¨èˆŠæ ¸å¿ƒé–‹æ©Ÿã€‚ # CentOS grub2-mkconfig -o /boot/grub2/grub.cfg # Ubuntu sudo update-grub # Generating grub configuration file ... # Found linux image: /boot/vmlinuz-${linux_kernel_version} # Found initrd image: /boot/initramfs-${linux_kernel_version} æœ€å¾Œå°±æ˜¯é‡æ–°é–‹æ©Ÿç„¶å¾ŒæŸ¥çœ‹ Kernel æ˜¯å¦æœ‰æˆåŠŸæ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨ uname -a æˆ– uname -rã€‚ Note Last edit 08-05-2023 22:20ï¼Œå¦‚æœä½¿ç”¨ VM ç·¨è­¯å‰å¤šé–‹æ ¸å¿ƒçµ¦æ©Ÿå™¨ï¼Œæˆ‘æ˜¯å–®æ ¸å¿ƒç·¨è­¯èŠ±äº†å¤§ç´„ä¸‰å°æ™‚ã€‚"
  },"/jekyll/2023-07-28-UML_structure_diagrams.html": {
    "title": "Note | UML Structure Diagrams Introduction",
    "keywords": "software software_development Jekyll",
    "url": "/jekyll/2023-07-28-UML_structure_diagrams.html",
    "body": "æœ¬ç¯‡ä¸»è¦ä»‹ç´¹ UML çš„åˆ†é¡ä¸­çš„çµæ§‹åœ–(Structure Diagrams) 1. Structure diagrams 1.1 Class diagram 1.2 Component diagram 1.3 Deployment diagram 1.4 Object diagram 1.5 Package diagram 1.6 Composite structure diagram 1.1 Class Diagram Class diagrams(é¡åœ–)æ˜¯ä½¿ç”¨æœ€å»£æ³›çš„ UML åœ–ï¼Œä»–æ˜¯æ‰€æœ‰ Object-Oriented Software Systems çš„åŸºç¤ã€‚ é€éé¡¯ç¤ºç³»çµ±çš„ Class(é¡)ã€Mthods(æ–¹æ³•)ã€Properties(å±¬æ€§)ä¾†æè¿°ç³»çµ±çš„éœæ…‹çµæ§‹ã€‚ å¾ä¸‹åœ–æˆ‘å€‘å¯ä»¥çœ‹å‡º: Abstract Class: çœ‹åˆ° Shape æ˜¯ä¸€å€‹ Abstract Class ä»–ä»¥æ–œé«”é¡¯ç¤ºã€‚ Class diagram relationships: Generalization: ç©ºå¿ƒç®­é ­ï¼ŒåŒæ™‚ Shape ä¹Ÿæ˜¯ä¸€å€‹ Superclassï¼ŒCircleã€Rectangleã€ Polygon éƒ½æ˜¯ç”± Shape æ‰€è¡ç”Ÿï¼Œä¹Ÿå°±æ˜¯èªª Circle æ˜¯ä¸€å€‹ Shapeï¼Œé€™æ˜¯ä¸€ç¨® generalization(ä¸€èˆ¬åŒ–)/inheritance(ç¹¼æ‰¿) çš„é—œä¿‚ã€‚ Association: Class é–“çš„é€£ç·šï¼ŒDialogBox å’Œ DataController ä¹‹é–“æœ‰ä¸€å€‹é—œè¯ã€‚ Aggregation: ç©ºå¿ƒè±å½¢ç®­é ­ï¼ŒShape å’Œ Window æ˜¯ä¸€ç¨®èšåˆé—œä¿‚ï¼ŒShape å¯ä»¥å­˜åœ¨è€Œä¸ä¾è³´ Windowsã€‚ Composition: å¯¦å¿ƒè±å½¢ç®­é ­ï¼ŒPoint æ˜¯ Circle æ˜¯ä¸€ç¨®çµ„åˆé—œä¿‚ï¼Œæ²’æœ‰ Circle å°±ä¸èƒ½å­˜åœ¨ Pointã€‚ Dependency: ç©ºå¿ƒç®­é ­ï¼ŒWindow ä¾è³´æ–¼ Eventï¼Œä½† Event ä¸ä¾è³´æ–¼ Windowã€‚ Attributes: Circle çš„å±¬æ€§æ˜¯ radiusã€center å¾Œé¢æ˜¯ä»–çš„å‹åˆ¥ï¼Œé€™æ˜¯ä¸€å€‹ Entity classã€‚ Methods: Circle çš„æ–¹æ³•æ˜¯ area()ã€circum()ã€setCenter()ã€setRadius()ã€‚ Parameter: Circle ä¸­çš„ area(in radius: flot) ä»£è¡¨åƒæ•¸æ˜¯ä¸€å€‹åç‚º radius å‹åˆ¥ç‚º float çš„å‚³å…¥åƒæ•¸ã€‚ Return: Circle ä¸­çš„ area(): doubleï¼Œä»£è¡¨è¿”å›ä¸€å€‹ double çš„å€¼ã€‚ Hidden: Rectangle çš„ Attributesï¼ŒMehtods æ˜¯éš±è—çš„ï¼Œåœ–ä¸­çš„å…¶ä»–ä¸€äº› Class ä¹Ÿéš±è—äº†ä»–å€‘çš„ Attributesï¼ŒMehtodsã€‚ 1.2 Component diagram Component diagram(å…ƒä»¶åœ–)æè¿°ä¸€å€‹è»Ÿé«”ç³»çµ±æ™‚ï¼Œå°‡è»Ÿé«”ç³»çµ±è£¡çš„å…ƒç´ çµ¦äºˆæ¨¡çµ„åŒ–(Modularity)ï¼Œå³æˆç‚ºä¸€å€‹å…ƒä»¶ã€‚å°‡å…ƒä»¶èˆ‡å…ƒä»¶é–“çš„é—œä¿‚åšæè¿°æ™‚ï¼Œ å°æ–¼è»Ÿé«”ç³»çµ±çš„é‹ä½œå¯ä»¥æ¯”æè¿°é¡åˆ¥é—œä¿‚æ›´åŠ å¾—æ¸…æ¥šã€‚ Component é€šå¸¸æ¯” Class æœ‰æ›´é«˜çš„æŠ½è±¡å±¤ç´šï¼Œå¯èƒ½ç”±ä¸€å€‹æˆ–å¤šå€‹ Class çµ„æˆï¼Œå¯èƒ½æ˜¯åŒ…ã€å¯åŸ·è¡Œæª”æ¡ˆã€è³‡æ–™åº«ç­‰ã€‚ æ¯å€‹å…ƒä»¶é€šå¸¸å°è£ç‰¹å®šçš„åŠŸèƒ½ä¸¦å…¬é–‹ä¸€å€‹æ˜ç¢ºå®šç¾©çš„ä»‹é¢ï¼Œå…ƒä»¶èˆ‡é¡æœ€å¤§çš„å·®åˆ¥åœ¨æ–¼å…ƒä»¶å¼·èª¿çš„æ˜¯ä»‹é¢çš„æºé€šã€‚ ä¸‹åœ–æ˜¯ä¸€å€‹ Composite Componentï¼Œä¹Ÿå°±æ˜¯å…ƒä»¶ä¸­åŒ…å«è‘—å…ƒä»¶=çš„ç¯„ä¾‹ï¼ŒComposite Commponent ä¸­çš„ä¸»è¦å…ƒç´ æœ‰: Component(å…ƒä»¶): ä»¥ä¸€å€‹é•·æ–¹å½¢æ‰€é¡¯ç¤ºï¼Œå³ä¸Šè§’ç¹ªè£½ä¸€å€‹ 1.x UML ç‰ˆæœ¬çš„å…ƒä»¶åœ–(éå¿…é ˆ)ã€‚ Provided interface(æä¾›æ¥å£): ä»¥ä¸€å€‹åœ“å½¢é¡¯ç¤ºï¼Œä»£è¡¨ç‚ºæä¾›çµ¦ Client ç«¯æ‰€ä½¿ç”¨çš„æ¥å£ã€‚ Request interface(æ‰€éœ€æ¥å£): ä»¥ä¸€å€‹åŠåœ“é¡¯ç¤ºï¼Œä»£è¡¨å…ƒä»¶æ‰€éœ€æ±‚çš„ä»‹é¢ã€‚ Port(ç«¯å£): ä»¥ä¸€å€‹æ­£æ–¹å½¢è¡¨ç¤ºï¼Œä»¥è¡¨ç¤ºå…ƒä»¶å…¬é–‹çš„ç«¯å£ã€‚ Relationship: Dependency: ç©ºå¿ƒç®­é ­ï¼Œè¡¨ç¤ºä¸€å€‹å…ƒä»¶ä¾è³´å…¶ä»–å…ƒä»¶æˆ–æ¥å£æ‰èƒ½å¯¦ç¾ã€‚ 1.3 Deployment diagram Deployment diagram(éƒ¨å±¬åœ–)æ˜¯é¡¯ç¤ºé‹è¡Œæ™‚è™•ç†ç¯€é»çš„é…ç½®ï¼Œç”¨æ–¼ç‰©ä»¶å°å‘ç³»çµ±çš„ç‰©ç†æ–¹é¢é€²è¡Œå»ºæ¨¡ï¼Œ é€šå¸¸ç”¨æ–¼å°ç³»çµ±çš„éœæ…‹éƒ¨ç½²è¦–åœ–(ç¡¬ä»¶æ‹“æ’²)é€²è¡Œå»ºæ¨¡ã€‚ æ‹“æ’²(Topology): åœ¨ç³»çµ±æ¶æ§‹ä¸­ç”¨æ–¼æè¿°ä¸åŒçµ„ä»¶æˆ–æ¨¡å¡Šä¹‹é–“çš„é—œä¿‚å’Œé€£æ¥æ–¹å¼ã€‚ èˆ‡ Component diagram(å…ƒè¦‹åœ–)çš„ä¸åŒé»åœ¨æ–¼ï¼Œéƒ¨å±¬åœ–ä¸»è¦ç”¨æ–¼å±•ç¤ºä¸€å€‹ç³»çµ±æˆ–è»Ÿé«”æ˜¯å¦‚ä½•è¢«éƒ¨ç½²åœ¨ä¸åŒçš„ç¡¬é«”å’Œé‹è¡Œç’°å¢ƒä¸­ï¼Œ ä»–è‘—é‡æ–¼ç³»çµ±çš„ç‰©ç†çµ„æˆã€ç¡¬é«”è³‡æºçš„é…ç½®ã€ç¯€é»ä¹‹é–“çš„é€šè¨Šé€šé“ã€‚ ä¸‹åœ–æ˜¯ä¸€å€‹éƒ¨ç½²åœ–çš„ç¯„ä¾‹ï¼Œæœ‰é€™äº›ä¸»è¦å…ƒç´ : Node: 3D çŸ©å½¢ï¼Œä»£è¡¨ä¸€å€‹ç¯€é»ï¼Œç„¡è«–æ˜¯ç¡¬é«”æˆ–æ˜¯è»Ÿé«”ã€‚ å¯ä»¥ä½¿ç”¨ &lt;&lt;stereotype&gt;&gt; ä¾†è¨»æ˜ç¯€é»ï¼Œä»¥å€åˆ†ç¯€é»çš„é¡å‹ã€‚ Node å…§å¯ä»¥åŒ…å«å¦ä¸€å€‹ Nodeã€‚ Association: Node é–“çš„é€£ç·šã€‚ å¯ä»¥ä½¿ç”¨ç©ºå¿ƒç®­é ­ä¾†ä»£è¡¨ä¹‹é–“çš„ä¾è³´æ€§ã€‚ TCP/IP Client / Server Example: 1.4 Object diagram Object Diagram(ç‰©ä»¶åœ–)ç”¨æ–¼å±•ç¤ºç³»çµ±æˆ–è»Ÿé«”åœ¨ç‰¹å®šæ™‚é–“é»å…§ç‰©ä»¶å¯¦ä¾‹(Object instance)ï¼Œé‚„æœ‰ç‰©ä»¶å½¼æ­¤é–“çš„é—œè¯ã€‚ å®ƒä¹Ÿè¢«ç¨±ä½œè¨˜æ†¶é«”çš„å¿«ç…§(memory snapshot)ã€‚ Object(ç‰©ä»¶): ç‰©ä»¶æ˜¯ç‰¹å®š Class çš„å¯¦ä¾‹ï¼Œç‰©ä»¶é¡¯ç¤ºçš„æ˜¯å¯¦ä¾‹èˆ‡å±¬æ€§ã€‚ é€šå¸¸ç‰©ä»¶åœ–ç”¨æ–¼é–‹ç™¼çš„å¾ŒæœŸéšæ®µï¼Œç”¨ä¾†å±•ç¤ºç‰¹å®šæ™‚é–“é»å…§çš„ç‰©ä»¶å¯¦ä¾‹èˆ‡ç›¸é—œçš„é—œä¿‚ï¼Œæœ‰åŠ©æ–¼ç†è§£ç³»çµ±åœ¨ç‰¹å®šæ™‚é–“å…§çš„ç‹€æ…‹ï¼Œ ç¢ºä¿ç‰©ä»¶é–“çš„é—œä¿‚ç¬¦åˆè¨­è¨ˆéœ€æ±‚ã€‚ ç•¶ Class diagram éå¸¸è¤‡é›œæ™‚ï¼ŒObject diagram å°æ–¼è§£é‡‹ç³»çµ±çš„ç´°ç¯€éƒ¨åˆ†å¾ˆæœ‰ç”¨ï¼Œ èªªæ˜ Object diagram çš„æœ€ä½³æ–¹å¼æ˜¯é€éç›¸æ‡‰çš„ Class diagram å°ç…§ç”¢ç”Ÿçš„ Object diagramã€‚ ä¸‹åœ–èªªæ˜äº†ä¸€å€‹å¤§å­¸ç³»æ‰€çš„å¯ä»¥æœ‰å¾ˆå¤šå…¶ä»–çš„å»¶ä¼¸ç³»æ‰€ï¼Œå°‡ Class diagram å¯¦ä¾‹åŒ–å¾Œçš„ Object diagram: ä¸€å€‹è¨‚å–®ç®¡ç†ç³»çµ±çš„ Class diagram èˆ‡å…¶ Object diagram: Object diagram ä¸»è¦çš„å…ƒç´ æœ‰ä»¥ä¸‹é€™äº›: Object: çŸ©å½¢æ–¹æ¡†ï¼Œæä¾›äº† Object Name : Classï¼Œä¸¦ä»¥ä¸‹åŠƒç·šè¨»è¨˜ã€‚ Anonymous Object: åŒ¿åç‰©ä»¶ï¼Œåƒ…ä½¿ç”¨ Method è€Œä¸å»ºç«‹å¯¦ä¾‹çš„ç‰©ä»¶ã€‚ Object attributes: èˆ‡ Class ç›¸ä¼¼ï¼Œä½† Object attributes å¿…é ˆåˆ†é…å…·é«”çš„ Valueã€‚ Links: Object ä¹‹é–“çš„é—œè¯ï¼Œå¯ä»¥ä½¿ç”¨ Class diagram ç›¸åŒçš„ç®­é ­ä¾†è¡¨ç¤ºé—œä¿‚ã€‚ 1.5 Package diagram Package diagram(å°è£åœ–)ç”¨æ–¼å»ºæ¨¡é«˜å±¤ç´šç³»çµ±å…ƒç´ ï¼ŒPackage ç”¨æ–¼çµ„ç¹”åŒ…å«åœ–è¡¨ã€æ–‡ä»¶å’Œå…¶ä»–é—œéµçš„å¤§å‹ç³»çµ±ã€‚ When to use Package diagram? Package diagram å¯ä»¥ç”¨ä¾†ç°¡åŒ–è¤‡é›œçš„ Class diagramï¼Œå¯ä»¥å°‡ Class åˆ†åˆ° Package ä¸­ã€‚ Package æ˜¯é‚è¼¯ä¸Šç›¸é—œçš„ UML å…ƒç´ çš„é›†åˆã€‚ Package è¢«æç¹ªç‚ºæ–‡ä»¶å¤¾ï¼Œå¯ä»¥åœ¨ä»»ä½• UML ä¸­ä½¿ç”¨ã€‚ ä¸€å€‹ Package diagram å…·æœ‰ä»¥ä¸‹å…ƒç´ ï¼Œä¸‹åœ–æ˜¯ä¸€å€‹è¨‚å–®å­ç³»çµ±çš„ç¯„ä¾‹: Subsystem: è¨»æ˜äº†é€™å€‹å­ç³»çµ±çš„åç¨±ã€‚ Package: ä¸€å€‹çŸ©å½¢ï¼Œå³ä¸Šè§’å¸¶æœ‰é¸é …å¡ã€‚Package name ä½æ–¼çŸ©å½¢å…§æˆ–é¸é …å¡ä¸Šã€‚ Concrete package: å…·æœ‰å¯¦ç¾åŠŸèƒ½çš„åŒ…ï¼Œå…¶ä¸­æœ‰å…·é«”çš„ç¨‹å¼ç¢¼ï¼Œå¯ä»¥è¢«åŸ·è¡Œã€ç·¨è­¯æˆ–éƒ¨ç½²ã€‚ Abstract package: æ²’æœ‰å¯¦éš›çš„ç¨‹å¼ç¢¼å¯¦ç¾ï¼Œé€šå¸¸æ˜¯ç‚ºäº†é‚è¼¯ä¸Šçš„åˆ†é¡ï¼Œç”¨æ–¼çµ„ç¹”å’Œåˆ†é¡åŒ…ã€‚ Dependency on external package: ä¸åœ¨ç³»çµ±å…§éƒ¨ç›´æ¥å¯¦ç¾æˆ–ç·¨å¯«çš„ä¾è³´åŒ…ã€‚ Dependency: ä»£è¡¨ Package ä¹‹é–“çš„ä¾è³´é—œä¿‚ã€‚ Example: å¦‚æœä¸€å€‹é¡æƒ³è¦åœ¨ä¸€å€‹ä¸åŒçš„åŒ…ä¸­ä½¿ç”¨ä¸€å€‹é¡ï¼Œå®ƒå°±å¿…é ˆç‚ºè©²åŒ…æä¾›ä¸€å€‹ä¾è³´ã€‚ Generalization: ä¸€å€‹åŒ…å¯ä»¥åŒ…å«å¤šå€‹å­åŒ…ï¼Œæ¯å€‹å­åŒ…éƒ½å¯ä»¥åŒ…å«ä¸€ç³»åˆ—å…ƒç´ ã€‚ 1.6 Composite structure diagram Composite structure diagram(çµ„åˆçµæ§‹åœ–)æ˜¯ UML 2.0 ä¸­æ·»åŠ çš„æ–°åœ–å½¢ï¼Œå…¶ä¸­åŒ…å« Class, Port, Packageã€‚ çµ„åˆçµæ§‹åœ–çš„ä½œç”¨èˆ‡ Class diagram é¡ä¼¼ï¼Œä½†æ˜¯å…è¨±æ›´è©³ç´°çš„æè¿°å¤šå€‹ Class çš„å…§éƒ¨çµæ§‹ä¸¦é¡¯ç¤ºä»–å€‘ä¹‹é–“çš„äº¤äº’ã€‚ Note Last edit 08-01-2023 00:13, Reference"
  },"/jekyll/2023-07-28-UML_behavior_diagrams.html": {
    "title": "Note | UML Behavior Diagrams Introduction (Unfinished)",
    "keywords": "software software_development Jekyll",
    "url": "/jekyll/2023-07-28-UML_behavior_diagrams.html",
    "body": "æœ¬ç¯‡ä¸»è¦ä»‹ç´¹ UML çš„åˆ†é¡ä¸­çš„è¡Œç‚ºåœ–(Behavior Diagrams)ï¼Œèˆ‡å…¶å­é›†äº¤äº’åœ–(Interaction diagrams)ã€‚ä»¥æ­¤ç‚ºåˆ†è³´å†ä¾ç…§å»£æ³›ä½¿ç”¨ç¨‹åº¦ä»‹ç´¹ã€‚ 1. Behavior diagrams 1.1 Activity diagram 1.2 Use case diagram 1.3 State diagram 1.1 Activity diagram Activity diagram(æ´»å‹•åœ–)æ˜¯ UML ä¸­ç¬¬äºŒè¢«å»£æ³›ä½¿ç”¨çš„åœ–å½¢ï¼Œç”¨æ–¼æè¿°ç³»çµ±çš„å‹•æ…‹æ–¹é¢ï¼Œæ´»å‹•åœ–æœ¬è³ªä¸Šæ˜¯æµç¨‹åœ–çš„é€²éšç‰ˆæœ¬ï¼Œ å®ƒå°å¾ä¸€å€‹æ´»å‹•åˆ°å¦ä¸€å€‹æ´»å‹•çš„æµç¨‹é€²è¡Œå»ºæ¨¡ã€‚ When to Use Activity diagram é€šéæª¢æŸ¥æ¥­å‹™å·¥ä½œæµç¨‹(Business workflows)ä¾†ç¢ºå®šå€™é¸ç”¨ä¾‹(Use case)ã€‚ ç¢ºå®š Use Case çš„å‰ç½®èˆ‡å¾Œç½®æ¢ä»¶(Context)ã€‚ å°æ–¼ Use Case ä¹‹é–“/å…§éƒ¨çš„ Workflows å»ºæ¨¡ã€‚ å°æ–¼ Object çš„è¤‡é›œæ“ä½œæµç¨‹é€²è¡Œå»ºæ¨¡ã€‚ ä½¿ç”¨ä¸åŒå±¤ç´šçš„æ´»å‹•åœ–å°è¤‡é›œçš„æ´»å‹•å»ºæ¨¡ã€‚ ä¸‹åœ–åˆ†åˆ¥è§£é‡‹ä¸€å€‹åŸºæœ¬çš„æ´»å‹•åœ–ï¼Œèˆ‡ä¸€å€‹è¨‚å–®æµç¨‹çš„ç¯„ä¾‹: Pre/Post-condition: Black circle: ä»£è¡¨è©² Workflow çš„é–‹å§‹(init node)ã€‚ Encircled black circle: ä»£è¡¨è©² Workflow çš„çµæŸ(final node)ã€‚ Stadia: ä»£è¡¨å‹•ä½œ(actions)ã€‚ Diamonds: ä»£è¡¨æ±ºç­–(decisions)ã€‚ Bars: ä»£è¡¨ä¸¦è¡Œ(Concurrent)æ´»å‹•çš„é–‹å§‹(split) æˆ–çµæŸ(join)ã€‚ 1.2 Use case diagram Use case diagram(ç”¨ä¾‹åœ–)æ˜¯ç¬¬å››ä½¿ç”¨å»£æ³›åº¦çš„åœ–å½¢ï¼Œè¡¨ç¤º Actor èˆ‡ç³»çµ±äº¤äº’çš„æœ€ç°¡è¡¨ç¤ºå½¢å¼ï¼Œå±•ç¾äº† Actor å’Œèˆ‡ä»–ç›¸é—œçš„ Use case ä¹‹é–“çš„é—œä¿‚ã€‚ ä¸‹åœ–æ˜¯ä¸€å€‹åŸºæœ¬çš„ Use case diagramï¼ŒUse case diagram ä¸»è¦ç”±ä»¥ä¸‹å…ƒç´ æ‰€çµ„æˆ: Actor: èˆ‡ç³»çµ±é€²è¡Œäº’å‹•çš„å„ç¨®åƒèˆ‡è€…ï¼Œå¯ä»¥æ˜¯ä½¿ç”¨è€…æˆ–å¤–éƒ¨å¯¦é«”ã€‚ Use case: ç³»çµ±å¦‚ä½•åæ‡‰å¤–ç•Œè«‹æ±‚çš„æè¿°ï¼Œæè¿°äº†ä¸€å€‹ç‰¹å®šçš„æ“ä½œæˆ–ä»»å‹™ã€‚ Associate: ä»¥è™›ç·šé€£æ¥ Actor èˆ‡ Use caseï¼Œè¡¨ç¤º Actor èˆ‡ Use caseä¹‹é–“çš„äº’å‹•ã€‚ include: åŒ…å«é—œä¿‚ï¼Œä½¿ç”¨è©²ç”¨ä¾‹æ™‚ä¸€å®šæœƒåŸ·è¡Œçš„ç›¸é—œç”¨ä¾‹ã€‚ extend: æ“´å±•é—œä¿‚ï¼Œä½¿ç”¨è©²ç”¨ä¾‹æ™‚ä¸ä¸€å®šæœƒåŸ·è¡Œçš„ç›¸é—œç”¨ä¾‹ã€‚ Boundary: ä»¥ä¸€å€‹æ–¹æ¡†å®šç¾© System boundaryï¼Œä¸¦åœ¨æœ€ä¸Šæ–¹å¯«å‡ºç³»çµ±åç¨±ã€‚ ä¸‹é¢æ˜¯ä¸€å€‹æ±½è»ŠéŠ·å”®ç³»çµ±çš„ Use case diagramï¼Œå¯ä»¥ç™¼ç¾å³ä½¿æ˜¯ä¸€å€‹æ±½è»ŠéŠ·å”®ç³»çµ±çš„ç”¨ä¾‹ä¹Ÿä¸è¶…éåå€‹: 1.3 State diagram State diagram (ç‹€æ…‹åœ–)èˆ‡ç”¨ä¾‹åœ–ä¸¦åˆ—ç¬¬å››å»£æ³›ä½¿ç”¨ï¼Œé¡¯ç¤ºå¯¦é«”çš„ä¸åŒç‹€æ…‹ï¼Œç‹€æ…‹åœ–é‚„å¯ä»¥é¡¯ç¤ºå¯¦é«”å¦‚ä½•é€šéå¾ä¸€ç¨®ç‹€æ…‹æ›´æ”¹ç‚ºå¦ä¸€ç¨®ç‹€æ…‹ä¾†éŸ¿æ‡‰å„ç¨®äº‹ä»¶ã€‚ When to use State diagram? ç”¨æ–¼æè¿°ç³»çµ±çš„ç‹€æ…‹è½‰æ›ï¼Œç³»çµ±åœ¨ä¸åŒæ™‚é–“é»è™•æ–¼ä¸åŒçš„ç‹€æ…‹ï¼Œä»¥åŠåœ¨ç‰¹å®šæ¢ä»¶ä¸‹å¦‚ä½•å¾ä¸€å€‹ç‹€æ…‹è½‰æ›ç‚ºå¦ä¸€å€‹ã€‚ ç”¨æ–¼å»ºæ¨¡å…·æœ‰å¤šç¨®ç‹€æ…‹çš„å¯¦é«”ï¼Œå¯¦é«”å¦‚ä½•æ ¹æ“šäº‹ä»¶æ”¹è®Šç‹€æ…‹ï¼Œå¦‚ç‰©ä»¶çš„ç”Ÿå‘½é€±æœŸã€ç‹€æ…‹æ©Ÿã€äº‹ä»¶é©…å‹•çš„ç³»çµ±ç­‰ã€‚ ä¸‹åœ–ç”¨ä¾†èªªæ˜ç‹€æ…‹åœ–çš„ç¬¦è™Ÿ: Initial Pseudo State/Final State: é»‘è‰²åœ“é»ï¼Œé–‹å§‹/çµæŸç¯€é»ã€‚ State: åœ“è§’çŸ©å½¢ï¼Œå…§éƒ¨æ¨™æœ‰ç‹€æ…‹åç¨±ï¼Œæ˜¯ä¸€å€‹å¯¦é«”æ‰€è™•çš„ä¸€å€‹å…·é«”ç‹€æ…‹ã€‚ Transition: ä»¥å‰ªé ­æŒ‡å‘ä¸‹ä¸€å€‹ç‹€æ…‹ï¼Œåœ¨ä¸Šæ–¹å¯ä»¥æ¨™æ˜æŒ‡å®šè§¸ç™¼è½‰æ›çš„æ¢ä»¶æˆ–äº‹ä»¶ã€‚ ä¸‹åœ–æ˜¯ä¸€å€‹å…·æœ‰ Substate(å­ç‹€æ…‹)çš„åŠ ç†±å™¨ç‹€æ…‹åœ–ï¼Œæœ‰å­ç‹€æ…‹çš„æƒ…æ³ä¹Ÿå¯ç¨±ä½œ Nested state(åµŒå¥—ç‹€æ…‹)/Compound state(è¤‡åˆç‹€æ…‹)ã€‚ Substate å¯ä»¥æœ‰è‡ªå·±çš„é€²å…¥ç‹€æ…‹ã€çµæŸç‹€æ…‹ã€ä»¥åŠåœ¨å­ç‹€æ…‹ä¹‹é–“çš„ Transitionã€‚ History States: é™¤éæœ‰ç‰¹åˆ¥èªªæ˜ï¼Œä¸ç„¶é€²å…¥ä¸€å€‹å­ç‹€æ…‹éƒ½æ˜¯ä»¥åˆå§‹ç‹€æ…‹é‡æ–°é–‹å§‹ã€‚æœ‰è¨»æ˜ History state å°±ä»£è¡¨é€²å…¥å­ç‹€æ…‹æ˜¯ä»¥ä¹‹å‰æ´»å‹•çš„æœ€å¾Œä¸€å€‹å­ç‹€æ…‹é–‹å§‹ã€‚ 2. Interaction diagrams 2.1 Sequence diagram 2.2 Communication diagram 2.1 Sequence diagram Sequence diagram(æ™‚åºåœ–)æ˜¯ç¬¬ä¸‰è¢«å»£æ³›ä½¿ç”¨çš„åœ–å½¢ï¼Œæè¿°ç‰©ä»¶åœ¨æ™‚é–“åºåˆ—ä¸­çš„äº¤å‰ä½œç”¨ã€‚åºåˆ—åœ–æœƒæç¹ªåœ¨æ­¤æƒ…å¢ƒä¸‹æœ‰é—œçš„ç‰©ä»¶ï¼Œ ä»¥åŠæ­¤ç‰©ä»¶å’Œå…¶ä»–ç‰©ä»¶äº¤æ›è¨Šæ¯çš„é †åºã€‚ ä¸‹åœ–è§£é‡‹äº†ä¸€å€‹é…’åº—é ç´„çš„æ™‚åºåœ–ï¼Œå¾ä¸€å€‹çª—å£(window) é–‹å§‹å•Ÿå‹•ã€‚ ä¸€å€‹æ™‚åºåœ–æ‡‰è©²è¦æ³¨æ„çš„é»æœ‰é€™äº›: Object/Actors: æ–¹æ¡†ï¼Œç‰©ä»¶/åƒèˆ‡è€…ã€‚ Lifeline: å‚ç›´ç·šï¼Œä»£è¡¨ä¸€å€‹ç‰©ä»¶çš„é–‹å§‹èˆ‡çµæŸã€‚ Activation bar: ç™¼é€å’Œæ¥æ”¶è¨Šæ¯çš„é–‹å§‹èˆ‡çµæŸã€‚ Messages: æ°´å¹³ç®­é ­ï¼Œä¸Šæ–¹å¯«æœ‰è¢«èª¿ç”¨çš„ Mehtod èˆ‡ Parameterã€Returnã€‚ Self Message: å‘¼å«åŒä¸€å€‹ç‰©ä»¶çš„æ–¹æ³•ï¼Œä¾‹å¦‚ä¸€äº› Private methodã€‚ Solid arrowheads: å¯¦å¿ƒç®­é ­ï¼Œä»£è¡¨åŒæ­¥(Synchronous)è¨Šæ¯ï¼Œç™¼é€æ–¹å¿…é ˆç­‰å¾…è¨Šæ¯å®Œæˆã€‚ Open arrowheads: ç©ºå¿ƒç®­é ­ï¼Œä»£è¡¨ç•°æ­¥(Asynchronous)è¨Šæ¯ï¼Œç™¼é€æ–¹ç„¡é ˆç­‰å¾…è¨Šæ¯å®Œæˆã€‚ Dashed lines: ä»£è¡¨å›è¦†ï¼Œå¯ä»¥æ˜¯å¯¦å¿ƒ(åŒæ­¥)/ç©ºå¿ƒ(ç•°æ­¥)ç®­é ­ä¸Šæ–¹å¸¶æœ‰å›è¦†çš„ Methodã€‚ Lost/Find: ä½¿ç”¨ä¸€å€‹åœ“é»ä½œç‚ºçµæŸ/é–‹å§‹ï¼Œæ”¶ä»¶äººæœªçŸ¥/å·²çŸ¥ï¼Œç™¼è¦‹äººå·²çŸ¥/æœªçŸ¥ã€‚ Creat: æŒ‡å‘ä¸€å€‹ç‰©ä»¶å‰µé€ ä¸€æ¢ç”Ÿå‘½ç·šã€‚ Delete: çµ‚æ­¢ä¸€æ¢ç”Ÿå‘½ç·šã€‚ Combined Fragment(çµ„åˆç‰‡æ®µ): å¤§æ–¹æ¡†ï¼Œç”¨ä¾†æ¨™è¨˜è¤‡é›œäº’å‹•ã€‚ opt: ç›¸ç•¶æ–¼ if ç•¶æ¢ä»¶ç‚º true å°±åŸ·è¡Œï¼Œfalse ä¸åŸ·è¡Œã€‚ alt: ç›¸ç•¶æ–¼ if elseï¼Œæ¢ä»¶ç‚º true åŸ·è¡Œå¦å‰‡åŸ·è¡Œ elseã€‚ loop: æ¢ä»¶ç‚º true å°±é‡è¤‡åŸ·è¡Œï¼Œå¯ä»¥ä½¿ç”¨ loop(n) æŒ‡æ˜åŸ·è¡Œæ¬¡æ•¸ã€‚ refï¼šåƒè€ƒå…¶ä»–çš„ Squence diagramï¼Œç”¨æ–¼ç°¡åŒ–åœ–è¡¨ã€‚ par: ä½µè¡Œ(parallel)åŸ·è¡Œçš„ç‰‡æ®µã€‚ 2.2 Communication diagram Communication diagram(é€šè¨Šåœ–)èˆ‡ Seqence diagram ä¸€æ¨£æ˜¯é¡¯ç¤ºå°è±¡å¦‚ä½•å‚³è¼¸ä¿¡æ¯ï¼Œä»–å€‘åœ¨èªæ„ä¸Šæ˜¯ç­‰åƒ¹çš„ï¼Œä¹Ÿå°±æ˜¯å‘ˆç¾ç›¸åŒçš„è³‡è¨Šã€‚ Communication diagram / Seqence diagram ä¹‹é–“å¯ä»¥äº’ç›¸è½‰æ›ï¼Œæœ€ä¸»è¦çš„å·®åˆ¥æ˜¯é€šè¨Šåœ–ä»¥ç©ºé–“é€²è¡Œæ’åˆ—å…ƒç´ ï¼Œåºåˆ—åœ–ä»¥æ™‚é–“æ’åˆ—å…ƒç´ ã€‚ å¦‚ä½•åœ¨å…©ç¨®åœ–å‹ä¹‹é–“è½‰æ›çš„ç¯„ä¾‹: ä¸‹åœ–æ˜¯ä¸€å€‹é…’åº—é ç´„ç³»çµ±çš„é€šè¨Šåœ–ï¼Œå®ƒçš„ä¸»è¦å…ƒç´ æœ‰: Object: æ–¹æ¡†ï¼Œä»£è¡¨ç‰©ä»¶æˆ–å¯¦é«”ã€‚ Links: Object ä¹‹é–“çš„é€£ç·šï¼Œä»£è¡¨é€šè¨Šé€šé“ã€‚ Message: å¯¦å¿ƒ/ç©ºå¿ƒç®­é ­ï¼Œå„è‡ªä»£è¡¨åŒæ­¥/ç•°æ­¥é€šè¨Šï¼Œæ–¹å‘ä»£è¡¨é€å‡ºç«¯èˆ‡æ¥æ”¶ç«¯ï¼Œä¸¦ä¸”è¨Šæ¯å¸¶æœ‰ç·¨è™Ÿã€‚ Note Last edit 07-30-2023 13:42, Reference"
  },"/jekyll/2023-07-26-unified_modeling_language.html": {
    "title": "Note | Unified Modeling Language Concepts",
    "keywords": "software software_development Jekyll",
    "url": "/jekyll/2023-07-26-unified_modeling_language.html",
    "body": "Unified Modeling Language(UML) çµ±ä¸€å¡‘æ¨¡èªè¨€ã€‚ é›–ç„¶æ•æ·é–‹ç™¼ä¸­ä¸å†æŠ•å…¥éå¤šæ™‚é–“åœ¨éœæ…‹å»ºæ¨¡ä¸Šï¼Œä½†æ˜¯ UML é‚„æ˜¯æœ‰å…¶åƒ¹å€¼ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹è¤‡é›œç³»çµ±çš„è¨­è¨ˆï¼Œæˆ–åœ¨é–‹ç™¼åœ˜éšŠéœ€è¦æ›´æ·±å…¥çš„æŠ€è¡“å’Œè¨­è¨ˆç´°ç¯€æ™‚ã€‚ 1. Intorduction UML æ˜¯ç‚ºäº†å¤§å‹è»Ÿé«”ç³»çµ±çš„çµæ§‹èˆ‡è¡Œç‚ºçš„æ¶æ§‹ã€è¨­è¨ˆã€å’Œå¯¦ç¾å»ºç«‹ é€šç”¨çš„å¯è¦–åŒ–å»ºæ¨¡èªè¨€ã€‚å®ƒæä¾›äº†ç”¨æ–¼å‚³é”è¨­è¨ˆæ±ºç­–å’Œç³»çµ±æ¶æ§‹çš„é€šç”¨èªè¨€å’Œç¬¦è™Ÿã€‚ å®ƒåŒ…æ‹¬è¨±å¤šé¡å‹çš„åœ–ï¼Œä¾‹å¦‚ Case diagramã€Class diagramã€Sequence diagramã€‚ä»–ä¹Ÿæ”¯æ´ä¸€äº› Advanced concepts åƒæ˜¯ Stereotypes(å‹åˆ¥æ¨™è¨˜)ã€ Profiles(è¨­è¨ˆè³‡æ–™é›†)ã€Constraints(ç´„æŸæ¢ä»¶)ã€Packages(åŒ…)ï¼Œç”±æ­¤å¯ä»¥å°è»Ÿé«”ç³»çµ±é€²è¡Œæ›´ç²¾ç¢ºçš„å®šè£½å»ºæ¨¡ã€‚UML æ˜¯ç‚ºäº†å¹«åŠ©æ”¹å–„æºé€šã€å”ä½œå’Œè»Ÿé«”ç³»çµ±çš„æ•´é«”å“è³ªã€‚ 1.1 History UML ç”± OMG(Object Management Group) è² è²¬ç®¡ç†ï¼Œ2005å¹´è¢« ISO ç™¼å¸ƒç‚ºèªå¯çš„ ISO æ¨™æº–ï¼Œä¹‹å¾Œè©²æ¨™æº–å®šæœŸä¿®è¨‚æ¶µè“‹ UML çš„æœ€æ–°ä¿®è¨‚ç‰ˆã€‚ ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯ UML 2.5.1 åœ¨ 2017 å¹´ç™¼å¸ƒã€‚ 1.2 Why use UML in software development? Standardization: ç”¨æ–¼æè¿°è»Ÿé«”ç³»çµ±çš„æ¨™æº–å¯è¦–åŒ–èªè¨€ã€‚ä½¿ä¸åŒçš„åˆ©ç›Šç›¸é—œè€…æ›´å®¹æ˜“äº¤æµè¨­è¨ˆæ±ºç­–èˆ‡ç†è§£ç³»çµ±æ¶æ§‹ã€‚ Clarity: é€šéæä¾›æ¸…æ™°ã€ç°¡æ½”çš„è¡¨ç¤ºä¾†å¹«åŠ©æ¸›å°‘è»Ÿé«”ç³»çµ±çš„æ­§ç¾©ï¼Œé˜²æ­¢è»Ÿé«”é–‹ç™¼éç¨‹ä¸­çš„èª¤è§£å’ŒéŒ¯èª¤ã€‚ Collaboration: ä¿ƒé€²ä¸åŒåˆ©ç›Šç›¸é—œè€…(å¦‚é–‹ç™¼äººå“¡ã€æ¶æ§‹å¸«å’Œé …ç›®ç¶“ç†)çš„æºé€šå’Œå”ä½œã€‚ç¢ºä¿æ¯å€‹äººéƒ½æœç›¸åŒçš„ç›®æ¨™åŠªåŠ›ã€‚ Effciency: æä¾›è»Ÿé«”ç³»çµ±çš„å¯è¦–åŒ–è¡¨ç¤ºï¼Œå¯ç”¨æ–¼å„˜æ—©è­˜åˆ¥æ½›åœ¨å•é¡Œå’Œè¨­è¨ˆç¼ºé™·ï¼Œå¾è€Œç°¡åŒ–è»Ÿé«”é–‹ç™¼éç¨‹ã€‚ Reusability: ç”¨æ–¼è¨˜éŒ„è»Ÿä»¶ç³»çµ±å’Œè¨­è¨ˆæ¨¡å¼ï¼Œå¯ä»¥åœ¨æœªä¾†çš„é …ç›®ä¸­é‡è¤‡ä½¿ç”¨ã€‚åœ¨è»Ÿä»¶é–‹ç™¼éç¨‹ä¸­ç¯€çœæ™‚é–“å’Œè³‡æºã€‚ 1.3 Key Object-Oriented Concepts in UML UML å·²ç¶“å–ä»£äº†å‚³çµ±çš„ Object-oriented (OO) åˆ†ææ–¹æ³•ã€‚ An object is made up of data and methods that control it. The data represents the objectâ€™s current status. A class is a type of object that has a hierarchy that can be used to mimic real-world systems. The hierarchy is expressed by inheritance, and classes can be linked in a variety of ways depending on the needs. Object æ˜¯æˆ‘å€‘å‘¨åœå­˜åœ¨çš„ç¾å¯¦ä¸–ç•Œå¯¦é«”ï¼ŒUML èƒ½è¡¨ç¤ºåƒæŠ½è±¡ã€å°è£ã€ç¹¼æ‰¿å’Œå¤šå‹é€™æ¨£çš„åŸºæœ¬åŸå‰‡ï¼Œèƒ½è¡¨ç¤ºç‰©ä»¶å°å‘åˆ†æå’Œè¨­è¨ˆä¸­çš„æ‰€æœ‰æ¦‚å¿µã€‚ å› ç‚º UML åœ–è¡¨ä¸­åƒ…è¡¨ç¤ºç‰©ä»¶å°å‘çš„æ¦‚å¿µã€‚åœ¨é–‹å§‹å­¸ç¿’ä¹‹å‰ï¼Œå……åˆ†ç†è§£ç‰©ä»¶å°å‘æ¦‚å¿µéå¸¸é‡è¦ã€‚ 2. UML Hierarchy æ ¹æ“š UML æå‡ºçš„å±¤æ¬¡çµæ§‹å¦‚ä¸‹åœ–ï¼Œåˆ†ç‚ºçµæ§‹åœ–(Structure diagrams)èˆ‡è¡Œç‚ºåœ–(Behavior diagrams): Structure diagrams: ç”¨æ–¼æè¿°ç³»çµ±çš„éœæ…‹ç‰¹å¾µæˆ–çµæ§‹ï¼Œç”±æ–¼ä»£è¡¨çµæ§‹ï¼Œæ‰€ä»¥å®ƒå€‘æ›´å»£æ³›çš„ç”¨æ–¼ç´€éŒ„è»Ÿé«”ç³»çµ±çš„è»Ÿé«”æ¶æ§‹ã€‚ å¦‚ Component diagrams ä»£è¡¨äº†å¦‚ä½•æè¿°è»Ÿé«”ç³»çµ±è¢«æ‹†åˆ†ç‚º Components ä¸¦é¡¯ç¤ºé€™äº› Components ä¹‹é–“çš„ dependenciesã€‚ Behavior diagrams: æè¿°äº†ç³»çµ±çš„å‹•æ…‹ç‰¹å¾µå’Œè¡Œç‚ºï¼Œç”±æ–¼èªªæ˜ç³»çµ±è¡Œç‚ºï¼Œå› æ­¤ä¸»è¦ç”¨ä¾†æè¿°ç³»çµ±çš„åŠŸèƒ½ã€‚å¦‚ Activities diagrams ç”¨ä¾†æè¿°ç³»çµ±ä¸­çµ„ä»¶çš„æ¥­å‹™èˆ‡é€æ­¥æ“ä½œçš„æ´»å‹•ã€‚ Interaction diagrams(äº¤äº’åœ–): Interaction diagrams æ˜¯è¡Œç‚ºåœ–çš„ subsetï¼Œå¼·èª¿è¢«å¡‘æ¨¡ç³»çµ±ä¸­äº‹ç‰©ä¹‹é–“çš„æ§åˆ¶æµç¨‹èˆ‡è³‡æ–™æµç¨‹(flow of control and data)ã€‚ å¦‚ Sequence diagram é¡¯ç¤ºå°è±¡å¦‚ä½•åœ¨å½¼æ­¤ä¹‹é–“å°±ä¸€ç³»åˆ—è¨Šæ¯é€²è¡Œé€šè¨Šã€‚ 2.1 UML Survey*Â States Grady Booch, one of the most important developer of UML, stated that â€œFor 80% of all software only 20% of UML is neededâ€. UML ä¸€å…±æœ‰ 14 å¼µåœ–è¡¨ï¼Œä½†åœ¨ä¸€å€‹è»Ÿé«”é–‹ç™¼ä¸­ä¸¦ä¸æ˜¯æ¯å€‹ Diagram éƒ½æœƒè¢«ä½¿ç”¨ï¼Œä¸‹åœ–è¡¨ç¤ºäº†ä½¿ç”¨è©² Diagram çš„å»£æ³›ç¨‹åº¦: ä¹‹å¾Œæœƒå†å¦å¤–å…©ç¯‡ä»¥çµæ§‹åœ–ã€è¡Œç‚ºåœ–åˆ†é¡ï¼Œå†ä»¥ä½¿ç”¨å»£æ³›åº¦ä¾†ä¾åºä»‹ç´¹ã€‚ Note Last edit 07-24-2023 2201, Reference: Unified Modeling Language (UML) Introduction"
  },"/jekyll/2023-07-22-property_based_testing_entropy_guided_backbox_REST_API-_fuzzer.html": {
    "title": "Paper | BenFuzz: A Property Based Testing and Entropy Guided Blackbox REST API Fuzzer",
    "keywords": "software software_qualitiy Jekyll",
    "url": "/jekyll/2023-07-22-property_based_testing_entropy_guided_backbox_REST_API-_fuzzer.html",
    "body": "Benjamin Chen, â€œBenFuzz: A Property Based Testing and Entropy Guided Blackbox REST API Fuzzerâ€, 2022. é™³ç¿ç‘œ, åŸºæ–¼ç‰¹æ€§æ¸¬è©¦èˆ‡è³‡è¨Šç†µä¹‹é»‘ç®± REST API æ¨¡ç³Šæ¸¬è©¦, 2022. 1. Intorduction REST API ç‚ºå¤§å¤šæ•¸å‰ç«¯å¾Œç«¯èˆ‡ä¼ºæœå™¨æºé€šå‹æ…‹ï¼ŒREST API æœ‰è‘—ç›¸ç•¶å¤§çš„ä½¿ç”¨ç¾¤é«”ä½†å…¶å®‰å…¨æ€§æˆ–å“è³ªï¼Œ é‚„æ˜¯éœ€è¦ç¶“ç”±è»Ÿé«”æ¸¬è©¦ï¼Œä½†èƒŒå¾Œå¯¦ä½œçš„æ–¹å¼å„æœ‰ä¸åŒï¼Œæ‰€ä»¥å°æ–¼ REST API æœ‰è »å¤šå·¥å…·å¯ä»¥å»åšæ¸¬è©¦ã€‚ è«–æ–‡æå‡ºä»¥ REST API å›æ‡‰ä¹‹è¨Šæ¯ç†µä½œç‚ºè®Šç•°åƒè€ƒä¾æ“šï¼Œä»¥åŠ Schemathesis[17] ä¸­æåˆ°çš„åŸºæ–¼ç‰¹æ€§çš„æ¸¬è©¦æ–¹æ³•åšçµåˆï¼Œ æª¢æ¸¬å‡ºç›¸é—œçš„å¼±é»ï¼Œè®“é»‘ç®±æ¸¬è©¦æœ‰äº†å…·æœ‰æ–¹å‘æ€§çš„è®Šç•°ç­–ç•¥ï¼Œä½¿å…¶èƒ½æœ‰æ›´å¥½çš„æ¸¬è©¦è¦†è“‹ç‡èˆ‡å¼±é»åµæ¸¬ï¼Œ å»æ‰¾åˆ°è¦æ ¼ä¸Šèˆ‡å¯¦ä½œå‡ºçš„æœå‹™å…§å®¹ä¸ç¬¦åˆçš„é»åŠä¼ºæœå™¨å°æ–¼è«‹æ±‚çš„è™•ç†æ˜¯å¦èƒ½æ­£ç¢ºè™•ç†ï¼Œå¾—ä»¥æ‰¾åˆ° 500 ä¼ºæœå™¨å´©æ½°æˆ–éŒ¯èª¤å•é¡Œï¼Œ è«–æ–‡ä¹Ÿæä¾›å®Œæ•´çš„å‰å¾Œç«¯è®“æ¸¬è©¦è€…èƒ½æ“ä½œç¶²è·¯é é¢å°±èƒ½åšæ¸¬è©¦ï¼Œé”åˆ°é–‹ç®±å³ç”¨ï¼Œä¹Ÿå°‡å…¶å®¹å™¨åŒ–æ–¹ä¾¿åšæˆ CI/CD æ¸¬è©¦çš„ä¸€ç’°ã€‚ 2. Background 2.1 REST API REST APIï¼ˆRepresentational State Transfer Application Programming Interfaceï¼‰æ˜¯ä¸€ç¨®åŸºæ–¼ HTTP å”å®šçš„è¨­è¨ˆé¢¨æ ¼ï¼Œ ç”¨æ–¼è¨­è¨ˆå’Œé–‹ç™¼ç¶²è·¯æ‡‰ç”¨ç¨‹å¼çš„æ¥å£ï¼Œæ”¯æ´è³‡æºçš„ç‹€æ…‹å’Œæ“ä½œçš„è¡¨é”ï¼Œä¿ƒé€²äº†ä¸åŒç³»çµ±ä¹‹é–“çš„è³‡è¨Šäº¤æ›å’Œé€šè¨Šã€‚ 2.2 OPEN API and Swagger Swaggerï¼ˆç¾åœ¨ç¨±ç‚ºOpenAPIï¼‰æ˜¯ä¸€ç¨®ç”¨æ–¼OpenAPI æ˜¯ç”¨æ–¼æè¿° API è³‡è¨Šçš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬ API çš„ç«¯é»ã€åƒæ•¸ã€è¼¸å‡ºå…¥æ ¼å¼ã€èªªæ˜ã€èªè­‰ç­‰ï¼Œ æœ¬è³ªä¸Šå®ƒæ˜¯ä¸€å€‹ Json æˆ– Yaml æ–‡ä»¶ï¼Œè€Œæ–‡ä»¶å…§çš„ Schema å‰‡æ˜¯ç”± OpenAPI å®šç¾©ã€‚å®ƒå…è¨±é–‹ç™¼äººå“¡ã€åœ˜éšŠå’Œä¼æ¥­åœ¨è¨­è¨ˆã€ é–‹ç™¼å’Œä½¿ç”¨ API æ™‚æ›´åŠ æ–¹ä¾¿å’Œæœ‰æ•ˆåœ°é€²è¡Œæºé€šã€ç†è§£å’Œæ¸¬è©¦ã€‚ openapi: 3.0.0 info: version: 1.0.0 title: Sample API description: A sample API to illustrate OpenAPI concepts paths: /list: get: description: Returns a list of stuff responses: '200': description: Successful response ä»¥ä¸Š OpenAPI Yaml æè¿°äº†ä¸€å€‹åç‚º â€œSample APIâ€ çš„ APIï¼Œè©² API å…·æœ‰ä¸€å€‹ /list çš„è·¯å¾‘å¯ä½¿ç”¨ get ä¾†ç²å–å›æ‡‰ã€‚ 2.3 Fuzz Testing æ¨¡ç³Šæ¸¬è©¦ (Fuzz Testing) æ˜¯åŸºæ–¼ç”¢ç”Ÿéš¨æ©Ÿä¸”éé æœŸçš„è¼¸å…¥ï¼Œé€²è€Œè§¸ç™¼ç›®æ¨™ç¨‹å¼éé æœŸéŒ¯èª¤çš„ä¸€ç¨®è‡ªå‹•åŒ–è»Ÿé«”æ¸¬è©¦æŠ€è¡“ã€‚ æ¨¡ç³Šæ¸¬è©¦åœ¨å¤šå€‹é ˜åŸŸéƒ½æœ‰ç›¸æ‡‰çš„å¯¦ä½œé …ç›®ï¼Œèƒ½å¤ æœ‰æ•ˆåœ°ç™¼ç¾ç¨‹å¼ç•°å¸¸ã€é‚è¼¯éŒ¯èª¤ã€é–‹ç™¼äººå“¡è¨­è¨ˆçš„ç‘•ç–µåŠéé æœŸçš„è¨˜æ†¶é«”éŒ¯èª¤ï¼Œ é€²è€Œæé«˜ç¨‹å¼å¯é åº¦åŠè»Ÿé«”å“è³ªã€‚æ¨¡ç³Šæ¸¬è©¦ç›®å‰åˆ†ç‚ºä¸‰å¤§é¡ç™½ç®±ã€ç°ç®±ã€é»‘ç®±ï¼Œä¾æ˜¯å¦èƒ½ç²å¾—åŸå§‹ç¢¼ä¾†åˆ†é¡ã€‚ 2.4 Property Based Testing åŸºæ–¼ç¯„ä¾‹çš„æ¸¬è©¦(Example Based Testing)ï¼ŒåŸºæ–¼ç¯„ä¾‹çš„æ¸¬è©¦é€šå¸¸è¦äººå·¥å¯«å‡ºæ¸¬è©¦ç¯„ä¾‹ï¼Œé€™æ¨£å°±æœƒæœ‰å±€é™æ€§ï¼Œ å› ç‚ºè¦äººå·¥ç”¢ç”Ÿçš„ç¯„ä¾‹æœƒå—é™æ–¼æ€è€ƒç¯„ä¾‹çš„ç›²å€è·Ÿä¸Šé™ã€‚ åŸºæ–¼ç‰¹æ€§æ¸¬è©¦(Property Based Testing)ï¼Œæˆ‘å€‘å¯ä»¥åŸºæ–¼è¦æ¸¬è©¦çš„å‡½å¼ï¼Œå°å…¶ç‰¹æ€§æˆ–é‹ä½œé‚è¼¯ï¼Œå»åšç‰¹æ€§æ¸¬è©¦ã€‚ä»¥ä¸‹å°‡èˆ‰ä¾‹åŠ æ³•å‡½å¼åœ¨å‚³çµ±æ¸¬è©¦èˆ‡ ç‰¹æ€§æ¸¬è©¦çš„å·®ç•°æ€§ã€‚ Exampleï¼Œå‡è¨­æ¸¬è©¦ä¸€å€‹åŠ æ³•å‡½æ•¸: å‚³çµ±æ¸¬è©¦: çµ¦å®šæ¸¬è³‡è·Ÿè§£ç­”ï¼Œæ‰èƒ½é©—è­‰æ˜¯å¦å¯è¡Œï¼Œå¦‚ 1+1=2 ç‚ºä¸€å€‹æ¸¬è©¦é»ã€‚ ç‰¹æ€§æ¸¬è©¦: ç”¨äº¤æ›å¾‹ A+B=B+Aã€çµåˆå¾‹(A+B)+C=A+(B+C)ä¾†åšåˆ°é‚è¼¯ä¸Šçš„é©—è­‰ï¼Œé€™äº›ç‰¹æ€§æ˜¯å·²çŸ¥çš„æ•¸å­¸æ€§è³ªï¼Œ å¦‚æœå‡½æ•¸æ˜¯æ­£ç¢ºå¯¦ç¾çš„ï¼Œå®ƒå€‘æ‡‰è©²å§‹çµ‚æˆç«‹ã€‚æ¸¬è³‡çš„éƒ¨åˆ†é€ééš¨æ©Ÿç”¢ç”Ÿï¼Œé€™æ¨£ä¸ä½†æ¸¬è©¦è³‡æ–™æ›´åŠ å¤šå…ƒï¼Œ ä¹Ÿèƒ½æ¸›å°‘é™ä½äººå·¥ç”¢ç”Ÿæ¸¬è©¦è³‡æ–™çš„æ™‚é–“æˆæœ¬ï¼Œå¾è€Œä½¿å¾—æ¸¬è©¦è³‡æ–™æ›´å…·å¤šæ¨£æ€§å’Œè¦†è“‹æ€§ã€‚ ç‰¹æ€§æ¸¬è©¦åŒ…å«äº†ä¸‰å€‹æ¶æ§‹: Arbitrary äº‚æ•¸ç”¢ç”Ÿå™¨ æ˜¯ä¸€ç¨®äº‚æ•¸ç”¢ç”Ÿçš„ç­–ç•¥ï¼Œç•¶æˆ‘å€‘æŒ‡å®šè³‡æ–™å‹åˆ¥æ™‚ï¼Œæˆ‘å€‘å¯ä»¥å®šç¾©ç¬¦åˆé€™å€‹è³‡æ–™å‹åˆ¥çš„äº‚æ•¸ç”¢ç”Ÿæ–¹å¼ Generator æ¸¬è©¦ç”¢ç”Ÿå™¨ æ¸¬è©¦æ™‚ä¾æ“šäº‚æ•¸ç”¢ç”Ÿå™¨ç”¢ç”Ÿå‡ºæ¸¬è©¦è³‡æ–™çš„å€¼ï¼Œé€™æ™‚å€™æˆ‘å€‘å¯ä»¥æ‹¿åˆ°å€¼å»å¸¶å…¥å‡½æ•¸åšæ¸¬è©¦ Shrinker èª¤å€è­˜åˆ¥å™¨ ç•¶æ¸¬è©¦çµæœä¸ç¬¦åˆé æœŸçš„æ™‚å€™ï¼Œæˆ‘å€‘å¯ä»¥é€éä»–æ‰¾åˆ°éŒ¯èª¤çš„é‚Šç•Œ 2.4.1 Hypothesis Hypothesis[7] æ˜¯åŸºæ–¼ç‰¹æ€§æ¸¬è©¦åœ¨ Python ä¸Šå¯¦ä½œçš„å‡½å¼åº«ï¼Œé–‹ç™¼è€…å¯ä»¥è¨­è¨ˆè‡ªå·±çš„ç‰¹æ€§æ¸¬è©¦ï¼Œå…¶ä¸­æä¾›äº†å„é¡å‹çš„ éš¨æ©Ÿç”¢ç”Ÿå™¨(Strategies)ï¼Œå¦‚ Int, Float, Stringï¼Œä¹Ÿå¯ä»¥ç”±é–‹ç™¼è€…èƒ½åŠ å…¥è‡ªå·±çš„éš¨æ©Ÿç”¢ç”Ÿå™¨ï¼Œ ä¹Ÿå¯ä»¥ç”± Hypothesis-jsonschemaï¼Œå°‡ jsonschema è½‰æ›æˆéš¨æ©Ÿç”¢ç”Ÿå™¨ï¼Œé€šéè§£æå‹åˆ¥èˆ‡å…§å»ºçš„éš¨æ©Ÿç”¢ç”Ÿå™¨çµ„ç¹”å†ä¸€èµ·ã€‚ [7] DRMacIver. â€œHypothesisâ€. URL: https://github.com/HypothesisWorks/hypothesis 2.5 Entropy Entropy(è³‡è¨Šç†µ)ï¼Œæ˜¯ç”¨ä¾†è¨ˆç®—è³‡è¨Šé‡çš„ä¸€å€‹æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ“šå…¶è¨ˆç®—åˆ¤æ–·å‡ºå…¶è³‡è¨Šé‡æˆ–äº‚åº¦çš„ä¸€å€‹é‡è¡¡ï¼Œä½¿é–‹ç™¼è€…ä¾¿æ–¼ä»¥å…¶ä½œç‚ºä¾æ“šï¼Œ å»åˆ¤åˆ¥ä¸€æ®µæ–‡å­—æˆ–æ˜¯ä½å…ƒçµ„æ‰€ä»£è¡¨çš„è³‡è¨Šé‡ã€‚ $Entropy (H(X)) = - \\sum_{x} P(x) \\log_{b} P(x)$ å¦‚æœæœ‰ä¸€å€‹ç³»çµ± S å…§å­˜åœ¨å¤šå€‹äº‹ä»¶ S={E1,â€¦,En}ï¼Œæ¯å€‹äº‹ä»¶çš„æ©Ÿç‡åˆ†å¸ƒ P={p1, â€¦, pn}ï¼Œå‰‡æ¯å€‹äº‹ä»¶æœ¬èº«çš„è³‡è¨Šæœ¬é«”ç‚º: $I_{e} = -\\log_{2}{p_{i}}$ (å°æ•¸ä»¥2ç‚ºåº•ï¼Œå–®ä½æ˜¯ bit) å¦‚è‹±èªæœ‰ 26 å€‹å­—æ¯ï¼Œå‡å¦‚æ¯å€‹å­—æ¯åœ¨æ–‡ç« ä¸­å‡ºç¾æ¬¡æ•¸å¹³å‡çš„è©±ï¼Œæ¯å€‹å­—æ¯çš„è¨Šæ¯é‡ç‚º: $I_{e}=-\\log_{2}{1 \\over 26}=4.7$ ä»¥æ—¥æ–‡äº”åéŸ³å¹³å‡åç‚ºç›¸å°ç¯„ä¾‹ï¼Œå‡è¨­æ¯å€‹å¹³å‡ååœ¨æ–‡ç« ä¸­å‡ºç¾çš„æ©Ÿç‡ç›¸ç­‰ï¼Œæ¯å€‹å¹³å‡åæ—¥èªæ–‡å­—å¯æ”œå¸¶çš„è³‡è¨Šé‡ç‚º: $I_{e}=-\\log_{2}{1 \\over 50}=5.64$ æ¯å€‹å¹³å‡åæ‰€èƒ½æ”œå¸¶çš„è³‡è¨Šé‡æ¯”è‹±æ–‡å­—æ¯æ›´å¤§ï¼Œå› ç‚ºå®ƒæœ‰æ›´å¤šçš„å­—ç¬¦é¸æ“‡ã€‚é€™ä¹Ÿæ„å‘³è‘—ç›¸æ¯”æ–¼è‹±æ–‡å­—æ¯ï¼Œ ä½¿ç”¨å¹³å‡åéœ€è¦æ›´å¤šçš„ bit ä¾†è¡¨ç¤ºï¼Œå› ç‚ºå®ƒçš„å­—ç¬¦é›†æ›´ç„¡åºã€‚ 3. Methodology and Implementation 3.2 Entropy é€™è£¡ä½œè€…æå‡ºä¸€å€‹å‡è¨­: ã€Œç•¶ç¶“é API è™•ç†å¾Œçš„è³‡è¨Šç†µæå‡ä»£è¡¨å…¶èƒŒå¾Œè™•ç†é‹ç®—æ˜¯æ›´åŠ è¤‡é›œçš„ï¼Œæ‰€ä»¥èªªè³‡è¨Šç†µåœ¨æ­¤å‡è¨­ä¸‹èˆ‡å¯¦éš›è¦†è“‹åº¦æ˜¯æœ‰æ­£ç›¸é—œçš„ã€‚ã€ å› æ­¤ä½œè€…å¯ä»¥ä»¥æ­¤æŒ‡æ¨™ä¾†é€²è¡Œè©•ä¼°ç•¶å‰è®Šç•°çš„ç­–ç•¥ï¼Œä»¥æ­¤æé«˜ç¨‹å¼çš„è¦†è“‹åº¦ï¼Œè®“æ¨¡ç³Šæ¸¬å™¨å¯ä»¥æ¸¬è©¦åˆ°æ›´æ·±æˆçš„ç¨‹å¼é‚è¼¯ï¼Œ é€²è€Œæé«˜æ‰¾åˆ°å¼±é»çš„æ‰€åœ¨æˆ–æ˜¯è§¸ç™¼éŒ¯èª¤ã€‚ 3.3 Property Based Testing ä½œè€…æŒ‘é¸äº† è¡¨.3 çš„å››æ¢æº–å‰‡ï¼Œå› ç‚ºé€™å››æ¢å¯ä»¥é€šéæœ€å°‘çš„é‹ç®—å»æª¢æ ¸å‡ºä¾†ï¼Œåœ¨ä¸çŠ§ç‰²æ¨¡ç³Šæ¸¬è©¦æ•ˆç‡çš„æƒ…æ³ä¸‹å»å¯¦ä½œã€‚ åˆ©ç”¨ Hypothesis é€™å€‹ Python ç·¨å¯«çš„å‡½å¼åº«ï¼Œåœ¨æœ¬ç¯‡è«–æ–‡ä¸­ä½œç‚ºè®Šç•°ï¼ˆMutationï¼‰åŠæ¨¡ç³Šæ¸¬è©¦çš„ä¸»è¦æ¶æ§‹ï¼Œé€šéå¯¦æ™‚è®Šæ›´å‡½å¼åº«çš„è¨­å®šå€¼ï¼Œ è®“å…¶ä¾ç…§è³‡è¨Šç†µçš„è®ŠåŒ–èª¿æ•´åƒæ•¸æˆ–æ˜¯å»æ›´æ–°å…¶ç¨®å­ã€‚ä½¿ç”¨ è¡¨.3 çš„è¦ç¯„æ–¹å¼ä½œç‚ºç‰¹æ€§æ¸¬è©¦ä¹‹é‚è¼¯æ¢ä»¶ï¼Œé€²è€Œèª¿æ•´è®Šç•°æ–¹å¼åŠåµæ¸¬ API çš„å¼±é»ã€‚ 3.4 Parallel Request Sending é€™è£¡ä½œè€…ä½¿ç”¨ Async é€²è¡Œç™¼é€è«‹æ±‚èˆ‡è™•ç†å›æ‡‰ï¼Œä¾†å¢åŠ åŒä¸€æ™‚é–“æ®µå…§ç™¼é€æ¸¬è©¦è«‹æ±‚çš„æ•ˆç‡èˆ‡é€²è¡Œçš„æ¸¬è©¦æ•¸é‡ã€‚ ä½¿ç”¨ Python Library Aiohttpï¼Œæ˜¯åŸºæ–¼ Async ç™¼é€è«‹æ±‚æ©Ÿåˆ¶çš„ Libraryã€‚ æ¯å€‹è«‹æ±‚çš„ç”Ÿæˆæ©Ÿåˆ¶ç‚º: ä½¿ç”¨ Hypothesis æ¸¬è©¦ç”¢ç”Ÿå™¨æ‰€ç”¢ç”Ÿå‡ºçš„æ¸¬è©¦å¯¦ä¾‹ï¼ŒURL è¦é€šé yarl é€²è¡Œ hex ç·¨ç¢¼å¾Œç¬¦åˆ RFC3986[12]ã€‚ è‹¥è©² API éœ€è¦ Token æˆæ¬Šï¼Œå°‡å…¶æ”¾å…¥ OpenAPI æ‰€æŒ‡å®šçš„æˆæ¬Šä½ç½®ä»¥åŠå…¶æˆæ¬Šæ ¼å¼(bearerã€JWT æˆ–å…¶ä»–)ã€‚ ä¾ç…§ OpenAPI æ‰€å®šç¾©çš„è«‹æ±‚æ ¼å¼é€å‡ºæ¸¬è©¦è«‹æ±‚ï¼Œé€é Async æ–¹å¼æ¥å—å›æ‡‰èˆ‡è¨ˆç®—ç†µ(Entropy)èˆ‡å¾ŒçºŒçš„èª¿æ•´è®Šç•°ã€‚ 3.5 - 3.7 Technology 3.5, 3.6 ä¸»è¦è¬›è¿°ä½œè€…å»ºç«‹ä¸€å€‹å‰å¾Œç«¯ç³»çµ±å¯ç”¨ä¾†é€²è¡Œå°ç›®æ¨™çš„æ¸¬è©¦, å¯ä»¥åœ¨å‰ç«¯ä¸Šå‚³ OpenAPI è¦æ ¼èˆ‡ç›¸é—œæˆæ¬Š Token å¾Œé€²è¡Œæ¸¬è©¦ã€‚ 3.7 å‰‡æ˜¯ Docker image å»ºç«‹å¯¦ä½œï¼Œé€™è£¡ä¸å†è´…è¿°ã€‚ 4. Results Evaluation å¾ŒçºŒä½œè€…ä»¥ RQ1 - RQ3ï¼Œåˆ†åˆ¥å»é©—è­‰ Entropy(è³‡è¨Šç†µ)èˆ‡ Coverage(è¦†è“‹ç‡)ä¹‹é–“çš„é—œä¿‚ï¼Œå¸¸ç”¨æœå‹™çš„ API æ¸¬è©¦ï¼Œ ä»¥åŠéè‡ªè¡Œæ¶è¨­çš„ API é€²è¡Œæ¸¬è©¦ï¼Œè©³ç´°æ­¥é©Ÿå¯ä»¥è¦‹è«–æ–‡ Section 4ã€‚ Other Section Section 5 ç‚ºç›¸é—œç ”ç©¶, 6 ç‚ºçµè«–, 7 ç‚ºæœªä¾†ç™¼å±•é€™è£¡ä¸å†èªªæ˜ã€‚ NOTE é€™ç¯‡è«–æ–‡ä¸»è¦æ˜¯é‡å°ä½¿ç”¨ REST API æœå‹™çš„æ¡†æ¶é€²è¡Œæ¸¬è©¦ï¼Œä»¥æ‰¾å‡ºæ¡†æ¶ä¸­ä¸ç¬¦åˆ REST API è¦ç¯„çš„å›æ‡‰ï¼Œæˆ–æœƒå°ä¼ºæœå™¨ç”¢ç”Ÿ 500 Status çš„éŒ¯èª¤ï¼Œ å…¶ä¸­é—œæ–¼ Property Based Testing, Fuzz Testing çš„éƒ¨åˆ†å¯ä»¥ä½œç‚ºåƒè€ƒã€‚ Last edit 07-27 14:07"
  },"/jekyll/2023-07-19-MVVM_modeling_methodology_user_interface.html": {
    "title": "Paper | A MVVM Modeling Methodology for Information Systems User Interface Design",
    "keywords": "software web_development web_framework Jekyll",
    "url": "/jekyll/2023-07-19-MVVM_modeling_methodology_user_interface.html",
    "body": "Yuan-Kai Hou, â€œA MVVM Modeling Methodology for Information Systems User Interface Designâ€, 2019. ä¾¯å…ƒå‡±, MVVM æ¨¡å¼è³‡è¨Šç³»çµ±ä½¿ç”¨è€…ä»‹é¢å¡‘æ¨¡æ–¹æ³•è«–, 2019. Lab meeting study: 2 Review frontend framework, Design pattern(MVC, â€¦), UML, PAC, 3-5 Method, 6 Conclusion. Section 2. æ–‡ç»å›é¡§çš„éƒ¨åˆ†æ”¾åˆ°å…¶ä»–ç­†è¨˜ä¸­è¬›ï¼Œé€™è£¡ä¸»è¦çœ‹ä½œè€…çš„ç ”ç©¶æ–¹æ³•èˆ‡æ–¹å¼ï¼Œæå‡ºäº†ä¸€å€‹åŸºæ–¼ PAC æ¨¡å¼æ‰€æ“´å±•çš„ Enhanced-PAC æ¨¡å¼ï¼Œ å¯ç”¨ä¾†è¡¨é” MVVM æ¨¡å¼ä¸‹çš„ Frontend Component çš„é‚è¼¯é‹ä½œèˆ‡è½‰æ›é—œä¿‚ã€‚ 1. Introduction 1.1 Research Background and Motivation å‚³çµ±ç¶²é å¤§éƒ¨åˆ†éƒ½æ˜¯ä¾ç…§ MPA(Multi-Page Application) æ¨¡å¼é–‹ç™¼ï¼Œé€™è£¡ä½œè€…é»å‡ºå¹¾å€‹å‚³çµ±ç¶²é çš„å•é¡Œ: ä¸¦æ²’æœ‰è¦å®šä¸€å®šè¦å°‡ View, Business logic, DB logic, åˆ†é–‹æ’°å¯«ï¼Œåªè¦æ–¹æ³•ä¹‹é–“èƒ½äº’ç›¸é€šè¨Šã€åŸ·è¡Œå³å¯ã€‚ å› æ­¤åœ¨ä¸€ä»½å°ˆæ¡ˆä¸­èƒ½çœ‹åˆ°å¤šç¨®èªæ³•åƒé›œä¸¦ä¸”é«˜åº¦è€¦åˆ(coupling)ï¼Œå°è‡´ç¨‹å¼çš„ç¶­è­·æ€§é™ä½ã€‚ å‚³çµ±ç¶²é ä¸­æœ‰ä»¥ MDA(Model-driven architecture) é…åˆ CASE Tool ç”Ÿæˆä»£ç¢¼çš„é–‹ç™¼æ–¹æ³•ï¼Œ ä½†å°æ–¼ç¨‹å¼é‚è¼¯èˆ‡è¨Šæ¯å‚³éä¸Šæ²’æœ‰å¯ä¾›ä¾å¾ªçš„åƒè€ƒæ–‡ä»¶(reference document)ï¼Œå› æ­¤åœ¨é–‹ç™¼éç¨‹ä¸­é›£ä»¥ç¶­è­·æˆ–ç†è§£åŠŸèƒ½å°æ‡‰ç¨‹å¼ç¢¼çš„å€æ®µã€‚ Model Driven Architecture(MDA) æ¨¡å‹é©…å‹•é–‹ç™¼: ä¸€ç¨®è»Ÿè¨­è¨ˆæ–¹æ³•(Software design approach)è©²æ–¹æ³•å¼·èª¿è¦åœ¨è»Ÿé«”é–‹ç™¼ä¸­çš„æ¯å€‹æ­¥é©Ÿå‡é ˆå»ºæ§‹å‡ºæ¨¡å‹ï¼Œä¸”æœ€å¥½æ‡‰è¡¨é”ç‚ºé›»è…¦å¯ç†è§£çš„æ­£è¦æ¨¡å¼(Formal Model)ã€‚ MDA å°‡é‡é»æ”¾åœ¨æ­£å‘å·¥ç¨‹(forward engineering)ä¸Šï¼Œå¾æŠ½è±¡çš„ã€äººå·¥è©³ç´°çš„å»ºæ¨¡åœ–ç”Ÿæˆä»£ç¢¼ã€‚ 1.2 Research Objective ä½¿ç”¨ DSRM(Design Science Research Methodology) ç ”ç©¶æ–¹æ³•ï¼Œä»¥ Angular2 ç‚ºå‰ç«¯æ¡†æ¶é–‹ç™¼ä¸€å€‹åç‚º ã€Œä¾¿ç•¶ç‹ç³»çµ±ã€ï¼Œ ä¸¦æå‡ºMVVM æ¨¡å¼è³‡è¨Šç³»çµ±ä½¿ç”¨è€…ä»‹é¢å¡‘æ¨¡æ–¹æ³•è«–(MVVM Modeling Methodology for Information Systems User Interface)ã€‚ä¸»è¦æ–¹æ³•æœ‰: ä½¿ç”¨ MVVM é–‹ç™¼æ¨¡å¼ï¼Œé–‹ç™¼å‰ç«¯ç³»çµ±æ¶æ§‹ã€‚ å› ç‚º MDA é–‹ç™¼ä¸­åªåœ¨ç¨‹å¼æ–‡ä»¶ä¸­æœ‰æ–¹æ³•åç¨±ï¼Œä½†ä¸¦æ²’æœ‰å°ç¨‹å¼é‚è¼¯é€²è¡Œè©³ç´°çš„å¡‘æ¨¡ã€‚å› æ­¤æ’°å¯«å¯ä½¿ç”¨æ–¼ MVVM æ¨¡å¼çš„å¡‘æ¨¡æ–‡ä»¶ï¼Œ ä»¥æå‡ç¨‹å¼è¨­è¨ˆå¸«é–‹ç™¼èˆ‡ç¶­è­·æ™‚å°æ–¼åŠŸèƒ½é¢çš„äº†è§£ã€‚ ç”¨ Angular2, PHP, MySQL é€²è¡Œè¨­è¨ˆç³»çµ±ã€‚ä½†ä¸»è¦è¨è«–çš„æ˜¯å‰ç«¯ Angular2 çš„éƒ¨åˆ†ï¼Œå¾Œç«¯ä¸åœ¨ç ”ç©¶ç¯„åœä¸­ã€‚ é€™è£¡æ‰€èªªçš„ ã€Œä¾¿ç•¶ç‹ç³»çµ±ã€ è«‹åƒè€ƒ: å³ä»å’Œ,ç‰©ä»¶å°å‘ç³»çµ±åˆ†æèˆ‡è¨­è¨ˆâ€•çµåˆ MDA èˆ‡ UML, 5thEdition, å°åŒ—å¸‚: æ™ºå‹æ–‡åŒ–, February 2017, ch5 2. Literature Review æ–‡ç»æ¢è¨ç« ç¯€è¬›è¿°: SPA(Single Page Application) å–®ä¸€é é¢ç¨‹å¼: è©³æƒ…å¯çœ‹ Vue, React, Angular2 é€²è¡Œäº†è§£ï¼Œä¸»è¦å–ä»£éå¾€ MPA éœ€è¦å¤šå€‹ HTML é€²è¡Œå»ºç½®ç¶²é ï¼Œç•¶è·³è½‰é é¢æ™‚éœ€è¦å†æ¬¡ç™¼å‡º Request å–å›æ•´å€‹ HTML é€ æˆçš„å•é¡Œã€‚ Software architectural pattern è»Ÿé«”é–‹ç™¼æ¶æ§‹: å¯åƒè€ƒ Note | Architectural Patterns Compare MVP, MVC, MVVM UML(Unified Modeling Language) çµ±ä¸€å¡‘æ¨¡èªè¨€: æ˜¯ç”± OMG(Object Management Group, OMG) ç‰©ä»¶ç®¡ç†çµ„ç¹”æ­·ç¶“å¤šå¹´çš„ç‰ˆæœ¬æ¼”åŒ–æ“´å……ï¼Œæå‡ºçš„ç‰©ä»¶å°å‘å¡‘æ¨¡å·¥å…·ã€‚ PAC(Presentationâ€“abstractionâ€“control) è¡¨ç¤º-æŠ½è±¡-æ§åˆ¶æ¨¡å¼: ä¸€ç¨® Software architectural patternï¼Œæ˜¯å¸¸è¦‹çš„ä»‹é¢(interface) çµæ§‹è¡¨é”å·¥å…·ï¼Œå°‡ä½¿ç”¨è€…ä»‹é¢åˆ†ç‚ºå¤šå€‹å­ä»‹é¢ï¼Œæ¯å€‹å­ä»‹é¢å¯è¦–ç‚ºä¸€å€‹ç‰©ä»¶ã€‚ ä¸¦æœ‰ Net-PAC ç­‰æ“´å±•æˆç¶²ç‹€çµæ§‹ä½¿å…¶èƒ½è¡¨é” Web-base çš„ç³»çµ±ã€‚ Shuen-Jen Tsai, Modeling the User Interfaces:A Component-based Interface Research for Integrating the Net-PAC Model and UML, 2002. 3. Research Method 3.1 Design Science Research Methodology é€™è£¡ä½¿ç”¨è©²ç ”ç©¶æ–¹æ³•è«–æ­¥é©Ÿä¾†é€²è¡Œè«–æ–‡ä¹‹ç ”ç©¶ï¼Œå…¶å…§å®¹ç‚ºä¸‹: Peffers, K., Tuunanen, T., Rothenberger, M. A., and Chatterjee, S., A Design Science Research Methodology for Information Systems Research 3.2 Research Method and Step Angula2 æ˜¯å·²ç¶“å¼·åˆ¶ä»¥ MVVM é€²è¡Œé–‹ç™¼ï¼Œè€Œå°æ–¼ç¨‹å¼é‚è¼¯æœªæœ‰æ˜ç¢ºçš„å¡‘æ¨¡æ–‡ä»¶è¦ç¯„ã€‚ä½œè€…ä½¿ç”¨ UML çš„æºé€šçªä¾†å»ºæ§‹ä¸€ä»½ç¬¦åˆ Angular2 æ¡†æ¶çš„ç³»çµ±åˆ†æèˆ‡è¨­è¨ˆçš„é–‹ç™¼æ–‡ä»¶ã€‚ ç¢ºèªå•é¡Œèˆ‡å‹•æ©Ÿ: é€éæ–‡ç»ç ”ç©¶ä¾†äº†è§£ç•¶å‰å‚³çµ±ç¶²é æ‰€å­˜åœ¨çš„å•é¡Œï¼Œä»¥åŠ MDA ç³»çµ±é–‹ç™¼æ–¹æ³•ä¸‹å°æ–¼ç¨‹å¼é‚è¼¯çš„æè¿°æ–‡ä»¶ä¸è¶³ã€‚ å®šç¾©è§£æ±ºæ–¹æ³•çš„ç›®æ¨™: è§£æ±ºç ”ç©¶èƒŒæ™¯ä¸­å‚³çµ±ç¶²é (é SPAã€MVVM)çš„ç¨‹å¼ç„¡æ³•å°‡ä½¿ç”¨è€…ä»‹é¢ã€ç¨‹å¼é‚è¼¯ã€è³‡æ–™åº«é‚è¼¯ç­‰èªæ³•åˆ†é–‹æ’°å¯«ï¼Œèˆ‡ä¸æ˜“åˆ†å‰²é€²è¡Œåˆ†å·¥çš„å•é¡Œã€‚ MDA ç³»çµ±é–‹ç™¼æ–¹æ³•ç‚º PSM è½‰æ›ç‚ºå‚³çµ±ç¶²é ç¨‹å¼ç¢¼çš„é–‹ç™¼æ–¹å¼ï¼Œæœªæ¶‰åŠç¨‹å¼é‚è¼¯çš„å¡‘æ¨¡èˆ‡è½‰æ›ï¼Œæœ¬ç ”ç©¶å°‡ä»¥ UML å°å…¶ç¨‹å¼é‚è¼¯å¡‘æ¨¡ï¼Œä¸¦ç”¢å‡ºä¸€ä»½å¯èˆ‡ MVVM æ¨¡å¼å°æ‡‰ä¹‹ UML æ–‡ä»¶ã€‚ è¨­è¨ˆèˆ‡ç™¼å±•: ç”±æ–¼ Angular2 å·²ç¶“å¼·åˆ¶ä½¿ç”¨ MVVM é€²è¡Œé–‹ç™¼ï¼Œå› æ­¤é€™è£¡æœƒä»¥ç”Ÿç”¢ç‡(Productivity)ã€å¯æ”œæ€§(Portability)ã€äº’é€šæ€§(Interoperability)ã€è€¦åˆåŠ›(Coupling)ä½œç‚ºæ­¤ç³»çµ±é–‹ç™¼æ¡†æ¶çš„ç¸¾æ•ˆæŒ‡æ¨™ã€‚ åœ¨ MDA ä¸­é€²è¡Œå¡‘æ¨¡çš„éƒ¨åˆ†å‰‡ä½¿ç”¨ Enhanced-PAC å»ºæ§‹æºé€šåœ–å¡‘æ¨¡ç³»çµ±çš„ç¨‹å¼é‚è¼¯ï¼Œèˆ‡è³‡è¨Šå‚³éï¼Œä¸¦ä»¥ç¶­è­·èˆ‡æ–‡ä»¶(Maintenance and Documentation )åšç‚ºæ­¤å¡‘æ¨¡æ–¹æ³•è«–çš„è¡¡ï¥¾æŒ‡æ¨™ã€‚ å±•ç¤º: ã€Œä¾¿ç•¶ç‹ç³»çµ±ã€ä¸­æœ‰ä¸€å€‹æ–°å¢é …ç›®æ´»å‹•åœ–åšç‚ºä¾†æºï¼Œåˆ†åˆ¥æ‰¾å‡º Modelã€Viewã€ViewModelï¼Œä»¥åŠå°é€™ä¸‰å€‹éƒ¨åˆ†ä»¥è³‡æ–™è©å½™åšæ›´è©³ç´°çš„èªªæ˜ï¼Œä¸¦å»ºç«‹å‡ºä»£è¡¨ç³»çµ±ä»‹é¢çµæ§‹çš„ Enhanced-PAC æ¨¡å‹ï¼Œ å†ä»¥ Enhanced-PAC æ¨¡å‹, View model è³‡æ–™è©å½™ä½œç‚ºä¾†æºï¼Œå»ºæ§‹ UML æºé€šåœ–(Communication Diagram)ï¼Œé€™æ¨£ã€Œä¾¿ç•¶ç‹ç³»çµ±ã€å°±èƒ½é€é UML ä¾†ä½¿ç”¨ Angular2 æ¡†æ¶é€²è¡Œé–‹ç™¼ã€‚ è©•ä¼°: ä½¿ç”¨ Angular2 å®Œæˆ SPA çš„ã€Œä¾¿ç•¶ç‹ç³»çµ±ã€å¾Œå°±èƒ½ä½¿ç”¨ç”Ÿç”¢ç‡(Productivity)ã€å¯æ”œæ€§(Portability)ã€äº’é€šæ€§(Interoperability)ã€è€¦åˆåŠ›(Coupling)ä½œç‚ºç³»çµ±è©•ä¼°æ­¤å››é …æŒ‡æ¨™çš„å•é¡Œï¼Œ ç¶­è­·èˆ‡æ–‡ä»¶(Maintenance and Documentation)å‰‡ä»¥ Enhanced-PAC æ¨¡å‹èˆ‡æºé€šåœ–çš„å¡‘æ¨¡æ–¹æ³•è«–ä¾†è©•ä¼°ã€‚ 6. Conclusion ä½œè€…æå‡ºä¸€å€‹æ–°çš„ Enhanced-PAC pattern ç”¨æ–¼è¡¨é” MVVM æ¶æ§‹ä¸‹ Forntend Modelï¼Œä¸¦ä»¥æ­¤ Model é€²è¡Œé–‹ç™¼èˆ‡è©•ä¼°ï¼Œ æ˜¯å¦é”åˆ°ä»¥ Enhanced-PAC ä½¿é–‹ç™¼è€…å¯ä»¥ä¾å¾ªçš„åƒè€ƒæ–‡ä»¶ã€‚ NOTE å‰©ä¸‹çš„éƒ¨åˆ†ç‚ºè«–æ–‡çš„ Section 4-5. ç‚º Enhanced-PAC å»ºç«‹æ–¹æ³•ï¼Œèˆ‡ä½¿ç”¨ Enhanced-PAC å»ºç«‹ Communication Diagram èˆ‡ç¨‹å¼ç¢¼å°æ‡‰ã€‚ä¸¦ä½¿ç”¨ä½œè€…æå‡ºçš„æŒ‡æ¨™ä¾†é€²è¡Œè©•ä¼°ã€‚ Section 6. ç‚ºçµè«–èˆ‡æœªä¾†ç™¼å±•ã€‚ Last edit 07-19-2023 19:07"
  },"/jekyll/2023-07-18-software_arch_pattern.html": {
    "title": "Note | Architectural Patterns Compare MVP, MVC, MVVM",
    "keywords": "software software_development Jekyll",
    "url": "/jekyll/2023-07-18-software_arch_pattern.html",
    "body": "Design pattern compare for MVP, MVC, MVMM. é€™æ˜¯ä¸‰ç¨®æœ€å¸¸ç”¨çš„è»Ÿé«”æ¶æ§‹æ¨¡å¼ï¼Œå¾é€™ç¯‡ä¾†äº†è§£é€™ä¸‰ç¨®æ¶æ§‹çš„å·®ç•°èˆ‡æ¯”è¼ƒã€‚ é€™ä¸‰ç¨® Architectural Patterns çš„ç›®çš„éƒ½æ˜¯ç‚ºäº†å°‡ Business logic(æ¥­å‹™é‚è¼¯)èˆ‡ View(è¦–åœ–)å¯¦ç¾ä»£ç¢¼åˆ†é›¢ï¼Œä½¿ä¸€å€‹ç¨‹å¼èƒ½æœ‰ä¸åŒçš„è¡¨ç¾å½¢å¼ã€‚ Architectural Patterns vs Design Patterns Architectural Patterns æ˜¯ä¸€ç¨®é€šç”¨å¯é‡è¤‡ä½¿ç”¨çš„è§£æ±ºæ–¹æ¡ˆï¼Œç”¨æ–¼è§£æ±ºç‰¹å®š context ä¸­çš„è»Ÿé«”æ¶æ§‹ä¸­çš„å¸¸è¦‹å•é¡Œã€‚æ¶æ§‹æ¨¡å¼æ˜¯è™•ç†ç³»çµ±ä¸­çš„ä¸»è¦çµ„ä»¶å¦‚ä½•å”åŒå·¥ä½œï¼Œ è¨Šæ¯(message) èˆ‡è³‡æ–™(data) å¦‚ä½•åœ¨ç³»çµ±ä¸­æµå‹•ä»¥åŠå…¶ä»–çµæ§‹æ€§çš„è€ƒé‡å› ç´ ã€‚æ¶æ§‹æ¨¡å¼ä½¿ç”¨ä¸€äº›çµ„ä»¶é¡å‹ï¼Œæ¯ç¨®çµ„ä»¶æœƒç”±æ›´å°çš„æ¨¡å¡Šæ‰€çµ„æˆã€‚ Design Patterns å‰‡æ˜¯å¸¸è¦‹å•é¡Œçš„æ¨è–¦è§£æ±ºæ–¹æ¡ˆèˆ‡å¯¦è¸ï¼Œé—œæ³¨æ–¼å¦‚ä½•å»ºæ§‹æ‡‰ç”¨ç¨‹å¼ä¸­çš„çµ„ä»¶ã€‚ Example: MVC æ˜¯ä¸€ç¨® Architectural Pattren ä»–å°‡ç¨‹å¼åˆ†ç‚ºä¸‰å€‹ä¸»è¦éƒ¨åˆ†, Model, View, Controller, é€™éƒ¨åˆ†ä¹‹é–“çš„è³‡è¨Šäº¤æ›æœ‰åš´æ ¼çš„è¦å‰‡ï¼Œä»¥å¯¦ç¾æ›´å¥½çš„ä»£ç¢¼çµ„ç¹”èˆ‡å¯ç¶­è­·æ€§ã€‚ Observer Pattern(è§€å¯Ÿè€…æ¨¡å¼) æ˜¯ä¸€ç¨® Design Pattrenï¼Œå®šç¾©äº†å°è±¡ä¹‹é–“çš„ä¸€å°å¤šä¾è³´é—œä¿‚ï¼Œä»¥ä¾¿ç•¶ä¸€å€‹å°è±¡æ”¹è®Šç‹€æ…‹æ™‚ï¼Œæ‰€æœ‰ä¾è³´æ–¼ä»–çš„å°è±¡éƒ½æœƒæ”¶åˆ°é€šçŸ¥ã€‚ Model View Controller(MVC) MVC æœ€æ—©ä¾†æºæ–¼ä¸€ç¯‡è«–æ–‡ï¼Œè©²è«–æ–‡å°æ–¼ Model-View-Controller ä¸‰å€‹æ¨¡å¡Šä»¥å…¶ä»–å€‘ä¹‹é–“çš„é€šè¨Šéƒ½è¬›è¿°äº†ä¸€äº›è¨­è¨ˆç´°ç¯€ã€‚ Steve Burbeck, Ph.D., Applications Programming in Smalltalk-80 (TM): How to use Model-View-Controller (MVC), 1979. MVC å°‡ç¨‹å¼åˆ†ç‚ºä¸‰ç¨®çµ„ä»¶ï¼ŒModel, Viewm Controller, ä¸‰è€…æœ‰å„è‡ªçš„ç”¨é€”å’Œè·è²¬: Model: Model = data + business logic ä¹Ÿå°±æ˜¯èªª Model æ—¢è² è²¬äº†è³‡æ–™çš„å„²å­˜ä¹Ÿè² è²¬è™•ç†é–‹è³‡æ–™çš„é‚è¼¯ï¼Œå› æ­¤è™•ç†æ¥­å‹™é‚è¼¯æ˜¯ Model çš„è²¬ä»»è€Œä¸æ˜¯ Controllerã€‚æ‰€ä»¥å¾è³‡æ–™ä¾†çœ‹ï¼Œ é‚„å¯ä»¥åˆ†ç‚ºè³‡æ–™çš„ç²å–ã€å„²å­˜ã€è³‡æ–™çµæ§‹ï¼Œå› æ­¤åœ¨è¨­è¨ˆæ™‚ Model æœƒå†æ¬¡ç´°åˆ†ç‚ºæ›´å¤š layer å¦‚æ¥­å‹™é‚è¼¯ã€ç¶²è·¯ã€å­˜å„²ç­‰â€¦ View: View è² è²¬é¡¯ç¤º Model çš„è³‡æ–™ï¼Œä¸¦è² è²¬æœ€çµ‚å¦‚ä½•åœ¨ç”¨æˆ¶ä»‹é¢ä¸­é¡¯ç¤ºæ•¸æ“šä»¥åŠçµ‚ç«¯ç”¨æˆ¶ä¹‹é–“äº¤äº’ã€‚View æ˜¯ä»¥ç¶²æ ¼ã€è¡¨æ ¼ã€åœ–è¡¨ç­‰ç­‰é¡ä¼¼å¯ä»¥é¡¯ç¤ºæ•¸æ“šçš„å¯è¦–åŒ–è¡¨ç¾ã€‚ Controller: Controller è² è²¬ Model-View ä¹‹é–“çš„æ©‹æ¨‘ï¼Œç”¨æ–¼æ§åˆ¶ç¨‹å¼çš„æµç¨‹ã€‚æ‰€ä»¥ Controller è² è²¬æ¥æ”¶ä¾†è‡ªç”¨æˆ¶çš„è¼¸å…¥ã€é©—è­‰è¼¸å…¥æ•¸æ“šï¼Œè§£æç”¨æˆ¶è¼¸å…¥å¾Œä¸¦äº¤ç”±å°æ‡‰çš„ Model å»è™•ç†ã€‚ æ‰€ä»¥ç†è«–ä¸Š Controller æ˜¯å¾ˆè¼•çš„ã€‚ MVC Diagram, Reference to here. MVC and its variants å…¶å¯¦æˆ‘å€‘èƒ½ç™¼ç¾æœ€åˆç‰ˆæœ¬çš„ MVC View é‚„æ˜¯ä¾è³´æ–¼ Modelï¼Œå¯¦éš›ä¸Šé™ä½äº† View çš„å¯ç”¨æ€§ï¼Œé‚£è®Šç¨®çš„ MVC å°±å°‡ View èˆ‡ Model å®Œå…¨åˆ†é–‹ï¼Œé‚£å°±å¯ä»¥æé«˜ View çš„å¯é‡è¤‡æ€§ï¼Œ å› æ­¤å°±æœ‰ä»¥ä¸‹é€™ç¨® MVC: MVC variant Diagram. View èˆ‡ Model å°±ä¸è¦é€²è¡Œé€šè¨Šäº†ï¼Œæ‰€æœ‰çš„é€šè¨Šéƒ½åŸºæ–¼ Controllerï¼ŒModel å°‡çµæœå‘Šè¨´ Controllerï¼Œå†ç”± Controller æ›´æ–° Viewã€‚é€™ç¨®è®Šç¨®æœ€æ—©æ˜¯ç”± Apple.Inc æ‰€æå‡ºï¼Œ å¾ˆå¤š Web æ¡†æ¶ä¹Ÿæ˜¯åŸºæ–¼é€™ç¨®è®Šç¨® MVC æ‰€è¨­è¨ˆï¼Œå¦‚ SpringMVCã€‚ å¦å¤–åœ¨è¨­è¨ˆæ™‚ Controller å»è·Ÿ Model ç™¼å‡ºè«‹æ±‚æ™‚é€šå¸¸æœƒæ¯”è¼ƒè€—æ™‚ï¼Œå› æ­¤ä¸€èˆ¬éƒ½æ˜¯éåŒæ­¥(async) é€šçŸ¥ Controllerã€‚ Model View Presenter(MVP) MVP æœ€æ—©çš„è§£èªªä¾†è‡ªæ–¼ï¼Œæ˜¯é‡å° MVC å†æ”¹è‰¯å‡ºçš„ Pattern: Mike Potel, MVP: Model-View-Presenter The Taligent Programming Model for C++ and Java, 1996. å¯ä»¥çœ‹å‡ºæœ€æ—©çš„ MVP å…¶å¯¦èˆ‡æˆ‘å€‘ç¾åœ¨æ‰€çœ‹åˆ°çš„ MVP ä¸å¤ªä¸€æ¨£ï¼Œè©² MVP æ˜¯å¾æ•¸æ“šç®¡ç†èˆ‡ç”¨æˆ¶ä»‹é¢å…©å€‹æ–¹å‘çš„å•é¡Œå‡ºç™¼ï¼Œå°‡ Smalltalk çš„ MVC åœ¨åˆ†è§£è€Œæˆï¼Œ å¤šäº†å¹¾å€‹ä¸­é–“çµ„ä»¶: Interactor: å®šç¾© View çš„äº¤äº’äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯å°‡ä½¿ç”¨è€…çš„è¼¸å…¥è½‰ç‚ºé©ç•¶çš„æ“ä½œã€‚ Commands: å®šç¾©å° Model æ•¸æ“šçš„æ“ä½œå¦‚ï¼Œå„²å­˜æˆ–æ›´æ–°è³‡æ–™åº«ã€å‘¼å« APIã€é€²è¡Œæ¼”ç®—æ³•é‹ç®—ç­‰ã€‚ Selections: å®šç¾©ç‚ºå¾ Model ä¸­ç¯©é¸è³‡æ–™ï¼Œä¸¦æº–å‚™å¥½ç›¸é—œçš„æŸ¥è©¢æˆ–éæ¿¾æ¢ä»¶ã€‚ MVP Diagram, Reference to here. å› æ­¤æˆ‘å€‘å¾ä¸Šåœ–ä¾†çœ‹ï¼Œå¦‚æœå»å¿½ç•¥ä¸­é–“çµ„ä»¶ï¼Œæœƒç™¼ç¾èˆ‡ MVC variant å¹¾ä¹ä¸€æ¨£ï¼Œåœ¨è«–æ–‡ä¸­å°±æåˆ°ã€‚ Presenter å…¶å¯¦å°±æ˜¯ Controllerï¼Œåªæ˜¯ç‚ºäº†èˆ‡ MVC å€åˆ†é–‹æ‰ç¨±ä½œ Presenterã€‚åœ¨é€™å€‹ MVP ä¸­ä¸‰å€‹çµ„ä»¶å„è‡ªçš„è·è²¬: Model: å„²å­˜æ•¸æ“š(èˆ‡è³‡æ–™åº«æºé€šã€è«‹æ±‚ç¶²è·¯è³‡æºç­‰)ï¼Œè² è²¬è™•ç†æ¥­å‹™é‚è¼¯ã€‚ View: é¡¯ç¤ºè³‡æ–™ï¼Œå°‡ä½¿ç”¨è€…çš„è¼¸å…¥å‚³çµ¦ Presenterã€‚ Persenter: å¾ Model ä¸­ç²å–è³‡æ–™ï¼Œä¸¦æ±ºå®š View ä¸­é¡¯ç¤ºä»€éº¼ã€‚ å¯ä»¥ç™¼ç¾å…¶å¯¦èˆ‡ MVC variant ä¸­çš„ä¾è³´æ˜¯ä¸€æ¨£çš„ï¼Œåªæ˜¯ MVP ä¹‹é–“è¦é€éä»‹é¢(interface) ä¾†å¯¦ç¾ï¼ŒModel, View, Persenter å„è‡ªæœ‰å„è‡ªçš„ interfaceï¼Œ é‡å° interface codingï¼Œè‡ªç„¶å°±æœƒå» decouplingï¼Œæé«˜å¯é‡è¤‡æ€§ï¼Œä»¥åŠå®¹æ˜“é€²è¡Œå–®å…ƒæ¸¬è©¦ã€‚ Model-View-ViewModel(MVVM) MVVM æœ€æ—©ç”± John Gossman åœ¨ä»–çš„ Blog ä¸Šæ‰€ç™¼è¡¨: John Gossman, Introduction to Model/View/ViewModel pattern for building WPF apps, 2005. View-Model å°±å¦‚å­—é¢æ‰€è¿°View-Model = Model of Viewï¼Œä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ Abstraction of the Viewï¼Œç°¡å–®ä¾†èªªåœ¨ MVVM ä¸­ View ä¸è² è²¬ç¶­è­·æ•¸æ“šï¼Œ View è² è²¬èˆ‡ View-Model åŒæ­¥æ•¸æ“šï¼ŒView-Model ä¹Ÿç”¨æ–¼ç®¡ç† View çš„ç‹€æ…‹å’Œæ“ä½œæ¨¡å‹çš„æ–¹æ³•èˆ‡å‘½ä»¤ï¼Œ å› æ­¤ View-Model ä¸­å°è£äº† View çš„å±¬æ€§(Property)èˆ‡å‘½ä»¤(Command)ã€‚ å› æ­¤åœ¨ MVVM ä¸­æœ€é‡è¦çš„ä¸€å€‹ç‰¹æ€§å°±æ˜¯æ•¸æ“šç¶å®š(data binding)ï¼Œé€šéç¶å®šä½¿å…©è€…ä¹‹é–“é¬†è€¦åˆ(Loose coupling)ï¼Œé€™æ¨£å°±ä¸ç”¨åœ¨ View-Model ä¸­å»å¯« Updateï¼Œ é€™è£¡ç¶å®šæœ‰å…©ç¨®é¡å‹: å–®å‘ç¶å®š(View-Model -&gt; View): ç•¶ View-Model ç™¼ç”Ÿè®ŠåŒ–å¾Œï¼ŒView æ‰æœƒæ›´æ–°ã€‚ é›™å‘ç¶å®š(View-Model &lt;-&gt; View): ç•¶ View-Mode, View ä¸­ä»»ä½•ä¸€æ–¹ç™¼ç”Ÿè®ŠåŒ–ï¼Œå¦ä¸€æ–¹éƒ½æœƒæ›´æ–°ã€‚ ä¸€èˆ¬æƒ…æ³ä¸‹ï¼Œåªéœ€åœ¨ View ä¸­é¡¯ç¤ºä½†ç„¡é ˆç·¨è¼¯çš„æ•¸æ“šä½¿ç”¨å–®å‘ç¶å®šï¼Œåä¹‹ã€‚åŒæ™‚ View-Model å°è£çš„æ˜¯ View çš„å±¬æ€§èˆ‡å‘½ä»¤ï¼Œ å› æ­¤ç¶å®šä¹Ÿåˆ†ç‚º Property Binding, Command Bindingã€‚ è¦å¯¦ç¾ç¶å®šé€šå¸¸ä½¿ç”¨ Publishâ€“subscribe patternï¼Œé€™éƒ¨åˆ†é€šå¸¸å„å¤§æ¡†æ¶ä¸­éƒ½æœ‰è‡ªå·±çš„å¯¦ç¾ï¼ŒVueã€React ä¸­éƒ½å¯¦ç¾äº†æ•¸æ“šç¶å®šã€‚ Conclusion MVP, MVVM éƒ½æ˜¯ç‚ºäº†å¯¦ç¾ View èˆ‡ Business logic çš„åˆ†é›¢å•é¡Œï¼Œåªæ˜¯å…©è€…ä½¿ç”¨ä¸åŒçš„å¯¦ç¾ã€‚MVP é€é interface å¯¦ç¾ï¼Œç¼ºé»å°±æ˜¯è¦ç·¨å¯«å¤§é‡çš„ interfaceï¼Œ è€Œ MVVM å‰‡é€é Bindï¼Œä½†å°±è¦ä¾è³´æ¡†æ¶å·¥å…·ä¾†é–‹ç™¼ã€‚ Last edit 07-21-2023 11:33"
  },"/jekyll/2023-07-18-automated_gen_test_case_using_UML.html": {
    "title": "Paper | Automated-generating test case using UML statechart diagrams (Unfinished)",
    "keywords": "software software_qualitiy generate_test_case UML Jekyll",
    "url": "/jekyll/2023-07-18-automated_gen_test_case_using_UML.html",
    "body": "Supaporn Kansomkeat, Wanchai Rivepiboon, â€œAutomated-generating test case using UML statechart diagramsâ€, SAICSIT â€˜03: Proceedings of the 2003 annual research conference of the South African institute of computer scientists and information technologists on Enablement through technology, September 2003, Pages 296â€“300. æœ¬ç¯‡è«–æ–‡æå‡ºä¸€ç¨®æ¸¬è©¦ç”¨ä¾‹ç”¢ç”Ÿå™¨åŸºæ–¼ UML ç‹€æ…‹åœ–è‡ªå‹•ç”¢ç”Ÿ Testing Case çš„æ–¹æ³•ã€‚ ä½œè€…å°‡ UML è½‰ç‚ºä¸€å€‹ä¸­é–“åœ–ï¼Œç¨±ä½œ TFG(Testing Flow Graph)ï¼ŒTFG æœƒæ˜ç¢ºè­˜åˆ¥ UML ç‹€æ…‹åœ–çš„æµç¨‹ï¼Œä¸¦é‡å°æ¸¬è©¦çš„ç›®çš„ä¾†é€²è¡Œå¢å¼·ã€‚ å¾ TGF ä¸­ä½¿ç”¨æ¸¬è©¦æ¨™æº–(Testing Criteria)ä¾†ç”Ÿæˆæ¸¬è©¦ç”¨ä¾‹ï¼ŒåŒ…æ‹¬è¦†è“‹äº† UML åœ–ä¸­çš„ç‹€æ…‹(State) èˆ‡è½‰æ›(Transition)ã€‚ æœ€å¾Œä½¿ç”¨çªè®Šåˆ†æ(Mutation Analysis)ä¾†è©•ä¼°ç”Ÿæˆæ¸¬è©¦ç”¨ä¾‹çš„éŒ¯èª¤æ­ç¤ºèƒ½åŠ›ã€‚ 1. Introduction Specification-based testing(åŸºæ–¼è¦æ ¼çš„æ¸¬è©¦) æ˜¯å¾è¦æ ¼ä¸­ç²å–çš„ä¿¡æ¯ä¾†å¹«åŠ©æ¸¬è©¦å’Œé–‹ç™¼è»Ÿé«”ã€‚æ¸¬è©¦æ´»å‹•åŒ…å«: è¨­è¨ˆæ¸¬è©¦ç”¨ä¾‹(Testing Case)ï¼Œé€™äº›æ¸¬è©¦ç”¨ä¾‹æ˜¯ä¸€ç³»åˆ—çš„è¼¸å…¥ã€‚ åŸ·è¡Œæ¸¬è©¦ç”¨ä¾‹å’Œæª¢æŸ¥åŸ·è¡Œçµæœ æ¸¬è©¦åœ¨é–‹ç™¼éç¨‹çš„æ—©æœŸé€²è¡Œï¼Œé–‹ç™¼äººå“¡é€šå¸¸æœƒåœ¨è¦æ ¼ä¸­æ‰¾åˆ°ä¸ä¸€è‡´å’Œæ¨¡ç³Šä¹‹è™•ï¼Œé€²è€Œæ”¹é€²è¦æ ¼ï¼Œç„¶å¾Œå†é€²è¡Œç¨‹å¼ç·¨å¯«ã€‚ Unified Modeling Language, UML(çµ±ä¸€å»ºæ¨¡èªè¨€) BOOCH, G., RUMBAUGH, J., AND JACOBSON, I. 1998. The Unified Modeling Language User Guide. Object Technology Series. Addison Weysley Longman, Inc æ˜¯ä¸€ç¨®å¯è¦–è¦ºåŒ–å»ºæ¨¡èªè¨€ï¼ŒåŒ…å«ä¹ç¨®åœ–å½¢ã€‚ç›®å‰æœ‰è¨±å¤šç ”ç©¶å°ˆæ³¨æ–¼å¾ UML è¦æ ¼ä¸­ç”Ÿæˆæ¸¬è©¦ç”¨ä¾‹ï¼Œè©³ç´°å¯è¦‹è«–æ–‡ä¸­ Referenceï¼Œæœ¬è«–æ–‡æå‡ºä¸€ç¨®å¾ UML ç‹€æ…‹åœ–ä¸­è‡ªå‹•ç”Ÿæˆçš„æ¸¬è©¦ç”¨ä¾‹ã€‚ NOTE Last edit 07-19-2023 23:02"
  },"/jekyll/2023-06-23-Intergrated_environment_sdd.html": {
    "title": "Paper | An Integrated Environment for Specification Driven Development (Unfinished)",
    "keywords": "software software_qualitiy software_development Jekyll",
    "url": "/jekyll/2023-06-23-Intergrated_environment_sdd.html",
    "body": "CHANG CHUNG-YEN, â€œAn Integrated Environment for Specification Driven Developmentâ€, 2022. å¼µå´‡å½¥, ä¸€å€‹æ”¯æ´è¦æ ¼é©…å‹•é–‹ç™¼çš„æ•´åˆç’°å¢ƒ, 2022. é€éæœ¬è«–æ–‡äº†è§£ä¸€å€‹æ•´åˆ Junit, XML Model, Testing case, çš„è¦æ ¼é©…å‹•é–‹ç™¼ç’°å¢ƒæ¶æ§‹ã€‚ æœ¬è«–æ–‡çµåˆé»‘ç®±æ¸¬è©¦æ¡ˆä¾‹è‡ªå‹•ç”¢ç”ŸåŠæ¸¬è©¦é©…å‹•é–‹ç™¼æµç¨‹ï¼Œæå‡ºè¦æ ¼é©…å‹•é–‹ç™¼æµç¨‹ã€‚åœ¨ Eclipse ä¸Šçµåˆ XML æ¨¡å‹å·¥å…· Papyrusã€OCL è™•ç†å™¨ã€ é»‘ç®±æ¸¬è©¦æ¡ˆä¾‹ç”¢ç”Ÿå·¥å…· CBTCGã€JUnitï¼Œé–‹ç™¼ä¸€å€‹æ”¯æ´è¦æ ¼é©…å‹•é–‹ç™¼çš„æ•´åˆç’°å¢ƒ CBSDDã€‚ é€™å€‹æ•´åˆç’°å¢ƒä»¥å°ˆæ¡ˆçš„å½¢å¼ï¼Œå®Œæ•´æ”¯æ´è»Ÿé«”è¦æ ¼çš„åˆ¶å®šï¼Œæ ¹æ“šè»Ÿé«”è¦æ ¼è‡ªå‹•ç”¢ç”Ÿæ¸¬è©¦æ¡ˆä¾‹ï¼Œä¸¦é€éè‡ªå‹•åŸ·è¡Œæ¸¬è©¦æ¡ˆä¾‹ï¼Œä¾†é©…å‹•ç¨‹å¼çš„å¯¦ä½œèˆ‡é‡æ§‹ã€‚ 1. Intorduction 1.1 Motivation TDD å…ˆç·¨å¯«æ¸¬è©¦æ¡ˆä¾‹ä¾†é€²è¡Œè¦ç¯„ï¼Œå¾æœªèƒ½å¤ é€šéæ¸¬è©¦æ¡ˆä¾‹çš„ç´…ç‡ˆç‹€æ…‹é–‹å§‹é€²è¡Œç¨‹å¼é–‹ç™¼ï¼Œç›´åˆ°ç¨‹å¼èƒ½å¤ é€šéæ¸¬è©¦çš„é©—è­‰é”åˆ°ç¶ ç‡ˆç‹€æ…‹ï¼Œ å†ç¶“ç”±é‡æ§‹ã€‚é€™äº› TDD æ‰€æå€¡çš„å„ªé»å¯è¦‹ TDD Concepts. å…¶ä¸­å…¬èªçš„å„ªé»ç‚ºï¼š ç¨‹å¼ä¸Šé–‹ç™¼èˆ‡å¯¦æ–½æ‰€å¾—åˆ°çš„åŠŸèƒ½é–“éƒ½å­˜åœ¨å·®è·ï¼ŒTDD ç”±å°è€Œå¿«çš„è¿­ä»£ä¸æ–·å°‡å¯¦æ–½çš„åŠŸèƒ½å›é¥‹çµ¦é–‹ç™¼è€…è€Œç¸®å°äº†å·®è·ã€‚ å¼·èª¿è‡ªå‹•çš„å–®å…ƒåŒ–æ¸¬è©¦ï¼Œè‡ªå‹•æ¸¬è©¦æä¾›å¯é çš„ç³»çµ±ï¼Œå¢å¼·æ¸¬è©¦å“è³ªä¸¦ä¸”é™ä½æ¸¬è©¦æˆæœ¬ã€‚ TDD å‰µå»ºäº†ä¸€å€‹å®Œæ•´çš„å›æ­¸æ¸¬è©¦å¹³å°ã€‚é‹è¡Œé€™äº›è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ï¼Œå¯ä»¥è¼•é¬†ç¢ºå®šæ›´æ”¹æ˜¯å¦ç ´å£äº†ç³»çµ±ä¸­çš„ä»»ä½•å…§å®¹ã€‚ å³ä½¿æ¸¬è©¦é©…å‹•é–‹ç™¼å¸¶ä¾†è«¸å¤šå¥½è™•ï¼Œä½† TDD åœ¨é–‹ç™¼è¨­è¨ˆä¸Šçš„å±¤é¢ä¾ç„¶æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ã€‚å› æ­¤æå‡ºäº† BDDã€SDDã€APDD ç­‰æ–¹æ³•ä¾†è®“ä½¿ç”¨è€…å¯ä»¥å»ºç«‹å¯åŸ·è¡Œçš„è¦ç¯„ä¾†é€²è¡Œæ¸¬è©¦ã€‚ éå»åœ˜éšŠé–‹ç™¼ Test Case Generation System[2] ä½¿ä½¿ç”¨è€…èƒ½ä»¥è¦æ ¼æ–‡ä»¶ä¾†å¾—åˆ° Testing case ä½†ç•¶æ™‚éœ€è¦ä½¿ç”¨è€…é€éä¸€å€‹æ–‡ä»¶é¸æ“‡å™¨ä¾†é¸æ“‡å°æ‡‰çš„è¼¸å…¥æ–‡ä»¶ï¼Œ é€™æ¨£çš„æ–¹å¼ç¹ç‘£ä¸” Specification file, Output file çš„é—œè¯æ€§ä¹Ÿä¸æ˜ç¢ºã€‚ [2] C.-L. Wang and N.-W. Lin, â€œ, â€œSupporting Java Array Data Typein ConstraintBased Test Case Generation for Black-Box Method-Level Unit Testing,â€ in International Computer Symposium , 2018. å› æ­¤æœ¬è«–æ–‡æå‡ºä¸€ç¨®é€é Eclipse æ’ä»¶å»ºç«‹çš„ SDD æ•´åˆç’°å¢ƒï¼Œä¾†æå‡ä½¿ç”¨è€…çš„æ“ä½œé«”é©—ã€‚ 1.2 Method æœ¬å°ˆæ¡ˆè¨­è¨ˆäº†ä¸€å€‹åŸºæ–¼ Eclipse çš„æ•´åˆç’°å¢ƒ, ä¸¦è¨­è¨ˆå‡ºä¸€å¥—å°ˆæ¡ˆæ¶æ§‹ä¾†ç®¡ç†è¦æ ¼æ–‡ä»¶èˆ‡ç”¢ç”Ÿæ¸¬è©¦æ¡ˆä¾‹, å°æ–¼æ¶æ§‹çš„è©³æƒ…è¦‹è«–æ–‡ P3 é€™è£¡ä¸è©³ç´°æ•˜è¿°ï¼Œä¸¦ä¸”é–‹ç™¼äº†å…©å€‹ Wizard ä¾†å¹«åŠ©ä½¿ç”¨è€…å»ºç«‹å°ˆæ¡ˆã€‚ Wizard: In Eclipse, a wizard is commonly used for the creation of new elements, imports or exports. fig 3. è¦æ ¼é©…å‹•é–‹ç™¼å°ˆæ¡ˆæª”æ¡ˆç›®éŒ„ åœ¨è¦æ ¼æ–‡ä»¶(Specification file)ä¸Šéœ€è¦ User æä¾›ä¸€å€‹æè¿°é¡åˆ¥åœ–èˆ‡ç²¾ç°¡ç‹€æ…‹åœ–çš„ UML å’Œ OCL fileï¼Œä½¿ç”¨ Eclipse çš„ Papyrus ä¾†ç¹ªè£½é¡åˆ¥åœ–èˆ‡ç²¾ç°¡ç‹€æ…‹åœ–ï¼Œ ä¸¦ä½¿ç”¨ä¸€å€‹åŸºæ–¼ Xtext æ‰€è£½ä½œçš„ OCL ç·¨è¼¯å™¨ä¾†ç·¨è¼¯ OCLã€‚Testing Case æ˜¯ç¶“ç”±åœ˜éšŠé–‹ç™¼çš„ OCL èªæ³•ç¶“ç”± Antlr ä¾†ç”¢ç”Ÿï¼Œæ‰€ä»¥æ‰éœ€è¦è£½ä½œä¸€å€‹ OCL ç·¨è¼¯å™¨ä¾†é€²è¡Œé«˜äº®ã€èªæ³•æª¢æŸ¥ç­‰åŠŸèƒ½ï¼Œ è®“ä½¿ç”¨è€…èƒ½ç¢ºä¿èªæ³•æ­£ç¢ºä¸¦å¯ä»¥è®“ OCL åˆ†æå™¨ä¾†é€²è¡Œåˆ†æã€‚ fig 17. è¦æ ¼é©…å‹•é–‹ç™¼æ•´åˆç’°å¢ƒï¼Œå…¶ä¸­ CBTCG æ˜¯åœ˜éšŠæ‰€é–‹ç™¼çš„æ¸¬è©¦æ¡ˆä¾‹ç”¢ç”Ÿå™¨ã€‚ NOTE Last edit 07-18-2023 12:32 æˆ‘ç›®å‰å° Eclipse èˆ‡ç›¸é—œç’°å¢ƒé–‹ç™¼ç ”ç©¶åˆ°é€™è£¡å°±å¥½ï¼Œæ›´æœ‰èˆˆè¶£çš„æ˜¯ OCL æ‰€ç”¢ç”Ÿçš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œé€™ç¯‡æ—¥å¾Œå†å›ä¾†è®€ã€‚"
  },"/jekyll/2023-05-28-characteristics_of_bdd.html": {
    "title": "Paper | A Study of the Characteristics of Behaviour Driven Development",
    "keywords": "software software_qualitiy software_development Jekyll",
    "url": "/jekyll/2023-05-28-characteristics_of_bdd.html",
    "body": "C. Solis and X. Wang, â€œA study of the characteristics of behaviour driven developmentâ€, Software Engineering and Advanced Applications (SEAA) 2011 37th EUROMICRO Conference on, pp. 383-387, 2011. æœ¬è«–æ–‡è©³ç´°å®šç¾©äº† BDD ç›¸é—œæ–‡ç»èˆ‡å·¥å…·è€Œç¢ºå®šçš„ BDD ç‰¹å¾µï¼Œç‚ºç†è§£å’Œæ“´å±• BDD å·¥å…·åŒ…æˆ–é–‹ç™¼æ–°å·¥å…·æä¾›äº†åŸºç¤ã€‚ Section 2 å›é¡§ç¾æœ‰ BDD ç ”ç©¶ï¼Œ3 æ¡ç”¨çš„ç ”ç©¶æ–¹æ³•ï¼Œ4 ä»‹ç´¹äº†ç¢ºå®šçš„ BDD æ¦‚å¿µæ¨¡å‹ï¼Œ5 ç‚ºç¸½çµã€‚ 1. Intorduction BDD æœ€åˆæ˜¯ç”± Dan Northp[3]ä½œç‚ºå° TDD ä¸­å­˜åœ¨çš„å•é¡Œçš„å›æ‡‰è€Œé–‹ç™¼çš„ã€‚ [3] D. North, Introducing BDD, 2006. Available at: http://dannorth.net/introducing-bdd [Accessed December 13, 2010]. TDD çš„ä»‹ç´¹çœ‹é€™è£¡ï¼ŒAcceptance Test Driven Development (ATDD)(é©—æ”¶æ¸¬è©¦é©…å‹•é–‹ç™¼)[1][2]æ˜¯ TDD çš„ä¸€ç¨®ç¨®é¡ï¼Œå…¶ä¸­é–‹ç™¼éç¨‹ç”±ä»£è¡¨åˆ©ç›Šç›¸é—œè€…éœ€æ±‚çš„é©—æ”¶æ¸¬è©¦é©…å‹•ã€‚ é©—æ”¶æ¸¬è©¦çš„é€šå¸¸æ˜¯éé–‹ç™¼è€…ä¹Ÿèƒ½é–±è®€çš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯åŸ·è¡Œçš„è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œä»¥ç¢ºä¿åˆ©ç›Šç›¸é—œè€…å¯ä»¥é–±è®€èˆ‡ç†è§£ï¼Œåšç‚ºé–‹ç™¼ä¸­çš„é©—æ”¶æ¨™æº–ã€‚ åˆ©ç›Šç›¸é—œè€…: ä¾‹å¦‚é …ç›®è² è²¬äººã€ç”¨æˆ¶ã€æ¥­å‹™ä»£è¡¨ç­‰ã€‚ ä½†è¨±å¤šé–‹ç™¼è€…åœ¨ä½¿ç”¨ TDD å’Œ ATDD æ™‚æœƒé–‹å§‹å›°æƒ‘ï¼Œâ€œç¨‹å¼è¨­è¨ˆå¸«æƒ³çŸ¥é“å¾å“ªè£¡é–‹å§‹ï¼Œæ‡‰è©²æ¸¬è©¦ä»€éº¼ä»¥å…§ä»¥åŠä¸æ‡‰è©²æ¸¬è©¦ä»€éº¼ï¼Œä¸€æ¬¡æ¸¬è©¦å¤šå°‘ï¼Œå¦‚ä½•å‘½åä»¥æ¸¬è©¦ï¼Œä»¥åŠå¦‚ä½•ç†è§£æ¸¬è©¦å¤±æ•—çš„åŸå› â€[3]ï¼Œ TDD å’Œ ATDD ä¹Ÿå­˜åœ¨ä¸€äº›å•é¡Œï¼Œå¦‚ä»–å€‘å°ˆæ³¨çš„æ˜¯ç³»çµ±çš„ç‹€æ…‹è€Œä¸æ˜¯ç³»çµ±çš„æœŸæœ›è¡Œç‚ºï¼Œè€Œä¸”æ¸¬è©¦ä»£ç¢¼èˆ‡å¯¦éš›ç³»çµ±çš„å¯¦ç¾é«˜åº¦è€¦åˆ[18][20]ã€‚ä¸¦ä¸”é€™äº›æ–¹æ³•ä¸­éçµæ§‹åŒ–ä¸”ç„¡é™åˆ¶çš„è‡ªç„¶èªè¨€æè¿°æ¸¬è©¦æ¡ˆä¾‹ï¼Œ ä½¿å®ƒå€‘å¾ˆé›£è¢«ç†è§£[3]ã€‚ BDD è¢«è¦–ç‚ºä¸Šé¢å…©ç¨®æ–¹æ³•çš„æ¼”é€²ï¼ŒBDD çš„é‡é»æ˜¯å¯ä»¥è‡ªå‹•åŒ–çš„æ–¹å¼å®šç¾©ç›®æ¨™ç³»çµ±è¡Œç‚ºçš„ fine-grained specifications(ç´°ç²’åº¦è¦ç¯„)ï¼Œ BDD çš„ä¸»è¦ç›®æ¨™æ˜¯ç²å¾—ç³»çµ±çš„å¯åŸ·è¡Œ specification(è¦ç¯„)[3][20]ã€‚å› æ­¤ BDD ä¸­æ¸¬è©¦å¯«å¾—å¾ˆæ¸…æ¥šèˆ‡æ˜“ç†è§£ï¼ŒBDD æä¾›ä¸€ç¨®ç‰¹å®šçš„å…±é€šèªè¨€ï¼Œ æœ‰åŠ©æ–¼åˆ©ç›Šç›¸é—œè€…æŒ‡å®šå…¶æ¸¬è©¦ã€‚é‚„æœ‰å„ç¨®æ”¯æŒ BDD çš„å·¥å…·å¦‚ JBehave [4]ã€Cucumber [5]å’ŒRSpec [6]ã€‚ Specification: åœ¨ BDD ä¸­æŒ‡çš„æ˜¯ä¸€ç¨®ä»¥äººé¡å¯è®€çš„æ–¹å¼è¡¨é”ç³»çµ±è¡Œç‚ºæœŸæœ›çš„æè¿°ï¼Œç”¨æ–¼æŒ‡å°è»Ÿä»¶é–‹ç™¼å’Œæ¸¬è©¦ã€‚ 2. RELATED WORK Carvalhoç­‰äºº[8][9]èªç‚º BDD æ˜¯ä¸€ç¨®è¦ç¯„æŠ€è¡“ï¼Œâ€œé€šéå°‡é€™äº›éœ€æ±‚çš„æ–‡æœ¬æè¿°èˆ‡è‡ªå‹•åŒ–æ¸¬è©¦ç›¸é€£æ¥ï¼Œè‡ªå‹•ç¢ºèªæ‰€æœ‰åŠŸèƒ½éœ€æ±‚åœ¨æºä»£ç¢¼ä¸­å¾—åˆ°é©ç•¶è™•ç†â€ã€‚ ä»–å€‘ä¸»è¦é—œæ³¨æ–¼ BDD ä¸­å½¢æˆä¸€ç¨®ç°¡å–®å…±é€šèªè¨€ï¼Œä½¿ç”¨é å…ˆæ¨™è¨˜çš„é›†åˆä¾†æè¿°éœ€æ±‚å’Œæ¸¬è©¦ï¼Œä½¿éœ€æ±‚è½‰åŒ–ç‚ºå¯åŸ·è¡Œçš„æ¸¬è©¦æ¡ˆä¾‹ã€‚ Tavaresç­‰äºº[7]å°‡ç„¦é»æ”¾åœ¨ BDD ä½œç‚ºä¸€ç¨®æ›´å»£æ³›çš„è¨­è¨ˆæŠ€è¡“æˆ–æ–¹æ³•è«–ä¸Šï¼Œå¼·èª¿å°‡é©—è­‰å’Œé©—æ”¶æ•´åˆåˆ°è¨­è¨ˆéšæ®µä¸­ï¼Œåœ¨é€²å…¥æ§‹æˆåŠŸèƒ½çš„æ¯å€‹éƒ¨ä»½çš„è¨­è¨ˆä¹‹å‰ï¼Œ è¦å…ˆè€ƒæ…®å®¢æˆ¶çš„é©—æ”¶æ¨™æº–ã€‚å®ƒå€‘ä¹Ÿèªç‚º BDD å¾ˆå¤§ç¨‹åº¦ä¸ŠåŸºæ–¼è¦ç¯„ä»»å‹™å’Œæ¸¬è©¦çš„è‡ªå‹•åŒ–ï¼Œéœ€è¦é©åˆçš„å·¥å…·æ”¯æŒã€‚ Keogh[10]å° BDD å‰‡æœ‰æ›´å»£æ³›çš„è§€é»ï¼Œä¸»å¼µ BDD åœ¨è»Ÿé«”é–‹ç™¼ç”Ÿå‘½é€±æœŸçš„é‡è¦æ€§ï¼Œåˆ©ç”¨ Lean thinking(ç²¾ç›Šæ€æƒ³)çš„æ¦‚å¿µå¦‚: value stream(åƒ¹å€¼æµ), pull(æ‹‰å‹•), PDCA (Plan-Do-Check-Adapt) cycle(PDCAå¾ªç’°), ä¾†æ­ç¤º BDD çš„åƒ¹å€¼ï¼Œä»–æœ‰åŠ›çš„è­‰æ˜ BDD æ¯” TDD å°è»Ÿé«”é–‹ç™¼éç¨‹æœ‰æ›´å»£æ³›çš„å½±éŸ¿ã€‚ Lean thinking: ä¸€ç¨®ç®¡ç†å’Œç”Ÿç”¢åŠ›æå‡çš„æ–¹æ³•è«–ï¼Œæ—¨åœ¨æ¸›å°‘æµªè²»ã€å¢åŠ åƒ¹å€¼å’Œæ”¹é€²æµç¨‹ä¾†å¯¦ç¾çµ„ç¹”å’Œæ¥­å‹™çš„æˆåŠŸã€‚ LazÄƒrç­‰äºº[11]ä¹Ÿå¼·èª¿ BDD åœ¨æ¥­å‹™é ˜åŸŸå’Œè»Ÿé«”é–‹ç™¼çš„äº¤äº’ä¸­çš„åƒ¹å€¼ï¼Œè²ç¨± BDD ä½¿é–‹ç™¼äººå“¡èˆ‡é ˜åŸŸå°ˆå®¶èƒ½ä½¿ç”¨ç›¸åŒçš„èªè¨€ã€‚ä»–å€‘æŒ‡å‡º BDD çš„å…©å€‹æ ¸å¿ƒåŸå‰‡: æ¥­å‹™å’ŒæŠ€è¡“äººå“¡æ‡‰è©²ä»¥ç›¸åŒçš„æ–¹å¼å°å¾…åŒä¸€ç³»çµ±ã€‚ ä»»ä½•ç³»çµ±éƒ½æ‡‰å°æ¥­å‹™å…·æœ‰ç¢ºå®šå¯é©—è­‰çš„åƒ¹å€¼ã€‚ åŸºæ–¼é€™è§€é»ï¼Œä»–å€‘åˆ†æäº† BDD æ–¹æ³•ä¸¦å°‡æ¦‚å¿µä½œç‚º Domain modelå’Œ BDD profile (BDD é…ç½®æ–‡ä»¶)ä¾†å‘ˆç¾ã€‚ Domain model: ç”¨æ–¼è¡¨ç¤ºç³»çµ±çš„æ¦‚å¿µæ¨¡å‹ï¼Œæè¿°ç³»çµ±ä¸­çš„å„å€‹å¯¦é«”èˆ‡å…¶ä¹‹é–“çš„ç›¸äº’é—œä¿‚ã€‚ BDD profile : æè¿° BDD æ¦‚å¿µå’Œè¦ç¯„çš„çµæ§‹åŒ–æ–‡ä»¶ã€‚é€šå¸¸ç”¨æ–¼æè¿°ç³»çµ±è¡Œç‚ºèˆ‡é©—æ”¶æ¨™æº–çš„é—œéµå­—ã€èªæ³•å’Œèªæ„ã€‚ 3. RESEARCH APPROACH å› ç‚ºè«–æ–‡ç™¼è¡¨æ™‚çš„ BDD æ–‡ç»å¦‚ç¬¬äºŒç¯€æ‰€ç¤ºéå¸¸æœ‰é™ï¼Œå› æ­¤ä½œè€…ä»¥åŒ…å« TDD å’Œ Domain Driven Development(DDD) çš„æ–‡ç»å›é¡§å¾Œï¼Œ ä»¥ TDD ä½œç‚ºåŸºæº–ç•Œå®š BDD çš„å…·é«”ç‰¹å¾µï¼Œå› æ­¤ä½œè€…èªç‚ºçš„ BDD å…·é«”ç‰¹å¾µæ˜¯é‚£äº›æ²’æœ‰è¢«åšç‚º TDD å ±å‘Šçš„ç‰¹å¾µã€‚ ä½œè€…æ ¹æ“š BDD Wikipediap[13]åˆ—å‡ºçš„ 40 å€‹ BDD å·¥å…·åŒ…ä¸­é¸æ“‡ã€‚ä¸¦è«®è©¢äº† BDD mailing lists [23]ï¼Œæœ€å¾Œå¾—å‡ºä¸ƒå€‹å¸¸ç”¨çš„å·¥å…·åŒ…ä¾†åˆ†æ: Cucumber [5,18]ã€Specflow [14]ã€RSpec [6,18]ã€JBehave [4]ã€MSpec [15]ã€StoryQ [12]å’ŒNBehave [16]ã€‚ Table 1 ç°¡è¿°äº†åˆ†æçš„ä¸ƒå€‹å·¥å…·åŒ…èˆ‡å…¶ç‰ˆæœ¬ã€‚ æ–‡ç»å›é¡§å’Œå·¥å…·åŒ…åˆ†æå°‡äº¤ç¹”å†ä¸€èµ·é€²è¡Œï¼Œå›é¡§ç ”ç©¶å¾Œç¢ºç«‹ BDD feature sets(ç‰¹å¾µé›†)ï¼Œç„¶å¾Œé€ä¸€åˆ†æå·¥å…·åŒ…ã€‚ç•¶ç™¼ç¾ä¸€å€‹ä¸åœ¨ç‰¹å¾µé›†ä¸­çš„ç‰¹å¾µå¾Œï¼Œæœƒå›åˆ°æ–‡ç»ä¸­äº†è§£ä»–æ˜¯å¦å¯è¢«è¦–ç‚º BDD ç‰¹å¾µï¼Œ ç›´åˆ°åˆ†æå®Œæ¯å€‹å·¥å…·åŒ…ã€‚ 4. THE CHARACTERISTICS OF BDD ä½œè€…é€éä»¥ä¸Šçš„ç ”ç©¶æ–¹æ³•ï¼Œç¢ºå®šäº†å…­å€‹ BDD çš„ä¸»è¦ç‰¹å¾µã€‚ A. Ubiquitous Language Ubiquitous Language(é€šç”¨èªè¨€)æ˜¯ BDD ä¸­çš„ä¸€å€‹é‡è¦æ¦‚å¿µï¼Œå®ƒçš„çµæ§‹åŸºæ–¼Domain modelã€‚å®ƒåŒ…å«äº†å®šç¾©ç³»çµ±è¡Œç‚ºæ‰€ä½¿ç”¨çš„è¡“èªï¼Œæ˜¯ç”¢å“åœ˜éšŠçš„æ‰€æœ‰æˆå“¡å’Œåˆ©ç›Šç›¸é—œè€…å…±äº«çš„ä¸€çµ„æ˜ç¢ºçš„è©å½™ã€‚ åœ¨è¨­è¨ˆå’Œå¯¦æ–½éšæ®µï¼Œé–‹ç™¼äººå“¡å°‡ä½¿ç”¨è©²èªè¨€ä¾†å‘½å classes &amp; methods. ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹å¯è¦‹ What is Ubiquitous Language? Examples?ã€‚ BDD æœ¬èº«åŒ…å«ä¸€å€‹é è¨­çš„ç°¡å–® Ubiquitous Language ä½†èˆ‡ç‰¹å®šé ˜åŸŸç„¡é—œï¼Œæ˜¯ç‚ºäº†æä¾›ä¸€ç¨®çµ±ä¸€çš„æ–¹å¼ä¾†æè¿°ç³»çµ±è¡Œç‚ºï¼Œç”¨æ–¼çµæ§‹ User Story(ç”¨æˆ¶æ•…äº‹)å’Œ Scenario Templates(å ´æ™¯æ¨¡æ¿)ã€‚ User Story: æè¿°ç³»çµ±çš„åŠŸèƒ½éœ€æ±‚æˆ–ç”¨æˆ¶æœŸæœ›çš„è¡Œç‚ºã€‚ Scenario Templates: å®šç¾©å…·é«”çš„æ¸¬è©¦å ´æ™¯çš„æ¨¡æ¿ï¼Œæè¿°ç‰¹å®šç”¨æˆ¶æ•…äº‹çš„å…·é«”æƒ…å¢ƒï¼Œè¡Œå‹•å’Œé æœŸçµæœã€‚ ä½œè€…æ‰€åˆ†æçš„å·¥å…·åŒ…éƒ½ä¸æ”¯æ´ç‚ºé …ç›®å‰µå»ºç‰¹å®šçš„é€šç”¨èªè¨€ã€‚ B. Iterative Decomposition Process Iterative Decomposition Process(è¿­ä»£åˆ†è§£éç¨‹)ï¼Œåœ¨æ”¶é›†éœ€æ±‚éç¨‹ä¸­ï¼Œé–‹ç™¼è€…å¾€å¾€å¾ˆé›£æ‰¾åˆ°èˆ‡å®¢æˆ¶æºé€šçš„èµ·é»ï¼Œå°¤å…¶æ˜¯å®¢æˆ¶æ‰€éœ€å¯¦ç¾çš„å•†æ¥­åƒ¹å€¼ï¼ŒBusiness value(å•†æ¥­åƒ¹å€¼)å¾€å¾€é›£ä»¥æ˜ç¢ºèˆ‡è­˜åˆ¥ã€‚ å› æ­¤ BDD ä¸­ï¼Œåˆ†æå¾è­˜åˆ¥ç³»çµ±çš„é æœŸè¡Œç‚ºé–‹å§‹ã€‚ç³»çµ±çš„è¡Œç‚ºå°‡å¾å®ƒæ‰“ç®—ç”¢ç”Ÿçš„ business outcomes(å•†æ¥­æˆæœ)ä¸­å¾—å‡ºã€‚å•†æ¥­æˆæœé€²ä¸€æ­¥ç´°åŒ–ç‚º feature sets(ç‰¹å¾µé›†åˆ)ï¼Œ ä¸€å€‹ç‰¹å¾µé›†åˆå°‡ä¸€å€‹å•†æ¥­æˆæœåˆ†å‰²æˆä¸€çµ„æŠ½è±¡çš„ç‰¹å¾µï¼Œé€™äº›ç‰¹æ€§æŒ‡æ˜äº†ç‚ºäº†å¯¦ç¾å•†æ¥­æˆæœæ‡‰è©²åšä»€éº¼ã€‚ å‡è¨­æ­£åœ¨é–‹ç™¼ä¸€å€‹è³¼ç‰©ç¶²ç«™ï¼Œå…¶ä¸­ä¸€å€‹å•†æ¥­æˆæœå°±æ˜¯ç”¨æˆ¶èƒ½ä¸‹è¨‚å–®ä¸¦è³¼è²·å•†å“ï¼Œå°±æœƒåŒ…å«å¹¾å€‹æŠ½è±¡ç‰¹å¾µé›†å¦‚ä¸‹ è¨»å†Šå’Œç™»éŒ„: ç”¨æˆ¶è¨»å†Šæ–°å¸³è™Ÿã€ç™»éŒ„ç¾æœ‰å¸³è™Ÿä»¥åŠç®¡ç†å€‹äººè³‡æ–™çš„åŠŸèƒ½ã€‚å®ƒæ˜¯å¯¦ç¾è¨‚å–®å’Œæ”¯ä»˜çš„å‰æã€‚ è¨‚å–®å’Œæ”¯ä»˜: ç”¨æˆ¶ä¸‹è¨‚å–®ä¸¦å®Œæˆæ”¯ä»˜çš„æµç¨‹ã€‚å®ƒåŒ…æ‹¬é¸æ“‡é©ç•¶çš„ä»˜æ¬¾æ–¹å¼ã€å¡«å¯«é‹é€åœ°å€å’Œä»˜æ¬¾ä¿¡æ¯ç­‰ã€‚ ç€è¦½å’Œæœç´¢: ç”¨æˆ¶å¯ä»¥ç€è¦½ç¶²ç«™ä¸Šçš„å•†å“åˆ—è¡¨ï¼Œä¸¦æä¾›æœç´¢åŠŸèƒ½ä¾†å¿«é€Ÿå°‹æ‰¾ç‰¹å®šå•†å“ã€‚ è³¼ç‰©è»Šç®¡ç†: ç”¨æˆ¶å°‡ä»–å€‘æ„Ÿèˆˆè¶£çš„å•†å“åŠ å…¥è³¼ç‰©è»Šï¼Œç®¡ç†è³¼ç‰©è»Šä¸­çš„å•†å“æ•¸é‡ã€ç§»é™¤å•†å“æˆ–æ›´æ–°æ•¸é‡ã€‚ æ¯å€‹ç‰¹å¾µé›†å’Œä»£è¡¨ä¸€å€‹é«˜å±¤æ¬¡çš„æŠ½è±¡ï¼Œè€Œå…¶ä¸­çš„ç‰¹å¾µå‰‡æ˜¯é€²ä¸€éƒ¨ç´°åˆ†çš„å…·é«”åŠŸèƒ½èˆ‡è¡Œç‚ºã€‚ è€ƒæ…®åˆ°å•†æ¥­æˆæœæ˜¯ BDD éç¨‹çš„èµ·é»ï¼Œå› æ­¤å®¢æˆ¶éœ€è¦æ˜ç¢ºæŒ‡å®šå•†æ¥­æˆæœçš„å„ªå…ˆç´šï¼Œä»¥ä½¿é–‹ç™¼äººå“¡çŸ¥é“æ‡‰é¦–å…ˆé–‹ç™¼å“ªäº›ç‰¹å¾µé›†ã€‚ ç‰¹å¾µéš¨å¾Œå¯ä»¥é€šé User Story(ç”¨æˆ¶æ•…äº‹)ä¾†å¯¦ç¾ï¼Œæä¾›äº†ç‰¹å¾µçš„ä¸Šä¸‹æ–‡ã€‚ç”¨æˆ¶æ•…äº‹æ˜¯ä»¥ç”¨æˆ¶ç‚ºå°å‘çš„ï¼Œæè¿°ç”¨æˆ¶èˆ‡ç³»çµ±ä¹‹é–“çš„äº’å‹•ï¼Œå…¶ä¸­æ‡‰è©²æ¾„æ¸…ä¸‰å€‹å•é¡Œ: ç”¨æˆ¶åœ¨ç”¨æˆ¶æ•…äº‹ä¸­çš„è§’è‰²æ˜¯ä»€éº¼? é€™æœ‰åŠ©æ–¼æ˜ç¢ºæŒ‡å®šä½¿ç”¨è€…çš„èº«ä»½å’Œè§’è‰²ã€‚ ç”¨æˆ¶å¸Œæœ›æœ‰å“ªäº›ç‰¹æ€§? é€™æè¿°äº†ç”¨æˆ¶å°ç³»çµ±åŠŸèƒ½çš„æœŸæœ›å’Œéœ€æ±‚ã€‚ å¦‚æœç³»çµ±æä¾›äº†è©²ç‰¹æ€§ï¼Œç”¨æˆ¶å¯ä»¥ç²å¾—ä»€éº¼å¥½è™•? é€™é—¡è¿°äº†ç³»çµ±åŠŸèƒ½å°ç”¨æˆ¶å¸¶ä¾†çš„åƒ¹å€¼å’Œåˆ©ç›Šã€‚ åœ¨ä¸åŒçš„æƒ…å¢ƒä¸‹ï¼Œä¸€å€‹ç”¨æˆ¶æ•…äº‹å¯èƒ½æœ‰å¤šå€‹ç‰ˆæœ¬ï¼Œé€™äº›å…·é«”çš„å¯¦ä¾‹å°±è¢«ç¨±ä½œ Scenario(å ´æ™¯)ã€‚é€™äº›æƒ…å¢ƒèˆ‡çµæœé€šå¸¸ç”±å®¢æˆ¶æä¾›ï¼ŒBDD ä¸­å ´æ™¯è¢«ç”¨ä½œé©—æ”¶æ¨™æº–ï¼Œ ç”¨æ–¼é©—è­‰ç³»çµ±æ˜¯å¦æŒ‰é€ ç”¨æˆ¶æ•…äº‹çš„è¦æ±‚æ­£ç¢ºé‹ä½œã€‚ é€™ç¨®åˆ†è§£éç¨‹æ‡‰è©²æ˜¯ iterative(è¿­ä»£)çš„ï¼Œä¹Ÿå°±æ„å‘³è‘—å°æ–¼æ¯å€‹ä¸åŒçš„å±¤ç´šé€²è¡Œåˆæ­¥çš„åˆ†æå³å¯ï¼Œå†éš¨è‘—é–‹ç™¼é€æ­¥è©³ç´°æ¯å€‹å±¤ç´šçš„ç´°ç¯€ï¼Œé€™æ¨£å°±èƒ½ä½¿åœ˜éšŠæœ‰ä¸€å€‹é«˜å±¤ç´šçš„è¦–åœ–å†é–‹å§‹å·¥ä½œï¼Œ é€™æ¨£å¯ä»¥ä½¿åœ˜éšŠæ›´å¿«çš„é–‹å§‹é€²è¡Œå¯¦ç¾å·¥ä½œï¼ŒåŒæ™‚ä¿ç•™éˆæ´»åº¦èˆ‡å¯èª¿æ•´æ€§ã€‚ åŒæ¨£ä»¥è³¼ç‰©ç¶²ç«™ç‚ºä¾‹ åˆæ­¥åˆ†æï¼šé¦–å…ˆé€²è¡Œåˆæ­¥åˆ†æï¼Œè­˜åˆ¥å‡ºè³¼ç‰©ç¶²ç«™çš„é«˜å±¤ç´šç‰¹å¾µé›†ï¼Œå¦‚å•†å“å±•ç¤ºã€è³¼ç‰©è»Šã€ä»˜æ¬¾å’Œè¨‚å–®ç®¡ç†ç­‰ã€‚ è¿­ä»£åˆ†è§£ï¼šæ¥ä¸‹ä¾†å¯ä»¥é¸æ“‡ä¸€å€‹ç‰¹å¾µé›†ï¼Œå¦‚å•†å“å±•ç¤ºé€²è¡Œåˆ†è§£ã€‚è­˜åˆ¥å‡ºæ›´å…·é«”çš„ç‰¹å¾µï¼Œå¦‚åˆ†é¡å±•ç¤ºã€æœç´¢åŠŸèƒ½ã€è©•è«–å’Œè©•åˆ†ç­‰ã€‚ ç´°åŒ–ç‰¹å¾µï¼šåœ¨é€™å€‹ç‰¹å¾µé›†ä¸­å¯ä»¥é€²ä¸€æ­¥ç´°åŒ–ç‰¹å¾µã€‚å¦‚æœç´¢ï¼Œå¯ä»¥å®šç¾©æ›´å…·é«”çš„éœ€æ±‚ï¼Œå¦‚é—œéµå­—ã€éæ¿¾å™¨å’Œæ’åºç­‰ã€‚ é›–ç„¶ä½œè€…æ‰€åˆ†æçš„å·¥å…·åŒ…(2011)ç•¶ä¸‹éƒ½ä¸æ”¯æ´è¿­ä»£åˆ†è§£ï¼Œä½†ç¾åœ¨å·²ç¶“æœ‰ä¸€äº›å·¥å…·åŒ…æ”¯æ´è¿­ä»£åˆ†è§£ä¸­çš„éœ€æ±‚åˆ†æèˆ‡è¨­è¨ˆã€‚ C. Plain Text Description with User Story and Scenario Templates Plain Text Description with User Story and Scenario Templates(ç´”æ–‡æœ¬æè¿°çš„ç”¨æˆ¶æ•…äº‹èˆ‡å ´æ™¯æ¨¡æ¿)ï¼Œ BDD ç”¨ç°¡å–®çš„é€šç”¨èªè¨€èˆ‡æ¨¡æ¿æè¿° features, user stories, scenarios, å¦‚ User stories ä»¥ä¸‹ç”¨ Dan North çš„æ¨¡æ¿ä¾†èªªæ˜[3]: [StoryTitle] (One line describing the story) As a [Role], I want a [Feature], So that I can get [Benefit] StoryTitle èˆ‡ Role æè¿°çµ¦å®šè§’è‰²ä¸‹ç”¨æˆ¶åŸ·è¡Œçš„æ´»å‹•ï¼ŒFeature å‰‡èƒ½ç¢ºä¿é–‹ç™¼äººå“¡çŸ¥é“æ‡‰è©²å¯¦ç¾å“ªäº›ç‰¹å¾µèˆ‡ç³»çµ±è¡Œç‚ºï¼Œç‚ºä»€éº¼è¦æœ‰é€™å€‹åŠŸèƒ½ä»¥åŠè©²èˆ‡èª°è¨è«–èˆ‡åˆ†æè©²åŠŸèƒ½ã€‚ ä¹Ÿèƒ½æ¸…æ¥šçš„èªªæ˜ Feature èƒ½å¸¶çµ¦ç”¨æˆ¶ä»€éº¼ Benefitï¼Œç‚ºä»€éº¼éœ€è¦é€™äº› Feature. Scenario çš„æ’°å¯«æ¨¡æ¿å‰‡å¦‚ä¸‹: Scenario 1: [Scenario Title] Given [Context] And [Some more contexts]â€¦. When [Event] Then [Outcome] And [Some more outcomes]â€¦. Scenario2: [Scenario Title] â€¦. å ´æ™¯æè¿°äº†ç•¶ç³»çµ±åœ¨ç‰¹å®šç‹€æ…‹ä¸‹ç™¼ç”Ÿäº‹ä»¶æ™‚æ‡‰è©²å¦‚ä½•è¡Œå‹•ï¼Œå ´æ™¯çš„çµæœæ˜¯æ”¹è®Šç³»çµ±ç‹€æ…‹æˆ–è¼¸å‡ºçš„å‹•ä½œã€‚å°æ–¼ä¸Šé¢å…©ç¨®æ¨¡æ¿ä¸­æ‹¬è™Ÿä¸­çš„æè¿°æ‡‰è©²ä½¿ç”¨å°ˆæ¡ˆä¸­å®šç¾©çš„ Ubiquitous Language ä¾†æ’°å¯«ã€‚ æ­¤å¤–è¦å°‡å®ƒå€‘ç›´æ¥æ˜ å°„é€²å°ˆæ¡ˆä¸­ï¼Œä¹Ÿæ„å‘³è‘— Class çš„å‘½åå’Œæ–¹æ³•ä¹Ÿæ‡‰è©²ä½¿ç”¨ Ubiquitous Language ä¾†æ’°å¯«ã€‚ ä½œè€…åˆ†æçš„å››å€‹å·¥ä½œåŒ…ä½¿ç”¨çš„æ¨¡æ¿éƒ½èˆ‡[3]çš„ç•¥æœ‰ä¸åŒï¼Œä½†éƒ½å®šç¾©äº† User story ä¸­çš„ role, feature, benefitã€‚ åœ¨ç•¶ä¸‹å·²ç¶“æœ‰ BDD ç©©å®šä¸”å»£æ³›æ‡‰ç”¨çš„é€šç”¨èªè¨€æ¨¡æ¿æ ¼å¼ï¼Œè©³æƒ…å¯ä»¥è¦‹ Gherkinï¼Œè¢« Cucumber æ‰€æ”¯æ´ã€‚ D. Automated Acceptance Testing with Mapping Rules Automated Acceptance Testing with Mapping Rules (ä½¿ç”¨æ˜ å°„è¦å‰‡çš„è‡ªå‹•åŒ–é©—æ”¶æ¸¬è©¦)ï¼ŒBDD ç¹¼æ‰¿äº† ATDD çš„è‡ªå‹•åŒ–é©—æ”¶çš„ç‰¹é»ã€‚ åœ¨ BDD ä¸­é©—æ”¶æ¸¬è©¦æ˜¯ä¸€å€‹å¯åŸ·è¡Œçš„è¦ç¯„ï¼Œé©—è­‰å°è±¡ä¹‹é–“çš„ interactions (äº¤äº’)æˆ– behavior(è¡Œç‚º)ï¼Œè€Œä¸åªæ˜¯ç‹€æ…‹[3][20]ã€‚ Automated Acceptance testing: ä½¿ç”¨è‡ªå‹•åŒ–æ¸¬è©¦å·¥å…·ä¾†åŸ·è¡Œå°ç³»çµ±è¡Œç‚ºçš„é©—è­‰ï¼Œé€™äº›æ¸¬è©¦é€šå¸¸æ˜¯å¾ User story, Scenario ä¸­ç”¢ç”Ÿçš„ã€‚ é–‹ç™¼è€…å°‡å¾ä¸€å€‹è¿­ä»£åˆ†è§£çš„éç¨‹ä¸­ç”Ÿæˆçš„ Scenario(å ´æ™¯)é–‹å§‹ï¼Œå ´æ™¯å°‡è¢«è½‰åŒ–ç‚ºæ¸¬è©¦é©—è­‰å¯¦ç¾ã€‚å ´æ™¯çš„æ¯ä¸€å€‹æ­¥é©Ÿæ˜¯ä¸€å€‹è¡¨ç¤ºå ´æ™¯ä¸­çš„æŠ½è±¡å…ƒç´ ï¼Œé€™äº›å…ƒç´ åŒ…æ‹¬: contexts, events, actionsã€‚ä¾‹å¦‚åœ¨ User story æˆ– context C çš„ç‰¹å®šæƒ…æ³ä¸‹ï¼Œç•¶ event X ç™¼ç”Ÿï¼Œç³»çµ±åœ°å›ç­”æ‡‰è©²æ˜¯ Zã€‚æ¯å€‹æ­¥é©Ÿéƒ½è¢«æ˜ å°„åˆ°ä¸€å€‹æ¸¬è©¦æ–¹æ³•ã€‚ æ¯å€‹æ­¥é©Ÿéƒ½å°‡éµå¾ª TDD çš„æµç¨‹å³ â€œred, green, refactoringâ€ ä»¥ä½¿å…¶é€šéã€‚ Mapping rules(æ˜ å°„è¦å‰‡)å‰‡æä¾›äº†ä¸€å€‹å ´æ™¯åˆ° Test code(æ¸¬è©¦ä»£ç¢¼)æˆ– Specification code (è¦ç¯„ä»£ç¢¼)çš„æ¨™æº–æ˜ å°„ã€‚ä½œè€…æ‰€ç ”ç©¶çš„å·¥å…·ä¸­æ˜ å°„è¦å‰‡æœ‰ä¸åŒçš„è®ŠåŒ–: JBehave: ä¸€å€‹ User story æ˜¯ä¸€å€‹åŒ…å–Šä¸€çµ„ Scenario çš„æ–‡ä»¶ï¼Œæ–‡ä»¶çš„åç¨±è¢«æ˜ å°„åˆ° Class çš„å‘½åï¼Œæ¯å€‹ Scenario çš„æ­¥é©Ÿéƒ½è¢«æ˜ å°„åˆ°ä¸€å€‹ Test Method(æ¸¬è©¦æ–¹æ³•)ã€‚ é€šå¸¸æ¸¬è©¦æ–¹æ³•çš„åç¨±èˆ‡ User story æ–‡æœ¬ç›¸åŒã€‚åŒ…å«æ¸¬è©¦æ–¹æ³•çš„ Class å‰‡ä¸é ˆèˆ‡å ´æ™¯ç›¸åŒã€‚è©³æƒ…å¯è¦‹ JBehave Writing Textual Storiesã€‚ Cucumber: Cucumberä½¿ç”¨æ­£å‰‡è¡¨é”å¼é€²è¡Œæ˜ å°„ï¼Œæ˜ å°„æ–¹æ³•å¯è¦‹ Cucumber Expressionsã€‚ E. Readable Behaviour Oriented Specification Code Readable Behaviour Oriented Specification Code (å¯è®€çš„è¡Œç‚ºå°å‘çš„è¦ç¯„ä»£ç¢¼)ï¼ŒBDD å»ºè­°ä»£ç¢¼æ‡‰è©²æ˜¯ç³»çµ±æ–‡æª”çš„ä¸€éƒ¨ä»½ï¼Œèˆ‡æ•æ·çš„åƒ¹å€¼è§€ä¸€è‡´ã€‚ ä»£ç¢¼æ‡‰è©²æ˜¯å¯è®€çš„ï¼Œè¦ç¯„æ‡‰è©²æ˜¯ä»£ç¢¼çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ Method name æ‡‰è©²æŒ‡å‡º Method æ‡‰è©²åŸ·è¡Œçš„æ“ä½œï¼ŒClass, Method name éƒ½æ‡‰è©²ä»¥å¥å­å½¢å¼æ’°å¯«ã€‚ Mapping rules æœ‰åŠ©æ–¼ç”Ÿæˆå¯è®€çš„è¡Œç‚ºå°å‘çš„ä»£ç¢¼ï¼Œå®ƒç¢ºä¿ Class, Method name èˆ‡ User story å’Œ Scenario çš„æ¨™é¡Œç›¸åŒã€‚ ç›®å‰å¤§éƒ¨åˆ†çš„ BDD å·¥å…·éƒ½æ”¯æŒå°‡ Scenario ä¸­çš„è¦ç¯„è½‰ç‚ºä»£ç¢¼çš„æ–¹æ³•ã€‚ F. Behaviour Driven at Different Phases Behaviour Driven at Different Phases(ä¸åŒéšæ®µçš„è¡Œç‚ºé©…å‹•)ï¼Œé€™è£¡è¨è«–äº†è¡Œç‚ºé©…å‹•åœ¨è»Ÿé«”é–‹ç™¼ä¸­çš„ä¸åŒéšæ®µã€‚ è¨ˆç•«éšæ®µ: å®šç¾©å•†æ¥­æˆæœï¼Œæè¿°ç³»çµ±æ‡‰è©²å¯¦ç¾çš„æœŸæœ›è¡Œç‚ºã€‚ä¾‹å¦‚: ç”¨æˆ¶èƒ½å¤ å®Œæˆè³¼ç‰©ä¸¦é †åˆ©æ”¯ä»˜è¨‚å–®ã€‚ åˆ†æéšæ®µ: å•†æ¥­æˆæœè¢«åˆ†è§£ç‚ºä¸€çµ„ç‰¹æ€§ï¼Œé€™äº›ç‰¹æ€§æ•æ‰ç›®æ¨™ç³»çµ±çš„è¡Œç‚ºã€‚ä¾‹å¦‚: ç”¨æˆ¶è¨»å†Šï¼Œå•†å“ç®¡ç†ï¼Œè¨‚å–®è™•ç†ç­‰ç­‰.. é€™äº›ç‰¹æ€§å°‡æœƒè¢«è½‰åŒ–ç‚º User stoiesã€‚ å¯¦æ–½éšæ®µ: Automated Acceptance testing ä¸­ Testing Clases æ˜¯æ ¹æ“š Scenario æ‰€ç”¢ç”Ÿçš„ã€‚ å› æ­¤ Class name æŒ‡æ˜äº†è©² Class è©²åšä»€éº¼æˆ–è¡Œç‚ºæ˜¯ä»€éº¼ï¼Œé€™ä½¿é–‹ç™¼è€…èƒ½è€ƒæ…®å®ƒå€‘é–‹ç™¼ä¸­çš„çµ„ä»¶çš„è¡Œç‚ºï¼Œä»¥åŠèˆ‡ä¹‹äº¤æˆ¶çš„å…¶ä»–å°è±¡çš„è§’è‰²èˆ‡è²¬ä»»ã€‚ åœ¨ä½œè€…ç ”ç©¶çš„ç•¶ä¸‹é‚„æ²’æœ‰é‡å°å®šç¾©å•†æ¥­æˆæœä¹Ÿå°±æ˜¯è¨ˆç•«éšæ®µçš„æ”¯æŒï¼Œå¤§éƒ¨åˆ†çš„å·¥å…·åŒ…éƒ½å°ˆæ³¨æ–¼ User stoies, Scenario çš„æ’°å¯«èˆ‡æ¸¬è©¦è‡ªå‹•åŒ–ã€‚ Table 2 ç¸½çµäº†ä½œè€…åˆ†æçš„ä¸ƒå€‹å·¥å…·çš„å°æ–¼é€™äº›ç‰¹å¾µçš„æ”¯æŒæƒ…æ³ Fig 1 æ˜¯ä¸€å€‹ä»¥ UML class diagram ä¾†å‘ˆç¾çš„å…­å€‹ç‰¹å¾µä¹‹é–“çš„æ¦‚å¿µèˆ‡é—œä¿‚æ¨¡å‹ V. CONCLUSIONS BDD æ˜¯å¤šç¨®æ–¹æ³•çš„çµåˆï¼Œå¦‚ ubiquitous language, TDD, automated acceptance testingã€‚ä½œè€…é€šéæ–‡ç»å›é¡§èˆ‡å·¥å…·åŒ…çš„åˆ†æä¾†ç¢ºèªäº†å…­å€‹ BDD çš„ä¸»è¦ç‰¹å¾µã€‚ ä¸¦é€éé€ä¸€åˆ†æç ”ç©¶è¡¨æ˜äº†é€™äº›ç‰¹å¾µä¹‹é–“çš„äº’ç›¸é—œè¯ã€‚ä¸¦æå‡ºäº†ä¸€å€‹ BDD çš„æ¦‚å¿µæ¨¡å‹ Fig. 1.ã€‚ è€Œå°æ–¼æ–°çš„ç ”ç©¶æ–¹å‘å‰‡æŒ‡å‡ºï¼Œ 2011 çš„ç•¶ä¸‹å·¥å…·åŒ…éƒ½ä¸»è¦é—œæ³¨æ–¼è»Ÿé«”é–‹ç™¼çš„å¯¦è¸éšæ®µï¼Œå°æ–¼åˆ†æçš„æ”¯æŒæœ‰é™ï¼Œè€Œè¨ˆåŠƒéšæ®µå‰‡æ ¹æœ¬æ²’æœ‰ï¼Œé€™æ˜¯ä¸€å€‹å¯æ“´å±•çš„ç ”ç©¶æ–¹å‘ã€‚ è€Œå¦ä¸€é …å‰‡æ˜¯å¯ä»¥æ“´å±• BDD çš„æ˜ å°„è¦å‰‡ï¼Œ2011 ç¾æœ‰çš„å·¥å…·åŒ…éƒ½é—œæ³¨æ–¼ User story, Scenario æ˜ å°„åˆ°ä»£ç¢¼ï¼Œæ­¤å¤– feature sets(ç‰¹å¾µé›†) ä¹Ÿå¯ä»¥è¢«æ˜ å°„åˆ°å‘½åç©ºé–“ä¸­ï¼Œ åœ¨æ­¤ä¹‹ä¸‹å†åŠ å…¥å ´æ™¯çš„æ¸¬è©¦[10]ã€‚ [10] E. Keogh, BDD: A Lean Toolkit. In Processings of Lean Software &amp; Systems Conference, Atlanta, 2010. NOTE Last edit 06-18-2023 22:56"
  },"/jekyll/2023-05-20-analysis_mutation_testing.html": {
    "title": "Paper | An Analysis and Survey of the Development of Mutation Testing",
    "keywords": "software software_qualitiy mutation_testing Jekyll",
    "url": "/jekyll/2023-05-20-analysis_mutation_testing.html",
    "body": "Yue Jia, Mark Harman, â€¦ (2011), An Analysis and Survey of the Development of Mutation Testing. ç”¨é€™ç¯‡è«–æ–‡ç†Ÿæ‚‰ä»€éº¼æ˜¯çªè®Šæ¸¬è©¦(Mutation Testing). çªè®Šæ¸¬è©¦æ˜¯ç”¨ä¾†æª¢æ¸¬æ¸¬è©¦é›†åˆèƒ½å¦ç™¼ç¾æ•…éšœçš„èƒ½åŠ›ï¼Œ é€™ç¯‡æ–‡ç« å…¨é¢åˆ†æäº†ä¸€ç³»åˆ—çªè®Šæ¸¬è©¦çš„æ–¹æ³•ã€å·¥å…·ã€ç™¼å±•å’Œé©—è­‰çµæœï¼Œæœ¬æ–‡å¼•ç”¨çœ¾å¤šä¸”è©³ç´°ï¼Œé–±è®€æ™‚è¦æ­é…åŸæ–‡çš„ç´¢å¼•é–±è®€ã€‚ Section 2 æ˜¯çªè®Šæ¸¬è©¦çš„å¹¾æœ¬ç†è«–ï¼Œ3 ~ 5 è©³ç´°ä»‹ç´¹çªè®ŠæŠ€è¡“èˆ‡æ‡‰ç”¨ï¼Œ6 æ˜¯ç¸½çµç ”ç©¶ç¶“é©—ï¼Œ7 æ˜¯çªè®Šå·¥å…·çš„é–‹ç™¼å·¥ä½œï¼Œ8 è¨è«–ç›®å‰çš„è­‰æ˜ï¼Œ9 å‰‡æ˜¯å°šæœªè§£æ±ºçš„å•é¡Œèˆ‡éšœç¤™ï¼Œ10 ç‚ºç¸½çµã€‚ Section 3 ä»¥å¾Œæ˜¯è©³ç´°æŠ€è¡“ä»‹ç´¹ï¼Œå¦‚æœåªæƒ³ç°¡å–®ç†è§£ä»€éº¼æ˜¯çªè®Šæ¸¬è©¦è®€ 1ã€2ã€10 å³å¯ã€‚ 1. Intorduction çªè®Šæ¸¬è©¦(Mutation Testing)æ˜¯ä¸€ç¨®åŸºæ–¼æ•…éšœçš„æ¸¬è©¦æŠ€è¡“ï¼Œå¯ä»¥æä¾›ä¸€å€‹ç¨±ç‚º Mutation adequacy score(çªè®Šé©æ‡‰æ€§åˆ†æ•¸)çš„æ¸¬è©¦æº–å‰‡ä¾†è©•ä¼°æ¸¬è©¦é›†åˆåœ¨æª¢æ¸¬æ•…éšœæ–¹é¢çš„æœ‰æ•ˆæ€§ã€‚ çªè®Šæ¸¬è©¦ä½¿ç”¨çš„æ•…éšœä»£è¡¨ç¨‹åºå“¡å¸¸æœƒçŠ¯çš„éŒ¯èª¤ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥æ¨¡æ“¬ä»»ä½• Test adequacy criteria(æ¸¬è©¦é©ç•¶æ€§æº–å‰‡)ã€‚é€éç°¡å–®çš„èªæ³•è®ŠåŒ–å´å…¥åŸå§‹ç¨‹å¼ä¸­ï¼Œç¨±ç‚ºçªè®Šé«”ã€‚é€™äº›çªè®Šé«”æœƒåŸ·è¡Œè¼¸å…¥è¼¸å‡ºæ¸¬è©¦é›†åˆï¼Œå¦‚æœä¸€å€‹çªè®Šé«”çš„çµæœèˆ‡åŸå§‹ç¨‹å¼ä¸åŒå°±è¡¨ç¤ºæª¢æ¸¬åˆ°ä¸€å€‹æ•…éšœçªè®Šé«”ï¼Œäº¦ç¨±ç‚ºkilled mutant(æ®ºæ­»çªè®Šé«”)ã€‚ Mutation adequacy scoreï¼š çªè®Šæ¸¬è©¦çš„æ¸¬è©¦æº–å‰‡ï¼Œæ˜¯æª¢æ¸¬åˆ°çš„çªè®Šæ•¸é‡èˆ‡ç”Ÿæˆçªè®Šé«”çš„ç¸½æ•¸çš„æ¯”ä¾‹ï¼Œå…¬å¼ç‚º(æª¢æ¸¬åˆ°çš„çªè®Š/ç”Ÿæˆçªè®Šæ•¸é‡)ã€‚ Test adequacy criteria: ä¸€çµ„å¯ç”¨æ–¼åˆ¤æ–·æ˜¯å¦é€²è¡Œäº†å……åˆ†æ¸¬è©¦çš„è¦å‰‡ï¼Œä¹Ÿå¯æŒ‡å°æ¸¬è©¦æ•¸æ“šçš„é¸æ“‡ï¼Œæ˜ç¢ºçš„èªªæ˜å¦‚ä½•é¸æ“‡æ¸¬è©¦æ•¸æ“šã€‚ Mutation score = (number of killed mutants/total number of mutants killed or surviving) x 100 çªè®Šæ¸¬è©¦çš„æ¦‚å¿µå¯ä»¥è¿½æº¯åˆ° 1971, ç•¶æ™‚ Lipton åœ¨ä¸€ç¯‡å­¸ç”Ÿè«–æ–‡ä¸­æå‡ºäº†é€™ä¸€æ¦‚å¿µã€‚Mutation testing å¯ä»¥æ‡‰ç”¨åœ¨è»Ÿé«”æ¸¬è©¦çš„å–®å…ƒå±¤ã€é›†æˆå±¤å’Œè¦ç¯„å±¤ã€‚å·²ç¶“åœ¨è¨±å¤šç·¨ç¨‹èªè¨€ä¸­å¾—åˆ°æ‡‰ç”¨ï¼Œæ˜¯ä¸€ç¨®ç™½ç›’å–®å…ƒæ¸¬è©¦æŠ€è¡“ã€‚åŒæ™‚ä¹Ÿå¯ä»¥åœ¨è¨­è¨ˆå±¤æ¬¡ç”¨æ–¼æ¸¬è©¦ç¨‹å¼çš„è¦ç¯„æˆ–æ¨¡å‹ï¼Œ å¦‚ Mutation Testingå·²ç¶“æ‡‰ç”¨æ–¼æœ‰é™ç‹€æ…‹æ©Ÿã€Statechartsã€Estelleè¦ç¯„ã€Petriç¶²çµ¡ã€ç¶²çµ¡å”è­°ã€å®‰å…¨ç­–ç•¥å’ŒWebæœå‹™ç­‰é ˜åŸŸã€‚ æœ¬æ–‡ä½œè€…æ•´ç†äº†ä¸€ç³»åˆ—çš„çªè®Šæ¸¬è©¦è«–æ–‡ï¼Œå°‡é‡è¦çš„è«–æ–‡è¨»è¨˜æ–¼ Table. 1.ï¼ŒåŠé—œæ–¼å¢é•·è¶¨å‹¢çš„åœ–è¡¨ Fig. 1.ã€‚ 2. The theory of mutation testing 2.1 Fundamental Hypotheses çªè®Šæ¸¬è©¦å¸Œæœ›èƒ½å¤ æœ‰æ•ˆçš„è­˜åˆ¥è¶³å¤ çš„æ¸¬è©¦æ•¸æ“šï¼Œç”¨æ–¼ç™¼ç¾çœŸæ­£çš„æ•…éšœã€‚[96]ä½†æ˜¯æ½›åœ¨çš„æ•…éšœæ˜¯å·¨å¤§çš„ï¼Œä¸å¯èƒ½ä»£è¡¨æ‰€æœ‰çš„çªè®Šé«”ï¼Œé€™æ˜¯ä¸€å€‹é‡å°æ•…éšœçš„å­é›†ï¼Œå¸Œæœ›æ¥è¿‘æ¨¡æ“¬æ‰€æœ‰æ•…éšœã€‚ é€™å€‹ç†è«–å»ºç«‹æ–¼å…©å€‹å‡è¨­ the Competent Programmer Hypothesis(CPH) å’Œ Coupling Effect(CE)ï¼š CPH(åˆæ ¼ç¨‹åºå“¡å‡è¨­)[3][66]ï¼š å‡è¨­ç·¨ç¨‹äººå“¡æ˜¯æœ‰èƒ½åŠ›çš„ï¼Œä»–å€‘ç›¡åŠ›å»æ›´å¥½åœ°é–‹ç™¼ç¨‹åºï¼Œé”åˆ°æ­£ç¢ºå¯è¡Œçš„çµæœã€‚å› æ­¤å¯èƒ½æœ‰ç¨‹å¼ä¸­æœ‰éŒ¯èª¤ï¼Œä½†åªæ˜¯ä¸€äº›å°çš„èªæ³•æ›´æ”¹ä¿®æ­£çš„ç°¡å–®éŒ¯èª¤ã€‚ ä¸¦ä¸”åœ¨éƒ¨åˆ†è«–æ–‡ä¸­ä¹Ÿå¼•å…¥äº† Program neighborhoods(ç¨‹åºé„°åŸŸ)çš„æ¦‚å¿µ[37] CE(è€¦åˆæ•ˆæ‡‰)[66]ï¼š [66]æå‡ºå¾Œï¼Œ Offutt é€²è¡Œäº†æ“´å±• Coupling Effect Hypothesisï¼Œ Mutation Coupling Effect Hypothesis[174][175]ã€‚ Coupling Effect Hypothesisï¼šæ¸¬è©¦æ•¸æ“šé›†å¯ä»¥æª¢æ¸¬åˆ°ç”±ç°¡å–®éŒ¯èª¤ï¼ŒåŒæ™‚ä¹Ÿèƒ½éš±å«åœ°æª¢æ¸¬æ›´è¤‡é›œçš„éŒ¯èª¤ã€‚ Mutation Coupling Effect Hypothesis: å› æ­¤è¤‡é›œçªè®Šé«”èˆ‡ç°¡å–®çªè®Šé«”ä¹‹é–“ä¹Ÿå­˜åœ¨è‘—è€¦åˆé—œä¿‚ã€‚ å› æ­¤å‚³çµ± Mutation testing ä¸­åƒ…åƒ…æœƒä½¿ç”¨ç°¡å–®çªè®Šé«”é€²è¡Œæ¸¬è©¦ã€‚ [3] A.T. Acree, T.A. Budd, R.A. DeMillo, R.J. Lipton, and F.G. Sayward, â€œMutation Analysis,â€ Technical Report GIT-ICS-79/08, Georgia Inst. of Technology, 1979. [66] R.A. DeMillo, R.J. Lipton, and F.G. Sayward, â€œHints on Test Data Selection: Help for the Practicing Programmer,â€ Computer, vol. 11, no. 4, pp. 34-41, Apr. 1978. é—œæ–¼ CEH çš„æœ‰æ•ˆæ€§å·²ç¶“æœ‰å¾ˆå¤šç ”ç©¶é©—è­‰[145], [164], [174], [175]ã€‚å…¶ä¸­è­‰æ˜äº†å¾ä¸€éšçªè®Šé«”ç”Ÿæˆçš„æ¸¬è©¦åŠå°æ–¼ kth oredr çš„çªè®Šé«”åŒæ¨£èƒ½æœ‰æ•ˆæŒ‡å‡ºéŒ¯èª¤ (k = 2; â€¦ ; 4)ï¼Œ èƒ½æ®ºæ­»ä¸€éšçªè®Šé«”çš„æœ‰æ•ˆæ•¸æ“šåŒæ¨£ä¹Ÿèƒ½æ®ºæ­» 99% ä»¥ä¸Šçš„äºŒã€ä¸‰éšçªè®Šé«”ã€‚[242], [243], [244], æå‡ºäº†ä¸€å€‹ç°¡å–®çš„ç†è«–æ¨¡å‹ the q function modelï¼Œå°‡ç¨‹å¼è¦–ç‚ºä¸€çµ„æœ‰é™å‡½æ•¸ã€‚ å°‡æ¸¬è©¦é›†ç”¨æ–¼ä¸€éšèˆ‡äºŒéšæ¨¡å‹ï¼Œå­˜æ´»æ¯”ä¾‹åˆ†åˆ¥ç‚º $\\frac{1}{n}$ å’Œ $\\frac{1}{n^2}$ n æ˜¯éšæ•¸ã€‚[125]ä¸­å¯ä»¥æ‰¾åˆ°é—œæ–¼ the boolean logic faults çš„è€¦åˆæ•ˆæ‡‰çš„æ­£å¼è­‰æ˜ã€‚ [125] K. Kapoor, â€œFormal Analysis of Coupling Hypothesis for Logical Faults,â€ Innovations in Systems and Software Eng., vol. 2, no. 2, pp. 80-87, July 2006. 2.2 The Process of Mutation Analysis Fig. 2. æ˜¯çªè®Šåˆ†æçš„å‚³çµ±æµç¨‹åœ–ï¼Œå°‡åŸå§‹ç¨‹å¼é€²è¡Œå–®ä¸€çš„èªæ³•æ”¹è®Šï¼Œç”¢ç”Ÿæœ‰ç¼ºé™·çš„ç¨‹å¼ Pâ€™ï¼Œç¨±ä½œ The mutant(çªè®Šé«”)ï¼Œå¦‚ Table. 2. åƒ…å°‡ &amp;&amp; æ”¹è®Šç‚º ||ã€‚ é€™ç¨®è½‰æ›è¦å‰‡ç¨±ä½œ mutation operator(çªè®Šé‹ç®—ç¬¦)ï¼Œå…¸å‹çš„çªè®Šé‹ç®—ç¬¦ç”¨æ–¼æ›¿æ›ã€æ’å…¥æˆ–åˆªé™¤é‹ç®—ç¬¦ä¾†ä¿®æ”¹è®Šæ•¸å’Œè¡¨é”å¼ã€‚ Table. 3. æ˜¯ Fortran çš„ç¬¬ä¸€å¥—æ­£å¼çªè®Šé‹ç®—ç¬¦ï¼Œ åœ¨ Mothra mutation system ä¸Šè¢«å¯¦ç¾ã€‚ [123] ä½¿ç”¨äº†ä¸€ç¨®è…³æœ¬èªè¨€ Mutation Operator Constraint Script (MOCS)ï¼Œæä¾›å…©ç¨®é¡å‹çš„ç´„æŸ: Direct Substitution Constraint: å…è¨±ç”¨æˆ¶é¸æ“‡ç‰¹å®šçš„è½‰æ›è¦å‰‡ä¾†åŸ·è¡Œç°¡å–®çš„è®Šæ›´ï¼Œå¦‚å°‡ä¸€ç¨®é‹ç®—ç¬¦è½‰æ›ç‚ºå¦ä¸€ç¨®ã€‚ Environmental Condition Constraint: æŒ‡å®šé©ç”¨æ–¼çªè®Šçš„ç‰¹å®šç’°å¢ƒæ¢ä»¶ï¼Œä¾‹å¦‚çªè®Šæ“ä½œåªåœ¨ç‰¹å®šçš„ä½œæ¥­ç³»çµ±ä¸‹ç”Ÿæ•ˆã€‚ [217] æå‡ºä¸€ç¨®è½‰æ›èªè¨€ MUDELï¼Œç”¨æ–¼æŒ‡å®šçªè®Šæ“ä½œç¬¦çš„æè¿°ï¼Œå¯ä»¥å®šç¾©ç‚ºæ•æ‰æŸç¨®ç¨‹å¼ä¸­çš„èªæ³•è¦å‰‡é€²è¡Œä¿®æ”¹ã€‚æ›´è©³ç´°çš„èªªæ˜å¯åœ¨ Offutt ç­‰çš„å·¥ä½œä¸­æ‰¾åˆ°[177] ç„¶å¾Œåœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œæˆ‘å€‘è¦å…ˆç¢ºä¿åŸå§‹ç¨‹å¼ p èƒ½é€šéæ¸¬è©¦é›†åˆ Tï¼Œä»¥é©—è­‰æ¸¬è©¦é›†åˆçš„æ­£ç¢ºæ€§ã€‚ T ä¸­çš„æ¯å€‹æ¸¬è©¦ç”¨ä¾‹é‹è¡Œ pâ€™ èˆ‡ p çš„çµæœç›¸åŒå‰‡ç¨±ç‚º survived(å­˜æ´»)ï¼Œå¦å‰‡å‰‡ç¨±ç‚º killed(æ®ºæ­»)ã€‚ killed: ä»£è¡¨èƒ½å¤ æ‰¾å‡º pâ€™ çš„éŒ¯èª¤ï¼Œå› æ­¤ä¹Ÿä»£è¡¨èƒ½æ‰¾å‡º p çš„éŒ¯èª¤ã€‚ survived: ç„¡æ³•æª¢æ¸¬å‡º pâ€™ çš„éŒ¯èª¤ï¼Œä»£è¡¨é€™å€‹æ¸¬è©¦ç”¨ä¾‹ä¹Ÿç„¡æ³•æ‰¾å‡º p çš„éŒ¯èª¤ã€‚ å› æ­¤æˆ‘å€‘æœƒå¸Œæœ›ä¸€å€‹æ¸¬è©¦ç”¨ä¾‹èƒ½æ®ºæ­»ç›¡å¯èƒ½å¤šçš„çªè®Šé«”ï¼Œå› ç‚ºé€™æ¨£æ‰ä»£è¡¨é€™å€‹æ¸¬è©¦ç”¨ä¾‹æ˜¯æœ‰æ•ˆçš„èƒ½æª¢æ¸¬å‡ºå¤šå€‹éŒ¯èª¤æƒ…æ³ã€‚ ç‚ºäº†æ”¹é€² Tï¼Œæ¸¬è©¦è€…å¯ä»¥æä¾›é¡å¤–çš„è¼¸å…¥ä¾†æ®ºæ­»å­˜æ´»çš„çªè®Šé«”ã€‚ä½†æœ‰äº›çªè®Šé«”æ˜¯ç„¡æ³•è¢«æ®ºæ­»çš„ï¼Œä»–å€‘ç¨±ç‚º Equivalent Mutants(ç­‰æ•ˆçªè®Šé«”)ï¼Œ å®ƒå€‘åœ¨èªæ³•ä¸Šæœ‰æ‰€ä¸åŒä½†åŠŸèƒ½ç­‰åŒæ–¼åŸå§‹ç¨‹å¼ã€‚è‡ªå‹•æª¢æ¸¬æ˜¯ä¸å¯èƒ½çš„[35]ï¼Œ[187]ï¼Œå›  program equivalence æ˜¯ç„¡æ³•åˆ¤å®šçš„ï¼Œ å› æ­¤é€™æ˜¯é˜»ç¤™çªè®Šæ¸¬è©¦æ‡‰ç”¨çš„éšœç¤™ä¹‹ä¸€ã€‚ é—œæ–¼çªè®Šåˆ†æçš„æœ€çµ‚ç›®çš„å°±æ˜¯ Adequacy Score(é©æ‡‰æ€§åˆ†æ•¸)ï¼Œå³æ˜¯ Mutation Score(çªè®Šåˆ†æ•¸)ï¼Œä»–è¡¨ç¤ºè¼¸å…¥æ¸¬è©¦é›†çš„å“è³ªã€‚ çªè®Šåˆ†æçš„ç›®æ¨™æ˜¯å°‡åˆ†æ•¸æé«˜åˆ° 1ï¼Œè¡¨ç¤ºæ¸¬è©¦é›†åˆ T è¶³ä»¥æª¢æ¸¬åˆ°çªè®Šé«”è¡¨ç¤ºçš„æ‰€æœ‰æ•…éšœã€‚ 2.3 The Problems of Mutation Analysis é˜»ç¤™çªè®Šæ¸¬è©¦æˆç‚ºå¯¦ç”¨æ¸¬è©¦æŠ€è¡“çš„ç¬¬ä¸€å€‹å•é¡Œæ˜¯å°æ¸¬è©¦é›†åŸ·è¡Œå¤§é‡çªè®Šé«”çš„é«˜è¨ˆç®—æˆæœ¬ã€‚å…¶ä»–å•é¡Œå‰‡èˆ‡ä½¿ç”¨çªè®Šæ¸¬è©¦æŠ•å…¥çš„äººåŠ›æˆæœ¬æœ‰é—œï¼Œ å¦‚ Human oracle problem(äººé¡é æœŸå•é¡Œ)[247]å’Œ Equivalent mutants(ç­‰æ•ˆçªè®Šé«”å•é¡Œ)[35]ã€‚ Human oracle problem: æ˜¯æŒ‡æ¯å€‹æ¸¬è©¦ç”¨ä¾‹éœ€è¦äººé¡ä¾†é©—è­‰æ¸¬è©¦çµæœçš„å•é¡Œï¼ŒèŠ±è²»æ™‚é–“ä¾†æª¢æŸ¥çµæœæ˜¯å¦ç¬¦åˆé æœŸã€‚ Equivalent mutants: ç”±æ–¼ä¸å¯åˆ¤å®šæ€§ï¼Œå¾€å¾€éœ€è¦é¡å¤–çš„äººåŠ›æŠ•å…¥ã€‚ ç¾æœ‰çš„çªè®Šæ¸¬è©¦é€²å±•ï¼Œé›–ç„¶é‚„æœªå®Œå…¨è§£æ±ºé€™äº›å•é¡Œï¼Œä½†çªè®Šæ¸¬è©¦çš„éç¨‹å·²ç¶“å¯ä»¥è‡ªå‹•åŒ–ï¼Œä¸¦ä¸”é‹è¡Œæ™‚å¯ä»¥å¯¦ç¾åˆç†çš„æ“´å±•æ€§ã€‚ 3. Cost Reduction Techniques å‚³çµ±çš„ Mothra ä¸­æ‰€æœ‰çš„çªè®Šé«”éƒ½è¦è¢«è€ƒæ…®åœ¨å…§ï¼Œç‚ºäº†ä½¿ Mutation testing æˆç‚ºå¯¦ç”¨çš„æ¸¬è©¦æŠ€è¡“ï¼Œè¨±å¤šæˆæœ¬é™ä½æŠ€è¡“è¢«æå‡ºï¼Œ[191]çš„èª¿æŸ¥ä¸­åˆ†ç‚ºä¸‰é¡: â€œdo fewerâ€, â€œdo fasterâ€, â€œdo smarterâ€. åœ¨æœ¬æ–‡ä¸­å°‡æŠ€è¡“æ•´ç†ç‚ºå…©é¡ï¼Œä¸¦åœ¨ 3.1 èˆ‡ 3.2 å„è‡ªä»‹ç´¹: reduction of the generated mutants: æ¸›å°‘ç”Ÿæˆçš„çªè®Šé«”å°æ‡‰ â€œdo fewerâ€ reduction of the execution cost: æ¸›å°‘é‹ç®—æˆæœ¬å°æ‡‰ â€œdo fasterâ€, â€œdo smarterâ€ Fig. 3. æ˜¯å·²ç™¼è¡¨é—œæ–¼é™ä½æˆæœ¬çš„æƒ³æ³•çš„æ™‚é–“ç™¼å±•èˆ‡æƒ…æ³ ä½œè€…æ•´ç†çš„ç•¶ä¸‹ Selective Mutation(é¸æ“‡æ€§çªè®Š), Weak Mutation(å¼±çªè®Š)æ˜¯æœ€å»£æ³›ä½¿ç”¨çš„æˆæœ¬é™ä½æŠ€è¡“ï¼Œè¦‹è«–æ–‡ Fig. 4. 3.1 Mutant Reduction Techniques å†ä¸åš´é‡å½±éŸ¿æ¸¬è©¦æ•ˆæœçš„æƒ…æ³ä¸‹æ¸›å°‘ç”¢ç”Ÿçš„çªè®Šé«”æ•¸é‡æ˜¯ä¸€å€‹ç†±é–€çš„ç ”ç©¶å•é¡Œã€‚å°æ–¼ä¸€çµ„çµ¦å®šçš„çªè®Šé«” M å’Œæ¸¬è©¦æ•¸æ“šé›† Tï¼Œ$MS_T(M)$ è¡¨ç¤º T æ‡‰ç”¨æ–¼ M çš„çªè®Šåˆ†æ•¸ã€‚ çªè®Šé«”æ¸›å°‘å¯ä»¥å®šç¾©ç‚ºåœ¨ M ä¸­æ‰¾åˆ°ä¸€å€‹å­é›† Mâ€™ è€Œ $MS_T(M) = MS_T(Mâ€™)$ã€‚ 3.1.1 Mutant Sampling çªè®Šé«”æŠ½æ¨£æ˜¯ä¸€ç¨®ç°¡å–®çš„æ–¹æ³•ï¼Œå¾æ•´å€‹é›†åˆä¸­éš¨æ©Ÿé¸æ“‡ä¸€å°éƒ¨åˆ†çªè®Šé«”ï¼Œæœ€æ—©ç”±[2][34]æå‡ºã€‚é¦–å…ˆåƒå‚³çµ±çš„çªè®Šæ¸¬è©¦ä¸€æ¨£ç”Ÿæˆå¯èƒ½çš„çªè®Šé«”ï¼Œç„¶å¾Œå¾é€™äº›çªè®Šé«”ä¸­éš¨æ©Ÿé¸æ“‡ x% é€²è¡Œåˆ†æï¼Œ å…¶é¤˜çš„å‰‡ä¸Ÿæ£„ã€‚ åœ¨[159][248]ä¸­é€™ç¨®æ–¹æ³•é€²è¡Œäº†é©—è­‰ï¼Œå¾ 10% åˆ° 40% ä¹‹é–“ï¼Œçµæœé¡¯ç¤º 10% èˆ‡å…¨é¸ç›¸æ¯”æ•ˆæœåƒ…ä¸‹è¼ƒ 16%ï¼Œè¡¨æ˜ x &gt; 10 æ™‚ï¼ŒæŠ½æ¨£æ˜¯æœ‰æ•ˆçš„ï¼Œåœ¨ [64][131] ä¸­ä¹Ÿå¾—åˆ°äº†é©—è­‰ã€‚ é™¤äº†å›ºå®šæŠ½æ¨£ç‡ï¼Œ[207]æå‡ºä¸€ç¨®åŸºæ–¼ the Bayesian sequential probability ratio test(SPRT)(è²è‘‰æ–¯åºåˆ—æ¦‚ç‡æ¯”æª¢é©—) çš„æŠ½æ¨£æ–¹æ³•ï¼Œçªè®Šé«”æ˜¯éš¨æ©Ÿé¸æ“‡ç›´åˆ°é”åˆ°çµ±è¨ˆå­¸ä¸Šçš„åˆé©æ¨£æœ¬é‡ç‚ºæ­¢ï¼Œ é€™ç¨®æ–¹æ³•æ¯”å›ºå®šæŠ½æ¨£æ›´æ•æ„Ÿï¼Œå› ç‚ºä»–å€‘æ˜¯åŸºæ–¼å¯ç”¨çš„æ¸¬è©¦é›†è‡ªæˆ‘èª¿æ•´çš„ã€‚ [207] M. Sahinoglu and E.H. Spafford, â€œA Bayes Sequential Statistical Procedure for Approving Software Products,â€ Proc. IFIP Conf. Approving Software Products, pp. 43-56, Sept. 1990. 3.1.2 Mutant Clustering çªè®Šé«”èšé¡æœ€æ—©åœ¨[116]æå‡ºï¼Œä½¿ç”¨ clustering algorithms(èšé¡æ¼”ç®—æ³•)é¸æ“‡ä¸€å€‹çªè®Šé«”å­é›†ã€‚å…ˆç”Ÿæˆçªè®Šé«”ï¼Œç„¶å¾Œæ‡‰ç”¨èšé¡æ¼”ç®—æ³•ï¼Œæ ¹æ®å¯æ®ºæ­»çš„æ¸¬è©¦æ¡ˆä¾‹å°‡ä¸€éšçªè®Šé«”åˆ†é¡åˆ°ä¸åŒçš„èšé¡ä¸­ã€‚ åŒä¸€é›†ç¾¤ä¸­çš„æ¯å€‹çªè®Šé«”éƒ½ä¿è­‰è¢«ä¸€çµ„é¡ä¼¼çš„æ¸¬è©¦ç”¨ä¾‹æ®ºæ­»ï¼Œç„¶å¾Œåœ¨æ¯å€‹é›†ç¾¤ä¸­é¸æ“‡å°‘é‡çš„çªè®Šé«”ç”¨æ–¼æ¸¬è©¦ï¼Œå…¶é¤˜çš„ä¸Ÿæ£„ã€‚ [116]ä¸­ä½¿ç”¨å…©ç¨®èšé¡ç®—æ³• K-means å’Œ Agglomerative clusteringï¼Œä¸¦å°‡çµæœèˆ‡éš¨æ©Ÿå’Œè²ªå©ªé¸æ“‡ç­–ç•¥åšæ¯”è¼ƒï¼Œçµæœè¡¨æ˜èšé¡èƒ½é¸æ“‡æ›´å°‘çªè®Šé«”ä¸¦ä¿æŒçªè®Šåˆ†æ•¸ã€‚å¾ŒçºŒç™¼å±•å¯åœ¨[120]ä¸­æ‰¾åˆ°ï¼Œ ä½¿ç”¨äº†ä¸€å€‹ domain reduction technique(é ˜åŸŸç¸®æ¸›æŠ€è¡“) ä¾†é¿å…åŸ·è¡Œæ‰€æœ‰çš„çªè®Šé«”ã€‚ 3.1.3 Selective Mutation é¸æ“‡æ€§çªè®Šé€éæ¸›å°‘æ‡‰ç”¨çš„çªè®Šé‹ç®—ç¬¦ä¾†å¯¦ç¾æ¸›å°‘çªè®Šé«”æ•¸é‡ã€‚è©¦åœ–æ‰¾åˆ°ä¸€å°éƒ¨åˆ†çªè®Šé‹ç®—ç¬¦ä¾†ç”¢ç”Ÿå¯èƒ½çªè®Šé«”ä¸­çš„å­é›†ï¼Œè€Œä¸æœƒå°æ¸¬è©¦æ•ˆæœç”¢ç”Ÿé‡å¤§æå¤±ã€‚ æœ€æ—©å¯è¦‹æ–¼[156]æå‡ºçš„ â€œconstrained mutationâ€ï¼Œ[190]éš¨å¾Œæ“´å±•äº†é€™å€‹æƒ³æ³•ï¼Œç¨±ç‚ºé¸æ“‡æ€§çªè®Šã€‚ çªè®Šé‹ç®—ç¬¦ç”Ÿæˆçš„çªè®Šé«”æ•¸é‡å„ä¸ç›¸åŒï¼Œå¦‚åœ¨ Mothra ä¸­ï¼ŒASR å’Œ SVR å…©å€‹é‹ç®—ç¬¦ç”Ÿæˆäº†ç´„ 30 ~ 40% çš„çªè®Šé«”[131]ã€‚[156]å»ºè­°çœç•¥é€™äº›ç”¢ç”Ÿå¤§éƒ¨åˆ†çªè®Šçš„é‹ç®—å­ ASRã€SVRã€‚ ä¹‹å¾Œ Offutt[190] å°‡å…¶æ“´å±•è‡³å››å€‹å’Œå…­å€‹ï¼Œåœ¨ä»–å€‘çš„ç ”ç©¶ä¸­: 2-selective mutation: 99.99 çš„å¹³å‡çªè®Šåˆ†æ•¸ï¼Œæ¸›å°‘ 24% çš„çªè®Šé«”ã€‚ 4-selective mutation: 99.84 çš„å¹³å‡çªè®Šåˆ†æ•¸ï¼Œæ¸›å°‘ 41% çš„çªè®Šé«”ã€‚ 6-selective mutation: 88.71 çš„å¹³å‡çªè®Šåˆ†æ•¸ï¼Œæ¸›å°‘ 60% çš„çªè®Šé«”ã€‚ [190] A.J. Offutt, G. Rothermel, and C. Zapf, â€œAn Experimental Evaluation of Selective Mutation,â€ Proc. 15th Intâ€™l Conf. Software Eng., pp. 100-107, May 1993. [248][252]å‰‡åŸºæ–¼æ¸¬è©¦æ•ˆæœçš„é¸æ“‡ï¼Œè¢«ç¨±ç‚º constraint mutation(ç´„æŸæ€§çªè®Š)ï¼Œåƒ…æ¡ç”¨å…©å€‹æ“ä½œç¬¦é€²è¡Œçªè®Š ABSã€RAR å› ç‚ºæ®ºæ­» ABS éœ€è¦ input domain(è¼¸å…¥åŸŸ)çš„ä¸åŒéƒ¨åˆ†æ¸¬è©¦ç”¨ä¾‹ï¼Œ è€Œæ®ºæ­» RAR éœ€è¦æª¢æŸ¥ mutated predicate(çªè®Šè¬‚è©)çš„æ¸¬è©¦ç”¨ä¾‹ã€‚çµæœè¡¨æ˜å¯ä»¥å°‡çªè®Šé«”æ•¸é‡æ¸›å°‘ 80%ï¼Œè€Œåƒ…å°çªè®Šåˆ†æ•¸æ¸›å°‘ 5%ã€‚ [252] W.E. Wong and A.P. Mathur, â€œReducing the Cost of Mutation Testing: An Empirical Study,â€ J. Systems and Software, vol. 31, no. 3, pp. 185-196, Dec. 1995. [182] Offuttç­‰äººä»¥æ­¤é€²ä¸€æ­¥æ“´å±•äº†å®ƒå€‘çš„ 6-selective mutationï¼Œå°‡ Mothra é‹ç®—ç¬¦åˆ†ç‚ºä¸‰é¡ï¼šstatements, operands, expressions ä¹‹å¾Œä¾æ¬¡çœç•¥æ¯ä¸€é¡çš„é‹ç®—ç¬¦ï¼Œ æœ€å¾Œç™¼ç¾ä¾†è‡ª operands, expressions å…©é¡çš„ ABS, UOI, LCR, AOR, ROR é€™äº›é—œéµçš„é‹ç®—ç¬¦å–å¾—äº† 99.5 çš„è®Šç•°åˆ†æ•¸ã€‚ åŸºæ–¼ä¹‹å‰çš„ç¶“é©—ï¼ŒBarbosa ç­‰äºº[19]å®šç¾©äº†ä¸€å€‹é¸æ“‡è¶³å¤ æ“ä½œç¬¦çš„æŒ‡å—ï¼Œå®ƒå€‘å°‡é€™å€‹æŒ‡å—æ‡‰ç”¨æ–¼ Proteum çš„ 77 å€‹ C mutation operators [6]ï¼Œå¾—åˆ°ä¸€çµ„ 10 å€‹é¸å®šçš„çªè®Šæ“ä½œç¬¦ï¼Œ å…¶å¹³å‡çªè®Šåˆ†æ•¸ç‚º 99.6% ä¸¦ä¸”æ¸›å°‘äº† 65.02% çš„çªè®Šé«”ã€‚ ä¸¦èˆ‡ Offutt å’Œ Wong åšæ¯”è¼ƒå¾—åˆ°æœ€é«˜çš„çªè®Šåˆ†æ•¸ã€‚ [19] E.F. Barbosa, J.C. Maldonado, and A.M.R. Vincenzi, â€œToward the Determination of Sufficient Mutant Operators for C,â€ Software Testing, Verification, and Reliability, vol. 11, no. 2, pp. 113-136, May 2001. è€Œæœ€æ–°ç ”ç©¶æ˜¯ Namin å’Œ Anderws é€²è¡Œ[168][169][170]ï¼Œå°‡é¸æ“‡æ€§çªè®Šå•é¡Œå®šç¾©ç‚ºçµ±è¨ˆå•é¡Œï¼Œä½¿ç”¨ç·šæ€§çµ±è¨ˆå¾ 109 å€‹ C mutation operators ä¸­è­˜åˆ¥å‡º 28 å€‹æ“ä½œç¬¦çš„å­é›†ï¼Œ ç›®å‰ä»–å€‘æ¸›å°‘äº† 92% çš„çªè®Šé«”ï¼Œæ˜¯è«–æ–‡(2011)ç•¶ä¸‹æœ€é«˜çš„æ¸›å°‘ç‡ã€‚ 3.1.4 Higher Order Mutation é«˜éšçªè®Šç”± Jia å’Œ Harman (2008)æå‡º[122]ï¼ŒåŸºæœ¬å‹•æ©Ÿæ˜¯å°‹æ‰¾é‚£äº›ç½•è¦‹ä½†æœ‰åƒ¹å€¼çš„é«˜éšçªè®Šï¼Œfirst order mutants (FOMs) å’Œ higher order mutants (HOMs)ï¼Œ HOMs æ˜¯é€šéå¤šæ¬¡æ‡‰ç”¨çªè®Šæ“ä½œç¬¦ä¾†ç”Ÿæˆçš„ã€‚ ä½¿ç”¨äº† subsuming HOMs çš„æ¦‚å¿µï¼Œä¸€å€‹ subsuming HOMs æ¯”å»ºæ§‹å¥¹çš„ FOMs æ›´é›£è¢«æ®ºæ­»ã€‚å› æ­¤ä½¿ç”¨å–®ä¸€çš„ HOM ä¾†å–ä»£ FOM ä»¥æ¸›å°‘çªè®Šé«”çš„æ•¸é‡ã€‚ é™¤æ­¤ä¹‹å¤–ä»–å€‘é‚„ä½¿ç”¨äº† strongly subsuming HOM(SSHOM) çš„æ¦‚å¿µï¼Œä»–åªè¢«èƒ½å¤ æ®ºæ­»æ§‹æˆä»–çš„ FOM çš„æ¸¬è©¦ç”¨ä¾‹çš„äº¤é›†çš„å­é›†æ‰èƒ½å¤ æ®ºæ­»ä»–ã€‚ Poloç­‰äºº[199]éƒ¨åˆ†è­‰æ˜äº†é€™å€‹æƒ³æ³•ï¼Œä»–å€‘æå‡ºäº†ä¸åŒçš„ç®—æ³•å°‡ä¸€éšæ®µçµ„åˆæˆäºŒéšçªè®Šã€‚æ‡‰ç”¨äºŒéšçªè®Šå¯ä»¥æ¸›å°‘ 50% çš„æ¸¬è©¦å·¥ä½œé‡ï¼Œè€Œæ¸¬è©¦æ•ˆæœå¹¾ä¹æ²’æœ‰æå¤±ã€‚ Langdonç­‰äºº[136][137]æ‡‰ç”¨ multi-object genetic programming(å¤šç›®æ¨™éºå‚³ç·¨ç¨‹æ–¹æ³•) ç”Ÿæˆé«˜éšçªè®Šé«”ï¼Œ ä»–å€‘ç™¼ç¾äº†æ¯”ä»»ä½•ä¸€éšçªè®Šé«”æ›´é›£æ®ºæ­»çš„ realistic higher order mutants(ç¾å¯¦é«˜éšçªè®Šé«”)ã€‚ multi-object genetic programming(MOGP): ä¸€ç¨®é€²åŒ–è¨ˆç®—æŠ€è¡“ï¼Œçµåˆ Genetic Programming(éºå‚³ç·¨ç¨‹)ï¼ŒMulti-Objective Optimization(å¤šç›®æ¨™å„ªåŒ–)çš„æ¦‚å¿µèˆ‡æ–¹æ³•ã€‚ realistic higher order mutants: é€™äº›é«˜éšçªè®Šé«”å¯ä»¥æ›´å¥½åœ°æ¨¡æ“¬çœŸå¯¦ä¸–ç•Œä¸­çš„è»Ÿä»¶éŒ¯èª¤ï¼Œä¸¦æä¾›æ›´æœ‰æŒ‘æˆ°æ€§å’Œç¾å¯¦æ€§çš„æ¸¬è©¦ç”¨ä¾‹ã€‚ 3.2 Execution Cost Reduction Techniques æœ¬ç¯€ä»‹ç´¹ä¸‰ç¨®å„ªåŒ–åŸ·è¡Œéç¨‹çš„æŠ€è¡“é¡å‹ 3.2.1 Strong, Weak, and Firm Mutation æ ¹æ“šåˆ†æçªè®Šé«”åœ¨åŸ·è¡Œéç¨‹ä¸­æ˜¯å¦è¢«æ®ºæ­»çš„æ–¹å¼ï¼Œçªè®Šæ¸¬è©¦æŠ€è¡“å¯åˆ†ç‚ºä¸‰ç¨®é¡å‹: Strong(å¼·çªè®Š)ã€Weak(å¼±çªè®Š)å’Œ Frim(ç©©å›ºçªè®Š) å¼·çªè®Šé€šå¸¸è¢«ç¨±ç‚ºå‚³çµ±çš„çªè®Šæ¸¬è©¦ã€‚æœ€åˆç”±DeMilloç­‰äººæå‡º[66]ã€‚å°æ–¼çµ¦å®šçš„ç¨‹åº pï¼Œå¦‚æœçªè®Šé«” m èˆ‡åŸå§‹ç¨‹åº p çš„è¼¸å‡ºä¸åŒï¼Œå‰‡èªç‚ºçªè®Šé«” m è¢«æ®ºæ­»ã€‚ NOTE Last edit 05-26-2023 20:52 æœ¬ç¯‡è«–æ–‡å…ˆé–±è®€å®ŒåŸºæœ¬çš„çªè®Šæ¸¬è©¦ï¼Œä¹‹å¾Œå†ä¾†è£œé½Š"
  },"/jekyll/2023-04-21-tdd_concepts.html": {
    "title": "Paper | Test-driven development concepts, taxonomy, and future direction",
    "keywords": "software software_qualitiy software_development Jekyll",
    "url": "/jekyll/2023-04-21-tdd_concepts.html",
    "body": "John Estdale &amp; Elli Georgiadou, (2005) Test-driven development concepts, taxonomy, and future direction. é€™ç¯‡è«–æ–‡å¯ä»¥ç”¨ä¾†å¿«é€Ÿäº†è§£ä»€éº¼æ˜¯ TDD(Test-driven development) æ¸¬è©¦é©…å‹•é–‹ç™¼ Intorduction æ¸¬è©¦é©…å‹•é–‹ç™¼ç­–ç•¥è¦æ±‚åœ¨å°å‹ã€å¿«é€Ÿçš„è¿­ä»£(Small, rapid iterations)ä¸­å…ˆç·¨å¯«è‡ªå‹•æ¸¬è©¦ï¼Œç„¶å¾Œå†é–‹ç™¼åŠŸèƒ½ä»£ç¢¼ã€‚é€™ç¨®é–‹ç™¼ç­–ç•¥ä½œç‚ºæ¥µé™ç·¨ç¨‹(XP, Extreme programming)æ ¸å¿ƒå¯¦è¸ä¹‹ä¸€è€ŒæŒçºŒå—åˆ°é—œæ³¨ã€‚ XP, Extreme programming æ˜¯æ•æ·è»Ÿé«”é–‹ç™¼(Agile software development)çš„ä¸€ç¨®æ–¹æ³•ï¼Œå¼·èª¿éå¸¸çŸ­çš„è¿­ä»£é€²è¡Œè»Ÿé«”é–‹ç™¼ã€‚ å°å‹å¿«é€Ÿçš„è¿­ä»£(Small, rapid iterations)æ˜¯ä¸€ç¨®æ•æ·é–‹ç™¼æ–¹æ³•è«–ï¼Œå°‡è»Ÿé«”é–‹ç™¼éç¨‹åŠƒåˆ†ç‚ºä¸€ç³»åˆ—å°æ¨¡å¡Šï¼Œæ¯å€‹æ¨¡å¡Šéƒ½æœ‰å„è‡ªçš„é–‹ç™¼èˆ‡æ¸¬è©¦ã€‚ ä¾‹å¦‚: ä¸€å€‹åœ˜éšŠé–‹ç™¼ä¸€å€‹ç·šä¸Šå•†åº—ï¼Œå¯å°‡åŠŸèƒ½åˆ†ç‚ºå„å€‹å°çš„æ¨¡å¡Š: ç”¨æˆ¶è¨»å†Šã€å•†å“æœç´¢ã€è³¼ç‰©è»Šç®¡ç†ã€è¨‚å–®è™•ç†ç­‰ç­‰ï¼Œç„¶å¾Œé€éè¿­ä»£é€±æœŸä¾†å®Œæˆå’Œæ¸¬è©¦å„å€‹æ¨¡å¡Šã€‚ The test aspect é™¤äº† High-level çš„æ¸¬è©¦ä¹‹å¤–ï¼ŒTDDè¦æ±‚ç·¨å¯«å–®å…ƒçš„è‡ªå‹•åŒ–æ¸¬è©¦ã€‚ åœ¨è»Ÿé«”ä¸­ä»€éº¼æ˜¯ç¢ºåˆ‡çš„å–®å…ƒæœ‰ä¸€äº›çˆ­è­°ï¼Œå³ä½¿åœ¨ OOP ä¸­ Classes å’Œ Method éƒ½è¢«å»ºè­°ä½œç‚ºåˆé©çš„å–®å…ƒã€‚ ç„¡è«–å¦‚ä½• Method å’Œ Procedure éƒ½æ˜¯æœ€å°çš„å¯æ¸¬è©¦å–®å…ƒçµ„ä»¶ã€‚ é–‹ç™¼è€…éœ€è¦å¯¦ç¾æ¸¬è©¦é©…å‹•(Test drivers)èˆ‡æ¨¡æ“¬å‡½æ•¸(function stubs)ï¼Œå¯ä»¥ç¶“ç”±è‡ªå‹•åŒ–(JUnit, â€¦)æˆ–æ‰‹å‹•åŒ–æ¸¬è©¦ã€‚ Test drivers: ä¸€å€‹å¯ä»¥åŸ·è¡Œå–®å…ƒæ¸¬è©¦çš„ç¨‹å¼ï¼Œå·²ç¢ºå®šä»£ç¢¼æ˜¯å¦æ­£ç¢ºé€šéæ¸¬è©¦ã€‚ Function stubs: ä¸€å€‹è™›æ“¬çš„å‡½æ•¸ï¼Œé€šå¸¸åªæœ‰å‘½åã€è¼¸å…¥èˆ‡è¼¸å‡ºåƒæ•¸ã€‚ å› æ­¤åœ¨TDDä¸­é–‹ç™¼è€…éœ€è¦å…ˆå¯«å¥½å–®å…ƒæ¸¬è©¦ï¼Œç„¶å¾Œä»£ç¢¼å®Œæˆå¾Œå°±å¯ä»¥ç«‹å³åŸ·è¡Œæ¸¬è©¦ã€‚ The driven aspect TDDæ˜¯ä¸€ç¨®æ¸¬è©¦ç­–ç•¥ï¼Œå¼·èª¿æ¸¬è©¦å…ˆè¡Œï¼Œé€šéæ¸¬è©¦ä¾†å¼•å°è»Ÿé«”é–‹ç™¼ä¸­çš„åˆ†æã€è¨­è¨ˆã€å’Œç·¨å¯«æ±ºç­–ã€‚ åœ¨ XP ä¸­å®¢æˆ¶ä¹Ÿè¢«è¦–ç‚ºé–‹ç™¼è€…çš„ä¸€å“¡ï¼Œæä¾›æ›´æ¸…æ¥šçš„éœ€æ±‚ï¼Œä»¥æ­¤ä¾†æ›´æ¸…æ¥šçš„æ’°å¯«æ¸¬è©¦ï¼Œæ¸¬è©¦å°±æ˜¯æ±ºå®šç¨‹å¼æ‡‰è©²åšä»€éº¼çš„ç¬¬ä¸€æ­¥ã€‚ ç‚ºäº†ä¿ƒä½¿æ¸¬è©¦æˆç‚ºåˆ†æå’Œè¨­è¨ˆçš„ä¸€éƒ¨åˆ†ï¼Œéœ€è¦ä½¿ç”¨é‡æ§‹(refactoring)çš„ä½œæ³•ã€‚ å°±æ˜¯ä¸æ–·æ”¹è®Šç¾æœ‰ç¨‹å¼ç¢¼çš„çµæ§‹ï¼Œä½†ä¾ç„¶è¦é€šéæ¸¬è©¦ï¼Œä½¿ç¨‹å¼ç¢¼å¾—åˆ°æ”¹é€²ã€‚ å› æ­¤TDDæ›´å¤šè‘—é‡çš„æ˜¯åˆ†æå’Œè¨­è¨ˆï¼Œè€Œä¸æ˜¯æ¸¬è©¦ï¼Œæ¸¬è©¦æ˜¯ç”¨ä¾†å¹«åŠ©é–‹ç™¼è€…æ±ºå®šç¨‹å¼æˆ–ç¨‹å¼ä»‹é¢æ‡‰è©²æ˜¯ä»€éº¼æ¨£å­ã€‚ The development aspect TDDæ—¨åœ¨å”åŠ©æ§‹å»ºè»Ÿä»¶é–‹ç™¼ï¼Œä½†å®ƒä¸æ˜¯ä¸€ç¨®è»Ÿä»¶é–‹ç™¼æ–¹æ³•è«–æˆ–éç¨‹æ¨¡å‹ã€‚ç›¸åï¼Œå®ƒæ˜¯ä¸€ç¨®å¯¦è¸æ–¹æ³•ï¼Œå¯ä»¥èˆ‡å…¶ä»–æ–¹æ³•ç›¸çµåˆã€‚ å¦‚çµåˆå…¶ä»–é–‹ç™¼æ–¹å¼ï¼Œåœ¨ DevOps ä¸­ TDD, BDD éƒ½è¢«å¼·èª¿ç‚ºæ¸¬è©¦éç¨‹çš„é‡è¦æ–¹æ³•ï¼Œå¯ä»¥åƒè€ƒ[1]ã€‚ åŒæ™‚æ¸¬è©¦ä¸æ˜¯ç‚ºäº†åšå‡ºè¨­è¨ˆæ±ºå®šå¾Œå°±è¢«æ‹‹æ£„çš„ï¼Œè€Œæ˜¯æˆç‚ºé–‹ç™¼éç¨‹ä¸­çš„ä¸€å€‹é‡è¦æ­¥é©Ÿã€‚ å¦‚æœæœ‰ä¸€å€‹è®ŠåŒ–å°è‡´æ¸¬è©¦å¤±æ•—ï¼Œç•¶æ¸¬è©¦é‚„åœ¨é–‹ç™¼è€…çš„è…¦æµ·ä¸­æ™‚ï¼Œé–‹æ³•è€…å¯ä»¥ç«‹åˆ»çŸ¥é“å“ªè£¡å‡ºéŒ¯ã€‚ç¼ºé»å°±æ˜¯åœ¨é–‹ç™¼æ™‚å¿…é ˆåŒæ™‚ç¶­è­·æ¸¬è©¦èˆ‡ç”Ÿç”¢ä»£ç¢¼ã€‚ [1] Pulasthi Perera, â€¦, (2017) Improve Software Quality through Practicing DevOps, IEEE Software development methodologies åœ¨è»Ÿé«”é–‹ç™¼éç¨‹æˆ–æ–¹æ³•è«–å®šç¾©äº†å»ºç«‹è»Ÿé«”çš„åŸºæœ¬ä»»å‹™(base task)çš„é †åº(order)ã€æ§åˆ¶(control)ã€è©•ä¼°(evaluation)ã€‚åœ¨é€™äº›æ–¹æ³•è«–ä¸­çš„è¤‡é›œåº¦èˆ‡æ§åˆ¶ç¯„åœå¾éæ­£å¼çš„åˆ°é«˜åº¦çµæ§‹åŒ–ä¸ç­‰ æ–¹æ³•è«–åˆ†ç‚ºå…©å¤§é¡: Prescriptive(è¦å®šå‹), Agile(æ•æ·å‹) å…·é«”å¯åˆ†ç‚º: Waterfall(ç€‘å¸ƒå¼), Spiral(èºæ—‹å¼), Incremental(å¢é‡å¼), Evolutionary(æ¼”é€²å¼) ä½†åœ¨é–‹ç™¼ä¸­é€šå¸¸æ˜¯çµ„åˆä½¿ç”¨é€™äº›æ–¹æ³•ï¼Œä¾‹å¦‚: ä¸€å€‹çµ„ç¹”å¯èƒ½ä½¿ç”¨å¢é‡å¼é–‹ç™¼æ¨¡å‹ï¼Œé€æ­¥å»ºæ§‹é …ç›®çš„ç´¯ç©ç‰‡æ®µã€‚è€Œåœ¨æ¯å€‹å¢é‡ä¸­é–‹ç™¼è€…å¯ä»¥æ‡‰ç”¨ç€‘å¸ƒæˆ–ç·šæ€§æ–¹æ³•é€²è¡Œé–‹ç™¼ã€‚é‚£éº¼æ ¹æ“šå¢é‡çš„å¤§å°æˆ‘å€‘å°±èƒ½å°‡æ•´å€‹æ–¹æ¡ˆæ¨™è¨˜æˆä¸åŒçš„æ–¹æ³•è«–ã€‚ å‡è¨­æ–¹ç¨‹å¼ $\\sum_{i=1}^{N} I_i$ ä»£è¡¨æ•´å€‹å°ˆæ¡ˆï¼Œ$I_i$å‰‡æ˜¯æ¯æ¬¡çš„å¢é‡ï¼Œæˆ‘å€‘å¯ä»¥å»é æƒ³å¦‚æœ$N$å¤§æ–¼ä¸€å®šé‡å‰‡æ˜¯ä¸€å€‹å¢é‡é …ç›®ï¼Œè‹¥$N\\leq2$å‰‡ä½¿ç”¨ç€‘å¸ƒé …ç›®ã€‚å¦‚æœæ¯å€‹å¢é‡éœ€è¦ä¿®æ”¹å¤§é‡é‡è¤‡çš„è»Ÿé«”éƒ¨ä»½ï¼Œæˆ‘å€‘å°±å¯ä»¥èªªå…·æœ‰è¿­ä»£æ€§ï¼Œä¾‹å¦‚ï¼š å¦‚æœ$C_i$æ˜¯$\\sum_{i=1}^{N} I_i$çš„é …ç›®$P$ä¸­çš„æ¯æ¬¡å¢é‡è¢«å½±éŸ¿çš„ä»£ç¢¼éƒ¨åˆ†ï¼Œä¸¦ä¸”é …ç›®$P$æœ‰è¿­ä»£æ€§å‰‡$C_i \\cap C_{i+1} \\neq \\emptyset$ Prescriptive(è¦å®šå‹)é€šå¸¸æœƒå¸Œæœ›æœ‰ä¸€ä»½æ­£å¼çš„æ–‡ä»¶ï¼Œå¦‚è¦ç¯„æ–‡ä»¶ä¾†è¨˜éŒ„å¢é‡çš„éœ€æ±‚ã€‚ Agile(æ•æ·å‹)å‰‡æ–‡ä»¶é€šå¸¸æ˜¯éæ­£å¼çš„ï¼Œå¦‚ç™½æ¿åœ–æˆ–ä¸€å¥—ä¸å®Œæ•´çš„UMLåœ–ï¼Œä¸¦ä¸”ç”Ÿæˆæ˜¯å¿«é€Ÿçš„ã€‚ å»ºè¨­ä»»å‹™çš„é †åºå°ä¸€å€‹é …ç›®ä¾†èªªè‡³é—œé‡è¦ï¼Œå‚³çµ±çš„é †åºæ˜¯ï¼š Requirements elicitation(éœ€æ±‚å¾µè©¢), Analysis(åˆ†æ), Design(è¨­è¨ˆ), Code(ç·¨ç¢¼), Test(æ¸¬è©¦), Integration(é›†æˆ), Deployment(éƒ¨ç½²), Maintenance(ç¶­è­·) åœ¨é–‹ç™¼éç¨‹ä¸­æˆ‘å€‘èƒ½ç™¼ç¾åœ¨Design, Code, Testéšæ®µéƒ½æœ‰ä¸åŒç¨®é¡çš„æ¸¬è©¦ï¼Œå¦‚ï¼šå–®å…ƒæ¸¬è©¦, æ•´åˆæ¸¬è©¦, å›æ­¸æ¸¬è©¦ TDDâ€™s historical context Test-driven development(æ¸¬è©¦é©…å‹•é–‹ç™¼)æ˜¯èˆ‡æ•æ·æ¨¡å‹çš„èˆˆèµ·ä¸€èµ·å‡ºç¾çš„ï¼Œéƒ½èµ·æºæ–¼20ä¸–ç´€50å¹´ä»£çš„è¿­ä»£ï¼Œå¢é‡ï¼Œé€²åŒ–çš„éç¨‹æ¨¡å‹ã€‚ å°‡æ¸¬è©¦ç§»å‹•åˆ°ç·¨ç¢¼çš„å‰æ–¹ä¸¦ä¸æ˜¯ä»€éº¼æ–°é®®äº‹ï¼Œåœ¨1980â€™sçš„ Cleanroom è»Ÿé«”å·¥ç¨‹æ–¹æ³•å°±å·²ç¶“åŒ…å«äº†ä½¿ç”¨ Formal methods å°æ—©æœŸè¨­è¨ˆå…ƒç´ é€²è¡Œé©—è­‰ã€‚ åœ¨1998 XP(æ¥µé™ç·¨ç¨‹)å¾Œé–‹å§‹æ¨å´‡å…ˆå¯«æ¸¬è©¦åœ¨å¯«ç¨‹å¼ï¼Œä½†åœ¨é‚£ä¹‹å‰å°±å¯èƒ½æœ‰éæ­£å¼çš„æ¸¬è©¦å…ˆè¡Œçš„æ–¹æ³•ã€‚ [2] K. Beck, Extreme Programming Explained: Embrace Change, Addison-Wesley, 1999. â€œlearned test-first programming as a kid while reading a book on programming. It said that you program by taking the input tape â€¦ and typing in the output tape you expect. Then you program until you get the output tape you expect.â€ - Kent Beck [2] TDDå°±æ˜¯å°‡é€™ç¨®åšæ³•åšåˆ°æ¥µç«¯ï¼Œç¸½æ˜¯å…ˆå¯«æ¸¬è©¦å†ç·¨ç¨‹ï¼Œå¢é‡å¼ã€è¿­ä»£å¼å’Œæ¼”é€²å¼éç¨‹æ¨¡å‹çš„ç™¼å±•å°å®ƒçš„å‡ºç¾è‡³é—œé‡è¦ã€‚ å°‡æ¸¬è©¦åˆ†è§£æˆæ›´å°ã€æ›´ç°¡å–®ã€æ›´å…·é«”çš„å–®å…ƒæ¸¬è©¦ï¼Œé€™æ¨£åšçš„å¥½è™•æ˜¯èƒ½å¤ æ›´å¿«åœ°æ‰¾åˆ°å•é¡Œï¼Œæ›´å®¹æ˜“é€²è¡Œæ¸¬è©¦å’Œèª¿è©¦ã€‚ æ°¸é ä¸ä½¿ Code é€€åŒ–ï¼Œä¸å…è¨±ä»£ç¢¼è³ªé‡ä¸‹é™æˆ–å‡ºç¾æ–°çš„éŒ¯èª¤ã€‚é€™å¯ä»¥é€šéä¸æ–·åœ°é‹è¡Œæ¸¬è©¦ä¾†å¯¦ç¾ã€‚ XP takes the known best practices and â€œturns the knobs all the way up to ten.â€ - Kent Beck [2] TDD developed within the context of iterative, incremental, and evolutionary models. Iterative æ¶‰åŠé‡è¤‡ä¸€çµ„é–‹ç™¼ä»»å‹™ï¼Œé€šå¸¸æ˜¯åœ¨é€æ¼¸æ“´å±•çš„éœ€æ±‚é›†ä¸Šé€²è¡Œã€‚ Incremental å‰‡ç”¢ç”Ÿä¸€ç³»åˆ—çš„ç‰ˆæœ¬ï¼Œæ¯ä¸€å€‹å¢é‡éƒ½æä¾›æ›´å¤šçš„åŠŸèƒ½ã€‚ Evolutionary æ–¹æ³•æ¶‰åŠè‡ªé©æ‡‰å’Œè¼•é‡ç´šè¿­ä»£é–‹ç™¼ã€‚ Adaptive(è‡ªé©æ‡‰): å¼·èª¿åˆ©ç”¨éå»è¿­ä»£çš„åé¥‹ä¾†æ”¹é€²è»Ÿé«”ã€‚ Lightweight(è¼•é‡ç´š): æ¸›å°‘éåº¦çš„è¦ç¯„å’Œæµç¨‹ï¼Œåˆ©ç”¨åé¥‹é€²è¡Œæ”¹é€²ï¼Œåœ¨æœ€çŸ­æ™‚é–“å…§äº¤ä»˜å¯ç”¨çš„ç‰ˆæœ¬ã€‚ Spiral Model(èºæ—‹æ¨¡å‹): çµåˆåŸå‹(prototyping)å’Œè¿­ä»£(iterative)çš„å¾ªç’°ï¼Œä¸¦åŠ å…¥é¢¨éšªé©…å‹•å’ŒéŒ¨é»é‡Œç¨‹ç¢‘ã€‚ that to implement XP, developers must apply all of the incumbent practicesâ€”leaving some out weakens the model and can cause it to fail. - Kent Beck [2] TDDè¦æ±‚å°‡è¨­è¨ˆæ±ºç­–å»¶é²(design decisions be delayed)å’Œéˆæ´»(flexible)ä»¥å½±éŸ¿è»Ÿé«”è¨­è¨ˆ è¨­è¨ˆæ±ºç­–å»¶é²: åœ¨é€™ä¹‹å‰å…ˆç·¨å¯«æ¸¬è©¦ç”¨åŠ›ï¼Œé€™äº›æ¸¬è©¦ç”¨åŠ›æœƒæŒ‡å°é–‹ç™¼è€…åœ¨ç·¨å¯«ä»£ç¢¼ä¹‹å‰è€ƒæ…®å¥½æ‡‰è©²å¦‚ä½•è¨­è¨ˆä»£ç¢¼æ‰èƒ½ä½¿å…¶æ»¿è¶³éœ€æ±‚ã€‚é€™æ¨£é–‹ç™¼è€…å¯ä»¥é€šéé€šéæ¸¬è©¦ç”¨ä¾‹æ›´å¥½çš„ç†è§£å•é¡Œå’Œéœ€æ±‚ã€‚ éˆæ´»: åœ¨è¨­è¨ˆéç¨‹ä¸­ï¼Œä¿æŒéˆæ´»æ€§ä»¥ä¾¿èƒ½å¤ é©æ‡‰å¯èƒ½å‡ºç¾çš„è®ŠåŒ–ã€‚é€™æ„å‘³è‘—ç·¨å¯«è¶³å¤ é€šç”¨çš„æ¸¬è©¦ç”¨ä¾‹ï¼Œä»¥ä¾¿ä»£ç¢¼å¯ä»¥æ›´å®¹æ˜“åœ°é€²è¡Œä¿®æ”¹ï¼Œè€Œä¸æœƒç ´å£ä¹‹å‰çš„æ¸¬è©¦ã€‚ ä¸€å€‹è‡ªå‹•åŒ–çš„æ¸¬è©¦å°‡çµ¦äºˆé–‹ç™¼è€…å‹‡æ°£é‡æ§‹ç¨‹å¼ç¢¼ï¼Œä¹Ÿçµ¦äº†ä»–å€‘éœ€è¦çš„è¨Šæ¯ï¼Œä½¿ä»–å€‘èƒ½åœ¨æ”¹è®Šç¨‹å¼ç¢¼å¾Œè¿…å¯¦ç¾ä¿®æ”¹ï¼Œè€Œå¯¦ç¾é–‹ç™¼äººå“¡å°ä»£ç¢¼çš„é›†é«”æ‰€æœ‰æ¬Š(Collective ownership)ã€‚ é›†é«”æ‰€æœ‰æ¬Š(Collective ownership): æ‰€æœ‰çš„é–‹ç™¼äººå“¡éƒ½æœ‰å°ä»£ç¢¼çš„å…±åŒè²¬ä»»å’ŒæŒæ§æ¬Šï¼Œå› ç‚ºTDDè‡ªå‹•åŒ–å–®å…ƒæ¸¬è©¦å¯ä»¥ä½¿é–‹ç™¼è€…è¿…é€Ÿæª¢æŸ¥æ˜¯å¦æœ‰ç ´å£å…¶ä»–é–‹ç™¼è€…çš„å·¥ä½œã€‚ Automated testing Software tools å·²ç¶“æˆç‚ºç¾ä»£è»Ÿé«”é–‹ç™¼çš„é‡è¦å› ç´ ã€‚Compilers, Debuggers, IDE, Modeling, Computer-aided software engineering tool, é€™äº›å·¥å…·æé«˜äº†é–‹ç™¼è€…çš„ç”Ÿç”¢åŠ›ã€‚ TDDå‡å®šå­˜åœ¨è‡ªå‹•åŒ–çš„å–®å…ƒæ¸¬è©¦æ¡†æ¶ï¼Œé€™æ¨£çš„æ¡†æ¶æä¾›äº†æ¸¬è©¦é©…å‹•(test driver), å­˜æ ¹(stub), å­ç³»çµ±çš„æ¥å£(interfaces to other subsystem)çš„æ¸¬è©¦çµ„åˆã€‚ Erich Gamma å’Œ Kent Beck é–‹ç™¼äº† JUnit, ä¸€å€‹ Java çš„è‡ªå‹•åŒ–å–®å…ƒæ¸¬è©¦æ¡†æ¶ï¼ŒJUnit åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¿ƒé€²äº† TDD å’Œ XP çš„å»£æ³›æ™®åŠã€‚é¡ä¼¼ JUnit çš„æ¡†æ¶ä¹Ÿå·²å¯¦ç¾æ–¼å¤šç¨®ä¸åŒçš„ç¨‹å¼èªè¨€ä¸­ï¼Œå‰µå»ºäº†ä¸€ç³»åˆ—çš„æ¡†æ¶ï¼Œè¢«ç¨±ç‚º xUnitã€‚ xUnit ä¸€èˆ¬ä¾†èªª xUnit å…è¨±é–‹ç™¼è€…æ’°å¯«ä¸€ç³»åˆ—è‡ªå‹•åŒ–å–®å…ƒæ¸¬è©¦ï¼Œå¾åˆå§‹åŒ–(Initialization), åŸ·è¡Œ(Execution)ä¸¦å°æ¸¬è©¦ä»£ç¢¼é€²è¡Œæ–·è¨€(Assertion)ã€‚ å„å€‹æ¸¬è©¦éƒ½æ˜¯ç¨ç«‹çš„ï¼Œæ‰€ä»¥æ¸¬è©¦é †åºä¸¦ä¸é‡è¦ã€‚xUnit æ¸¬è©¦æ˜¯ç”¨èˆ‡è¢«æ¸¬è©¦ä»£ç¢¼ç›¸åŒçš„èªè¨€ç·¨å¯«çš„ï¼Œ åŒæ™‚æ¸¬è©¦ä¹Ÿå¯ä»¥ä½œç‚ºæ–‡æª”(docs)ï¼Œé–‹ç™¼è€…é€šéé–±è®€æ¸¬è©¦ç¨‹å¼ç¢¼ä¾†äº†è§£è¢«æ¸¬è©¦ç¨‹å¼ç¢¼çš„è¡Œç‚ºå’ŒåŠŸèƒ½ã€‚ JUnit ä¹Ÿæä¾›äº†ä¸€å€‹å¯ç§»æ¤çš„ GUIï¼Œå·²ç¶“è¢«é›†æˆåˆ°æµè¡Œçš„é–‹ç™¼ç’°å¢ƒä¸­ï¼Œå¦‚ Eclipseã€‚ JUnit ä¸­ä¸€äº›å·¥å…·ç°¡åŒ–äº† Mock object(æ¨¡æ“¬å°è±¡)ã€Stub(å­˜æ ¹) çš„å‰µå»ºï¼Œé€™äº›å¯ä»¥å–ä»£çœŸå¯¦çš„å”ä½œå°è±¡ï¼Œå› æ­¤é–‹ç™¼äººå“¡å°±èƒ½å°ˆé–€æ¸¬è©¦ä¸€å€‹ç‰¹å®šçš„å°è±¡ã€‚ åŒæ™‚ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å·¥å…·å¦‚ Cactus, Derby å’Œ JUint ä¸€èµ·å¯¦ç¾æ¶‰åŠ J2EE çµ„ä»¶æˆ– Database çš„è‡ªå‹•åŒ–æ¸¬è©¦ã€‚ æ”¯æŒ TDD çš„å·¥å…·ä¸æ–·å¢åŠ é¡¯ç¤ºå‡ºäº† TDD å—åˆ°çš„æ”¯æŒï¼Œä¸¦ä¸”ä½¿é–‹ç™¼äººå“¡èƒ½è¼•é¬†é–‹ç™¼å–®å…ƒæ¸¬è©¦ä¸¦é€šéè‡ªå‹•åŒ–åŸ·è¡Œå¤§å‹æ¸¬è©¦å¥—ä»¶ï¼Œä»¥æ­¤è¿…é€Ÿç²å¾—æœ‰é—œç³»çµ±ç‹€æ…‹çš„çµæœã€‚ Early testing in academia å¤§å­¸çš„è¨ˆç®—æ©Ÿç§‘å­¸å’Œè»Ÿé«”å·¥ç¨‹èª²ç¨‹å¯ä»¥ä½œç‚ºä¸€å€‹æŒ‡æ¨™ï¼Œä¾†è©•ä¼°è»Ÿé«”å¯¦è¸çš„å»£æ³›æ¥å—ç¨‹åº¦ã€‚æœ‰æ™‚å­¸ç•Œæœƒé ˜å…ˆæ–¼å¯¦è¸ï¼Œæœ‰æ™‚å‰‡æœƒè·Ÿéš¨ï¼Œè€Œè»Ÿé«”å·¥ç¨‹ï¼Œè¿­ä»£é–‹ç™¼å’Œ TDD å‰‡æ˜¯å¾Œè€…çš„æ¨¡å¼ã€‚ é€™äº›è»Ÿé«”å·¥ç¨‹èª²ç¨‹å¾€å¾€è½å¾Œæ–¼æ¥­ç•Œçš„æ™®éå¯¦è¸ï¼Œå› æ­¤å¾€å¾€æ˜¯å¯¦éš›è»Ÿé«”é–‹ç™¼ä½¿ç”¨äº†æ–°çš„é–‹ç™¼éç¨‹æ¨¡å‹ï¼Œå†ç”±å­¸è€…ç ”ç©¶ã€æœ€çµ‚æˆç‚ºèª²ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ 1991 ACM èª²ç¨‹æŒ‡å—ä¸­è¿­ä»£é–‹ç™¼å’Œé©—è­‰åªåˆ†é…äº†ä¸åˆ°å…«å°æ™‚çš„è¬›åº§èˆ‡å¯¦é©—æ™‚é–“ã€‚è€Œåœ¨ 2001 å¹´å‰‡åˆ†é…åˆ°äº†æ›´å°‘çš„æ™‚é–“åƒ…æœ‰äº”å°æ™‚ã€‚ åœ¨æ–‡ç« æ’°å¯«çš„ç•¶ä¸‹ 2005 TDD ä¸¦é‚„æ²’æœ‰è¢«å­¸ç•Œå»£æ³›æ¥å—ã€‚ Recent context (2005) XP æ˜¯ç•¶æ™‚æœ€è‘—åçš„æ•æ·æ–¹æ³•ï¼Œç¶“å¸¸èˆ‡å…¶ä»–æ•æ·æ–¹æ³•(ä¾‹å¦‚: Scrum) çµåˆä½¿ç”¨ï¼ŒXP æå‡ºä½¿ç”¨ TDD ä½œç‚ºé–‹ç™¼é«˜å“è³ªè»Ÿé«”çš„ä¸€å€‹çµ„æˆéƒ¨åˆ†ã€‚ TDD çš„æ½›åœ¨ä½¿ç”¨è€…å¸¸å¸¸å°æ–¼ç·¨å¯«å’Œç¶­è­·æ¸¬è©¦å–®å…ƒæ„Ÿåˆ°æ“”æ†‚ï¼Œ Beck æ‰¿èªè‡ªå‹•åŒ–å–®å…ƒæ¸¬è©¦ä¸¦ä¸æ˜¯å°æ‰€æœ‰äº‹æƒ…éƒ½å¿…è¦çš„ï¼Œ ä½†æ˜¯ä»–ä¹Ÿå …ç¨± XP ç„¡æ³•åœ¨æ²’æœ‰ TDD çš„æƒ…æ³ä¸‹é‹ä½œï¼Œå› ç‚ºå®ƒæ˜¯ä½œç‚ºå°‡æ•´å€‹æµç¨‹é»åˆåœ¨ä¸€èµ·çš„é»åˆåŠ‘ã€‚ ç›¡ç®¡ XP çš„æµè¡Œä½†ä¸¦ä¸ä»£è¡¨ä½¿ç”¨æ™‚æœƒæ¡ç”¨å®ƒçš„æ‰€æœ‰å¯¦è¸ï¼Œæˆ–è€…ä»–å€‘ä¸é€£è²«çš„ä½¿ç”¨é€™äº›å¯¦è¸ã€‚ ThoughtWorks çš„ä¸€å€‹å°ˆæ¡ˆä¸­ï¼ŒJ. Rasmusson æ˜¯ä¸€å€‹æ—©æœŸçš„ XP ä½¿ç”¨è€…ï¼Œä½†ç´„æœ‰ 1/3 çš„ä»£ç¢¼æ˜¯ä½¿ç”¨ TDD é–‹ç™¼ã€‚[3] åœ¨é€™å€‹å°ˆæ¡ˆä¸­ï¼Œé–‹ç™¼è€…åœ¨ 37,000 è¡Œä»£ç¢¼ä¸­æœ‰ 16000 è¡Œæ˜¯ç”¨æ–¼è‡ªå‹•åŒ–å–®å…ƒæ¸¬è©¦ï¼Œè¨±å¤šæ¸¬è©¦éƒ½æ˜¯åœ¨æ¸¬è©¦å„ªå…ˆå’Œæ¸¬è©¦æœ€å¾Œçš„è¿­ä»£ä¸­å¯«çš„ã€‚[3] å› æ­¤å£é ­è­‰æ“šè¡¨æ˜ï¼Œå³ä¾¿åªæ¡ç”¨ XP çš„éƒ¨åˆ†å¯¦è¸ï¼ŒTDDä¹Ÿé€šå¸¸æœƒåŒ…å«åœ¨å…§ã€‚ [3] J. Rasmusson, â€œIntroducing XP into Greenfield Projects: Lessons Learned,â€ IEEE Software, May/June, 2003, pp. 21-28 â€œIf I could only recommend one coding practice to software developers, those who use XP or otherwise, it would be to write unit tests.â€ - J. Rasmusson [3] åœ¨ç•¶æ™‚æµè¡Œçš„ IDE Eclipse ä¸­ï¼ŒJUnit, XP é€™æ¨£çš„æµè¡Œçµåˆä¹Ÿå¯ä»¥æ„å‘³è‘— TDD è¢«å»£æ³›æ¡ç”¨çš„ä¸€éƒ¨åˆ†è­‰æ˜ã€‚ Evaluative TDD research åœ¨è«–æ–‡ç•¶ä¸‹(2005)å¤§éƒ¨åˆ†æ–‡ç« éƒ½æ˜¯é—œæ–¼æ‡‰ç”¨ TDD æ‰€å¯«ï¼Œå°æ–¼ TDD çš„æ•ˆæœèˆ‡å¥½è™•çš„ç ”ç©¶ç›¸å°è¼ƒå°‘ã€‚ é—œæ–¼ TDD çš„ç ”ç©¶å¤§è‡´å¯ä¾èƒŒæ™¯åˆ†ç‚ºæ¥­ç•Œèˆ‡å­¸è¡“çš„ç ”ç©¶: æ¥­ç•Œç ”ç©¶å¾€å¾€æ›´æ³¨æ„å¯¦éš›æ‡‰ç”¨èˆ‡å¯¦ç”¨æ€§ï¼Œä¸¦è‘—é‡æ–¼ç¾æœ‰å¯¦è¸é€²è¡Œè©•ä¼°èˆ‡æ”¹é€²ã€‚ å­¸ç•Œå‰‡æ›´æ³¨é‡åŸºç¤ç†è«–èˆ‡ç§‘å­¸æ–¹æ³•ï¼Œè‘—é‡æ–¼æ·±å…¥ç ”ç©¶å•é¡ŒèƒŒå¾Œçš„åŸå› èˆ‡æ©Ÿåˆ¶ã€‚ TDD in industry NCSU(North Carolina State University) çš„ç ”ç©¶è€…åœ¨å››å®¶ä¸åŒå…¬å¸é€²è¡Œäº†ä¸‰é …é—œæ–¼ TDD çš„å¯¦è­‰ç ”ç©¶[8][9][10]ï¼Œåƒèˆ‡è€…æ˜¯ä¸€äº›ç›¸å°å°çš„åœ˜é€€ã€‚é€™äº›ç ”ç©¶ä»¥ç¼ºé™·å¯†åº¦(Defect density)ä½œç‚ºè¡¡é‡å“è³ªçš„æŒ‡æ¨™ã€‚ ä½¿ç”¨ TDD é€²è¡Œé–‹ç™¼çš„æ§åˆ¶çµ„æ¯”å°ç…§çµ„å¤šé€šé 18% - 50% çš„å¤–éƒ¨æ¸¬è©¦ç”¨ä¾‹ã€‚ åŒæ™‚ä½¿ç”¨ TDD é–‹ç™¼çš„é™¤éŒ¯(debugging) æ™‚é–“èŠ±è²»æ›´å°‘ã€‚ Table 1 summarizes these studies and labels each experiment as either a case study or a controlled experiment. [8] B. George and L. Williams, â€œA Structured Experiment of Test-Driven Development,â€ Information and Software Technology, vol. 46, no. 5, 2004, pp. 337-342. [9] E.M. Maximilien and L. Williams, â€œAssessing Test-Driven Development at IBM,â€ Proc. 25th Intâ€™l Conf. Software Eng. (ICSE 03), IEEE CS Press, 2003, pp. 564-569. [10] L. Williams, E.M. Maximilien, and M. Vouk, â€œTest-Driven Development as a Defect-Reduction Practice,â€ Proc. 14th Intâ€™l Symp. Software Reliability Eng. (ISSRE 03), IEEE Press, 2003, pp. 34-45. TDD in academia ç›¡ç®¡åœ¨å­¸è¡“ç’°å¢ƒä¸­å¾ˆå¤š TDD ç›¸é—œçš„ç ”ç©¶éƒ½æ˜¯è»¼äº‹ï¼Œä½†åœ¨ Table 2. åˆ—å‡ºçš„äº”å€‹ç ”ç©¶å‰‡æœ‰å…·é«”çš„å¯¦è­‰çµæœã€‚ é™¤äº† [11] å…¶ä»–éƒ½èšç„¦æ–¼ TDD çš„æ—©æœŸç¼ºé™·æª¢æ¸¬èƒ½åŠ›ã€‚ [11] [12] å ±å‘Šäº†è»Ÿé«”å“è³ªèˆ‡ç¨‹å¼é–‹ç™¼è€…ç”Ÿç”¢åŠ›çš„æ˜é¡¯æ”¹å–„ã€‚ [13] å ±å‘Šæ’°å¯«çš„æ¸¬è©¦æ•¸é‡èˆ‡ç”Ÿç”¢åŠ›ä¹‹é–“çš„ç›¸é—œæ€§ã€‚ [14] [15] å‰‡å ±å‘Šäº†ç¼ºé™·å¯†åº¦å’Œç”Ÿç”¢åŠ›æ–¹é¢ä¸¦æ²’æœ‰æ˜é¡¯æ”¹å–„ ä»¥ä¸Šå ±å‘Šéƒ½ç›¸å°è¼ƒå°ï¼Œä¸¦ä¸”æ²’æœ‰æˆ–å¾ˆå°‘æœ‰å…·æœ‰ TDD ç¶“é©—çš„é–‹ç™¼è€…åƒèˆ‡ã€‚ Factors in software practice adoption å¤šç¨®å› ç´ å½±éŸ¿æ˜¯å¦æ¡ç”¨è»Ÿé«”å¯¦è¸å…¶ä¸­åŒ…å«: Motivation for change(æ”¹è®Šçš„å‹•æ©Ÿ), Economics(ç¶“æ¿Ÿ), Availability of tools(å·¥å…·çš„å¯ç”¨æ€§), Training and instructional materials(è¨“ç·´å’ŒåŸ¹è¨“å·¥å…·), A sound theoretical basis(ç´®å¯¦çš„åŸºç¤ç†è«–), Empirical and anecdotal evidence of success(æˆåŠŸçš„ç¶“é©—å’Œè»¼äº‹), Time(æ™‚é–“), The practice by highly regarded individuals or groups.(æ¬Šå¨å€‹äººæˆ–åœ˜é«”çš„åšæ³•) Motivation for change: è»Ÿé«”é–‹ç™¼å¯¦å‹™ä¸Šæœ‰æ˜ç¢ºçš„æ”¹è®Šå‹•æ©Ÿï¼Œé–‹ç™¼æ¶‰åŠäººå“¡ã€æµç¨‹ã€æŠ€è¡“å’Œå·¥å…·ç­‰è¤‡é›œçš„çµ„åˆï¼ŒTDD ç‚ºä¸€ç¨®å˜—è©¦æ”¹é€²ä¸¦çœ‹ä¼¼æœ‰æ•ˆçš„æ–¹æ³•ã€‚ Availability of tools: TDD çš„å·¥å…·æ”¯æŒå¾ˆå¼·ï¼Œä¸¦ä¸”æ­£åœ¨ä¸æ–·æ”¹é€²ï¼Œåƒ JUnit, MockObjects, Cactus, é€™æ¨£çš„å·¥å…·å·²ç¶“æˆç†Ÿä¸¦å»£æ³›å¯ç”¨ã€‚ Economic: ç¶“æ¿Ÿæ¨¡å‹ä¸Šä¹ŸæŒ‡å‡ºäº† XP å’Œ TDD åœ¨è»Ÿé«”é–‹ç™¼ä¸Šçš„æ½›åŠ›ï¼Œä½†éœ€è¦é€²ä¸€æ­¥ç ”ç©¶ TDD å’Œ XP å¸¶ä¾†çš„å„ªç¼ºé»ï¼Œå¦‚: TDD åœ¨é…åˆä»£ç¢¼ä½¿ç”¨æ™‚éœ€è¦ç ”ç©¶å®ƒåœ¨é€Ÿåº¦ä¸Šæ˜¯å¦æœƒæ…¢æ–¼å‚³çµ±é–‹ç™¼ï¼Œèˆ‡å°ç¼ºé™·å¯†åº¦(defect density)çš„å½±éŸ¿ã€‚ A sound theoretical basis &amp; Empirical and anecdotal evidence of success: ç ”ç©¶è¡¨æ˜ï¼Œå­¸è¡“é–‹ç™¼éœ€è¦ 5 - 15 å¹´æ™‚é–“æ‰èƒ½åœ¨å•†æ¥­å¯¦è¸ä¸­å–å¾—æˆåŠŸï¼Œåä¹‹äº¦ç„¶ã€‚TDD å¯ä»¥æ”¹å–„é–‹ç™¼æ•™è‚²ã€‚ TDD çš„æ™®åŠé¢è‡¨è¨±å¤šæŒ‘æˆ°ï¼Œé¦–å…ˆé–‹ç™¼è€…è¦æœ‰è‰¯å¥½çš„ç´€å¾‹ï¼Œå› ç‚º TDD éœ€è¦é–‹ç™¼è€…éµå¾ä»–çš„æµç¨‹èˆ‡æ­¥é©Ÿï¼Œå› æ­¤éœ€è¦ä½¿é–‹ç™¼è€…å……åˆ†ç†è§£ TDD çš„å¥½è™•ï¼Œæ‰èƒ½ä½¿é–‹ç™¼è€…å˜—è©¦ä½¿ç”¨ã€‚ TDD ä¹Ÿè¢«å»£æ³›çš„èª¤è§£ï¼Œå¾ˆå¤šäººéŒ¯èª¤çš„èªç‚º TDD åªé—œæ³¨æ¸¬è©¦ï¼Œè€Œä¸æ˜¯è¨­è¨ˆã€‚TDD ä¸åƒ…åƒ…æ˜¯é—œæ³¨æ¸¬è©¦ï¼Œå®ƒåŒæ™‚ä¹Ÿè¦æ±‚é–‹ç™¼äººå“¡åœ¨ç·¨å¯«ç¨‹å¼ç¢¼ä¹‹å‰ï¼Œå¿…é ˆå…ˆæ¸…æ¥šåœ°è¨­è¨ˆå‡ºç¨‹å¼çš„æ¶æ§‹å’ŒåŠŸèƒ½ã€‚åœ¨é€™å€‹éç¨‹ä¸­ï¼Œé–‹ç™¼è€…å¿…é ˆæ€è€ƒå¦‚ä½•ç·¨å¯«æœ€å°ç¨‹å¼ç¢¼ï¼Œæ¸›å°‘é‡è¤‡ä»£ç¢¼ï¼Œè¨­è¨ˆæ¸…æ™°çš„ä»‹é¢ç­‰ï¼Œè¦æ±‚é–‹ç™¼è€…åœ¨è¨­è¨ˆå’Œé–‹ç™¼éç¨‹ä¸­ç›¸äº’äº¤æ›¿åœ°é€²è¡Œï¼Œå¾è€Œå¯ä»¥ä¿ƒé€²é«˜å“è³ªã€æ˜“æ–¼ç¶­è­·å’Œå¯æ“´å±•çš„ç¨‹å¼ç¢¼ç”¢ç”Ÿã€‚ TDD ä¸¦ä¸é©ç”¨æ–¼æ‰€æœ‰é–‹ç™¼å ´æ™¯ï¼Œé–‹ç™¼è€…å’Œç®¡ç†è€…å¿…é ˆæ±ºå®šä½•æ™‚ç”¨ TDD ä½•æ™‚ä¸ç”¨ã€‚ Understanding TDDâ€™S effects åœ¨ 2005 è«–æ–‡ç™¼è¡¨æ™‚ï¼ŒTDD å°æ–¼å“è³ªçš„å½±éŸ¿éƒ½å°‡ç„¦é»æ”¾åœ¨ç¼ºé™·å¯†åº¦(defect density) ä¸Šï¼Œæ‡‰è©²æœ‰å…¶ä»–æ–¹å¼è©•ä¼°è»Ÿé«”å“è³ªã€‚ æœªä¾†çš„ç ”ç©¶æ‡‰è©²è€ƒæ…®åœ¨èª²ç¨‹å’Œç¨‹å¼è¨­è¨ˆå¸«æˆç†Ÿåº¦ä¸åŒçš„æƒ…æ³ä¸‹ï¼ŒTDDçš„æœ‰æ•ˆæ€§ã€‚é‚„å¯ä»¥ç ”ç©¶ TDD èˆ‡å…ˆè¨­è¨ˆå¾Œæ¸¬è©¦çš„æ–¹æ³•ã€è¿­ä»£æ–¹å¼é€²è¡Œçš„æ¸¬è©¦æœ€å¾Œæ–¹æ³•çš„æ•ˆæœå·®ç•°ã€‚ ä¹Ÿéœ€è¦ç ”ç©¶ TDD èˆ‡å…¶ä»–å¯¦è¸çµåˆçš„æ•ˆæœï¼Œå¦‚é…å°ç·¨ç¨‹(Pair programming), ä»£ç¢¼æª¢æŸ¥(Code inspection) çµåˆçš„æ•ˆæœï¼Œä¸¦ä¸”ç ”ç©¶ TDD æ˜¯å¦å¯ä»¥ç´å…¥å¤§å­¸æ•™è‚²ä¸­ï¼Œ ä»¥æé«˜å­¸ç”Ÿçš„è¨­è¨ˆå’Œæ¸¬è©¦èƒ½åŠ›ã€‚ XP-EF, ä¸€å€‹æŒçºŒé€²è¡Œè©•ä¼° XP å°ˆæ¡ˆæ¡ˆä¾‹ç ”ç©¶çš„æ¡†æ¶[16] é…å°ç·¨ç¨‹(Pair programming): å…©åç¨‹å¼é–‹ç™¼äººå“¡å…±åŒåœ¨åŒä¸€è‡ºé›»è…¦ä¸Šå·¥ä½œï¼Œä¸€äººè² è²¬å¯«ä»£ç¢¼ï¼Œå¦ä¸€äººè² è²¬æª¢æŸ¥ã€‚ ä»£ç¢¼æª¢æŸ¥(Code inspection): è»Ÿé«”é–‹ç™¼ä¸­å°æ–¼åŸä»£ç¢¼é€²è¡Œå¯©æŸ¥ä»¥æª¢æŸ¥å…¶å“è³ªå’Œå¯é æ€§ã€‚ L. Williams, L. Layman, and W. Krebs, Extreme Programming Evaluation Framework for Object-Oriented Languages, v. 1.4, tech. report TR-2004-18, North Carolina State Univ., 2004. Even if Xp fades in popularity å³ä½¿æœªä¾† XP é€æ¼¸å¤±å»æµè¡Œï¼Œä½†æ˜¯ TDD å¯èƒ½ä»ç„¶æŒçºŒå­˜åœ¨ã€‚å¦‚æœTDDé€²å…¥å­¸è¡“é ˜åŸŸï¼Œå­¸ç”Ÿå€‘å¯ä»¥å¸¶è‘—æ›´å¥½çš„ç´€å¾‹å’Œæ›´å¥½çš„è»Ÿé«”è¨­è¨ˆå’Œæ¸¬è©¦æŠ€èƒ½é€²å…¥è»Ÿé«”é–‹ç™¼çµ„ç¹”ï¼Œ å¾è€Œæé«˜è»Ÿé«”å·¥ç¨‹ç¤¾å€å¯é åœ°ç”Ÿç”¢ã€é‡ç”¨å’Œç¶­è­·é«˜å“è³ªè»Ÿé«”çš„èƒ½åŠ›ã€‚ NOTE é€™ç¯‡è«–æ–‡å¾ˆå¥½çš„ä»‹ç´¹äº† TDD çš„æ¦‚å¿µèˆ‡æ­·å²ã€å·¥å…·ã€åœ¨ 2005 å¹´æ™‚çš„æœªä¾†å±•æœ›ï¼ŒåŒæ™‚çµå°¾çš„è«–è¿°ä¹Ÿéå¸¸æº–ç¢ºï¼Œ2023 å¹´çš„ä»Šå¤© XP å·²ç¶“ä¸å†åƒ 2002 é‚£æ¨£æµè¡Œï¼Œ ä½†æ˜¯ TDD ä»ç„¶æ˜¯é‡è¦çš„é–‹ç™¼æ–¹å¼ï¼Œä¸¦ä¹Ÿç™¼å±•äº†å¾ŒçºŒçš„ BDD ç­‰ã€‚ Last edit 04-29-2023 18:24"
  },"/jekyll/2023-04-18-applying_isoiec25010.html": {
    "title": "Paper | Applying the ISO/IEC 25010 Quality Models to Software Product",
    "keywords": "software software_qualitiy standard Jekyll",
    "url": "/jekyll/2023-04-18-applying_isoiec25010.html",
    "body": "John Estdale &amp; Elli Georgiadou, (2018) Applying the ISO/IEC 25010 Quality Models to Software Product, IEEE. 1. Introduction è»Ÿé«”é–‹ç™¼éç¨‹ä¸­ï¼Œæˆ‘å€‘è‘—é‡çš„æ˜¯å¦‚ä½•äº¤ä»˜è»Ÿé«”ç”¢å“ï¼Œä½†æ˜¯æ½›åœ¨çš„è³¼è²·è€…å…¶å¯¦æ›´åœ¨æ„è»Ÿé«”ç”¢å“èƒ½ç‚ºä»–å€‘å¸¶ä¾†çš„æœªä¾†æœå‹™åƒ¹å€¼ï¼Œä¹Ÿå°±æ˜¯è»Ÿé«”èƒ½å¤ åœ¨å¯¦éš›ä½¿ç”¨ä¸­å¸¶ä¾†çš„æ•ˆç›Šã€‚ISO/IEC 25010: 2011 æ˜¯è©•ä¼°è»Ÿé«”ç”¢å“è³ªé‡çš„é‡è¦æ¨™æº–ï¼Œå¯ä»¥å¹«åŠ©æˆ‘å€‘ç¢ºå®šè»Ÿé«”æµç¨‹çš„äº¤ä»˜è¡¨ç¾ä»¥åŠæå‡ºæ”¹é€²å»ºè­°ã€‚è«–æ–‡å¾ä»¥ç”Ÿå‘½é€±æœŸç‚ºå°å‘çš„æœå‹™è§€é»å‡ºç™¼ï¼Œæ¢è¨ ISO/IEC 25010 æ¨¡å‹çš„ç¯„åœå’Œè§£é‡‹ï¼Œä¹Ÿç¢ºèªäº†è³¼è²·è€…é—œæ³¨çš„å…¶ä»–é‡è¦è»Ÿé«”ç”¢å“æ–¹é¢ï¼Œä¸¦æå‡ºäº†å¯èƒ½éœ€è¦çš„å“è³ªè¦æ±‚å’Œè©•ä¼°æ–¹å¼ã€‚ 2. ISO/IEC 250xx series: SQuaRE SQuaRE æ¨™æº–çš„ç›®æ¨™æ˜¯å¹«åŠ©é–‹ç™¼å’Œç²å–ç³»çµ±å’Œè»Ÿä»¶ç”¢å“çš„äººå“¡è¦ç¯„å’Œè©•åƒ¹ç”¢å“çš„è³ªé‡è¦æ±‚ï¼Œä¸¦å»ºç«‹ä¸€å€‹æ”¯æŒè³ªé‡æ¸¬é‡çš„éç¨‹ã€‚éå»çš„ ISO/IEC 9001 æ¨™æº–ä¸»è¦é—œæ³¨æ˜¯å¦ç¬¦åˆå…ˆè¦å®šçš„è¦æ ¼æˆ–è¦æ±‚ï¼Œè€Œç¾å†æ›´åŒ…å«äº†å®¢æˆ¶ä¸Šçš„éœ€æ±‚èˆ‡æœŸæœ›ã€‚ åœ¨è»Ÿé«”å“è³ªç‰¹å¾µä¸­å¯åˆ†ç‚ºå…©å€‹æ¨¡å‹ï¼š ä½¿ç”¨å“è³ª(Quality in Use) æ˜¯æŒ‡ç”¢å“èƒ½å¤ åœ¨ç‰¹å®šä½¿ç”¨æƒ…å¢ƒä¸‹ï¼Œç”±ç‰¹å®šç”¨æˆ¶æ»¿è¶³å…¶éœ€æ±‚ä¸¦é”æˆå…¶ç‰¹å®šç›®æ¨™çš„ç¨‹åº¦ã€‚ ç”¢å“å“è³ª(Product Quality) å‰‡æ˜¯æŒ‡èˆ‡è»Ÿé«”çš„éœæ…‹ç‰¹æ€§å’Œé›»è…¦ç³»çµ±çš„å‹•æ…‹ç‰¹æ€§ç›¸é—œçš„å“è³ªç‰¹å¾µï¼Œé€™äº›ç‰¹å¾µåŒ…æ‹¬äº†ä¾‹å¦‚å¯é æ€§ã€æ•ˆèƒ½ã€å¯ç¶­è­·æ€§ã€å¯ç§»æ¤æ€§ç­‰ã€‚ è©³ç´°çš„æ•˜è¿°èˆ‡å­é …å¯è¦‹Note - ISO/IEC åœ¨è«–æ–‡ä¸­å°‡ ISO/IEC 25010: 2011 åˆ†ç‚ºå…©ç¨®é¡å‹çš„æ¨¡å‹ 3. Applying the ISO/IEC 25010: 2011 Quality Models ä¸åƒç‰©ç†ä¸–ç•Œï¼Œæœ‰æ˜ç¢ºç¨ç«‹çš„å°ºå¯¸å’Œæ˜ç¢ºå®šç¾©çš„åº¦é‡ï¼ˆå¦‚é•·åº¦ã€è³ªé‡ã€æ™‚é–“ã€é›»æµã€ç†±åŠ›å­¸æº«åº¦ã€å…‰å¼·åº¦ç­‰ï¼‰ã€‚ è»Ÿä»¶å“è³ªæ¦‚å¿µå‰‡æœ‰é»æ¨¡ç³Šä¾‹å¦‚å…¼å®¹æ€§ï¼Œé‡æ–°å®šç¾©å’Œé‡çµ„é€™äº›æ¦‚å¿µå°±æ˜¯ ISO/IEC 25010 å·¥ä½œçš„ä¸€éƒ¨åˆ†ã€‚ â€œa conceptual framework and not a ready-to-use solutionâ€ from Biscoglio and Marchetti (2015) define software quality evaluation plans in a conference paper. æ‡‰ç”¨å“è³ªç®¡ç†ä¸­çš„ 7Ms Model ä¾†æ¶µè“‹è»Ÿé«”é–‹ç™¼ä¸­çš„è¡Œç‚º 7Ms Model æ˜¯å“è³ªç®¡ç†ä¸­å¸¸ä½¿ç”¨çš„å·¥å…·ï¼Œå…¶ä¸­çš„ M å¯è¦–ç‚ºæ˜¯å“è³ªç®¡ç†ä¸­çš„åŸºæœ¬è¦ç´ ï¼Œå…¶ä¸­åŒ…å«: Machine, Method, Material, Manpower, Management, Milieu, Measurement 4. Quality in Use ç¬¬4ã€5ç¯€å‰‡å° Table 1. çš„çµæ§‹ä¾†ä¾åºæŸ¥çœ‹å„å€‹ç‰¹æ€§çš„å®šç¾©ï¼Œä¸¦åˆ†æèˆ‡è©•ä¼°å„å€‹ç‰¹æ€§ï¼Œè‹¥æœ‰éœ€è¦å‰‡é€²ä¸€æ­¥è©•ä¼°å­ç‰¹æ€§ã€‚ 4.1 Achievement of Needs Effectiveness(æ•ˆæœ), Efficiency(æ•ˆç‡) ISO/IEC 25010 ä¸åŒ…å«å°æ‡‰ç”¨ç¨‹å¼çš„å…·é«”åŠŸèƒ½èˆ‡ç‰¹è‰²çš„è©•ä¼°ï¼Œå®ƒå€‘çš„åƒ¹å€¼åƒ…èƒ½ç”±æ¡è³¼æ–¹çš„çµ„ç¹”çš„éœ€è¦ä¾†è©•ä¼°ã€‚ å› æ­¤é€™è£¡çš„æ•ˆæœèˆ‡æ•ˆç‡åƒ…ç‚ºç•¶ç”¨æˆ¶å¯¦ç¾ç‰¹å®šç›®æ¨™æ™‚çš„æŒ‡æ¨™ã€‚ Example: Apple Inc. åœ¨å®šç¾© App store æ™‚å°‡é€™ä¸€éœ€æ±‚æè¿°ç‚º: â€œIf your App doesnâ€™t provide some form of lasting entertainment value, or is just plain creepy, it may not be accepted.â€ ; ã€Œå¦‚æœä½ çš„æ‡‰ç”¨ç¨‹å¼æ²’æœ‰æä¾›æŒä¹…çš„å¨›æ¨‚åƒ¹å€¼ï¼Œæˆ–è€…å¾ˆä»¤äººä¸èˆ’æœï¼Œå®ƒå¯èƒ½ä¸æœƒè¢«æ¥å—ã€‚ã€ é€™å°±èˆ‡ ISO/IEC æ¨™æº–æ‰€è¨è«–çš„ stated and implied needs æœ‰æ‰€åå·®ã€‚ 4.2 Freedom from Risk è¬›è¿°å°æ–¼ä¸åŒè¡Œæ¥­ä¸Šç”¢å“æ‡‰è©²å°Šå´‡æ³•å¾‹å’Œæ³•è¦çš„è¦æ±‚ï¼Œå°¤å…¶æ˜¯å®ƒå€‘å¯èƒ½åœ¨ä¸åŒçš„æ™‚é–“ï¼Œç”±ä¸åŒçš„æ©Ÿæ§‹æ‰€åˆ¶å®šå› æ­¤ç¶“å¸¸æ˜¯è¤‡é›œä¸¦æ˜“ç™¼ç”Ÿè¡çªçš„ã€‚ ä½†æ˜¯ç”¢å“ä¾›æ‡‰è€…æ‡‰è©²è¦äº†è§£åœ¨éŠ·å”®å€åŸŸå…§ä½¿ç”¨å…¶ç”¢å“çš„æ‰€æœ‰é™åˆ¶ï¼Œä¸¦æ˜ç¢ºèªªæ˜ä½¿ç”¨é™åˆ¶èˆ‡å‡è¨­ã€‚ è«–æ–‡ä¸­èªç‚ºæ‡‰è©²å›å¾© ISO/IEC éå»çš„ Compli-ance å­é …ç›®å·²æ¶µè“‹å°æ–¼æ³•å¾‹ã€ç›£ç®¡èˆ‡åˆåŒç›¸é—œçš„åˆç¬¦è¦ç¯„æ€§è¦æ±‚ã€‚ 5 Product Quality é€™äº›é—œæ–¼ Product Quality(ç”¢å“å“è³ª)çš„ç‰¹æ­£ä¸»è¦æ˜¯é–‹ç™¼è€…/ä¾›æ‡‰å•†æˆ–åœ¨æŠ€è¡“ä¸Šæœ‰æ›´å¤šåƒèˆ‡çš„è³¼è²·è€…æ‰€é—œå¿ƒçš„ã€‚ Functional suitability(åŠŸèƒ½é©ç”¨æ€§) å…¶å­é … Completeness(å®Œæ•´æ€§), Correctness(æ­£ç¢ºæ€§), Appropriateness(é©åˆæ€§)é€™äº›éƒ½æ˜¯é–‹ç™¼è€…æ‰€é€²è¡Œçš„å…ˆè¡Œè©•ä¼°ï¼Œä½†æ˜¯æœ€çµ‚è©•ä¼°é‚„æ˜¯åœ¨è³¼è²·æ–¹çš„æ‰‹ä¸Šã€‚ Performance efficiency(æ€§èƒ½æ•ˆèƒ½) å°æ–¼è»Ÿé«”é–‹ç™¼ä¸Šæ‰€é€²è¡Œçš„è©•ä¼°èˆ‡æ¸¬è©¦å¯èƒ½ä¸æ˜¯æœ€çµ‚äº¤ä»˜å¾Œçš„å¯¦éš›é‹è¡Œç’°å¢ƒï¼Œå› æ­¤åœ¨é–‹ç™¼æœŸé–“é€²è¡Œçš„è»Ÿé«”ç”¢å“æ¸¬è©¦å¯èƒ½ç„¡æ³•å®Œå…¨åæ˜ æœ€çµ‚äº¤ä»˜å¾Œçš„è¡¨ç¾ã€‚ 5.1 Compatibility(å…¼å®¹æ€§) Co-existence(å…±å­˜æ€§)æŒ‡ç”¢å“èƒ½å¦èˆ‡å…¶ä»–åœ¨åŒä¸€å¹³å°ä¸Šé‹è¡Œçš„ç”¢å“å”èª¿å…±å­˜ï¼Œä¸¦ä½¿ç”¨æ‰€æä¾›çš„æœå‹™å…±äº«è³‡æºï¼Œä¸¦ä¸”ä¸è¦å½±éŸ¿å…¶ä»–æœå‹™ã€‚ Interoperability(äº’ç›¸æ“ä½œæ€§)æŒ‡ç”¢å“èˆ‡å…¶ä»–ç³»çµ±ã€ç”¢å“æˆ–çµ„ä»¶ä¹‹é–“æ˜¯å¦èƒ½å¤ äº¤æ›ä¿¡æ¯ã€‚å¦‚åœ¨ä½œæ¥­ç³»çµ±æª”æ¡ˆå€åŸŸä¸­å°‡æª”æ¡ˆä»¥æ»‘é¼ æ‹–æ‹‰è‡³ç”¢å“æª”æ¡ˆä¸Šå‚³å€åŸŸã€‚ 5.2 Usability(æ˜“ç”¨æ€§) æ˜“ç”¨æ€§ä¸‹çš„å­ç‰¹æ€§å¯ä»¥è¢«ç†è§£ç‚ºç”¨æˆ¶å¦‚ä½•è­˜åˆ¥ä¸€å€‹ç”¢å“æ˜¯å¦é©åˆå®ƒå€‘çš„ç¨‹åº¦ï¼Œæ‰€ä»¥åŒ…å«äº†ä¾›æ‡‰è€…å¦‚ä½•æè¿°ç³»çµ±ï¼Œèªªæ˜æ–‡ä»¶ç­‰ç­‰ã€‚ 5.3 Reliability(å¯é æ€§) å¯é æ€§é—œæ³¨çš„æ˜¯ç”¢å“çš„ç©©å®šæ€§å’ŒæŒçºŒæ€§ï¼Œéœ€è¦è€ƒæ…®å¤šç¨®å› ç´ ï¼ŒåŒ…æ‹¬ç¡¬ä»¶æ•…éšœã€äººç‚ºéŒ¯èª¤ã€ç³»çµ±å´©æ½°ã€ç¶²è·¯ä¸­æ–·ç­‰ç­‰ã€‚ 5.4 Security(å®‰å…¨æ€§) ç”¢å“è¦ç¢ºä¿å¦‚æ§åˆ¶å­˜å–, ç¢ºä¿è³‡æ–™å®Œæ•´æ€§, ä¿è­·æ©Ÿå¯†ç­‰ç­‰çš„æ©Ÿåˆ¶ï¼Œä¾‹å¦‚ Apple store ä¸Šå› ç‚º APP å¤§å¤šç¶“ç”±æ‰¹å‡†éå› æ­¤åŸºæœ¬ä¿è­‰ä½¿ç”¨è€…ä¸æœƒåœ¨å•†åº—ä¸­é­é‡æƒ¡æ„è»Ÿé«”ã€‚ 5.5 Maintainability(å¯ç¶­è­·æ€§) å¯ç¶­è­·æ€§å®šç¾©ç‚ºèƒ½è¢«é æœŸçš„ä½¿ç”¨è€…æœ‰æ•ˆçš„ä¿®æ”¹èˆ‡ç¶­è­·çš„ç¨‹åº¦ Analyzability(å¯åˆ†ææ€§)åŒ…æ‹¬å¯é æœŸçš„è©•ä¼°è®ŠåŒ–çš„å½±éŸ¿ï¼Œåˆ¤æ–·ç¼ºå¤±å’Œæ•…éšœï¼Œä¹Ÿå°±æ˜¯åœ¨å·¥ä½œå‰çš„èƒ½åšçš„è©•ä¼°ã€‚èˆ‡ç¾å ´å·¥ä½œä¸­èƒ½æ³¨æ„åˆ°çš„å•é¡Œï¼Œé€™éœ€è¦æœ‰æ•ˆçš„è­˜åˆ¥éŒ¯èª¤æ©Ÿåˆ¶ã€‚ Testability(å¯æ¸¬è©¦æ€§)å¯æ¸¬è©¦æ€§æ˜¯å¾ˆé‡è¦çš„ï¼Œå…¶ä¸­åŒ…å« low-level ä¸­çš„çµ„ä»¶æ¸¬è©¦ã€å–®å…ƒæ¸¬è©¦ã€‚èˆ‡ high-level çš„æ¸¬è©¦(é€šéé–‹ç™¼å’Œç¶­è­·å›æ­¸æ¸¬è©¦å¥—ä»¶ä¾†ç¢ºèªæœå‹™æ²’æœ‰ä¸‹é™ç´šåˆ¥ï¼Œ å³æ€§èƒ½ä¸‹é™è‡³æ¯”ä¹‹å‰æ›´å·®çš„ç‹€æ…‹)ã€‚ Extensibility(å¯æ“´å¼µæ€§) æ˜¯åœ¨å…ˆå‰[20]æ›¾æå‡ºéä¸€å€‹æ‡‰è©²å¢åŠ çš„ä¸»è¦ç‰¹æ€§ï¼Œæå‡ºæ¨¡å¡ŠåŒ–å’Œç‰©ä»¶å°å‘çš„è»Ÿé«”å¯ä»¥æ›´å®¹æ˜“çš„æ“´å±•ï¼Œ ä¸¦ä¸” Tested classed å¯ä»¥ç›´æ¥é›†æˆåˆ°ç¾æœ‰ç³»çµ±ä¸­ï¼Œç„¡é ˆé‡é ­é–‹å§‹å»ºæ§‹æˆ–æ¸¬è©¦æ•´å€‹ç³»çµ±ã€‚ [20] Siakas, K.V., Georgiadou, E.: PERFUMES: A Scent of Product Quality Characteristics. In: International Software Quality Management Conference, pp. 211-20. BCS, London (2005) 5.6 Portability(å¯ç§»æ¤æ€§) å‚³çµ±ä¸Šè»Ÿé«”çš„å¯ç§»æ¤æ€§æ˜¯æŒ‡é–‹ç™¼è€…å°æ–¼ Source code çš„å†ç·¨è­¯ã€å»ºæ§‹ç­‰ã€‚å°æ–¼æŒ‡å®šå¹³å°è³¼è²·æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œç•¶è½‰ç§»åˆ°æ–°çš„å¹³å°æ™‚éœ€è¦è³¼è²·æ–°çš„å¯¦ç¾ï¼Œä¸¦å°‡æ•¸æ“šã€é…ç½®ç­‰è½‰ç§»åˆ°æ–°çš„ç’°å¢ƒä¸­ã€‚ ISO/IEC 25010 çš„å¯ç§»æ¤æ€§åŒ…å«è³¼è²·çš„ç”¢å“èƒ½åœ¨é æœŸçš„å¹³å°ä¸Šé‹è¡Œï¼ŒåŒ…å«æ’ä»¶å…¼å®¹ï¼Œè™›æ“¬çš„æˆ–åŸºæ–¼é›²çš„ç’°å¢ƒã€‚ Replaceability(å¯æ›¿æ›æ€§)å‰‡æŒ‡ç¾æœ‰ç”¢å“çš„ä¸€å€‹ç‰ˆæœ¬è¢«å¦ä¸€å€‹ç‰ˆæœ¬æ›¿æ›ï¼Œé–‹ç™¼è€…æ‡‰è©²è€ƒæ…®æ›´å»£æ³›çš„æœå‹™å•é¡Œï¼Œå¦‚ç¾æœ‰æ•¸æ“šå¦‚ä½•é·ç§»èˆ‡æ¸›å°‘ä½¿ç”¨è€…ä»‹é¢çš„æ”¹é¢ã€‚ å•†æ¥­æ…£ä¾‹æ˜¯å‘å‰å…¼å®¹å°±æ˜¯ä»»ä½•æ–°ç‰ˆæœ¬æ‡‰è©²ä¿æŒæ‰€æœ‰ä»¥å‰çš„åŠŸèƒ½èˆ‡ç‰¹æ€§ï¼Œæ²’æœ‰å€’é€€ã€‚ 5.7 Supportability(å¯æ”¯æ´æ€§) ä½œè€…èªç‚ºæ‡‰è©²åœ¨ ISO ä¸­åŠ å…¥çš„ç‰¹æ€§ï¼Œèˆ‡5.5 Maintainabilityé¡ä¼¼æ˜¯é æ¸¬æœªä¾†çš„ä¸€å€‹å› ç´ ï¼Œä½†èˆ‡å¯ç¶­è­·æ€§ä¸åŒçš„æ˜¯é€™ä»£è¡¨çš„æ˜¯ä¸€äº›é–‹ç™¼æ–¹å°è³¼è²·è€…æ‰€éœ€è¦çš„æ”¯æ´ï¼Œ å¦‚: ç·Šæ€¥æ±‚æ•‘é›»è©±ï¼Œé ç¨‹è¨ºæ–·ä¸æ¥è§¸ Source code æˆ–å…¶ä»–ç§å¯†è¨Šæ¯çš„æ”¯æŒ; ä¿¡æ¯æˆ–å·¥å…·ã€‚é€™æ˜¯é–‹ç™¼æ–¹åœ¨ç«¶çˆ­å¸‚å ´ä¸Šæä¾›é«˜å“è³ªç”¢å“å’Œæœå‹™çš„é—œéµä¹‹ä¸€ã€‚ 6. Other Characteristics of the Product at Delivery ä½œè€…èªç‚ºåœ¨ SQuaRE ä¸­å…¶ä»–é‡è¦çš„ç‰¹æ€§èˆ‡å½±éŸ¿ 6.1 Honesty and Openness æœ‰æ˜ç¢ºçš„è¦æ±‚è¦é€²è¡Œé–‹æ”¾å’Œèª å¯¦çš„æºé€šï¼Œæ—¢é‡å°è€ƒæ…®è³¼è²·çš„è²·æ–¹ï¼Œä¹Ÿé‡å°ä¸‹è¼‰æ‡‰ç”¨çš„ä½¿ç”¨è€…ã€‚åœ¨SQuaREå“è³ªæ¨¡å‹ä¸­ï¼Œèª¤å°æ€§çš„æ–‡ä»¶ä¸¦æœªè¢«è€ƒæ…®é€²å»ã€‚ å¦‚è˜‹æœå…¬å¸æ‹’çµ•æŸäº›æ‡‰ç”¨çš„åŸå› åŒ…æ‹¬: ã€Œæ‡‰ç”¨æœªèƒ½å¦‚é–‹ç™¼äººå“¡æ‰€å®£ç¨±çš„é‚£æ¨£é‹ä½œã€ ã€Œæ‡‰ç”¨åŒ…å«æœªå…¬é–‹æˆ–èˆ‡æè¿°ä¸ä¸€è‡´çš„éš±è—åŠŸèƒ½ã€ ã€Œæ—¨åœ¨æä¾›è©æ¬ºæˆ–å‡åŠŸèƒ½çš„æ‡‰ç”¨ï¼Œä½†æœªæ˜ç¢ºæ¨™ç¤ºã€ã€‚ 6.2 Product Maturity ç”¢å“çš„æˆç†Ÿåº¦ç”Ÿå‘½é€±æœŸ: initial development(åˆæœŸé–‹ç™¼), active evolution(ç©æ¥µç™¼å±•), servicing(ç¶­è­·èˆ‡æœå‹™), phase out(æ·˜æ±°). è¿½æ±‚å¯é æ€§çš„è³¼è²·è€…æ›´å–œæ­¡ç¬¬ä¸‰éšæ®µçš„ç”¢å“ï¼Œè€Œæ›´é—œæ³¨ç”¢å“ç‰¹æ€§èˆ‡åŠŸèƒ½çš„è³¼è²·è€…å¯èƒ½æ›´å–œæ­¡ç¬¬äºŒéšæ®µçš„ç”¢å“ã€‚ ä¸€å€‹ç”¢å“æœƒéš¨è‘—æ™‚é–“çš„è®Šå¾—è¶Šä¾†è¶Šè¤‡é›œï¼Œé™¤éé€²è¡Œæ¸›å°‘è¤‡é›œåº¦çš„ç¶­è­·å·¥ä½œã€‚åœ¨[23]ä¸­é¡¯ç¤ºäº†éå»ç”¢å“ç¶­è­·å°æ–¼æœªä¾†å“è³ªçš„å¼·çƒˆå½±éŸ¿ã€‚ [23] Lehman M.M., Perry D.E. Ramil J.F.: Implication of Evolution Metrics on Software Maintenance. In: International Conf on Software Maintenance, pp. 208-17, IEEE (1998). doi: 10.1109/ICSM.1998.738510 7. In-life Experience, post-Deployment æœ€çµ‚å°è³¼è²·è€…ä¾†èªªé‡è¦çš„æ˜¯ç”¢å“åœ¨å¯¦éš›ä½¿ç”¨ä¸Šçš„è¡¨ç¾ï¼Œä½†é€™å€‹è¡¨ç¾å¿…é ˆç­‰åˆ°éƒ¨å±¬æˆ–è³¼è²·å¾Œæ‰èƒ½çŸ¥æ›‰ã€‚ SQuaRE ç›®å‰æ²’æœ‰æ¶‰åŠé€™äº›æ–¹é¢ï¼Œé€™éƒ¨åˆ†éƒ½æ˜¯ä¸Šç·šå¾Œæµç¨‹ï¼Œå¦‚æœè²·å®¶è¦æ±‚ç”¢å“ä¾›æ‡‰å•†ä»¥å”è­°çš„åƒ¹æ ¼æä¾›æ‰€æœ‰é€™äº›æ”¯æŒæœå‹™ï¼Œå‰‡éœ€è¦å»ºç«‹å…¨é¢çš„é¡å¤–æœå‹™å“è³ªæŒ‡æ¨™ã€‚ 7.1 Customer Support by Supplier å„˜ç®¡æ”¯æ´æœå‹™æ˜¯ä¸€ç¨®éƒ¨ç½²å¾Œæ´»å‹•ï¼Œä½†ä¾›æ‡‰å•†çš„æ”¯æ´èƒ½åŠ›ä»ç„¶æ˜¯è»Ÿé«”ç”¢å“è©•ä¼°ä¸­é‡è¦çš„ä¸€å€‹æ–¹é¢ï¼Œå³ä½¿å®ƒè¢«æ˜ç¢ºåœ°æ’é™¤åœ¨ ISO/IEC 250xx ç³»åˆ—çš„ç¯„åœä¹‹å¤–å› ç‚ºé€™åªå—åˆ°ç”¢å“æŠ€è¡“çš„è¼•å¾®å½±éŸ¿ï¼Œæ‡‰è©²è‡³å°‘è¦è¢«æåŠã€‚ 7.2 In-life Maintenance è³¼è²·è€…éœ€è¦çŸ¥é“ä¾›æ‡‰å•†çš„æ”¿ç­–å’Œæµç¨‹ï¼Œä»¥ä¾¿é æ¸¬å’Œè¦åŠƒç¶­è­·ç”¢å“çš„å·¥ä½œèˆ‡æˆæœ¬ã€‚ä¾‹å¦‚: æ‰¿è«¾ä¿®å¾©éŒ¯èª¤ï¼Œç™¼å¸ƒéŒ¯èª¤ä¿®å¾©èˆ‡æ–°ç‰ˆæœ¬çš„å“è³ªèˆ‡è®ŠåŒ–ç­‰ã€‚ 8. Conclusions &amp; 9. Relation to SPI Manifesto ä½œè€…æœ€ä¸»è¦çš„è²¢ç»æ˜¯è¨è«–äº† ISO/IEC 25010 çš„ç¯„åœï¼Œä¸¦é€²ä¸€æ­¥çš„è¨è«–: åˆæ³•ï¼Œæ³•è¦èˆ‡åˆç´„éµå¾ªæ€§ã€å¯æ“´å±•æ€§ã€æ”¯æŒæ€§ã€èª å¯¦æè¿°ã€ç”¢å“æˆç†Ÿåº¦å’ŒåŒ…æ‹¬ä¾›æ‡‰å•†å®¢æˆ¶æ”¯æŒå’Œéƒ¨ç½²å¾Œçš„ç¶­è­·åœ¨å…§çš„æ´»å‹•ã€‚ ä»¥æ­¤ä½¿ ISO/IEC 25010 æˆç‚ºæ›´å…¨é¢çš„å“è³ªæ¨¡å‹ï¼Œå¯ç”¨ä¾†è©•ä¼°è¦ç¯„æ˜¯å¦æ‡‰è©²æ”¹é€²ã€ç¶­æŒæˆ–å¿½ç•¥æŸäº›ç¶­åº¦çš„åŸºç¤ã€‚ SPI Manifesto: Base improvement on experience and measurements. Pries-Heje J., Johanson J., (eds.): SPI Manifesto, http://www.iscn.com/Images/SPI_Manifesto_A.1.2.2010.pdf last accessed 2018/05/28 NOTE Last edit 04-21-2023 12:32"
  },"/jekyll/2023-04-13-software_standard.html": {
    "title": "Note | Standard - ISO/IEC",
    "keywords": "software software_qualitiy standard Jekyll",
    "url": "/jekyll/2023-04-13-software_standard.html",
    "body": "ISO/IEC 9126 Software engineering â€” Product quality was an international standard for the evaluation of software quality. Intorduction å¦‚æœæƒ³å¾—åˆ°é«˜å“è³ªçš„è»Ÿé«”ï¼Œå°±è¦å…ˆèƒ½å¤ å°æ–¼è»Ÿé«”ç”¢å“çš„å“è³ªèƒ½å¤ é€²è¡Œå®Œæ•´çš„æè¿°ï¼Œå› æ­¤åœ‹éš›æ¨™æº–çµ„ç¹”ç™¼å¸ƒçš„ISO/IECå°±æ˜¯å¸¸è¢«å¼•ç”¨çš„è»Ÿé«”ç”¢å“å“è³ª(Software Product Qualitiy)æ¨™æº–ã€‚ é€™å€‹æ¨™æº–çš„ç›®æ¨™æ˜¯å»æ‡‰å°ä¸€äº›å·²çŸ¥çš„äººé¡åè¦‹ï¼Œé€™äº›åè¦‹å°‡å¯èƒ½æœƒå°è»Ÿé«”é–‹ç™¼å°ˆæ¡ˆçš„äº¤ä»˜å’ŒèªçŸ¥ç”¢ç”Ÿä¸åˆ©å½±éŸ¿ã€‚é€™äº›åè¦‹åŒ…æ‹¬åœ¨é …ç›®é–‹å§‹å¾Œæ›´æ”¹å„ªå…ˆé †åº[1]æˆ–æ²’æœ‰ä»»ä½•æ¸…æ¥šçš„æˆåŠŸ[2]å®šç¾©ã€‚ æ‰€ä»¥é€šéæ˜ç¢ºèªªæ˜èˆ‡ç¢ºå®šé …ç›®çš„å„ªå…ˆé †åºï¼Œå°‡æŠ½è±¡çš„æ¦‚å¿µè½‰åŒ–ç‚ºå¯è¡¡é‡çš„æ•¸å€¼æˆ–æŒ‡æ¨™ã€‚ä¸¦ä¸”è¼¸å‡ºæ•¸æ“šå¯ä»¥æ ¹æ“šæ¶æ§‹X(Schema X)[3]é€²è¡Œé©—è­‰ï¼Œä¸éœ€è¦ä»»ä½•å¹²é ã€‚ ç›®å‰æœ€æ–°çš„æ¨™æº–æ˜¯ ISO/IEC 25010:2011 ä½¿ç”¨å…©å€‹æ¨¡å‹ä¾†æè¿°åˆ†åˆ¥ç‚º ä½¿ç”¨å“è³ª(Quality in Use) èˆ‡ ç”¢å“å“è³ª(Product Quality)ã€‚ å„ªå…ˆé †åº: å„ªå…ˆé †åºæŒ‡çš„æ˜¯è»Ÿé«”é–‹ç™¼ä¸­å„å€‹ä»»å‹™ã€åŠŸèƒ½ã€éœ€æ±‚ç­‰é€²è¡Œæ’åºï¼Œä»¥ç¢ºå®šå…¶ç›¸å°é‡è¦æ€§å’Œå„ªå…ˆç´šã€‚ æˆåŠŸ: å°±æ˜¯å°æ–¼é …ç›®ç›®æ¨™çš„æ¸…æ™°å®šç¾©å’Œæ˜ç¢ºè¡¡é‡æ¨™æº–çš„ç¢ºç«‹ï¼Œä»¥ä¾¿èƒ½å¤ ç¢ºå®šé …ç›®æ˜¯å¦å·²ç¶“é”åˆ°é æœŸçš„æˆæ•ˆèˆ‡ç›®æ¨™ã€‚ æ¶æ§‹X(Schema X): ä»»ä½•ç‰¹å®šçš„æ•¸æ“šæ¶æ§‹æˆ–æ ¼å¼ï¼Œä»¥é©—è­‰è¼¸å‡ºæ•¸æ“šæ˜¯å¦ç¬¦åˆæ¨™æº–ã€‚ Product Quality åŠŸèƒ½é©ç”¨æ€§ï¼ˆFunctional suitabilityï¼‰ åŠŸèƒ½å®Œæ•´æ€§ï¼ˆFunctional completenessï¼‰: ç”¢å“æ˜¯å¦å®Œæ•´æ¶µè“‹äº†æ‰€æœ‰æŒ‡å®šç›®æ¨™èˆ‡ä»»å‹™çš„ç¨‹åº¦ã€‚ åŠŸèƒ½æ­£ç¢ºæ€§ï¼ˆFunctional correctnessï¼‰: ç”¢å“æä¾›å…·æœ‰æ‰€éœ€ç²¾åº¦æˆ–è€…ç›¸ç¬¦çš„çµæœçš„ç¨‹åº¦ã€‚ åŠŸèƒ½é©åˆæ€§ï¼ˆFunctional appropriatenessï¼‰: ç”¢å“æ˜¯å¦å…·æœ‰é©ç•¶çš„åŠŸèƒ½å®ŒæˆæŒ‡å®šå·¥ä½œçš„ç¨‹åº¦ã€‚ æ€§èƒ½æ•ˆèƒ½ï¼ˆPerformance efficiencyï¼‰ æ™‚é–“è¡Œç‚ºï¼ˆTime behaviorï¼‰: æŒ‡ä¸€å€‹ç”¢å“æˆ–ç³»çµ±åœ¨åŸ·è¡Œå…¶åŠŸèƒ½æ™‚çš„åæ‡‰èˆ‡ååç‡ã€‚ è³‡æºåˆ©ç”¨ç‡ï¼ˆResource utilizationï¼‰: ç”¢å“åœ¨åŸ·è¡ŒåŠŸèƒ½æ™‚ä½¿ç”¨çš„è³‡æºæ•¸é‡èˆ‡é¡å‹ã€‚ å®¹é‡(Capacity): æŒ‡ç”¢å“æˆ–ç³»çµ±åƒæ•¸çš„æœ€å¤§è² è¼‰æˆ–å·¥ä½œé‡é™åˆ¶ã€‚ ç›¸å®¹æ€§ï¼ˆCompatibilityï¼‰ å…±å­˜ï¼ˆCo-existenceï¼‰: æŒ‡ä¸€å€‹ç”¢å“åœ¨èˆ‡ç”¢å“å…±äº«ç’°å¢ƒèˆ‡è³‡æºæ™‚ï¼Œèƒ½æœ‰æ•ˆåŸ·è¡Œå…¶åŠŸèƒ½çš„ç¨‹åº¦ï¼Œä¸æœƒå°å…¶ä»–ç”¢å“ç”¢ç”Ÿè² é¢å½±éŸ¿ã€‚ äº’ç›¸æ“ä½œæ€§ï¼ˆInteroperabilityï¼‰: æŒ‡å…©å€‹æˆ–å¤šå€‹ç³»çµ±ï¼Œç”¢å“é–“å¯ä»¥äº’ç›¸äº¤æ›è¨Šæ¯ä¸¦ä½¿ç”¨çš„ç¨‹åº¦ã€‚ å¯é æ€§ï¼ˆReliabilityï¼‰ æˆç†Ÿåº¦ï¼ˆMaturityï¼‰: ç”¢å“åœ¨æ­£å¸¸é‹è¡Œä¸‹æ»¿è¶³å¯é æ€§è¦æ±‚çš„ç¨‹åº¦ã€‚ å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰: ç”¢å“åœ¨é‹è¡Œä¸‹å¯æ“ä½œèˆ‡å¯è¨ªå•æ€§çš„ç¨‹åº¦ã€‚ å®¹éŒ¯èƒ½åŠ›ï¼ˆFault toleranceï¼‰: ç›¡ç®¡å­˜åœ¨ç¡¬é«”æˆ–è»Ÿé«”æ•…éšœï¼Œä½†è»Ÿé«”ç³»çµ±ã€ç”¢å“æˆ–çµ„ä»¶ä¾ç„¶æŒ‰é€ é æœŸçš„é‹è¡Œçš„ç¨‹åº¦ã€‚ å¯æ¢å¾©æ€§ï¼ˆRecoverabilityï¼‰: ç•¶ç™¼ç”Ÿä¸­æ–·æˆ–æ•…éšœæ™‚ï¼Œè»Ÿé«”æˆ–ç³»çµ±èƒ½å¤ ç›´æ¥å›è¦†å—å½±éŸ¿çš„æ•¸æ“šä¸¦é‡æ–°å»ºç«‹ç³»çµ±æ‰€éœ€ç‹€æ…‹çš„ç¨‹åº¦ã€‚ æ˜“ç”¨æ€§ï¼ˆUsabilityï¼‰ è¢«è­˜åˆ¥çš„é©ç•¶æ€§ï¼ˆAppropriateness recognizabilityï¼‰: ç”¨æˆ¶èƒ½å¤ è­˜åˆ¥ç”¢å“æˆ–ç³»çµ±æ˜¯å¦ç¬¦åˆå®ƒå€‘éœ€æ±‚çš„ç¨‹åº¦ã€‚ æ˜“å­¸ç¿’æ€§ï¼ˆLearnabilityï¼‰: ç”¢å“æˆ–ç³»çµ±èƒ½å¤ ä½¿ç”¨æˆ¶åœ¨ç·Šæ€¥æƒ…æ³ä¸‹å­¸ç¿’å¦‚ä½•æœ‰æ•ˆçš„ä½¿ç”¨ä»–çš„ç¨‹åº¦ã€‚ å¸å¼•åŠ›ï¼ˆOperabilityï¼‰: ç”¢å“ä½¿ç”¨è€…èƒ½å®¹æ˜“æ“ä½œï¼Œæ§åˆ¶èˆ‡ä½¿ç”¨çš„ç¨‹åº¦ã€‚ ç”¨æˆ¶éŒ¯èª¤ä¿è­·ï¼ˆUser error protectionï¼‰: ç”¢å“ä¿è­·ç”¨æˆ¶ä¸å‡ºéŒ¯çš„ç¨‹åº¦ã€‚ ç”¨æˆ¶ä»‹é¢ç¾è§€(User Interface aesthetics): ç”¢å“æä¾›ç”¨æˆ¶ä»‹é¢ç¾è§€å’Œæ»¿æ„çš„ç¨‹åº¦ã€‚ å¯è¨ªå•æ€§(Accessibility): ç”¢å“èƒ½ä½¿æ‰€æœ‰ä½¿ç”¨è€…éƒ½èƒ½ä½¿ç”¨çš„ç¨‹åº¦ï¼Œå¦‚è½éšœã€è¦–éšœç­‰ç‰¹æ®Šéœ€æ±‚ç­‰ã€‚ å®‰å…¨æ€§ï¼ˆSecurityï¼‰ ä¿å¯†æ€§(Confidentiality): ç¢ºä¿ç”¢å“èƒ½ç¢ºä¿è³‡æ–™åªèƒ½è¢«æˆæ¬Šçš„äººå“¡è¨ªå•çš„ç¨‹åº¦ã€‚ å®Œæ•´æ€§(Integrity): ç”¢å“ã€ç³»çµ±è³‡è¨Šåœ¨è™•ç†çš„éç¨‹ä¸­ä¸è¢«æœªç¶“æˆæ¬Šå°±ä¿®æ”¹ï¼Œä¿æŒå®Œæ•´èˆ‡æ­£ç¢ºçš„ç¨‹åº¦ã€‚ æŠµæŠ—è³´æ€§(Non-repudistion): ç¢ºä¿ç”¢å“åœ¨èƒ½è­‰æ˜å·²ç¶“ç™¼ç”Ÿçš„äº‹ä»¶ï¼Œä»¥ä¾¿æœªä¾†è¡Œç‚ºä¸èƒ½è¢«ç•¶äº‹äººæŠµè³´çš„æƒ…æ³ã€‚ å¯è¿½æº¯æ€§(Accountability): ç¢ºä¿ç³»çµ±èƒ½è¿½è¹¤èˆ‡è¨˜éŒ„æ‰€æœ‰æ´»å‹•èˆ‡äº‹ä»¶ï¼Œä»¥ä¾¿è¿½è¹¤èˆ‡è¿½è²¬ã€‚ çœŸå¯¦æ€§(Authenticity): ç¢ºä¿è³‡è¨Šã€ç³»çµ±ã€ç”¨æˆ¶çš„çœŸå¯¦æ€§èˆ‡å¯ä¿¡æ€§ï¼Œé¿å…å‡å†’ã€è©æ¬ºã€å†’ç”¨ç­‰å•é¡Œçš„ç¨‹åº¦ã€‚ å¯ç¶­è­·æ€§ï¼ˆMaintainabilityï¼‰ æ¨¡å¡Šæ€§(Modularity): ç”¢å“æˆ–ç³»çµ±ç”±é›¢æ•£çµ„ä»¶æ‰€å®Œæˆï¼Œç•¶çµ„ä»¶ç”¢ç”Ÿæ›´æ”¹å°å…¶ä»–çµ„ä»¶ç”¢ç”Ÿæœ€å°å½±éŸ¿çš„ç¨‹åº¦ã€‚ å¯é‡è¤‡æ€§(Reusability): ç”¢å“ä¸­çš„å…ƒä»¶(é¡åˆ¥ã€å‡½æ•¸ç­‰)å¯è¢«å¤šæ¬¡ä½¿ç”¨é™ä½é–‹ç™¼æ™‚é–“çš„ç¨‹åº¦ã€‚ å¯åˆ†ææ€§(Analyzability): ç”¢å“å¯è¢«å®¹æ˜“çš„åˆ†æï¼Œç™¼ç¾æ½›åœ¨çš„å•é¡Œæˆ–ç¼ºé™·çš„ç¨‹åº¦ã€‚ å¯ä¿®æ”¹æ€§(Modifiability): ç”¢å“å¯ä»¥å®¹æ˜“åœ°é€²è¡Œä¿®æ”¹ï¼Œä¸¦ä¸”é€™äº›ä¿®æ”¹å¯ä»¥ä¸å½±éŸ¿ç³»çµ±çš„å…¶ä»–éƒ¨åˆ†ã€‚ å¯æ¸¬è©¦æ€§(Testability): ç”¢å“å¯ä»¥å®¹æ˜“åœ°é€²è¡Œæ¸¬è©¦ï¼Œä»¥ç¢ºä¿å®ƒçš„æ­£ç¢ºæ€§å’Œç©©å®šæ€§ã€‚ å¯ç§»æ¤æ€§ï¼ˆPortabilityï¼‰ é©æ‡‰æ€§(Adapatability): ç”¢å“æ˜¯å¦èƒ½é©æ‡‰ä¸æ–·ç™¼å±•çš„ç¡¬é«”ï¼›è»Ÿé«”æˆ–ä½¿ç”¨ç’°å¢ƒçš„ç¨‹åº¦ã€‚ æ˜“å®‰è£æ€§(Installability): ç”¢å“èƒ½å¦åœ¨ä¸åŒç’°å¢ƒä¸‹å®‰è£èˆ‡é…ç½®ä¸¦é€²è¡Œé‹è¡Œçš„ç¨‹åº¦ã€‚ å¯æ›¿æ›æ€§(Replaceability): åœ¨ç›¸åŒç’°å¢ƒä¸­ç”¨æˆ¶èƒ½æ‰¾åˆ°å…¶ä»–ç›¸åŒç›®çš„çš„æŒ‡å®šè»Ÿé«”çš„ç¨‹åº¦ã€‚ Quality in Use æ•ˆæœï¼ˆEffectivenessï¼‰ ç”¨æˆ¶å¯¦ç¾ç‰¹å®šç›®æ¨™çš„æº–ç¢ºæ€§å’Œå®Œæ•´æ€§ã€‚ æ•ˆç‡ï¼ˆEfficiencyï¼‰ ç›¸å°æ–¼ç”¨æˆ¶å¯¦ç¾ç›®æ¨™çš„æº–ç¢ºæ€§å’Œå®Œæ•´æ€§ï¼Œæ‰€è€—è²»çš„è³‡æºã€‚ æ»¿æ„åº¦ï¼ˆSatisfactionï¼‰ å¯¦ç”¨æ€§ï¼ˆUsefulnessï¼‰: æŒ‡ç”¨æˆ¶å°å¯¦ç¾å¯¦ç”¨ç›®æ¨™çš„å¯¦ç¾èˆ‡ä½¿ç”¨çµæœå’Œä½¿ç”¨å¾Œæœçš„æ»¿æ„åº¦ã€‚ ä¿¡ä»»æ€§ï¼ˆTrustï¼‰: ç”¨æˆ¶æˆ–å…¶ä»–ç›¸é—œè€…å°æ–¼ç”¢å“æˆ–ç³»çµ±æŒ‰é æœŸè¡Œç‚ºçš„ä¿¡ä»»ç¨‹åº¦ã€‚ æ„‰æ‚…æ€§ï¼ˆPleasureï¼‰: æŒ‡ç”¨æˆ¶å¾æ»¿è¶³å€‹äººéœ€æ±‚ä¸­ç²å¾—çš„æ„‰æ‚…ç¨‹åº¦ã€‚ èˆ’é©æ€§ï¼ˆComfortï¼‰: ä½¿ç”¨è€…åœ¨ä½¿ç”¨éç¨‹ä¸­ï¼Œå°æ–¼å…¶èº«é«”ä¸Šçš„èˆ’é©æ„Ÿå—çš„æ»¿æ„ç¨‹åº¦ã€‚ ç„¡é¢¨éšªæ€§ï¼ˆFreedom from Riskï¼‰ æ¸›è¼•ç¶“æ¿Ÿé¢¨éšª(Economic Risk Mitigation): ç”¢å“æˆ–ç³»çµ±åœ¨é æœŸä½¿ç”¨ç’°å¢ƒä¸­æ¸›è¼•è²¡å‹™ç‹€æ³ã€æœ‰æ•ˆé‹ç‡Ÿã€å•†æ¥­è²¡ç”¢ã€è²è­½æˆ–å…¶ä»–è³‡æºçš„æ½›åœ¨é¢¨éšªçš„ç¨‹åº¦ã€‚ é™ä½å¥åº·å’Œå®‰å…¨é¢¨éšª(Health and Safety Risk Mitigation): ç”¢å“æˆ–ç³»çµ±åœ¨é æœŸä½¿ç”¨ç’°å¢ƒä¸­é™ä½å°äººé«”çš„æ½›åœ¨é¢¨éšªçš„ç¨‹åº¦ã€‚ é™ä½ç’°å¢ƒé¢¨éšªï¼ˆEnvironmental Risk Mitigationï¼‰: ç”¢å“æˆ–ç³»çµ±åœ¨å…¶é æœŸä½¿ç”¨ç’°å¢ƒä¸­æ¸›è¼•èˆ‡ç’°å¢ƒç›¸é—œçš„æ½›åœ¨é¢¨éšªçš„ç¨‹åº¦ã€‚ æ¶µæ§‹è¦†è“‹ï¼ˆContext coverageï¼‰ æ¶µæ§‹å®Œæ•´æ€§ï¼ˆContext Completenessï¼‰: åœ¨æ‰€æœ‰æŒ‡å®šçš„ä½¿ç”¨ç’°å¢ƒä¸­ï¼Œç”¢å“æˆ–ç³»çµ±å¯ä»¥æœ‰æ•ˆã€é«˜æ•ˆã€ç„¡é¢¨éšªå’Œæ»¿æ„åœ°ä½¿ç”¨çš„ç¨‹åº¦ã€‚ éˆæ´»æ€§ï¼ˆFlexibilityï¼‰: ç”¢å“æˆ–ç³»çµ±åœ¨éœ€æ±‚ä¸­æœ€åˆæŒ‡å®šçš„ç¯„åœä»¥å¤–çš„ç’°å¢ƒä¸­å¯ä»¥æœ‰æ•ˆã€é«˜æ•ˆã€ç„¡é¢¨éšªå’Œæ»¿æ„åœ°ä½¿ç”¨çš„ç¨‹åº¦ã€‚ Advanced John Estdale(2018), Applying the ISO/IEC 25010 Quality Models to Software Product, IEEE é€™ç¯‡è«–æ–‡å‰‡å°æ¨™æº–ä¸­çš„å„é …ç‰¹æ€§åšäº†èªªæ˜èˆ‡æ›´é€²ä¸€æ­¥çš„æ¢è¨ï¼Œé–±è®€ç­†è¨˜ Note Link NOTE Last edit 04-17-2023 12:32"
  },"/jekyll/2023-02-04-algorithm_kmp.html": {
    "title": "Leetcode | Algorithm - KMP",
    "keywords": "algorithm string Jekyll",
    "url": "/jekyll/2023-02-04-algorithm_kmp.html",
    "body": "Notes: KMP (Knuth Morris Pratt). reference here. Introduction å­—ä¸²å°‹æ‰¾æ¼”ç®—æ³• (KMP), å¯åœ¨ä¸€å€‹å­—ä¸²ä¸­å°‹æ‰¾å¦ä¸€å€‹å­—ä¸²çš„å‡ºç¾ä½å­, ä½¿ç”¨é€™å€‹ç®—æ³•çš„å¹³å‡æ™‚é–“è¤‡é›œåº¦æ˜¯ O(n+m), å…¶ä¸­ n ç‚ºå­—ä¸²çš„é•·åº¦, m ç‚ºæ¨¡å¼ä¸²çš„é•·åº¦. Brute Force æˆ‘å€‘å…ˆçœ‹çœ‹æš´åŠ›è§£å¦‚ä½•å»è§£ï¼Œå‡è¨­æœ‰å…©å€‹å­—ä¸²: text: â€œaabaabaafâ€ pattern: â€œaabaafâ€ æœ€å€¼è§€çš„å¯«æ³•å°±æ˜¯å¾ text é–‹å§‹åš for loop, æ¥ä¸‹ä¾†é€å­—åŒ¹é… text, å¦‚æœ pattern æ‰¾åˆ°åŒ¹é…å¤±æ•—çš„ text æ‰å¾€å‰ç§»å‹• 1 ç›´åˆ°èƒ½å°‡ pattern åŒ¹é…å®Œæˆ–è€… traverse text çµæŸ. åœ¨é€™ç¨®å¯«æ³•ä¸‹æ™‚é–“è¤‡é›œåº¦ç‚º O(m*n), å› ç‚ºè‡³å°‘æ¯å€‹ text çš„ element éƒ½è¦ç¶“éä¸€æ¬¡ pattern çš„åŒ¹é…éç¨‹. ä¹Ÿå¯ä»¥æƒ³åƒæˆä¸€å€‹æ»‘å‹•çš„çª—å£, çª—å£çš„å¤§å°ç‚º pattern size. 28. Find the Index of the First Occurrence in a String ä¸­çš„æš´åŠ›è§£æ³•. func strStr(haystack string, needle string) int { var result int = -1 if len(haystack) &lt; len(needle) { return result } for i := 0; i &lt; len(haystack); i++ { if checkStr(haystack, needle, i) { result = i return result } } return result } func checkStr(haystack, needle string, index int) bool { for i := 0; i &lt;= len(needle); i++ { if i == len(needle) { return true } if index &gt;= len(haystack) { return false } if haystack[index] == needle[i] { index++ } else { return false } } return false } KMP Algorithm Diagram reference å› æ­¤æˆ‘å€‘å¯ä»¥å°‡æš´åŠ›è§£ç”¨åœ–è§£ä¾†å±•é–‹ï¼š é‚£æˆ‘å€‘å°±èƒ½æƒ³åƒå¦‚ä½•æ¸›å°‘ä¸å¿…è¦çš„æœå°‹, é¦–å…ˆå¦‚ä¸‹å…©å¼µåœ–: å¦‚æœå³ç§»å¾Œçš„ overlap éƒ½ç„¡æ³•æ¯”å°, ä¸‹æ¬¡æ¯”å°æ™‚æˆ‘å€‘éƒ½å¯ä»¥å…ˆè·³éé€™äº› overlap. ä½†æ˜¯çœ‹ä¸‹é¢é€™å€‹ä¾‹å­, é€™æ¬¡æ¯”å°åˆ°çš„ç›®æ¨™ä¸­å«æœ‰ç¬¦åˆçš„å­ä¸². å› æ­¤æˆ‘å€‘å°±æœ‰å¿…è¦é€²ä¸€æ­¥çš„æ¯”å°, é‚£é€™æ®µ overlap è¦å¦‚ä½•æ‰¾å‡ºä¾†? å‡è¨­å·²ç¶“æ¯”å°æˆåŠŸçš„éƒ¨åˆ†æ˜¯ pâ€™, ä»–æ˜¯ p çš„ä¸€å€‹å­ä¸², é‚£é‡ç–Šéƒ¨åˆ†å°±æ˜¯ pâ€™ tail å’Œå³ç§» pâ€™ çš„head. å› æ­¤æˆ‘å€‘å¯ä»¥èªª çµåˆä»¥ä¸Šçš„å…©ç¨®æ–¹å¼, æˆ‘å€‘å¯ä»¥çœ‹åˆ°é€™å€‹ç®—æ³•æœ€çµ‚çš„æ¨£å­: Last Edit 04-02-2023 19:28"
  },"/jekyll/2023-01-12-gomoku_ai.html": {
    "title": "Note | Gomoku AI - Game Tree",
    "keywords": "algorithm game Jekyll",
    "url": "/jekyll/2023-01-12-gomoku_ai.html",
    "body": "ç·´ç¿’åŸºç¤AIæ¼”ç®—æ³•çš„å…¥é–€é¡Œç›®ï¼Œåšå¼ˆæ¨¹æœå°‹èˆ‡å•Ÿç™¼å¼æ¼”ç®—æ³•ï¼Œé †æ‰‹å®Œæˆä¸€å€‹ GUI å°éŠæˆ²ã€‚ Introduction å‚³çµ±çš„AIæ¼”ç®—æ³•é¡Œç›®ï¼Œä»¥éç¥ç¶“ç¶²è·¯çš„æ–¹å¼ä¾†å˜—è©¦AIæ’°å¯«ã€‚ç¡ä¸è‘—ä¹¾è„†æ›´æ–°ä¸‹Blogï¼Œè‡³å°‘å¿™èµ·ä¾†èƒ½è®“æˆ‘è½‰ç§»ä¸€äº›æ³¨æ„åŠ›ï¼Œé †ä¾¿åšå€‹ç­†è¨˜ã€‚ åšå¼ˆæ¨¹(Game Tree)å…¶å¯¦å°±æ˜¯ä¸€ç¨®å°‡è³½å±€ä¸­æ‰€æœ‰å¯èƒ½å±•é–‹å¾Œçš„ Treeï¼Œé‚£å…¶ä¸­çš„æ¯å€‹ Node å°±ä»£è¡¨è‘—éŠæˆ²é€²è¡Œä¸­çš„æŸå€‹ç‹€æ…‹ï¼Œ é‚£æˆ‘å€‘ä»¥ Tic-Tac-Toe (äº•å­—æ£‹)ä¾†çœ‹ï¼Œå°±æœƒæœ‰ 26830 ç¨®éŠæˆ²éç¨‹ã€‚ Tic-Tac-Toe çš„æ£‹ç›¤å¤§å°ä¸éæ‰ 3x3 å°±æœ‰ 26830 ç¨®å¯èƒ½ï¼Œé‚£äº”å­æ£‹çš„æ£‹ç›¤ç‚º 15x15 ä¸€å€‹ç°¡æ˜“çš„ç®—æ³•æ˜¯ 15! å¹¾è¿‘æ˜¯å¤©æ–‡æ•¸å­—ã€‚ å¦‚æœæƒ³ä»¥å…¨éƒ¨éæ­·çš„æ–¹å¼ä¾†æ‰¾å‡ºæœ€ä½³è§£å¹¾ä¹æ˜¯ä¸å¯èƒ½åšåˆ°çš„äº‹ï¼Œé‚£é€™æ™‚å°±éœ€è¦ä¸€äº›ç­–ç•¥å»æ‰¾å‡ºæœ€ä½³è·¯å¾‘ï¼Œæ‰€ä»¥æˆ‘å€‘æœƒç”¨åˆ°å¹¾ç¨®ç®—æ³•ã€‚ Maximin algorithm. (å°æŠ—æ€§çš„æœå°‹ç®—æ³•) Alpha Beta pruning. (å‰ªæç®—æ³•) Heuristic. (å•Ÿç™¼å¼ç®—æ³•) Maximin algorithm Maximin algorithm (æ¥µå¤§æ¥µå°å€¼æ¼”ç®—æ³•)ï¼Œæ˜¯ä¸€ç¨®æ‰¾å‡ºå¤±æ•—çš„æœ€å¤§å¯èƒ½æ€§ä¸‹çš„æœ€å°å€¼çš„æ¼”ç®—æ³•ï¼Œé€™æ˜¯ wikipedia ä¸Šçš„è§£é‡‹ã€‚ ç°¡å–®ä¾†èªªåœ¨ä¸€å€‹äº”å­æ£‹åšå¼ˆæ¨¹ä¸­ï¼Œå¿…ç„¶æœ‰å…©å€‹ä¸åŒçš„ç©å®¶äº’ç›¸ä¸‹æ£‹ï¼Œæ•…åšå¼ˆæ¨¹æˆ‘å€‘ä¹Ÿå¯ä»¥åˆ†æˆç©å®¶å±¤èˆ‡AIå±¤ä¾†çœ‹å¾…ï¼Œå› æ­¤åœ¨æœå°‹çš„éç¨‹ä¸­æˆ‘å€‘è¦å»æ‰¾å°‹æ¯ä¸€å±¤çš„æœ€æœ‰åˆ©ç‹€æ…‹ï¼Œ æœ€å¾Œå»æ‰¾åˆ°ç©å®¶ä¸‹çš„æœ€å¥½çš„ç‹€æ…‹ä¸‹ï¼ŒAIèƒ½ä¸‹å‡ºçš„æœ€ä½³æ­¥é©Ÿã€‚ the source picture å…¶å¯¦çœ‹ä¸Šåœ–å°±èƒ½ç™¼ç¾å…¶å¯¦å°±è·Ÿ Max-Min-Heap å¾ˆç›¸åƒï¼Œåªæ˜¯ä»Šå¤© Heap æ˜¯å¾ä¸‹å¾€ä¸Šï¼Œ ä½† Tree æ˜¯å¾ä¸Šå¾€ä¸‹ï¼Œä¸€å€‹ä¸­åºéæ­·çš„æœå°‹æ–¹å¼ã€‚åœ¨æœå°‹éç¨‹ä¸­æˆ‘å€‘è¦å»æ‰¾åˆ°éƒ½æ˜¯æ¥µå¤§æˆ–æ¥µå°çš„è·¯å¾‘ï¼Œ ä½†æ˜¯å¦‚æœæˆ‘å€‘çœŸçš„å»éæ­·æ•´å€‹æ£‹ç›¤ï¼Œæ™‚é–“è¤‡é›œåº¦å°‡ç‚º O(b2)ï¼Œ åœ¨æ£‹ç›¤ç‚º15*15ï¼Œæ·±åº¦ç‚º4çš„æƒ…æ³ä¸‹ï¼Œ2254æ˜¯ä¸€å€‹éå¸¸æ…¢çš„æ¼”ç®—æ³•ã€‚ Alpha Beta pruning ä½†æ˜¯å³ä¾¿æˆ‘å€‘èƒ½åšåˆ°æ£‹ç›¤çš„å°æŠ—æœå°‹ï¼Œä½†æ˜¯æœå°‹æ™‚é–“é‚„æ˜¯å¾ˆæ…¢ï¼Œå› æ­¤æˆ‘å€‘éœ€è¦å»åšåˆ°å‰ªæçš„å‹•ä½œï¼Œ æ”¾æ£„ä¸å¯èƒ½çš„åˆ†æ”¯åšæœå°‹ï¼ŒæŠŠå¸Œæœ›æ”¾åœ¨æ›´æœ‰å¯èƒ½çš„åˆ†æ”¯ä¸Šä»¥åšåˆ°æ›´æ·±çš„æ·±åº¦ã€‚åœ¨æœ€ç³Ÿçš„æƒ…æ³ä¸‹ï¼Œ æ™‚é–“è¤‡é›œåº¦å°‡ç‚º O(b2)ï¼Œè€Œåœ¨æœ€ä½³çš„æƒ…æ³ä¸‹æœ‰æ©Ÿæœƒé”åˆ° O(sqrt(bd))ï¼Œ å¯¦ä½œä¸Šæˆ‘å€‘å°±æ˜¯åœ¨éè¿´æ™‚ï¼Œå¦‚æœç•¶å‰å±¤æ•¸ç‚ºæ¥µå¤§å±¤ï¼Œä½†æ˜¯ä¸‹ä¸‹å±¤å‡ºç¾ä¸€å€‹æ¯”æœ€å¤§å€¼é‚„è¦å°çš„ç¯€é»æˆ‘å€‘å°±ç›´æ¥å‰ªæ‰ï¼Œ å› ç‚ºæˆ‘å€‘è¦æ‰¾çš„æ˜¯æ¥µå¤§å€¼ï¼Œå°±ä¸ç”¨å»è€ƒæ…®æ›´å°çš„å€¼äº†ï¼ŒåŒç†é‹ç”¨åœ¨æ¥µå°å±¤ã€‚ Wikipediaä¸­åœ–çš„ç¬¬ä¸‰å±¤ä¸­çš„ 7 ç¯€é»å…¶å¯¦ä¹Ÿæ˜¯è¦å‰ªæ‰çš„ï¼Œåœ–æœ‰éŒ¯èª¤ã€‚ Heuristic ä½†æ˜¯å³ä½¿æˆ‘å€‘èƒ½åšåˆ°å‰ªææœç´¢æ™‚é–“é‚„æ˜¯å¹³å‡éœ€è¦ O(b3d/4)ï¼Œä½†åŒæ™‚æˆ‘å€‘ä¹ŸçŸ¥é“åˆå§‹çš„æœå°‹ç¯€é»å¾ˆé‡è¦ï¼Œ å¦‚æœä¸€å€‹æ£‹ç›¤å¦‚ä¸‹åœ–ï¼Œæˆ‘å€‘ä»¥ä¸€å€‹2D Arrayä¾†å¯¦ç¾é€™å€‹æ£‹ç›¤ç‹€æ…‹ï¼Œåƒæ˜¯ x, y = 0, 0é€™æ¨£çš„ä½ç½®å¦‚æœä¸æœƒå½±éŸ¿å¤§å±€å®Œå…¨æ²’æœ‰æœå°‹çš„å¿…è¦ã€‚ State Operate äº”å­ ç›´æ¥è¿”å› æ´»å›› ç›´æ¥è¿”å› æ´»ä¸‰ â€¦ æ­»ä¸‰ â€¦ å› æ­¤æˆ‘å€‘å¯ä»¥åœ¨å°‹æ‰¾æœå°‹ç¯€é»ä»¥æœ‰é„°å±…çš„ç©ºä½ç‚ºä¸»ï¼Œä¸¦ä¸”åŠ å…¥ä¸€äº›è©•åˆ†æ©Ÿåˆ¶ä¾†å°é€™äº›ä½ç½®æ’åºï¼š æŠŠæ¯æ¬¡æœå°‹çš„ä½ç½® print å‡ºä¾†ä¾†è§€å¯Ÿæœå°‹çš„é †åºèˆ‡å½±éŸ¿ã€‚é™¤å»äº”å­æ´»å››é€™ç¨®ç›´æ¥å°‡è»çš„å±€é¢ï¼Œ å‰©ä¸‹çš„ä¾ç…§åˆ†æ•¸æ’åºä¾†åšæœå°‹ï¼Œé€™æ¨£æˆ‘å€‘èƒ½æ›´å¿«çš„æ‰¾åˆ°æœ€ä½³çš„è·¯å¾‘ï¼Œ åˆ†æ•¸ä¸ç¬¦çš„è·¯å¾‘å°±å°‡æœƒè¢«å‰ªæ‰ï¼ŒæŠŠæ™‚é–“ç”¨ä¾†åšåˆ°æ›´æ·±çš„æœå°‹å±¤æ•¸ã€‚ è¦è¨˜ä½å³ä¾¿ä½¿ç”¨äº†å•Ÿç™¼å¼å‡½æ•¸ï¼Œä½†æ˜¯åªè¦å±€é¢è®Šå¾—è¤‡é›œï¼Œæœå°‹é€Ÿåº¦åŒæ¨£æœƒä¸‹é™å¾ˆå¤šï¼Œ ç•¢ç«Ÿæ¯åšä¸€å€‹æœå°‹å°±æ˜¯éœ€è¦ä»˜å‡º Pd çš„æ™‚é–“æ¶ˆè€—ï¼Œå› æ­¤æ’åºä¸¦æ¶ˆé™¤ä¸é‡è¦ä½ç½®çš„æ­¥é©Ÿå°±å¾ˆé‡è¦ã€‚ Note å¯«è¼”åŠ©å‡½æ•¸æ™‚çš„æ³¨æ„äº‹é … åœ¨å¯«é€™äº›è¼”åŠ©å‡½æ•¸çš„æ™‚å€™ï¼Œè¦ç›¡é‡æ¸›å°‘åšæ•´å€‹æ£‹ç›¤çš„æœå°‹å‹•ä½œï¼ŒåŒæ™‚å¯ä»¥å˜—è©¦å°‡æ£‹ç›¤è¦–ç‚ºå­—ä¸²ï¼Œ é€™æ¨£å°±èƒ½ä»¥ Regex ä¾†è™•ç†é€£ç·šç¢ºèªå°‡æœƒå¤§å¹…åŠ å¿«åŸ·è¡Œé€Ÿåº¦ï¼Œå°¤å…¶æ˜¯å¦‚æœä½ çš„æ£‹ç›¤ è©•ä¼°å‡½æ•¸è¦ä»”ç´°è¨­è¨ˆ è©•ä¼°å‡½æ•¸ï¼›å°‹æ‰¾çš„æ£‹å½¢ï¼›æœå°‹æ·±åº¦ï¼›æ˜¯æœ€ç›´æ¥çš„å½±éŸ¿æ£‹åŠ›çš„é¸é …ï¼Œå¦‚æœAIçš„è½å­æœ‰å•é¡Œï¼Œ é€šå¸¸æ‡‰è©²å¾€é€™å¹¾å€‹æ–¹å‘åšä¿®æ”¹ï¼Œä¾‹å¦‚æœå°‹æ·±åº¦èˆ‡è©•ä¼°å‡½æ•¸è¨­è¨ˆä¸å¥½å°±æœ‰å¯èƒ½ä½¿AIè‡ªæ®ºçš„æƒ…å½¢ç™¼ç”Ÿã€‚ NOTE ä¹‹å¾Œæ›´æ–°ï¼Œç›®å‰å·²å®Œæˆä¸€å€‹ç°¡æ˜“çš„ç®—æ³•åœ¨Githubï¼Œå¸Œæœ›èƒ½åœ¨éå¹´å‰æŠŠå®ƒåšåˆ°ä¸€å€‹æ›´æ»¿æ„çš„ç‹€æ…‹ã€‚"
  },"/jekyll/2022-11-24-git_commit.html": {
    "title": "Note | Commit Message Format",
    "keywords": "github tool Jekyll",
    "url": "/jekyll/2022-11-24-git_commit.html",
    "body": "èªªæ˜ Git æäº¤æ™‚æ‡‰æ³¨æ„çš„ Commit message formatï¼Œå»ºç«‹è‰¯å¥½çš„è¦ç¯„æ‰èƒ½æœ‰æ•ˆçš„åˆä½œ åš issue çš„æ™‚å€™ä¸æ‡‰è©²ä¸€æ¬¡ Commit æ‰€æœ‰è®Šå‹•ï¼æ‡‰è©²ç¨ç«‹æ¯å€‹ Commit ä¸åŒæ„ç¾©çš„ç•°å‹•ï¼Œé€™æ¨£æ‰èƒ½ä½¿ Commit å¿«é€Ÿé–±è®€èˆ‡ç¨‹å¼ç¢¼é–“çš„é—œä¿‚ã€‚ æ¯æ¬¡ Commit éƒ½æ˜¯é‡å°ç•°å‹•åšèªªæ˜ï¼ŒWhy &amp; Whatã€‚ æ¯æ¬¡ Commit åŠ ä¸Š issue ç·¨è™Ÿï¼Œæ–¹ä¾¿è¿½è¹¤å¾ŒçºŒå•é¡Œã€‚ Basic format Header: type: ä»£è¡¨ commit çš„é¡åˆ¥ï¼šfeat, fix, docs, style, refactor, test, choreï¼Œå¿…è¦æ¬„ä½ã€‚ scope ä»£è¡¨ commit å½±éŸ¿çš„ç¯„åœï¼Œä¾‹å¦‚è³‡æ–™åº«ã€æ§åˆ¶å±¤ã€æ¨¡æ¿å±¤ç­‰ç­‰ï¼Œè¦–å°ˆæ¡ˆä¸åŒè€Œä¸åŒï¼Œç‚ºå¯é¸æ¬„ä½ã€‚ subject ä»£è¡¨æ­¤ commit çš„ç°¡çŸ­æè¿°ï¼Œä¸è¦è¶…é 50 å€‹å­—å…ƒï¼Œçµå°¾ä¸è¦åŠ å¥è™Ÿï¼Œç‚ºå¿…è¦æ¬„ä½ã€‚ Body: Body éƒ¨ä»½æ˜¯å°æœ¬æ¬¡ Commit çš„è©³ç´°æè¿°ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œï¼Œæ¯ä¸€è¡Œä¸è¦è¶…é 72 å€‹å­—å…ƒã€‚ èªªæ˜ç¨‹å¼ç¢¼è®Šå‹•çš„é …ç›®èˆ‡åŸå› ï¼Œé‚„æœ‰èˆ‡å…ˆå‰è¡Œç‚ºçš„å°æ¯”ã€‚ Footer: å¡«å¯«ä»»å‹™ç·¨è™Ÿï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰. BREAKING CHANGEï¼ˆå¯å¿½ç•¥ï¼‰ï¼Œè¨˜éŒ„ä¸å…¼å®¹çš„è®Šå‹•ï¼Œä»¥ BREAKING CHANGE: é–‹é ­ï¼Œå¾Œé¢æ˜¯å°è®Šå‹•çš„æè¿°ã€ ä»¥åŠè®Šå‹•åŸå› å’Œé·ç§»æ–¹æ³•ã€‚ type éœ€è¦ç¯„å¥½æœ‰å“ªäº›é¡åˆ¥ï¼š feat: æ–°å¢/ä¿®æ”¹åŠŸèƒ½ (feature)ã€‚ fix: ä¿®è£œ bug (bug fix)ã€‚ docs: æ–‡ä»¶ (documentation)ã€‚ style: æ ¼å¼ (ä¸å½±éŸ¿ç¨‹å¼ç¢¼é‹è¡Œçš„è®Šå‹• white-space, formatting, missing semi colons, etc)ã€‚ refactor: é‡æ§‹ (æ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®è£œ bug çš„ç¨‹å¼ç¢¼è®Šå‹•)ã€‚ perf: æ”¹å–„æ•ˆèƒ½ (A code change that improves performance)ã€‚ test: å¢åŠ æ¸¬è©¦ (when adding missing tests)ã€‚ chore: å»ºæ§‹ç¨‹åºæˆ–è¼”åŠ©å·¥å…·çš„è®Šå‹• (maintain)ã€‚ revert: æ’¤éŠ·å›è¦†å…ˆå‰çš„ commit ä¾‹å¦‚ï¼šrevert: type(scope): subject (å›è¦†ç‰ˆæœ¬ï¼šxxxx)ã€‚ Example ä¸€å€‹ç°¡å–®çš„ feat ç¯„ä¾‹ #Feat Example feat: message ä¿¡ä»¶é€šçŸ¥åŠŸèƒ½ å› æ‡‰æ–°éœ€æ±‚åšèª¿æ•´ï¼š é€šçŸ¥å’Œ message éƒ½è¦å¯„ç™¼æ¯æ—¥ä¿¡ä»¶ï¼Œ é€šçŸ¥å’Œ message éƒ½ç”¨æ”¾åœ¨åŒä¸€å°ä¿¡è£¡é¢å°±å¥½ï¼Œ ä¸ç„¶ä¿¡ä»¶å¤ªå¤šå¯èƒ½ä¹Ÿä¸æœƒæœ‰äººæƒ³å»çœ‹ã€‚ èª¿æ•´é …ç›®ï¼š 1. mail_template.phpï¼Œæ–°å¢ message å€å¡Šã€‚ 2. Send_today_notify_mail.phpï¼Œæ–°å¢ å–å¾—æ¯æ—¥ Message é‚è¼¯ã€‚ 3. Message_model_api.phpï¼Œæ–°å¢ $where åƒæ•¸ï¼Œä»¥ä¾¿å–å¾—æ¯æ—¥è¨Šæ¯ã€‚ 4. Message_api.phpã€Message_group_user_model_api.phpï¼Œæ–°å¢ *å–å¾—è¨Šæ¯ä½¿ç”¨è€…* é‚è¼¯ï¼Œä»¥ä¾¿æ’ˆå–æ¯æ—¥è¨Šæ¯ã€‚ issue #863 NOTE åªæœƒå¯«ç¨‹å¼åªèƒ½ä»£è¡¨ä½ æ˜¯ä¸€å€‹ Coderï¼Œèƒ½è·Ÿä¸€ç¾¤äººä¸€èµ·å¯«ç¨‹å¼æ‰æ˜¯ä¸€å€‹ Engineerã€‚ Whatâ€™s the Difference Between a Programmer, Coder, Developer, and Software Engineer?"
  },"/jekyll/2022-11-08-ai_csp.html": {
    "title": "Note | Constraint Satisfaction Problem",
    "keywords": "ai algorithm Jekyll",
    "url": "/jekyll/2022-11-08-ai_csp.html",
    "body": "Introduction to Artificial Intelligence Week 6 Notes CSPs Introduction Constraint Satisfaction Problem å…¶å®šç¾©ç‚ºä¸€çµ„ç‰©ä»¶ï¼Œè€Œé€™äº›ç‰©ä»¶éœ€è¦æ»¿è¶³ä¸€å®šçš„é™åˆ¶æˆ–æ¢ä»¶ï¼Œè€Œé€™å€‹å•é¡Œå¯èƒ½æœ‰å¾ˆå¤šçš„è§£ã€‚CSP å•é¡Œç¶“å¸¸è¡¨ç¾å‡ºé«˜è¤‡é›œæ€§ï¼Œéœ€è¦çµåˆå•Ÿç™¼å¼æœå°‹å’Œæœå°‹æ–¹æ³•ä¾†åœ¨ä¸€å€‹åˆç†çš„æ™‚é–“å…§è§£æ±ºå•é¡Œã€‚ ä¸»è¦è§£æ³•ï¼šé€šéè­˜åˆ¥é•åç´„æŸçš„è®Šé‡èˆ‡å€¼çš„çµ„åˆæ¶ˆé™¤å¤§è¦æ¨¡çš„æœç´¢ç©ºé–“ã€‚ CSP related Linear programming Nonlinear progaramming Numerical analysis CSP application Operations research Network flows optimization problems CSP Define å®šç¾©ä¸€å€‹ 3-tuple(X, D, C) å…¶ä¸­ X = {X1, â€¦, Xn} Finite set of variables. D = {D1, â€¦, Dn} Nonempty domain of possible values for each variable. C = {C1, â€¦, Cn} Finite set of constraints, Each constraint Ci limits the values that variables can take. Example Map coloring å°±æ˜¯ä¸€å€‹ç¶“å…¸çš„ CSPã€‚æ¯å€‹å€åŸŸå³æ˜¯è®Šæ•¸ï¼Œé¡è‰²ä¾¿æ˜¯å€¼åŸŸï¼Œç›¸é„°å€åŸŸé¡è‰²ä¸åŒæ˜¯ç´„æŸã€‚ å…¶ä¸­é—œæ–¼ Constraint å¯è¢«åŠƒåˆ†ç‚º: unary constraint: åªç´„æŸå–®å€‹ variable çš„å–å€¼ã€‚å¦‚ SA ä¸èƒ½è¢«æŸ“æˆç¶ è‰²ã€‚ binary constraint: å…©å€‹ variable ç›¸é—œçš„ç´„æŸã€‚å¦‚ SA ä¸èƒ½èˆ‡ WA çš„é¡è‰²ç›¸åŒã€‚ global constraint: å…¨å±€ç´„æŸã€‚å¦‚ Alldiff, å³ç´„æŸä¸­æ‰€æœ‰ variable çš†éœ€å–ä¸åŒçš„å€¼ã€‚ Arc Consistency example Backtracking search for CSPs å›æœ”æœç´¢ï¼Œç”¨æ–¼ DFS ä¸­ã€‚ä»–æ¯æ¬¡ç‚º Single variable é€²è¡Œå–å€¼ï¼Œç•¶æ²’æœ‰åˆæ³•çš„å€¼å¯çµ¦æŸå€‹ variable æ™‚å°±é€²è¡Œå›æœ”ã€‚ ç‚ºä½¿ search è®Šçš„é«˜æ•ˆï¼Œé ˆè§£æ±ºä»¥ä¸‹å•é¡Œ: ä¸‹ä¸€æ­¥æ‡‰è©²çµ¦å“ªå€‹ variable å–å€¼? æŒ‰ç…§ä»€éº¼é †åºå–å€¼? æ¯æ­¥ search æ‡‰è©²åšæ€æ¨£çš„æ¨ç†? Variable select: Minimum remaining values (MRV) æœ€å°‘å‰©é¤˜å€¼å•Ÿç™¼å¼: é¸æ“‡åˆæ³•å–å€¼æœ€å°‘çš„ variable é–‹å§‹ã€‚é€™æ¨£é¸æ“‡çš„ variable å¯èƒ½å¾ˆå¿«åœ°å°è‡´å¤±æ•—ï¼Œå¾è€Œé€²è¡Œå›æœ”ã€‚ Degree heuristic é„°æ¥åº¦å•Ÿç™¼å¼: é¸æ“‡èˆ‡å…¶ä»–æœªå–å€¼ variable ç´„æŸæœ€å¤šçš„ variable ä¾†è©¦åœ–é™ä½æœªä¾†å¯èƒ½çš„åˆ†æ”¯ã€‚ Value order Least constraining value (æœ€å°‘é™åˆ¶å€¼): é¸æ“‡ value æ™‚å„ªå…ˆé¸æ“‡çµ¦é„°å±… variable ç•™ä¸‹æœ€å¤šé¸æ“‡çš„åˆ†æ”¯ã€‚ Inference in CSPs åœ¨ CSP å•é¡Œä¸­ï¼ŒAlgorithm å¯ä»¥é€²è¡Œæœç´¢ï¼Œä¹Ÿå¯ä»¥åšç´„æŸå‚³æ’­ (The constraint propagation) çš„æ¨ç† ç´„æŸå‚³æ’­: ä½¿ç”¨ç´„æŸä¾†æ¸›å°‘ä¸€å€‹ variable çš„åˆæ³•å–å€¼ç¯„åœï¼Œå¾è€Œå½±éŸ¿èˆ‡æ­¤ variable æœ‰ç´„æŸé—œä¿‚çš„å¦ä¸€å€‹ variable çš„å–å€¼ã€‚ (å±€éƒ¨ç›¸å®¹æ€§) Node Consistency (ç¯€é»ç›¸å®¹) Single variable (In CSP Single node) å€¼åŸŸä¸­çš„æ‰€æœ‰å–å€¼æ»¿è¶³ä»–çš„ unary constraint. if SA = NA = {Red, Blue, Green}; SA != Blue, NA != Red, SA = {Green, Red}, NA = {Blue, Green}; Arc Consistency (å¼§ç›¸å®¹) CSP ä¸­æŸ variable range æ‰€æœ‰å–å€¼æ»¿è¶³è©² variable çš„æ‰€æœ‰ binary constraint. æœ€å¸¸ç”¨çš„ç®—æ³•ç‚º AC-3, ç®—æ³•æµç¨‹å¤§è‡´å¦‚ä¸‹: Get all the constraint and turn each one into two arcs. Expmale: A &gt; B becomes A &gt; B and B &lt; A. Add all the arcs to a queue. Repeat until the queue is empty: 3.1. Take the first arc (ğ‘¥, ğ‘¦), off the queue (dequeue). 3.2. For every value in the ğ‘¥ domain, there must be some value of the ğ‘¦ domain. 3.3. Make ğ‘¥ arc consistent with ğ‘¦. To do so, remove values from ğ‘¥ domain for which there is no possible corresponding value for ğ‘¦ domain. 3.4. If the ğ‘¥ domain has changed, add all arcs of the form (ğ‘˜, ğ‘¥) to the queue (enqueue). Here ğ‘˜ is another variable different from ğ‘¦ that has a relation to ğ‘¥. Forward Checking å‘å‰æª¢é©—æ˜¯æœ€ç°¡å–®çš„æ¨ç†å½¢å¼ï¼Œåªè¦ X variable è¢«è³¦å€¼äº†ï¼Œå°±å‘å‰æª¢é©—éç¨‹å°ä»–åš Arc Consistency. æª¢æŸ¥å°æ–¼æ¯å€‹é€šéç´„æŸèˆ‡ X ç›¸é—œçš„, æœªè³¦äºˆå€¼çš„ Y variable, å¾ Y çš„ range ä¸­æ¶ˆå»èˆ‡ X ä¸ç›¸å®¹çš„å€¼ã€‚ NOTE å¾…æ›´æ–°"
  },"/jekyll/2022-11-07-network_urat.html": {
    "title": "Note | Basic UART Concept",
    "keywords": "protocol Jekyll",
    "url": "/jekyll/2022-11-07-network_urat.html",
    "body": "ä¿®ç¶²è·¯å¯¦ä½œçš„æ™‚å€™ï¼Œçµ¦å­¸å¼Ÿå¦¹è¬›è§£ URAT è·Ÿæ€éº¼åœ¨ Arduino ä¸Šå¯¦ä½œæº–å‚™çš„ä¸€äº›æ•™æï¼Œç°¡å–®ä»‹ç´¹ä¸‹ UART æ€éº¼åœ¨ Arduino ä¸­é€²è¡Œè³‡æ–™å‚³éï¼Œå¯¦é©—ä½¿ç”¨å–®èŠ¯ç·šé€²è¡Œé€šè¨Šã€‚ How to transfer data between two computers? 5 Volts logic: Signal on transmission medium Metal : Square wave &amp; Sine ware Optical fiber : Light square ware Wireless : Electromagnetic waves The Universal Asynchronous Receiver/Transmitter (UART) UARTé€™ç¨®ç°¡å–®çš„é€šè¨Šæ–¹å¼å·²ç¶“å­˜åœ¨äº†å¹¾åå¹´ï¼Œä¾ç„¶å»£å—æ­¡è¿ã€‚ In a world where technology can become obsolete very quickly Still enjoys immense popularity. Asynchronous communication UART æ˜¯éåŒæ­¥é€šè¨Šï¼Œæ‰€ä»£è¡¨çš„æ˜¯é€šè¨Šä¸­å…©å€‹byteä¹‹é–“çš„ç©ºéš™æ˜¯ä¸å›ºå®šçš„ï¼Œè€Œä¸€å€‹byteä¸­çš„bité–“éš”æ˜¯å›ºå®šçš„ã€‚å› æ­¤ç™¼é€ç«¯èˆ‡æ¥æ”¶ç«¯éƒ½è¦æœ‰ç›¸åŒçš„ UART è¨­å®šã€‚ Capabilities and Characteristics a basic UART system provides robust, moderate-speed, full-duplex communication with only three signals: Tx (transmitted serial data), Rx (received serial data), and ground. ä¸€å€‹åŸºæœ¬æ”¶é€çš„UARTå‚³è¼¸ï¼Œåƒ…éœ€è¦ä¸‰å€‹ç«¯å£Tx, Rx, GNDã€‚ä½†åœ¨é€™ä¹‹å‰çš„å‰ææ˜¯ Rx, Tx, åœ¨ç›¸åŒçš„æ•¸æ“šå‚³è¼¸é »ç‡ã€‚ Key Terms Start bit: The first bit of a one-byte UART transmission. It indicates that the data line is leaving its idle state. The idle state is typically logic high, so the start bit is logic low. The start bit is an overhead bit; this means that it facilitates communication between receiver and transmitter but does not transfer meaningful data. Stop bit: The last bit of a one-byte UART transmission. Its logic level is the same as the signalâ€™s idle state, i.e., logic high. This is another overhead bit. Start bit ä»£è¡¨ç©ºé–’çµæŸï¼ŒSrart bit åƒ…ä»£è¡¨é–‹å§‹ï¼Œä¸å…·å¯¦éš›æ•¸æ“šã€‚ Stop bit ä»£è¡¨å‚³è¼¸çµæŸï¼Œé›»ä½æ‹‰é«˜ç­‰å¾…ä¸‹ä¸€æ¬¡ Startã€‚ ä¸Šåœ–å¯ä»¥ç™¼ç¾ç™¼é€ 10 bit çš„è³‡æ–™ä½†å…¶å¯¦çœŸæ­£çš„æ•¸æ“šåƒ…æœ‰ 8 bitã€‚ Baud rate: The approximate rate (in bits per second, or bps) at which data can be transferred. Example: 9600-baud systemï¼Œå³ 1 bit éœ€è¦ 1/(9600 bps) â‰ˆ 104.2 Âµsï¼Œæ³¨æ„ä¸æ˜¯å¯¦éš›ä¸Šæ¯ç§’å‚³é€ 9600 è³‡æ–™ï¼Œ å¯¦éš›ä¸Šæœ‰é–‹éŠ· bit çš„æ¶ˆè€—ã€‚ Check bit(Parity bit) Parity bit: An error-detection bit added to the end of the byte. Odd or Even å¦‚æœè¦è¨­å®šæ ¡æ­£ä½ï¼Œå°±å¤šå‚³é€ä¸€å€‹Bitï¼Œä¸¦é å…ˆè¨­è¨ˆå¥½ Odd or Evenï¼Œå¦‚ä»Šå¤©è¦å‚³é€ 00001110 è€Œ even å³ æ ¡æ­£ç‚º 1 é€™æ¨£å°±æœƒæœ‰å¶æ•¸å€‹ 1ã€‚ å¯ä»¥çœ‹åˆ°å¦‚æœåŠ å…¥ Parity bitï¼Œæƒ³è¦ç™¼é€ä¸€å€‹ byte çš„æˆæœ¬ä¹Ÿå¢åŠ äº† 1 å€‹ bitã€‚ Synchronizing and Sampling the UART interface does not use a clock signal to synchronize the Tx and Rx devices. So how does the receiver know when to sample the transmitterâ€™s data signal? å› ç‚ºæ˜¯éåŒæ­¥é€šè¨Šï¼Œæ‰€ä»¥æ¥æ”¶å™¨çš„ clock å®Œå…¨ç¨ç«‹æ–¼ç™¼é€å™¨ clockï¼Œåªéœ€è¦çŸ¥é“ Start bit çš„é–‹å§‹ä½ç½®å¾Œå°±èƒ½ä¾ç…§å›ºå®šçš„ clock é€²è¡Œæ¥æ”¶ã€‚ Conclusion æ‰€ä»¥ç•¶ä»Šå¤©è¦è¨­è¨ˆä¸€å€‹UARTå–®æ–¹å‘å‚³è¼¸ï¼Œåƒ…ç”¨ä¸€æ¢ç·šå°±å¯ä»¥å®Œæˆï¼Œä»¥é è¨­çš„é »ç‡æ”¶æ¥ä¸‹ä¾†çš„ 8 bitï¼Œç•¶é›»ä½æ‹‰é«˜ä»£è¡¨ä¸€æ¬¡å‚³é€çš„çµæŸï¼Œç­‰å¾…ä¸‹æ¬¡é–‹å§‹ã€‚ é€™éƒ¨åˆ†å¯ä»¥è¨­è¨ˆä¸€å€‹ Finite-State Machine ä¾†å®Œæˆç™¼é€èˆ‡æ¥æ”¶çš„ç¨‹å¼è¨­è¨ˆã€‚ Reference Back to Basics: The Universal Asynchronous Receiver/Transmitter (UART) Practice One-Line-Communication Last Edit 11-17-2022 12:07"
  },"/jekyll/2022-11-05-docker_jekyll.html": {
    "title": "Note | Docker Build Github Pages",
    "keywords": "github tool Jekyll",
    "url": "/jekyll/2022-11-05-docker_jekyll.html",
    "body": "èªªæ˜å¦‚ä½•ä½¿ç”¨ Jekyll docker image åœ¨ä¸ç”¨ç†Ÿæ‚‰ Ruby èˆ‡ç›¸é—œå¥—ä»¶ç®¡ç†ä¸‹ï¼Œç”Ÿæˆéœæ…‹æ–‡ä»¶ã€‚ ä¹‹å‰å°±æƒ³æ‰¾ä¸€å€‹èƒ½ç”¨ Markdown å¯«ç­†è¨˜çš„åœ°æ–¹ï¼Œéå»éƒ½æ˜¯å¯«åœ¨ Github çš„ Repositories è£¡é¢ä½†æ˜¯æª”æ¡ˆä¸€å¤šèµ·ä¾†æƒ³æ•´ç†ä¹Ÿä¸æ–¹ä¾¿ï¼Œé‚£å°±è‡ªå·±å¯«å€‹ Blog ç•¶ä½œç´€éŒ„ï¼Œ å‰›å¥½å°±è¶é€™å€‹æ©ŸæœƒæŠŠé€™æ¬¡çš„å…§å®¹ç•¶ä½œç¬¬ä¸€ç¯‡ç´€éŒ„ã€‚ Jekyll æ˜¯ä¸€å€‹ç”¨ Ruby å¯«çš„ç°¡å–®éœæ…‹ç¶²é ç”Ÿæˆå™¨ï¼Œä½†æ˜¯ç›®å‰æˆ‘å¹¾ä¹éƒ½æ˜¯ç”¨ Lab çš„é›»è…¦åšäº‹ï¼Œå¹³æ™‚ä¹Ÿæ˜¯é ç«¯åˆ°ä¸Šé¢ï¼Œæ‰€ä»¥å¾ˆç›´è¦ºçš„å°±æƒ³ç”¨ Docker ä¾†è™•ç†ç’°å¢ƒï¼Œ ä¹‹å¾Œè·‘è…³æœ¬æŠŠç”Ÿæˆå¥½çš„æ–‡ä»¶åœ¨æ¨ä¸Š Github å°±å¯ä»¥åšå¥½ä¸€æ¬¡æ›´æ–°äº†ã€‚ Required: Docker image Jekyll/Jekyll Html, Javascript, CSS å‰›é–‹å§‹å°±å…ˆæ‰¾å€‹æ¨¡æ¿ä¾†ç”¨ï¼ŒJekyll themesä¸Šå°±æœ‰å¾ˆå¤šå¯ä»¥ç”¨çš„æ¨¡æ¿ä¾†ç”¨ï¼Œåƒæˆ‘ç”¨çš„å°±æ˜¯ä½¿ç”¨ GitBook é¢¨æ ¼çš„æ¨¡æ¿ï¼ŒåŒæ™‚æœ‰æœå°‹åŠŸèƒ½ä¹‹å¾Œæ–‡ç« çš„æ‰¾å°‹ä¹Ÿæœƒæ¯”è¼ƒæ–¹ä¾¿ã€‚ æ‰¾åˆ°æ¨¡æ¿ä¹‹å¾Œå»æŠŠä»– forks åˆ°è‡ªå·±çš„å„²å­˜åº«ï¼Œclone ä¸‹ä¾†å°±å¯ä»¥é–‹å§‹ä¿®æ”¹äº†ã€‚ Docker Jekyll Jekyll å®˜æ–¹æœ‰ä¸€å€‹ Docker image æ‰€ä»¥æ‹‰é€™å€‹ image å°±å¯ä»¥äº†ï¼Œè£¡é¢ Readme æ•™å­¸å¯«å¾—é‚„è »è©³ç´°çš„ï¼Œåªè¦æŠŠæ¨¡æ¿ volume åˆ° container è£¡é¢å°±å¯ä»¥åŸ·è¡Œ Jekyll ç”Ÿæˆã€‚ç¬¬ä¸€æ¬¡é‹è¡Œå®‰è£å¥—ä»¶ç­‰ç­‰æœƒèŠ±ä¸€é»æ™‚é–“ï¼Œä¹‹å¾Œå•Ÿå‹•å®¹å™¨é€Ÿåº¦å°±å¿«å¾ˆå¤šäº†ã€‚ ä¹‹å¾Œå†ç°¡å–®å¯«å€‹ bash script é€™æ¨£ä¸€å€‹èƒ½å¿«é€Ÿç”Ÿæˆçš„ Jekyll ç’°å¢ƒå°±æ­å»ºå®Œæˆäº†ã€‚ jekyll build ç›´æ¥ç”Ÿæˆç¶²é  jekyll serve ç”Ÿæˆç¶²é å¾Œé‹è¡Œåœ¨ localhost:4000 docker run \\ -v $WD:/srv/jekyll:z \\ -v /etc/localtime:/etc/localtime:ro\\ -p 4000:4000 \\ --name jekyll \\ -it jekyll/jekyll \\ jekyll serve 2&gt; /dev/null || docker start jekyll &amp;&amp; docker attach jekyll; Customize ä¹‹å¾Œå°±ç­‰æ–‡ä»¶ç”Ÿæˆå¥½ï¼ŒåŒæ™‚è¨˜å¾—è¨­å®š Github pages publishing source, æŠŠç™¼å¸ƒæºæ”¹åˆ°ç”Ÿæˆçš„ç›®éŒ„ã€‚é€™æ¨£ github.io çš„å…§å®¹å°±ç›´æ¥æŒ‡å‘é€™å€‹ç›®éŒ„ã€‚ç„¶å¾Œå°±æ˜¯ä¸€äº›è‡ªå®šç¾©çš„å°ä¿®æ”¹ï¼Œé€™è£¡åªè¦æœƒä¸€é» Js, Html å°±å¯ä»¥æå®šã€‚ åƒæˆ‘ç”¨çš„æ¨¡æ¿æœ¬ä¾†æ˜¯èˆŠçš„ post å„ªå…ˆï¼Œç¨å¾®æ”¹æ’åºï¼Œé è¨­å­—é«”ï¼ŒåŠ å…¥æ™‚é–“è¨»è¨˜ï¼Œé€™æ¨£ä¸€å€‹ç°¡å–®çš„éœæ…‹ç¶²é å°±å®Œæˆäº†ã€‚ Change default font size: gitbook-plugin-fontsettings \"pluginsConfig\": { \"fontsettings\": { \"size\": 1, } } Add date in post: _layout/post.html change sort method: _includes/toc-date.htnl NOTE ä¹‹å¾Œæƒ³åˆ°è¦ä¿®æ”¹çš„å†æ›´æ–°å§ï¼Œå¯èƒ½åŠ å…¥ç•™è¨€ç³»çµ±ã€æ¨™ç±¤ä¹‹é¡çš„ï¼Œç›®å‰é€™æ¨£çš„éœæ…‹ç¶²é æˆ‘å°±å¾ˆæ»¿æ„äº†ã€‚"
  },"/jekyll/0000-01-01-virtual_machine_tool.html": {
    "title": "Tool | Virtual Machine",
    "keywords": "linux tool Jekyll",
    "url": "/jekyll/0000-01-01-virtual_machine_tool.html",
    "body": "Notes How to using virtual machine tool. 1. ESXI 1.1 ESXI 5.5 import OVF Environment: VMware Player 16, ESXI 5.5 å› ç‚º 5.5 æ˜¯éå¸¸è€èˆŠçš„ç‰ˆæœ¬äº†ï¼Œæ‰€ä»¥åœ¨åŒ¯å…¥ OVF æª”æ¡ˆæ™‚æœƒæœ‰å¾ˆå¤šå•é¡Œï¼Œé€™è£¡è¨˜éŒ„ä¸‹å¦‚ä½•è§£æ±º å› ç‚º 5.5 ä¸æ”¯æ´ SHA256ï¼Œæ”¹ç”¨ SHA1 çš„æ–¹å¼åŒ¯å‡º OVF æª”æ¡ˆ ovftool.exe --shaAlgorithm=SHA1 /path/to/the/original/ova_file.ova /path/to/the/new/ova/file-SHA1.ova Unspported hardware family â€˜vmx-18â€™ .ovf æ‰¾åˆ° &lt;VirtualSystemType&gt;vmx-18&lt;/VirtualSystemType&gt; æ”¹æˆ &lt;VirtualSystemType&gt;vmx-8&lt;/VirtualSystemType&gt; æª”æ¡ˆ ovf_file.ovf æœªé€šéå®Œæ•´æ€§æª¢æŸ¥ï¼Œå¯èƒ½åœ¨å‚³è¼¸éç¨‹ä¸­å·²ææ¯€ã€‚ .mf æ‰¾åˆ° SHA1(ovf_file.ovf)= 5ba21a516c7b499e22c3463e4bd0596ab5336c4e åˆªé™¤ No support for the virtual hardware device type â€˜20â€™ ESXI 5.5 ä¸æ”¯æ´ NVME Controllerï¼Œä¸‹é¢æ•´æ®µæ›¿æ› &lt;Item&gt; &lt;rasd:Address&gt;0&lt;/rasd:Address&gt; &lt;rasd:Description&gt;NVME Controller&lt;/rasd:Description&gt; &lt;rasd:ElementName&gt;nvmeController0&lt;/rasd:ElementName&gt; &lt;rasd:InstanceID&gt;3&lt;/rasd:InstanceID&gt; &lt;rasd:ResourceSubType&gt;vmware.nvme.controller&lt;/rasd:ResourceSubType&gt; &lt;rasd:ResourceType&gt;20&lt;/rasd:ResourceType&gt; &lt;/Item&gt; &lt;Item&gt; &lt;rasd:Address&gt;0&lt;/rasd:Address&gt; &lt;rasd:Description&gt;SCSI Controller&lt;/rasd:Description&gt; &lt;rasd:ElementName&gt;scsiController0&lt;/rasd:ElementName&gt; &lt;rasd:InstanceID&gt;3&lt;/rasd:InstanceID&gt; &lt;rasd:ResourceSubType&gt;lsilogic&lt;/rasd:ResourceSubType&gt; &lt;rasd:ResourceType&gt;6&lt;/rasd:ResourceType&gt; &lt;/Item&gt; invalid configuration for device â€˜0â€™ æ‰¾åˆ° &lt;vmw:Config ovf:required=\"false\" vmw:key=\"videoRamSizeInKB\" vmw:value=\"262144\"/&gt; æ”¹æˆ ` ` é€™æ¨£æ‡‰è©²å°±èƒ½æˆåŠŸéƒ¨å±¬äº†ï¼Œä½†æ˜¯è©³ç´°æœƒæœ‰ä»€éº¼å•é¡Œé‚„æ²’æ¸¬è©¦é 2. Virtualbox 2.1 Vboxmanage Virtual boxæŒ‡ä»¤æ“ä½œ æ‰‹å‹•ç›¸é—œæŒ‡ä»¤èªªæ˜: æ–°å»ºä¸€å€‹åç‚ºã€ŒNew VMã€çš„è™›æ“¬æ©Ÿå™¨ vboxmanage createvm -name ã€ŒNew VMã€ -register è¨­å®šã€ŒNew VMã€çš„è¨˜æ†¶é«”æ˜¯128MBä¸¦é–‹å•Ÿacpi è¨­å®šç¬¬ä¸€é–‹æ©Ÿç¢Ÿç‚ºdvd ä»¥åŠæ–°å¢ä¸€å€‹ç¶²è·¯ä»‹é¢ vboxmanage modifyvm ã€ŒNew VMã€ -memory ã€Œ128MBã€ -acpi on -boot1 dvd -nic1 intnet å»ºç«‹ä¸€å€‹è™›æ“¬ç¡¬ç¢Ÿåç‚ºã€Œnewhd.vdiã€ å¤§å°ç‚º 4000MB vboxmanage createvdi -filename ã€Œnewhd.vdiã€ -size 4000 -register å°‡ã€ŒNew VMã€çš„ hda è¨­å®šç‚ºã€Œnewhd.vdiã€è™›æ“¬ç£ç¢Ÿ vboxmanage modifyvm ã€ŒNew VMã€ -hda ã€Œnewhd.vdiã€ å°‡åœ¨\"/home/file/iso.iso\"çš„ISOæ˜ åƒæª” è¨­å®šåˆ° åç‚º dvdçš„å…‰ç¢Ÿæ˜ åƒæª”åº« vboxmanage registerimage dvd /home/file/iso.iso è¨­å®šåç‚ºã€ŒNew VMã€çš„ dvdè£ç½®ç‚º /home/file/iso.iso vboxmanage modifyvm ã€ŒNew VMã€ -dvd /home/file/iso.iso è¨­å®šã€ŒNew VMã€æ‰€ä½¿ç”¨çš„ VRDP çš„é€£æ¥Portç‚º 3390 vboxmanage modifyvm ã€ŒNew VMã€ -vrdpport 3390 å•Ÿå‹• VRDP VBoxVRDP -startvm ã€ŒNew VMã€ ----- List function æŸ¥è©¢ç›®å‰vboxä¸Šæœ‰è¨­å®šå¤šå°‘å€‹vm vboxmanage list vms æŸ¥çœ‹æ”¯æ´çš„ OS Type vboxmanage list ostypes æŸ¥çœ‹é‹è¡Œä¸­çš„ VM vboxmanage list runningvms å…¶å®ƒå¯ä»¥listçš„æŒ‡ä»¤ vboxmanage list hostdvds vboxmanage list hostinfo vboxmanage list hddbackends vboxmanage list systemproperties vboxmanage list dhcpservers vboxmanage list hdds vboxmanage list dvds æŒ‡ä»¤å•Ÿå‹•vm vboxmanage startvm \"VM name\" --type headless (ç”¨èƒŒæ™¯å•Ÿå‹•ï¼Œä¸åŠ ä¸Š--type headlessåƒæ•¸å¯èƒ½æœƒæœ‰éŒ¯èª¤!!) 2.2 Autostart Virtualbox VMs How to autostart virtual machine by systemctl. reference Create a systemd service file. sudo vim /etc/systemd/system/$service-filename [Unit] Description=VBox Virtual Machine %i Service Requires=systemd-modules-load.service After=systemd-modules-load.service [Service] Restart=always RestartSec=3 User=%u Group=vboxusers ExecStart=/usr/bin/VBoxHeadless -s %i ExecStop=/usr/bin/VBoxManage controlvm %i savestate [Install] WantedBy=multi-user.target change %i to you virtual machine UUID or name. %u is you virtual machine manager username. reload systemd service file and enable service. sudo systemctl daemon-reload sudo systemctl enable $service-filename sudo systemctl start $service-filename check virtual machine is runing vboxmanage list runningvms Last Edit 10-01-2023 12:22"
  },"/jekyll/0000-01-01-linux_config.html": {
    "title": "Tool | Linux Config",
    "keywords": "linux tool Jekyll",
    "url": "/jekyll/0000-01-01-linux_config.html",
    "body": "Notes Linux config Change username è¦æ”¹ä½¿ç”¨è€…åç¨±é€šå¸¸å¾ˆéº»ç…©ï¼Œé€™å€‹æ˜¯ä¸€å€‹æˆ‘è¦ºå¾—æ¯”è¼ƒå¥½çš„åšæ³•ï¼Œå¤šäº† Link è‡³å°‘è®“æ²’æ”¹åˆ°çš„åœ°æ–¹èƒ½é€£çµåˆ°æ–°çš„ home How To Change Username On Ubuntu, Debian, Linux Mint Or Fedora Create a temporary user sudo adduser tempuser sudo usermod -aG sudo tempuser Login with tempuser sudo usermod -l ${newusername} -d /home/${newusername} -m ${oldusername} sudo groupmod -n ${newusername} ${oldusername} Create a symbolic link sudo ln -s /home/${newusername} /home/${oldusername} Login new username and delete temporary user sudo userdel -r tempuser Firewall ufw (Uncomplicated Firewall) # å¦‚æœè¦å…è¨±é€£ç·šæŒ‡å®š port å¯ä»¥è¼¸å…¥æŒ‡ä»¤: sudo ufw allow &lt;port-number&gt; sudo ufw deny &lt;port-number&gt; # åªå…è¨±ç‰¹å®š IP æ‰èƒ½é€£ç·šçš„è©±ï¼Œå¯ä»¥è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤: sudo ufw allow from &lt;IP&gt; to any port &lt;port-number&gt; sudo ufw deny from &lt;IP&gt; to any port &lt;port-number&gt; # åªå…è¨±å­ç¶²è·¯å¯ä»¥é€£ç·šåˆ°ï¼Œå¯ä»¥è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤: sudo ufw allow from &lt;IP-with-mask&gt; to any port &lt;port-number&gt; sudo ufw deny from &lt;IP-with-mask&gt; to any port &lt;port-number&gt; sudo ufw allow from 159.66.109.0/24 to any port 22 # åˆªé™¤å·²ç¶“å»ºç«‹çš„è¦å‰‡: sudo ufw status numbered # çŸ¥é“æŒ‡å®šç·¨è™Ÿå¯ä»¥è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ä¾†åˆªé™¤è¦å‰‡: sudo ufw delete &lt;rule-number&gt; Network config ubuntu wifi config $ sudo vim /etc/netplan/50-cloud-init.yaml # This file is generated from information provided by the datasource. Changes # to it will not persist across an instance reboot. To disable cloud-init's # network configuration capabilities, write a file # /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following: # network: {config: disabled} network: ethernets: eth0: dhcp4: true optional: true version: 2 wifis: wl0: optional: true access-points: \"SSID-NAME-HERE\": password: \"PASSWORD-HERE\" dhcp4: true debian static ip config sudo vim /etc/network/interface # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface allow-hotplug ens160 iface ens160 inet static address ${address} netmask ${netmask} gateway ${gateway} # This an autoconfigured IPv6 interface iface ens160 inet6 auto sudo systemctl restart networking.service fix Wifi Mt7601u driver How to fix wireless adapter Mt7601u not working, Can run correctly on kernel 5.15. Reference git clone https://github.com/jeremyb31/mt7601u.git sudo dkms add ./mt7601u sudo dkms install mt7601u/1.0 ZeroTier Route Config Install ZeroTier and add route to between vLan and Physical Lan curl -s https://install.zerotier.com | sudo bash sudo zerotier-cli join $NETWORK_ID Add to zerotier network, and Authorize it at https://my.zerotier.com/network/$NETWORK_ID. Configure the ZeroTier managed route: At my.zerotier.com/network/$NETWORK_ID -&gt; Settings -&gt; Managed Routes, adds another route to every device joined to the ZeroTier network. Destination (Via) $PHY_SUB $ZT_ADDR 192.168.100.0/23 172.27.0.1 Edit /etc/sysctl.conf to uncomment net.ipv4.ip_forward. This enables forwarding at boot. sudo sysctl -w net.ipv4.ip_forward=1 # Add you network interface to shell variables. PHY_IFACE=eth0; ZT_IFACE=zt7nnig26 Add ip forwarding rules in iptables. sudo iptables -t nat -A POSTROUTING -o $PHY_IFACE -j MASQUERADE sudo iptables -A FORWARD -i $PHY_IFACE -o $ZT_IFACE -m state --state RELATED,ESTABLISHED -j ACCEPT sudo iptables -A FORWARD -i $ZT_IFACE -o $PHY_IFACE -j ACCEPT # Save iptables rules for next boot. sudo apt install iptables-persistent sudo bash -c iptables-save &gt; /etc/iptables/rules.v4 Last using sudo iptables -L -v to check iptables rules. Other ulimit ulimit å¯ä»¥ç”¨ä¾†é™åˆ¶ shell åŸ·è¡Œç¨‹å¼æ‰€éœ€çš„è³‡æº ulimit [options] [limit] ulimit Man Page Last Edit 30-09-2023 ulimit."
  },"/jekyll/0000-01-01-leetcode_guide.html": {
    "title": "Leetcode | Master Guide",
    "keywords": "leetcode algorithm Jekyll",
    "url": "/jekyll/0000-01-01-leetcode_guide.html",
    "body": "Notes leetcode problem Reference to the leetcode-master guide for the sequence of questions. Array 704. Binary search 35. Search Insert Position 34. Find First and Last Position of Element in Sorted Array 69. Sqrt(x) 367. Valid Perfect Square 27. Remove Element 26. Remove Duplicates from Sorted Array 80. Remove Duplicates from Sorted Array II 283. Move Zeroes 844. Backspace String Compare 977. Squares of a Sorted Array 4. Median of Two Sorted Arrays 59. Spiral Matrix II 209. Minimum Size Subarray Sum Linkedlist 203. Remove Linked List Elements 707. Design Linked List 206. Reverse Linked List 24. Swap Nodes in Pairs 19. Remove Nth Node From End of List 160. Intersection of Two Linked Lists 141. Linked List Cycle 142. Linked List Cycle II 21. Merge Two Sorted Lists 23. Merge k Sorted Lists 25. Reverse Nodes in k-Group 83. Remove Duplicates from Sorted List Linkedlist Summarize String 344. Reverse String 541. Reverse String II 151. Reverse Words in a String 58. Length of Last Word 28. Find the Index of the First Occurrence in a String 459. Repeated Substring Pattern String Summarize Hash 242. Valid Anagram 1002. Find Common Characters 349. Intersection of Two Arrays 202. Happy Number 454. 4Sum II 383. Ransom Note 15. 3Sum (Hash) 18. 4Sum (Hash) 459. Repeated Substring Pattern 268. Missing Number 41. First Missing Positive Two Pointer 1365. How Many Numbers Are Smaller Than the Current Number 125. Valid Palindrome 5. Longest Palindromic Substring 15. 3Sum (E) 18. 4Sum (E) 42. Trapping Rain Water Queue &amp; Stack 232. Implement Queue using Stacks 225. Implement Stack using Queues 20. Valid Parentheses 1047. Remove All Adjacent Duplicates In String 150. Evaluate Reverse Polish Notation 239. Sliding Window Maximum 347. Top K Frequent Elements Stack&amp;Queue Summarize Binary Tree Build Binary Tree for Array Recursion Binary Tree Traversal Iteration Binary Tree Traversal Iteration Binary Trees Unified Method Binary Tree Level Order Traversal N-ary Tree Traversal 226. Invert Binary Tree 559. Maximum Depth of N-ary Tree 783. Minimum Distance Between BST Nodes Binary Tree Summarize 1 100. Same Tree 572. Subtree of Another Tree 101. Symmetric Tree 222. Count Complete Tree Nodes 513. Find Bottom Left Tree Value 110. Balanced Binary Tree 257. Binary Tree Paths 112. Path Sum &amp; II &amp; III Binary Tree Summarize 2 Backtracking 77. Combinations 17. Letter Combinations of a Phone Number 39. Combination Sum I &amp; II &amp; III Backtracking Summarize 131. Palindrome Partitioning 93. Restore IP Addresses 78. Subsets Backtracking Summarize 2 51. N-Queens 52. N-Queens II Greedy Algorithm 55. Jump Game I &amp; II 455. Assign Cookies Dynamic Programming 509. Fibonacci Number 70. Climbing Stairs Other 1. Two sum 2. Add Two Numbers 7. Reverse Integer 11. Container With Most Water 13. Roman to Integer 16. 3Sum_Closest 49. Group Anagrams 50. Pow(x, n) 67. Add Binary 989. Add to Array-Form of Integer 1523. Count Odd Numbers in an Interval Range 1979. Find Greatest Common Divisor of Array Last Edit 10-02-2023 59. Spiral Matrix II."
  },"/jekyll/0000-01-01-editor_envirmnment.html": {
    "title": "Tool | Edirot Guide",
    "keywords": "tool Jekyll",
    "url": "/jekyll/0000-01-01-editor_envirmnment.html",
    "body": "Notes editor environment VScode for Java Add Java jdk in vscode in setting.json \"java.configuration.runtimes\": [ { \"name\": \"JavaSE-17\", \"path\": \"/usr/bin/java\" }, ] Hide Run | Debug in editor Editor: Code Lens Controls whether the editor shows CodeLens. Hide Inlay Hints Editor â€º Inlay Hints: Enabled Enables the inlay hints in the editor. on -&gt; off [Vscode Debugger for C/C++ using GDB] Install gdb in Linux { \"name\": \"C++ Launch\", \"type\": \"cppdbg\", \"request\": \"launch\", \"program\": \"${workspaceFolder}/target.out\", \"stopAtEntry\": false, \"customLaunchSetupCommands\": [ { \"text\": \"target-run\", \"description\": \"run target\", \"ignoreFailures\": false } ], \"launchCompleteCommand\": \"exec-run\", \"linux\": { \"MIMode\": \"gdb\", \"miDebuggerPath\": \"/usr/bin/gdb\" }, \"osx\": { \"MIMode\": \"lldb\" }, \"windows\": { \"MIMode\": \"gdb\", \"miDebuggerPath\": \"C:\\\\MinGw\\\\bin\\\\gdb.exe\" } } Last Edit 09-29-2023 12:22"
  }}
