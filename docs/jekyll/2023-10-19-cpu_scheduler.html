<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="google-site-verification" content="MrJpPCJ8htzZlGpC1wo97QA1_XWns05Ez0LBsW3wj3I" /><title>OS | CPU Scheduler (Unfinished) Â· Home</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="Build Jekyll site with the GitBook style.
"><meta name="generator" content="Jekyll (using style of GitBook 3.2.3)"><meta name="author" content="Benson Hsu"><link rel="stylesheet" href="/assets/gitbook/style.css">
<link rel="stylesheet" href="/assets/gitbook/gitbook-plugin-fontsettings/website.css">
<link rel="stylesheet" href="/assets/gitbook/gitbook-plugin-search-pro/search.css">
<link rel="stylesheet" href="/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.css">

<link rel="stylesheet" href="/assets/gitbook/rouge/github.css">

<link rel="stylesheet" href="/assets/gitbook/custom.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/gitbook/images/apple-touch-icon-precomposed-152.png">
<link rel="shortcut icon" href="assets/gitbook/images/favicon.ico" type="image/x-icon">




            <link rel="prev" href="/jekyll/2023-10-18-process_thread.html" />
        

        
            <link rel="next" href="/jekylls/2023-10-26-syntax_analysis.html" />
        
    </head>
    <body>
        <div class="book"><div class="book-summary">
    <nav role="navigation">
        <div id="book-search-input" role="search">
            <input type="text" placeholder="Type to search" />
        </div>
        <div id="book-search-input-link" role="search">
            <a href="/assets/search.html">Click to Search</a>
        </div>
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="">
            
                <a href="/">
                    Home
                </a>
            </li>

            <li class="divider"></li>

            
                <!-- <p>pages</p> -->
                
                    

                    

                    
                
            
                <!-- <p>posts</p> -->
                
                    

                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-11-25-method_level_structural_unit_testing.html">
                        
                            <a href="/jekyll/2023-11-25-method_level_structural_unit_testing.html">
                                Testing | Method-Level Structural Unit Testing (Unfinished)
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-11-23-based_on_clp_testcases.html">
                        
                            <a href="/jekyll/2023-11-23-based_on_clp_testcases.html">
                                Testing | Based on CLP Testcases
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-10-28-method_level_function_unit_testing.html">
                        
                            <a href="/jekyll/2023-10-28-method_level_function_unit_testing.html">
                                Testing | Method-Level Functional Unit Testing (Unfinished)
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekylls/2023-10-26-syntax_analysis.html">
                        
                            <a href="/jekylls/2023-10-26-syntax_analysis.html">
                                Compiler | Syntax Analysis Notes (Unfinished)
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter active" data-level="1.2" data-path="/jekyll/2023-10-19-cpu_scheduler.html">
                        
                            <a href="/jekyll/2023-10-19-cpu_scheduler.html">
                                OS | CPU Scheduler (Unfinished)
                            </a>
                            
                                
                                    <ul><li><a href="#noun-concept-definition">Noun, Concept definition</a></li><li><a href="#scheduler-concepts">Scheduler Concepts</a></li><li><a href="#linux-scheduler">Linux Scheduler</a></li></ul>

                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-10-18-process_thread.html">
                        
                            <a href="/jekyll/2023-10-18-process_thread.html">
                                OS | Process and Thread
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-10-17-container_of.html">
                        
                            <a href="/jekyll/2023-10-17-container_of.html">
                                Note | Linux Kernel Macro container_of &amp; offsetof
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-10-10-test_case_generation.html">
                        
                            <a href="/jekyll/2023-10-10-test_case_generation.html">
                                Testing | Test Case Generation
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-10-09-operating_system_structure.html">
                        
                            <a href="/jekyll/2023-10-09-operating_system_structure.html">
                                OS | Operating System Structure
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-09-23-software_testing_introduction.html">
                        
                            <a href="/jekyll/2023-09-23-software_testing_introduction.html">
                                Testing | Software Testing Introduction
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekylls/2023-09-21-lexical_analysis.html">
                        
                            <a href="/jekylls/2023-09-21-lexical_analysis.html">
                                Compiler | Lexical Analysis Notes
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-09-20-compiler_introduction.html">
                        
                            <a href="/jekyll/2023-09-20-compiler_introduction.html">
                                Compiler | Compilers Introduction
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-09-12-operating_system_introduction.html">
                        
                            <a href="/jekyll/2023-09-12-operating_system_introduction.html">
                                OS | Operating System Introduction
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-09-07-test_case_generation_based_on_constraint_logic_graph.html">
                        
                            <a href="/jekyll/2023-09-07-test_case_generation_based_on_constraint_logic_graph.html">
                                Paper | Test Case Generation Based on Constraint Logic Graph
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-09-07-Introduction_OCL.html">
                        
                            <a href="/jekyll/2023-09-07-Introduction_OCL.html">
                                Note | Object Constraint Language Concepts (Unfinished)
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-08-06-gdb_introduction.html">
                        
                            <a href="/jekyll/2023-08-06-gdb_introduction.html">
                                Note | GNU Debugger Quick Notes
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-08-05-linux_kernel_complie.html">
                        
                            <a href="/jekyll/2023-08-05-linux_kernel_complie.html">
                                OS | Linux Kernel Compilation
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-07-28-UML_structure_diagrams.html">
                        
                            <a href="/jekyll/2023-07-28-UML_structure_diagrams.html">
                                Note | UML Structure Diagrams Introduction
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-07-28-UML_behavior_diagrams.html">
                        
                            <a href="/jekyll/2023-07-28-UML_behavior_diagrams.html">
                                Note | UML Behavior Diagrams Introduction (Unfinished)
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-07-26-unified_modeling_language.html">
                        
                            <a href="/jekyll/2023-07-26-unified_modeling_language.html">
                                Note | Unified Modeling Language Concepts
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-07-22-property_based_testing_entropy_guided_backbox_REST_API-_fuzzer.html">
                        
                            <a href="/jekyll/2023-07-22-property_based_testing_entropy_guided_backbox_REST_API-_fuzzer.html">
                                Paper | BenFuzz: A Property Based Testing and Entropy Guided Blackbox REST API Fuzzer
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-07-19-MVVM_modeling_methodology_user_interface.html">
                        
                            <a href="/jekyll/2023-07-19-MVVM_modeling_methodology_user_interface.html">
                                Paper | A MVVM Modeling Methodology for Information Systems User Interface Design
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-07-18-software_arch_pattern.html">
                        
                            <a href="/jekyll/2023-07-18-software_arch_pattern.html">
                                Note | Architectural Patterns Compare MVP, MVC, MVVM
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-07-18-automated_gen_test_case_using_UML.html">
                        
                            <a href="/jekyll/2023-07-18-automated_gen_test_case_using_UML.html">
                                Paper | Automated-generating test case using UML statechart diagrams (Unfinished)
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-06-23-Intergrated_environment_sdd.html">
                        
                            <a href="/jekyll/2023-06-23-Intergrated_environment_sdd.html">
                                Paper | An Integrated Environment for Specification Driven Development (Unfinished)
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-05-28-characteristics_of_bdd.html">
                        
                            <a href="/jekyll/2023-05-28-characteristics_of_bdd.html">
                                Paper | A Study of the Characteristics of Behaviour Driven Development
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-05-20-analysis_mutation_testing.html">
                        
                            <a href="/jekyll/2023-05-20-analysis_mutation_testing.html">
                                Paper | An Analysis and Survey of the Development of Mutation Testing
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-04-21-tdd_concepts.html">
                        
                            <a href="/jekyll/2023-04-21-tdd_concepts.html">
                                Paper | Test-driven development concepts, taxonomy, and future direction
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-04-18-applying_isoiec25010.html">
                        
                            <a href="/jekyll/2023-04-18-applying_isoiec25010.html">
                                Paper | Applying the ISO/IEC 25010 Quality Models to Software Product
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-04-13-software_standard.html">
                        
                            <a href="/jekyll/2023-04-13-software_standard.html">
                                Note | Standard - ISO/IEC
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-02-04-algorithm_kmp.html">
                        
                            <a href="/jekyll/2023-02-04-algorithm_kmp.html">
                                Leetcode | Algorithm - KMP
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2023-01-12-gomoku_ai.html">
                        
                            <a href="/jekyll/2023-01-12-gomoku_ai.html">
                                Note | Gomoku AI - Game Tree
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2022-11-24-git_commit.html">
                        
                            <a href="/jekyll/2022-11-24-git_commit.html">
                                Note | Commit Message Format
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2022-11-08-ai_csp.html">
                        
                            <a href="/jekyll/2022-11-08-ai_csp.html">
                                Note | Constraint Satisfaction Problem
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2022-11-07-network_urat.html">
                        
                            <a href="/jekyll/2022-11-07-network_urat.html">
                                Note | Basic UART Concept
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/2022-11-05-docker_jekyll.html">
                        
                            <a href="/jekyll/2022-11-05-docker_jekyll.html">
                                Note | Docker Build Github Pages
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/0000-01-01-virtual_machine_tool.html">
                        
                            <a href="/jekyll/0000-01-01-virtual_machine_tool.html">
                                Tool | Virtual Machine
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/0000-01-01-linux_config.html">
                        
                            <a href="/jekyll/0000-01-01-linux_config.html">
                                Tool | Linux Config
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/0000-01-01-leetcode_guide.html">
                        
                            <a href="/jekyll/0000-01-01-leetcode_guide.html">
                                Leetcode | Master Guide
                            </a>
                            
                                
                            
                        </li>
                    
                        
                        <li class="chapter" data-level="1.1" data-path="/jekyll/0000-01-01-editor_envirmnment.html">
                        
                            <a href="/jekyll/0000-01-01-editor_envirmnment.html">
                                Tool | Edirot Guide
                            </a>
                            
                                
                            
                        </li>
                    

                    
                        <li class="divider"></li>
                    
                
            

            <!-- <li>
                <a href="https://github.com/sighingnow/jekyll-gitbook/fork" target="blank" class="gitbook-link">
                    Fork it Now!
                </a>
            </li> -->
        </ul>
    </nav>
</div>
<div class="book-body">
                <div class="book-header" role="navigation">
                    <!-- Title -->
                    <h1>
                        <i class="fa fa-circle-o-notch fa-spin"></i>
                        
                            <a href="." >OS | CPU Scheduler (Unfinished)</a>
                        
                    </h1>
                </div>

                <div class="body-inner"><div class="page-wrapper" tabindex="-1" role="main">
    

    <div class="page-inner">
        <div class="normal">
            
            
            <section class="normal">October 19, 2023</section>
            
        </div>
        <div id="book-search-results">
            <div class="search-noresults">
                <section class="normal markdown-section">
                    
                    <h1 id="/jekyll/cpu_scheduler">OS | CPU Scheduler (Unfinished)</h1>
                    

                    <blockquote class="block-tip">
  <p>Operating System: Design and Implementation course notes from CCU, lecturer Shiwu-Lo.</p>
</blockquote>

<p>æœ¬ç« ç¯€æœƒä¸»è¦ä»‹ç´¹ Linux Schedulerï¼ŒLinux Scheduler ç¾åœ¨çš„çš„ç›®æ¨™æ˜¯: å¦‚ä½•å¾ã€Œå¥½è®Šç‚ºæ›´å¥½ã€</p>

<ul>
  <li>Noun, Concept definition</li>
  <li>2.4 Scheduler</li>
  <li>2.6 O(1) Scheduler</li>
  <li>2.6 - 5.3 Complete fair scheduler(CFS)</li>
</ul>

<blockquote>
  <p>Linux Kernel 2.4 æ˜¯ä¸€å€‹éå¸¸é•·å£½çš„ç‰ˆæœ¬ï¼ŒæŒçºŒäº†å¤§ç´„ 10 å¹´å·¦å³ï¼Œä½†å³ä¾¿é€™æ¨£ä¸€å€‹é€™éº¼é•·å£½ã€ç©©å®šçš„ Schedulerï¼Œ
Linux Kernel è¨­è¨ˆè€…ä»ç„¶åœ¨è€ƒæ…®å¦‚ä½•è®“å¥¹è®Šå¾—æ›´å¥½ã€‚</p>
</blockquote>

<h3 id="noun-concept-definition">Noun, Concept definition</h3>

<p><a href="./2023-10-19-cpu_scheduler.html#41-task">4.1 Task</a><br />
<a href="./2023-10-19-cpu_scheduler.html#42-scheduler-types">4.2 Scheduler Types</a><br />
<a href="./2023-10-19-cpu_scheduler.html#43-cooperative-multitasking---novell-netware">4.3 Cooperative multitasking - Novell-Netware</a><br />
<a href="./2023-10-19-cpu_scheduler.html#44-preemptable-os">4.4 Preemptable OS</a><br />
<a href="./2023-10-19-cpu_scheduler.html#45-scheduler--context-switch">4.5 Scheduler &amp; Context switch</a><br />
<a href="./2023-10-19-cpu_scheduler.html#46-scheduling-criteria">4.6 Scheduling Criteria</a></p>

<h5 id="41-task">4.1 Task</h5>

<ul>
  <li>åœ¨ Linux ä¸­ï¼ŒProcess å’Œ Thread éƒ½æ˜¯ Task</li>
  <li>Process ä¹‹é–“ä¸æœƒå…±ç”¨ä»»ä½•è³‡æºï¼Œ<strong>å°¤å…¶æ˜¯ Memory</strong></li>
  <li>Thread å‰‡æ˜¯å¹¾ä¹å…±ç”¨æ‰€æœ‰è³‡æºï¼Œ<strong>å°¤å…¶æ˜¯ Memory</strong></li>
  <li>Task çš„ç”Ÿå‘½é€±æœŸä¸­åˆ†ç‚ºå…©ç¨®æƒ…æ³
    <ul>
      <li>Using CPU</li>
      <li>Waitingï¼Œä¾‹å¦‚: Waiting mutex, I/O â€¦</li>
    </ul>
  </li>
  <li>Task åœ¨ä½¿ç”¨ CPU æ™‚åˆ†ç‚º: åŸ·è¡Œæ–¼ User mode/Kernel mode</li>
</ul>

<blockquote class="block-tip">
  <p>åœ¨ Linux Task å¯ä»¥åŸ·è¡Œåœ¨ User/Kernel modeï¼Œæ”¹è®Šæ¨¡å¼ç¨±ä½œ Mode changeï¼Œè€Œ Kernel Thread å°ˆæŒ‡åªæœ‰ Kernel mode çš„ Taskï¼Œä¾‹å¦‚: Device Driver</p>
</blockquote>

<p><strong>Task &amp; Scheduling</strong></p>

<p>ä»¥ä¸‹æ˜¯ä¸€å€‹ Task çš„ç”Ÿå‘½é€±æœŸï¼Œé€™è£¡å¾ Scheduler è§’åº¦ä¾†çœ‹çš„è©±ä¸»è¦å½±éŸ¿çš„æ˜¯å…©å€‹éƒ¨åˆ†:</p>
<ul>
  <li>Waining(semaphore): æ€éº¼åœ¨ Waiting æ™‚ï¼Œè®“ Task çš„ä½¿ç”¨ç‡æœ€å¤§åŒ–</li>
  <li>OS å¯ä»¥åˆ†æˆå…©å¤§é¡:
    <ul>
      <li><strong><a href="https://en.wikipedia.org/wiki/Cooperative_multitasking">Cooperative multitasking</a></strong>(Non-preemptive, å”åŒé‹ä½œå¼å¤šå·¥)</li>
      <li><strong><a href="https://en.wikipedia.org/wiki/Preemption_%28computing%29">Preemptable OS</a></strong>(Preemptive, æ¶å å¼å¤šä»»å‹™è™•ç†)</li>
    </ul>
  </li>
</ul>

<p><img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/1.png?raw=true" alt="" height="100%" width="100%" /></p>

<h5 id="42-scheduler-types">4.2 Scheduler Types</h5>

<p><img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/2.png?raw=true" alt="" height="100%" width="100%" /></p>

<ul>
  <li><strong>Non-preemptive OS</strong>(â–³): å°±æ˜¯æŒ‡åªæœ‰ Task è‡ªå·±æ”¾æ£„ CPU ä½¿ç”¨æ¬Šï¼Œæ‰æœƒäº¤å‡º CPU ä½¿ç”¨æ¬Š
    <ol>
      <li>Task åŸ·è¡ŒçµæŸï¼Œé€™æ¨£ç•¶ç„¶å°±äº¤å‡º CPU ä½¿ç”¨æ¬Š</li>
      <li>Task ç™¼å‡º Blocking I/O request å› ç‚ºè¦ç­‰å¾… I/O å®Œæˆï¼Œå› æ­¤ä¹Ÿæœƒäº¤å‡º CPU ä½¿ç”¨æ¬Š
        <ul>
          <li>ç•¶ç„¶ä¹Ÿæœ‰ Async I/Oï¼ŒVectored I/O ç­‰æ–¹æ³•ï¼Œé€™è£¡å…ˆä¸è¨è«–</li>
        </ul>
      </li>
    </ol>
  </li>
  <li><strong>Preemptive OS</strong>(â˜â–³):
    <ol>
      <li>æ¯å€‹ Task æœƒæœ‰ä¸€å€‹ Time slice åŸ·è¡Œï¼Œä¾‹å¦‚: 1/1000 Secï¼ŒåŸ·è¡ŒçµæŸå°±è¦åšåˆ‡æ›</li>
      <li>å¾ Wating ç­‰å¾…å®Œç•¢ I/O å¾Œï¼Œè¿”å› Runtable æ™‚è¦ä¸è¦é¦¬ä¸Šåˆ‡å›è©² Task</li>
      <li>æ–°çš„ Task ä¹Ÿå¯ä»¥çµ¦äºˆé«˜å„ªå…ˆæ¬Šï¼Œè®“ä»–é¦¬ä¸ŠåŸ·è¡Œ
        <ul>
          <li>Preemptive OS åˆåˆ†ç‚º:</li>
        </ul>
        <ul>
          <li><strong>Preemptable Kernel</strong>, <strong>Non-preemptable Kernel</strong></li>
        </ul>
      </li>
    </ol>
  </li>
</ul>

<h5 id="43-cooperative-multitasking---novell-netware">4.3 Cooperative multitasking - Novell-Netware</h5>

<p><a href="https://en.wikipedia.org/wiki/NetWare">Netware</a>:</p>
<ul>
  <li>Netware æ‰€æœ‰çš„ç¨‹å¼éƒ½åœ¨ ring 0 åŸ·è¡Œï¼Œä½†æ˜¯é€™æ¨£å°±è¦ç¢ºä¿æ‰€æœ‰çš„ç¨‹å¼éƒ½æ˜¯ç”± Novell ä¾†æ§åˆ¶ï¼Œ
é€™æ¨£æ‰èƒ½ç¢ºä¿æ‰€æœ‰çš„ç¨‹å¼éƒ½æ˜¯å¯ä¿¡ä»»çš„ï¼Œæ²’æœ‰æƒ¡æ„ç¨‹å¼</li>
  <li>ä½†æ˜¯ç•¶ CPU æ•ˆèƒ½è®Šå¼·ä¹‹å¾Œï¼Œé€™æ¨£çš„è¨­è¨ˆå°±ä¸å¤ªå¥½ï¼Œå› ç‚ºæ‰€æœ‰çš„ç¨‹å¼éƒ½è¦ç”± Novell ä¾†æä¾›ï¼Œé€™ä¸å¤ªå¯èƒ½ï¼Œå› æ­¤æœ€å¾Œç”± Windows NT å‹å‡º</li>
</ul>

<h5 id="44-preemptable-os">4.4 Preemptable OS</h5>

<p><strong>Preemptive OS:</strong></p>
<ul>
  <li>å¦‚æœä¸€å€‹ Task åŸ·è¡Œéä¹…ï¼ŒOS æœƒä¸»å‹•å°‡ CPU æ§åˆ¶æ¬Šäº¤çµ¦ä¸‹ä¸€å€‹ Task</li>
  <li>å¦‚æœè¦è¨­è¨ˆ Preemptive OS å¿…é ˆè¦æœ‰ Hardware supportï¼Œä¾‹å¦‚: Timer, Interrupt
    <ul>
      <li>Timer: ç”¨ä¾†è¨ˆç®— Task åŸ·è¡Œçš„æ™‚é–“</li>
      <li>Interrupt: ä½¿ OS èƒ½ç²å¾— CPU æ§åˆ¶æ¬Š</li>
    </ul>
  </li>
  <li>æ‰€æœ‰ç‰ˆæœ¬çš„ Linux éƒ½æ˜¯ Preemptive OS</li>
</ul>

<p><strong>Preemptive Kernel</strong></p>

<ul>
  <li>Non-preemptive Kernel(throughput):
    <ul>
      <li>åœ¨ 2.6 Kernel ä¹‹å‰ï¼ŒLinux æ˜¯ Non-preemptable Kernel</li>
      <li>ç•¶ Task åŸ·è¡Œåœ¨ Kernel mode æ™‚ï¼Œå…¶å„ªå…ˆæ¬Šç„¡é™å¤§
        <ul>
          <li>Context switch åªæœƒç™¼ç”Ÿåœ¨ Task ç”± Kernel mode åˆ‡æ›åˆ° User mode æ™‚</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Preemptive Kernel(latency):
    <ul>
      <li>åœ¨ 2.6 Kernel ä¹‹å¾Œï¼ŒLinux å¯ä»¥è¨­å®šç‚º Preemptable Kernel</li>
      <li>ç•¶ Task åŸ·è¡Œåœ¨ Kernel mode æ™‚å¦‚æœæ²’æœ‰ä»»ä½•çš„ Lock å°±å¯èƒ½ç™¼ç”Ÿ Context switch</li>
    </ul>
  </li>
</ul>

<p><img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/3.png?raw=true" alt="" height="100%" width="100%" /></p>

<p><img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/4.png?raw=true" alt="" height="100%" width="100%" /></p>

<blockquote class="block-tip">
  <p>æ³¨æ„å¦‚æœåœ¨ Kernel ä¸­ç™¼ç”Ÿ Interruptï¼Œä¸‹æ¬¡ Task A åŸ·è¡Œæ™‚æœƒç›´æ¥å¾ Kernel mode ä¸­ç¹¼çºŒåŸ·è¡Œï¼Œ
å› æ­¤åœ¨ 2.6 Kernel å¾Œç·¨è­¯æ™‚å¯ä»¥é¸æ“‡ Kernel æ³¨é‡ throughput é‚„æ˜¯ latencyï¼Œ</p>
</blockquote>

<p><strong>Form Non-preemprive kernel to Preemprive kernel</strong></p>

<ul>
  <li>åœ¨ Non-Preemprive kernel ä¸­ï¼Œæ‰€æœ‰é€²å…¥ Kernel çš„ Task å¯ä»¥å‡è¨­è‡ªå·±ä¸æœƒè¢« Preemptï¼Œå› æ­¤å­˜å–å¾ˆå¤šå…±ç”¨è³‡æ–™ï¼Œä¸éœ€è¦ä½¿ç”¨ Lock</li>
  <li>åœ¨ Preemprive kernel ä¸­ï¼Œç¨‹å¼è¨­è¨ˆå¸«éœ€è¦ä»”ç´°æ€è€ƒã€æ”¹å¯«ç¨‹å¼ç¢¼ï¼Œæ‰€æœ‰å­˜å–åˆ°å…±ç”¨è³‡æ–™çš„ç¨‹å¼ç¢¼éƒ½éœ€è¦ä½¿ç”¨ Lock-UnLock ä¾†ä¿è­·
    <ul>
      <li>é€™æ˜¯ä¸€ä»¶éå¸¸è€—è²»äººåŠ›çš„å·¥ä½œ</li>
    </ul>
  </li>
</ul>

<h5 id="45-scheduler--context-switch">4.5 Scheduler &amp; Context switch</h5>

<ul>
  <li><strong>Scheduler</strong> æ±ºå®šæ¥ä¸‹ä¾†è¦åŸ·è¡Œå“ªä¸€å€‹ Task
    <ul>
      <li>ä½¿ç”¨ C language æ’°å¯«</li>
    </ul>
  </li>
  <li><strong>Context switch</strong>
    <ul>
      <li>è² è²¬å¾ä¸€å€‹ Task åˆ‡æ›åˆ°å¦ä¸€å€‹ Task</li>
      <li>ä¸»è¦åˆ‡æ›çš„æ˜¯æ™®é€š Register</li>
      <li>å¦‚æœ Task ä½¿ç”¨åˆ°ä¸€äº›ç‰¹åˆ¥çš„ Registerï¼Œä¾‹å¦‚: æµ®é»æ•¸é‹ç®—å™¨(Floating Point Unit, FPU)ï¼Œå‰‡éœ€è¦é¡å¤–è™•ç†(Lazy)
        <ul>
          <li>Lazy: åªæœ‰æ–°çš„ Task éœ€è¦ä½¿ç”¨åˆ° FPU æ™‚ï¼Œæ‰æœƒåˆ‡æ› FPU ç›¸é—œçš„ Register</li>
        </ul>
      </li>
      <li>Context switch éš±å«çš„åˆ‡æ›
        <ul>
          <li>ä¾ç…§éœ€æ±‚åˆ‡æ› Page Table(TLB)</li>
          <li>åˆ‡æ› Cache çš„å…§å®¹</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="46-scheduling-criteria">4.6 Scheduling Criteria</h5>

<p>é€™è£¡ä»‹ç´¹å¦‚ä½•åˆ†æä¸€å€‹ Scheduler çš„å¥½å£</p>

<ul>
  <li><strong>CPU Utilization</strong>(ä½¿ç”¨ç‡): CPU ç¶­æŒåœ¨é«˜ä½¿ç”¨ç‡ï¼ŒTask ä¹‹é–“äº’ç›¸æœ‰ç­‰å¾…çš„é—œä¿‚ï¼Œè¦å¦‚ä½• Schedule?</li>
  <li><strong>Throughput</strong>(ååé‡): åœ¨å–®ä½æ™‚é–“å…§ï¼ŒCPU å¯ä»¥åŸ·è¡Œå¤šå°‘ Task
    <ul>
      <li>ä¾‹å¦‚: è®“ I/O Task å„ªå…ˆåŸ·è¡Œ</li>
    </ul>
  </li>
  <li><strong>Turnaround time</strong>(å¾€è¿”æ™‚é–“): Task å¾é–‹å§‹åˆ°çµæŸçš„æ™‚é–“ï¼Œèˆ‡ Scheduler åŠç¨‹å¼æœ¬èº«çš„åŸ·è¡Œç¨‹åº¦ç›¸é—œ</li>
  <li><strong>Waiting time</strong>(ç­‰å¾…æ™‚é–“): Task åœ¨ Ready Queue ä¸­ç­‰å¾…çš„æ™‚é–“ï¼Œé€šå¸¸é«˜å„ªå…ˆæ¬Šçš„ Task æœƒç­‰å¾…è¼ƒçŸ­çš„æ™‚é–“
    <ul>
      <li>åªè¦ä¸€å€‹ Task èƒ½åŸ·è¡Œï¼Œä½† OS ä½¿å…¶ç­‰å¾…å°±è¦ç®—å…¥ Waiting time</li>
    </ul>
  </li>
  <li><strong>Response time</strong>(å›æ‡‰æ™‚é–“): Task å¾ç™¼å‡º Request åˆ°ç¬¬ä¸€æ¬¡å›æ‡‰çš„æ™‚é–“
    <ul>
      <li>ä¾‹å¦‚: ç¨‹å¼éœ€è¦è¼¸å‡ºå›æ‡‰åˆ°è¢å¹•ï¼Œå¥½çš„ Scheduler å¯ä»¥è®“ Progress bar éå¸¸å³æ™‚çš„åæ‡‰</li>
    </ul>
  </li>
</ul>

<p><strong>CPU Utilization</strong></p>

<p>å¯¦éš›çš„ CPU ä½¿ç”¨ç‡æœƒå—åˆ° Task çš„é«˜ä½å„ªå…ˆæ¬Šå½±éŸ¿ï¼Œå› æ­¤ CPU ä½¿ç”¨ç‡æœƒæœ‰å…©ç¨®æƒ…æ³:</p>

<p><img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/5.png?raw=true" alt="" height="100%" width="100%" /></p>

<p><img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/6.png?raw=true" alt="" height="100%" width="100%" /></p>

<blockquote>
  <p>å¯ä»¥é€éè»Ÿé«”çš„æ–¹å¼å° Lock-Unlock åšæœ€ä½³åŒ–ï¼Œä¾‹å¦‚: Intel vtune, kernelshark ä¹‹é¡çš„è¦–è¦ºåŒ–å·¥å…·</p>
</blockquote>

<p><strong>Response time</strong></p>

<p>å‡å¦‚ç³»çµ±ä¸­æœ‰ 10 å€‹ Taskï¼Œé€™ 10 å€‹ Task é€£æ¥åˆ° 10 å€‹ Userï¼Œå¦‚æœè¦è®“åŸ·è¡Œæ„Ÿè¦ºæµæš¢çš„è©±ï¼Œæœ‰ä»¥ä¸‹åšæ³•:</p>

<ol>
  <li>å–®å‘äº’å‹•:
    <ul>
      <li>å‡å¦‚ Task æ˜¯æ’­æ”¾å½±ç‰‡ï¼Œé‚£å°±å®‰æ’é©ç•¶çš„ Bufferï¼Œè§£ç¢¼å¾Œçš„å½±ç‰‡æ”¾å…¥ Buffer ä¾› User task æ‹¿å–</li>
      <li>åªè¦ Buffer å¤ å¤§ï¼Œå³ä½¿æ¯ 10 ç§’æ‰è¼ªåˆ°ä¸€æ¬¡åŸ·è¡Œï¼Œä½¿ç”¨è€…ä¹Ÿä¸æœƒè¦ºå¾— Lag</li>
    </ul>
  </li>
  <li>é›™å‘äº’å‹•:
    <ul>
      <li>å‡å¦‚ Task æ˜¯èªéŸ³é€šè©±ï¼Œå¿…é ˆåœ¨ 150ms ä¸­è¼ªåˆ°åŸ·è¡Œä¸€æ¬¡ï¼Œå¦å‰‡æœƒè¦ºå¾—é€šè©±å“è³ªä¸å¥½</li>
      <li>é‚£æ¯å€‹ Task ä¸€å›åˆåªèƒ½åŸ·è¡Œ 15ms</li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="scheduler-concepts">Scheduler Concepts</h3>

<h5 id="47-simple-scheduler">4.7 Simple Scheduler</h5>

<ul>
  <li><strong>FCFS(Fisrt Come First Serve)</strong>
    <ul>
      <li>ä¾ç…§ Task çš„æŠµé”é †åºï¼Œä¾ç…§é †åºåŸ·è¡Œ</li>
    </ul>
  </li>
  <li><strong>SJF(Shortest Job First)</strong>
    <ul>
      <li>ä¾ç…§ Task çš„åŸ·è¡Œæ™‚é–“ï¼ŒåŸ·è¡Œæ™‚é–“çŸ­çš„ Task å„ªå…ˆåŸ·è¡Œ</li>
    </ul>
  </li>
  <li><strong>RR(Round Robin)</strong>
    <ul>
      <li>åœ¨ä¸€ç¾¤ Task ä¸­è¼ªæµåŸ·è¡Œï¼Œæ¯ä¸€å€‹ Task æœ€å¤šåŸ·è¡Œ X å€‹ Time slice</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>åœ¨ Linux ä¸­å¯ä»¥çœ‹åˆ°ä¸Šé¢ä¸‰ç¨®æ–¹æ³•çš„å½±å­</p>
</blockquote>

<p><strong>FCFS</strong></p>

<p><img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/7.png?raw=true" alt="" height="100%" width="100%" /></p>

<ul>
  <li>Wating time: P1 = 0, P2 = 100, P3 = 150</li>
  <li>Average waiting time: (0 + 100 + 150) / 3 = 83.3</li>
  <li>å¦‚æœå…ˆæŠµé”çš„ Task åŸ·è¡Œæ™‚é–“å¾ˆé•·ï¼ŒAverage waiting time å°±æœƒè®Šå¾—æ¯”è¼ƒé•·</li>
</ul>

<p><strong>SJF</strong></p>

<p><img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/8.png?raw=true" alt="" height="100%" width="100%" /></p>

<ul>
  <li>åœ¨ P1 åŸ·è¡Œä¸­ï¼ŒP2ã€P3 æŠµé”ï¼Œæ”¾å…¥ Ready Queueï¼Œç„¶å¾Œä¾ç…§åŸ·è¡Œæ™‚é–“æ’åº</li>
  <li>Wating time: P1 = 0, P2 = 110, P3 = 100</li>
  <li>Average waiting time: (0 + 110 + 100) / 3 = 70</li>
</ul>

<p><strong>Preemptive SJF</strong></p>

<p><img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/9.png?raw=true" alt="" height="100%" width="100%" /></p>

<ul>
  <li>åªè¦æœ‰å·¥ä½œé€²å…¥ Ready Queueï¼Œæˆ–æœ‰å·¥ä½œçµæŸå°±è¦æ±ºå®šåŸ·è¡Œçš„ Task</li>
  <li>Wating time: P1 = 60, P2 = 10, P3 = 0</li>
  <li>Average waiting time: (60 + 10 + 0) / 3 = 23.3</li>
</ul>

<blockquote>
  <p>ç›´è§€ä¸Šæœƒè¦ºå¾— Preemptive SJF æ˜¯æ¯”è¼ƒå¥½çš„æ¼”ç®—æ³•ï¼Œä½†æ³¨æ„ Preemptive SJF æœ‰ Context switch overhead</p>
</blockquote>

<ul>
  <li>å¦‚æœåªæ˜¯å¯« SJF é€šå¸¸æŒ‡ Non-preemptive SJF</li>
  <li>Preemptive SJF åˆç¨±ä½œ SRTF(Shortest Remaining Time First)</li>
  <li>åœ¨ Average waiting time æ–¹é¢ï¼ŒSJF &amp; SRTF åˆ†åˆ¥æ˜¯ Preemptable scheduling &amp; Non-preemptable scheduling çš„æœ€ä½³æ¼”ç®—æ³•</li>
</ul>

<p><strong>Estimate Execution Time</strong></p>

<p>å‰é¢æåˆ°çš„ Scheduler éƒ½æ˜¯å‡è¨­ Task çš„åŸ·è¡Œæ™‚é–“æ˜¯å·²çŸ¥çš„ï¼Œä½†å¯¦éš›ä¸Š Task çš„åŸ·è¡Œæ™‚é–“æ˜¯ä¸çŸ¥é“çš„ï¼Œå› æ­¤éœ€è¦ä¼°è¨ˆ Task çš„åŸ·è¡Œæ™‚é–“</p>

<ul>
  <li>ä¸€å€‹ Task çš„ç”Ÿå‘½é€±æœŸåˆ†ç‚ºå…©ç¨®æƒ…æ³
    <ul>
      <li>Using CPU, Waiting</li>
    </ul>
  </li>
  <li>ä¾ç…§ Task ä»¥å‰ä½¿ç”¨ CPU ä½¿ç”¨æ™‚é–“çš„å¤šå¯¡ï¼Œä¾†é æ¸¬é€™æ¬¡ä½¿ç”¨ CPU æ™‚é–“çš„å¤šå¯¡ï¼Œä¾‹å¦‚ä»¥ä¸‹å…¬å¼
    <ul>
      <li>t<sub>n</sub>: ä¸Šä¸€æ¬¡çš„ CPU time</li>
      <li>ğœ<sub>x</sub>: é æ¸¬çš„ç¬¬ x æ¬¡çš„ CPU time</li>
      <li>Linux Kernel 2.4 ä½¿ç”¨ä»¥ä¸‹çš„æ–¹æ³•ï¼Œä¸¦ä¸” ğ›¼ å– 1/2 å› ç‚ºå¯ä»¥é¿å…æµ®é»æ•¸é‹ç®—
        <ul>
          <li>t<sub>n+1</sub> = ğ›¼ * t<sub>n</sub> + (1 - ğ›¼) * ğœ<sub>n</sub></li>
          <li>ğ›¼ æ˜¯ä¸€å€‹æ¬Šé‡å› å­ç•Œæ–¼ 0 ~ 1 ä¹‹é–“
            <ul>
              <li>è¶Šé è¿‘ 1ï¼Œè¡¨ç¤ºè¶Šé‡è¦–éå»çš„ CPU time</li>
              <li>è¶Šé è¿‘ 0ï¼Œè¡¨ç¤ºè¶Šé‡è¦–é æ¸¬çš„ CPU time</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Round Robin</strong></p>

<p>å¦‚æœä½¿ç”¨ RR é‚£éº¼ Time slice è¦è¨­å®šç‚ºå¤šå°‘?</p>
<ul>
  <li>å¤ªé•·: æœƒè®“ Task ç­‰å¾…çš„æ™‚é–“è®Šé•·</li>
  <li>å¤ªçŸ­: æœƒè®“ Context switch overhead è®Šå¤§</li>
  <li>é€šå¸¸ Time slice æœƒè¨­å®šç‚ºä¸€å€‹ Task å¯ä»¥åœ¨ Time slice å…§åŸ·è¡Œå®Œç•¢ï¼Œè®Šæˆ Waiting ç‹€æ…‹
    <ul>
      <li>ä¹Ÿå°±æ˜¯åœ¨ Time slice ä¸­æˆåŠŸæŠŠ I/O request ç™¼å‡ºå»</li>
    </ul>
  </li>
</ul>

<blockquote class="block-warning">
  <p>ç›®å‰ Linux çš„è¨­å®šç‚ºä½¿ç”¨è€…éœ€è¦å¤šå°‘çš„ Time sliceï¼Œå¯ä»¥å‹•æ…‹çš„èª¿æ•´ Time slice çš„å¤§å°</p>
</blockquote>

<h3 id="linux-scheduler">Linux Scheduler</h3>

<ul>
  <li>Linux å…±æœ‰ 140 å€‹å„ªå…ˆæ¬Šç­‰ç´š
    <ul>
      <li>0 ~ 99: Real-time priority
        <ul>
          <li>é€šå¸¸æ˜¯ä¸€äº›éœ€è¦ Real-time çš„ Taskï¼Œä¾‹å¦‚: å½±ç‰‡æ’­æ”¾ï¼Œè²éŸ³æ’­æ”¾</li>
        </ul>
      </li>
      <li>100 ~ 139: Normal priority
        <ul>
          <li>å°ä½¿ç”¨è€…è€Œè¨€æ˜¯ -20 ~ +19ï¼Œé è¨­å€¼ç‚º 0ï¼Œç¨±ä½œ Nice value</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Nice value æ˜¯ç”± User æŒ‡å®šï¼ŒLinux ç•¶ä½œåƒè€ƒç”¨ä»¥è¨ˆç®— Dynamic priorityï¼ŒDynamic priority æœƒå› ä»¥ä¸‹å› ç´ å½±éŸ¿:
    <ul>
      <li>è©² Task æ˜¯ I/O bound é‚„æ˜¯ CPU bound</li>
      <li>è€ƒæ…® Core çš„ç‰¹æ€§</li>
      <li>è€ƒæ…® Multi-thread çš„ç‰¹æ€§</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>ä½¿ç”¨è€…åœ¨å•Ÿå‹• Task æ™‚å¯ä»¥æŒ‡å®š Nice valueï¼Œæˆ–åœ¨ Task åŸ·è¡Œæ™‚ä½¿ç”¨ renice æŒ‡ä»¤ä¾†èª¿æ•´ Nice value</p>
</blockquote>

<h5 id="48-linux-24-scheduler">4.8 Linux 2.4 Scheduler</h5>

<ol>
  <li>åœ¨ 2.4 Scheduler ä¸­å¦‚ä½•å° I/O é€²è¡Œå„ªåŒ–</li>
  <li>æ€è€ƒåœ¨ 2.4 åœ¨ Multi-processor çš„ç’°å¢ƒä¸‹æ¬ ç¼ºä»€éº¼?</li>
</ol>

<ul>
  <li>Non-preemptible kernel
    <ul>
      <li>Set p-&gt;need_resched if schedule() should be invoked at the â€˜next opportunityâ€™(kernel -&gt; user mode).</li>
      <li>æ‰€ä»¥ä¸€å€‹æ­£åœ¨ Kernel ä¸­é‹è¡Œçš„ Task è¦é€²è¡Œ Context switch æ™‚å°±æœƒå°‡ need_resched è¨­ç‚º 1</li>
    </ul>
  </li>
  <li>Round-Robin
    <ul>
      <li>task_struct-&gt;counter: number of clock ticks left to run in this scheduling slice, decremented by a timer.</li>
      <li>é€™æ˜¯ä¸€å€‹ Task åŸ·è¡Œçš„ counterï¼Œæ¯å€‹ time tick å°± -1ï¼Œç”¨å®Œäº†å°±ä¸èƒ½åœ¨é€™å€‹å›åˆå…§ä½¿ç”¨ CPU</li>
    </ul>
  </li>
</ul>

<p><strong>2.4 Scheduler - SMP:</strong></p>

<p>ç•¶æœ‰ CPU é€²å…¥ Idle æ™‚ï¼Œ2.4 Scheduler æœƒå¾ Ready Queue ä¸­ Search &amp; Estimateï¼Œæ‰¾å‡ºæœ€ä½³çš„ Task ä¾†åŸ·è¡Œ</p>
<ul>
  <li>Search: æœƒä¾ç…§é€™å€‹ Task å°é€™å€‹ CPU æœ‰å¤šé©åˆ</li>
</ul>

<div style="display: flex; justify-content: center;">
    <img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/10.png?raw=true" width="50%" height="50%" />
    <img src="https://github.com/Hotshot824/Hotshot824.github.io/blob/master/_image/2023-10-19-cpu_scheduler/11.png?raw=true" width="50%" height="50%" />
</div>

<p><strong>2.4 Scheduler - Run-Queue:</strong></p>

<p>åœ¨ 2.4 ä¸­æ‰€æœ‰äººéƒ½æ˜¯ä½¿ç”¨åŒä¸€å€‹ Run-Queue:</p>
<ol>
  <li>Use spin_lock_irq() to lock â€œrunqueue_lockâ€
    <ul>
      <li>å› ç‚º 2.4 Scheduler åƒ…æœ‰ä¸€å€‹ Run-Queueï¼Œè¦åœ¨é‹ç®—æ™‚ Lock ç„¶å¾Œé‹ç®—å®Œ Unlockï¼Œè‡ªç„¶æœƒé€ æˆæ•ˆèƒ½ç“¶é ¸</li>
    </ul>
  </li>
  <li>Check if a task is â€œrunnableâ€
    <ul>
      <li>in TASK_RUNNING state</li>
      <li>in TASK_INTERRUPTIBLE state and a signal is pending</li>
    </ul>
  </li>
  <li>Examine the â€œgoodnessâ€ of each process
    <ul>
      <li>æª¢æŸ¥æ‰€æœ‰ Task çš„ Goodnessï¼Œä¸¦ä¸”é¸å‡ºæœ€å¥½çš„ Task</li>
    </ul>
  </li>
  <li>Context switch</li>
</ol>

<p><strong>2.4 Scheduler - Goodness:</strong></p>

<ul>
  <li>â€œgoodnessâ€: identifying the best candidate among all processes in the runqueue list.</li>
  <li>â€œgoodnessâ€ = 0: the entity has exhausted its quantum.</li>
  <li>0 &lt; â€œgoodnessâ€ &lt; 1000: the entity is a conventional process/thread that has not exhausted its quantum; a higher value denotes a higher level of goodness.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if (p-&gt;mm == prev-&gt;mm)
return p-&gt;counter + p-&gt;priority + 1;
else
return p-&gt;counter + p-&gt;priority;
</code></pre></div></div>

<p>A small bonus is given to the task p if it shares the address space with the previous task.</p>

<p>Examine the processor field of the processes and gives a consistent bonus (that is PROC_CHANGE_PENALTY, usually 15) 
to the process that was last executed on the â€˜this_cpuâ€™ CPU.</p>

<p>ä¾‹å¦‚: ä¸€å€‹ Multi-thread ç¨‹å¼çš„ Taskï¼Œå¦‚æœæœ‰ä¸€å€‹ Thread åŸ·è¡Œåœ¨ä¸€å€‹ CPU ä¸Šï¼Œé‚£éº¼å…¶ä»–çš„ Thread å°±æœƒæœ‰ä¸€å€‹åŠ åˆ†ï¼Œè®“ä»–å€‘å¯ä»¥åœ¨åŒä¸€å€‹ CPU ä¸ŠåŸ·è¡Œã€‚
åŒæ¨£çš„å¦‚æœä¸€å€‹ Process æœ€å¾Œæ˜¯åœ¨é€™ this_cpu ä¸Šé‹è¡Œï¼Œé‚£éº¼ä»–åœ¨é€™é¡† CPU ä¸Šè¨ˆç®—åˆ†æ•¸æ™‚ä¹Ÿæœƒæœ‰çå‹µåŠ åˆ†ã€‚</p>

<blockquote class="block-danger">
  <p>2.4 Scheduler çš„å•é¡Œæ˜¯ Scheduler è¦å°æ‰€æœ‰çš„ Task è¨ˆç®— goodnessï¼Œæ¯æ¬¡éƒ½è¦é‡ç®—ã€‚ä½†å…¶å¯¦å¤§å¤šæ•¸æ™‚é–“æ¯æ¬¡è¨ˆç®—å‡ºçš„ goodness éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œ
çœŸçš„æœ‰éœ€è¦æ¯æ¬¡éƒ½é‡ç®—å—?</p>
</blockquote>

<h5 id="48-linux-24-scheduler---improve-io-performance">4.8 Linux 2.4 Scheduler - Improve I/O performance</h5>

<p>Defintion:</p>
<ul>
  <li>I/O-bound processes: spends much of its time submitting and waiting on I/O requests</li>
  <li>Processor-bound processes: spend much of their time executing code</li>
</ul>

<p>Linux å‚¾å‘æ–¼æ”¯æ´ I/O-bound processesï¼Œé€™æ¨£æœƒæä¾›å¥½çš„ Process response timeï¼Œä½†æ˜¯æ€éº¼å° Process é€²è¡Œåˆ†é¡?</p>

<blockquote class="block-warning">
  <h5 id="last-edit">Last Edit</h5>
  <p>10-18-2023 23:21</p>
</blockquote>


                </section>
            </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div></div>
        <div class="normal">
            <section class="normal">
                
                <i class="fa fa-tags"></i>
                
                OS
                
                
            </section>
        </div>
    </div>
</div>

<script>
MathJax = {
  tex: {
    inlineMath: [ ['$', '$'], ['\\(', '\\)'] ]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script
  type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script><!-- customize line 38-50 swap next previous-->
                    
                        <a href="/jekylls/2023-10-26-syntax_analysis.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: OS | Process and Thread">
                            <i class="fa fa-angle-left"></i>
                        </a>
                    

                    
                        <a href="/jekyll/2023-10-18-process_thread.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Compiler | Syntax Analysis Notes (Unfinished)">
                            <i class="fa fa-angle-right"></i>
                        </a>
                    
                </div>
            </div>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "next": {
            "title": "Compiler | Syntax Analysis Notes (Unfinished)",
            "level": "1.2",
            "depth": 1,
            "path": "_posts/2023-10-26-syntax_analysis.md",
            "ref": "_posts/2023-10-26-syntax_analysis.md",
            "articles": []
        },
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "fontsettings": {
                "family": "sans",
                "size": 1,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},            "sharing": {
                // "all": ["facebook", "google", "twitter", "weibo", "instapaper", "github", "telegram"],
                "facebook": false,
                "google": false,
                "github": true,
                "github_link": "https://github.com/Hotshot824",
                "telegram": false,
                "telegram_link": "https://t.me",
                "instapaper": false,
                "twitter": false,
                "vk": false,
                "weibo": false
            },
"theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            }
        },
        "theme": "default",
        "author": "Tao He",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "Home.md",
        },
        "variables": {},
        "title": "Home",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "_posts/2023-10-19-cpu_scheduler.md",
        "mtime": "2023-10-19 00:00:00 +0800",
        "type": "markdown"
    },
    "gitbook": {
        "version": "3.2.3",
        "time": "2023-11-26 15:42:15 +0800"
    },
    "basePath": "",
    "book": {
        "language": ""
    }
});
            });
            </script>
        </div><script src="/assets/gitbook/gitbook.js"></script>
<script src="/assets/gitbook/theme.js"></script>

<script src="/assets/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="/assets/gitbook/gitbook-plugin-sharing/buttons.js"></script>

<!-- <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script> -->

<script src="/assets/gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
<script src="/assets/gitbook/gitbook-plugin-search-pro/search.js"></script>
<script src="/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>

</body>
</html>